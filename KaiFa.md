# çˆ¬è™«

## å…¥é—¨é¡»çŸ¥

### å¸¸è¯†

### æ–¹æ³•

```python
é™æ€æ•°æ®è·å–
è®¿é—®åœ°å€æ é‡Œçš„æ•°æ®å°±å¯ä»¥è·å–åˆ°æƒ³è¦çš„æ•°æ®

åŠ¨æ€æ•°æ®è·å–
è®¿é—®åœ°å€æ é‡Œçš„æ•°æ®å°±æ— æ³•è·å–åˆ°æƒ³è¦çš„æ•°æ®

è§£å†³æ–¹æ¡ˆï¼šæŠ“åŒ…

å…·ä½“æ“ä½œæ­¥éª¤
æ‰“å¼€æµè§ˆå™¨çš„å¼€å‘è€…å·¥å…·

é€‰æ‹© Network æ ‡ç­¾é¡µ

ç­›é€‰ XHR è¯·æ±‚

æ‰¾åˆ°èƒ½å¤Ÿè·å–åˆ°æ•°æ®çš„URLè¿›è¡Œè®¿é—®
```



### ä»€ä¹ˆæ˜¯cookie

```python
Cookie çš„ä½œç”¨
ä¸ºä»€ä¹ˆä½¿ç”¨ Cookieï¼Ÿ
Cookie æ˜¯æŸäº›ç½‘ç«™ä¸ºäº†è¯†åˆ«ç”¨æˆ·èº«ä»½ã€è¿›è¡Œä¼šè¯è·Ÿè¸ªè€Œå­˜å‚¨åœ¨ç”¨æˆ·æœ¬åœ°ç»ˆç«¯ä¸Šçš„æ•°æ®ï¼ˆé€šå¸¸ç»è¿‡åŠ å¯†ï¼‰ã€‚

åº”ç”¨åœºæ™¯ä¸¾ä¾‹
æœ‰äº›ç½‘ç«™éœ€è¦ç™»å½•åæ‰èƒ½è®¿é—®ç‰¹å®šé¡µé¢ã€‚åœ¨ç™»å½•ä¹‹å‰ï¼Œæ‚¨æ— æ³•æŠ“å–è¯¥é¡µé¢çš„å†…å®¹ã€‚

è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨ Urllib åº“ä¿å­˜ç™»å½•çš„ Cookieï¼Œç„¶ååˆ©ç”¨è¯¥ Cookie æŠ“å–å…¶ä»–é¡µé¢ï¼Œä»è€Œå®ç°è®¿é—®å—é™å†…å®¹çš„ç›®çš„ã€‚
```



### ä»€ä¹ˆæ˜¯getï¼Œä»€ä¹ˆæ˜¯post

**1. HTTP æ–¹æ³•çš„æœ¬è´¨åŒºåˆ«**

| **æ–¹æ³•**      | `session.get()`                              | `session.post()`                         |
| ------------- | -------------------------------------------- | ---------------------------------------- |
| **HTTP åŠ¨è¯** | `GET`                                        | `POST`                                   |
| **ç”¨é€”**      | ä»æœåŠ¡å™¨**è·å–æ•°æ®**ï¼ˆå¦‚åŠ è½½ç½‘é¡µã€æŸ¥è¯¢èµ„æºï¼‰ | å‘æœåŠ¡å™¨**æäº¤æ•°æ®**ï¼ˆå¦‚ç™»å½•ã€ä¸Šä¼ æ–‡ä»¶ï¼‰ |
| **å¹‚ç­‰æ€§**    | å¹‚ç­‰ï¼ˆå¤šæ¬¡æ‰§è¡Œç»“æœç›¸åŒï¼Œå¦‚åˆ·æ–°é¡µé¢ï¼‰         | éå¹‚ç­‰ï¼ˆå¯èƒ½ä¿®æ”¹æœåŠ¡å™¨çŠ¶æ€ï¼Œå¦‚æäº¤è®¢å•ï¼‰ |

---



### ç½‘ä¸Šæœç´¢unicodeåœ¨çº¿è§£ç å™¨





## scrapy

### å‡†å¤‡

ç»ˆç«¯åˆ›å»ºï¼ˆæ³¨æ„çœ‹ç¬¬äºŒå¼ å›¾ï¼‰





çˆ¬è™«çš„åå­—æ˜¯é‚£ä¸ªå†™æœ€ä¸»è¦ç±»çš„é‚£ä¸ªæ–‡ä»¶çš„åå­—

```
1. åˆ›å»ºçˆ¬è™«çš„é¡¹ç›®
scrapy starproject é¡¹ç›®çš„åå­—
æ³¨æ„ï¼šé¡¹ç›®çš„åå­—ä¸å…è®¸ä½¿ç”¨æ•°å­—å¼€å¤´ï¼Œä¹Ÿä¸èƒ½åŒ…å«ä¸­æ–‡ã€‚

2. åˆ›å»ºçˆ¬è™«æ–‡ä»¶
è¦åœ¨spidersæ–‡ä»¶å¤¹ä¸­åˆ›å»ºçˆ¬è™«æ–‡ä»¶
cd é¡¹ç›®çš„åå­—\é¡¹ç›®çš„åå­—\spiders
cd scrapy_baidu_091\scrapy_baidu_091\spiders

åˆ›å»ºçˆ¬è™«æ–‡ä»¶
scrapy genspider çˆ¬è™«æ–‡ä»¶çš„åå­— è¦çˆ¬å–ç½‘é¡µ
eg: scrapy genspider baidu http://www.baidu.com
ä¸€èˆ¬æƒ…å†µä¸‹ä¸éœ€è¦æ·»åŠ httpåè®®ï¼Œå› ä¸ºstar_t_urlsçš„ç™»å½•æ˜¯localhost_domains
ä¿®æ”¹çš„ï¼Œæ‰€ä»¥æ·»åŠ /httpçš„è¯ï¼Œé‚£ä¹ˆstar_t_urlså°±éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨å»ä¿®æ”¹äº†ã€‚

3. è¿è¡Œçˆ¬è™«ä»£ç 
scrapy crawl çˆ¬è™«çš„åå­—
eg:
scrapy crawl baidu
```







å¼€ç®¡é“å’Œæ‰“å¼€robotåè®®

![d599e9c53494808e847179fc332919e4](C:\Users\hp\Documents\Tencent Files\1759751014\nt_qq\nt_data\Pic\2025-02\Ori\d599e9c53494808e847179fc332919e4.png)



æ³¨æ„æ·»åŠ å¤´æ–‡ä»¶ï¼ˆfromå¤§ç±»import itemsé‡Œé¢çš„é‚£ä¸ªç±»çš„ç±»åï¼‰

![image-20250225173259020](C:\Users\hp\AppData\Roaming\Typora\typora-user-images\image-20250225173259020.png)



### æ“ä½œ



è§£é‡Šä¸€ä¸‹ä¸ºä»€ä¹ˆæœ‰çš„æ—¶å€™return scrapy.Requestä¸ºä»€ä¹ˆæœ‰çš„æ—¶å€™return ScrapyNcbiItem

```
åœ¨ `parse` æ–¹æ³•ä¸­ï¼Œ`return scrapy.Request(...)` å’Œ `return ScrapyNcbiItem(...)` çš„ä¸åŒå¤„ç†æ–¹å¼å–å†³äºçˆ¬å–é€»è¾‘çš„éœ€æ±‚ï¼š

1. `return ScrapyNcbiItem(...)`ï¼š

- è¿™æ˜¯ Scrapy ä¸­çš„æ•°æ®ä¼ è¾“å¯¹è±¡ï¼ˆItemï¼‰ã€‚
- å½“ `t`ï¼ˆæŸä¸ª XPath è§£æç»“æœï¼‰å­˜åœ¨æ—¶ï¼Œæ„å‘³ç€åœ¨å½“å‰é¡µé¢å·²ç»è·å–åˆ°ç›®æ ‡æ•°æ®ï¼Œä¸éœ€è¦è¿›ä¸€æ­¥è¯·æ±‚å…¶ä»–é¡µé¢ï¼Œç›´æ¥æ„é€  `ScrapyNcbiItem` å¹¶è¿”å›ï¼ŒScrapy ä¼šå°†å…¶å­˜å‚¨æˆ–ä¼ é€’ç»™ `pipelines.py` è¿›è¡Œå¤„ç†ã€‚

2. `return scrapy.Request(...)`ï¼š

- å½“ `t` ä¸å­˜åœ¨ï¼Œä½† `a`ï¼ˆå¦ä¸€ä¸ª XPath è§£æç»“æœï¼‰å­˜åœ¨æ—¶ï¼Œè¯´æ˜éœ€è¦è®¿é—®å¦ä¸€ä¸ªé¡µé¢æ‰èƒ½è·å–å®Œæ•´æ•°æ®ã€‚
- `scrapy.Request` åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„è¯·æ±‚ï¼ŒæŒ‡å‘æ–°çš„ URLï¼ˆ`https://www.ncbi.nlm.nih.gov/` + `a`ï¼‰ï¼Œå¹¶æŒ‡å®š `callback=self.parse_second`ï¼Œè¡¨ç¤º Scrapy ä¼šåœ¨è·å–è¯¥é¡µé¢åè°ƒç”¨ `parse_second` æ–¹æ³•ç»§ç»­è§£æã€‚

3. `return ScrapyNcbiItem(...)` (None æƒ…å†µ)ï¼š

- å¦‚æœ `t` å’Œ `a` éƒ½ä¸å­˜åœ¨ï¼Œè¯´æ˜å½“å‰é¡µé¢æ²¡æœ‰è¶³å¤Ÿä¿¡æ¯ï¼Œä¹Ÿæ²¡æœ‰éœ€è¦è¿›ä¸€æ­¥è¯·æ±‚çš„ URLï¼Œç›´æ¥è¿”å›ä¸€ä¸ª `ScrapyNcbiItem`ï¼Œä½† `src=None`ï¼Œ`officialName=None`ï¼Œè¡¨ç¤ºæœªæ‰¾åˆ°æœ‰æ•ˆæ•°æ®ã€‚

ä»£ç é€»è¾‘æ€»ç»“ï¼š

1. **èƒ½ç›´æ¥æå–æ•°æ®** â†’ ç›´æ¥è¿”å› `ScrapyNcbiItem`
2. **éœ€è¦è¿›ä¸€æ­¥è®¿é—®æ–°é¡µé¢** â†’ è¿”å› `scrapy.Request`
3. **æ—¢æ²¡æ•°æ®ä¹Ÿæ²¡è·³è½¬é“¾æ¥** â†’ è¿”å› `ScrapyNcbiItem`ï¼ˆå¸¦ `None`ï¼‰

è¿™æ ·å¯ä»¥é«˜æ•ˆåœ°å¤„ç†çˆ¬å–é€»è¾‘ï¼Œé¿å…ä¸å¿…è¦çš„è¯·æ±‚ï¼ŒåŒæ—¶ç¡®ä¿æ•°æ®å®Œæ•´æ€§ã€‚




```



**å¯ä»¥ä¸ç”¨extract_first()ï¼Œå¯ä»¥ç›´æ¥ç”¨get()æˆ–è€…getall()ï¼Œæ³¨æ„**



metaæ˜¯ä¼ ç»™ä¸‹ä¸€ä¸ªå“åº”çš„å‚æ•°ï¼Œå¿…é¡»æœ‰metaï¼Œæ‰èƒ½æŠŠä¸€äº›ä¸œè¥¿ä¼ ç»™ä¸‹ä¸€ä¸ªå‚æ•°

![image-20250225194518030](../AppData/Roaming/Typora/typora-user-images/image-20250225194518030.png)



### ç®¡é“

![image-20250225194753698](../AppData/Roaming/Typora/typora-user-images/image-20250225194753698.png)



å¿…é¡»è¿™æ ·å†™linesï¼Œè¦ç©ºæ ¼å¿…é¡»è‡ªå·±ä¸­é—´ç©º

![image-20250225194859571](../AppData/Roaming/Typora/typora-user-images/image-20250225194859571.png)



itemså¿…é¡»è¿™ä¹ˆå†™

![image-20250225195115379](../AppData/Roaming/Typora/typora-user-images/image-20250225195115379.png)



åˆ›å»ºçš„Itemå­—å…¸

![image-20250227172314354](../AppData/Roaming/Typora/typora-user-images/image-20250227172314354.png)



### ç»†èŠ‚

#### å¦‚ä½•ç”¨æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…

![image-20250227111722493](../AppData/Roaming/Typora/typora-user-images/image-20250227111722493.png)

#### å¦‚ä½•DEBUG

![image-20250227142121197](../AppData/Roaming/Typora/typora-user-images/image-20250227142121197.png)



#### å†™å…¥æ–‡ä»¶å¿«æ·æŠ€å·§

![image-20250227165640408](../AppData/Roaming/Typora/typora-user-images/image-20250227165640408.png)

#### ä¸€äº›å‚æ•°

![qq_pic_merged_1740924754134](../Downloads/qq_pic_merged_1740924754134.jpg)

ç®­å¤´å¤„æ˜¯å”¯ä¸€å»é‡æ–¹æ³•



#### ä¼ é€’ç™»é™†ä¿¡æ¯

![image-20250303180909095](../AppData/Roaming/Typora/typora-user-images/image-20250303180909095.png)





### IMGçš„Pipline

![image-20250227181136355](../AppData/Roaming/Typora/typora-user-images/image-20250227181136355.png)

è¿™é‡Œä¸€å®šè¦æœ‰url

![image-20250227181230495](../AppData/Roaming/Typora/typora-user-images/image-20250227181230495.png)



#### ä¿®æ”¹

![image-20250227194037959](../AppData/Roaming/Typora/typora-user-images/image-20250227194037959.png)

æ³¨æ„1è¿™é‡Œï¼Œè®©å®ƒä¸ç”¨ä¸€å®šè¦ä¹‹å‰é‚£ä¸ªåå­—ã€‚ä¹Ÿè¦æ³¨æ„è¿™é‡Œæ˜¯ä¸€ä¸ªå­ç±»



è¿™é‡Œæ˜¯å‰é¢

![image-20250227193841742](../AppData/Roaming/Typora/typora-user-images/image-20250227193841742.png)



#### ç‰¹æ®Šæ³¨æ„

![image-20250227201220858](../AppData/Roaming/Typora/typora-user-images/image-20250227201220858.png)

è¿™å„¿å¯ä»¥ä¸€ç›´ä¼ 



ä¸Šé¢çš„requestä¼šæŠŠmetaä¼ ç»™ä¸‹é¢çš„request

![image-20250227201919078](../AppData/Roaming/Typora/typora-user-images/image-20250227201919078.png)



### ä¸€äº›æ“ä½œ



![image-20250301215626212](../AppData/Roaming/Typora/typora-user-images/image-20250301215626212.png)

1æ˜¯ä»å“ªé‡Œä¼ å¼€å§‹

2æ˜¯å¯ä»¥ä¸‹ä¸€ä¸ªä¼ ç»™è°

3æ˜¯å¾—åˆ°ä»€ä¹ˆ



æ³¨æ„è¿™ä¸ªè¿˜æœ‰ä»–çš„åå­—

![image-20250301220105876](../AppData/Roaming/Typora/typora-user-images/image-20250301220105876.png)



### crawl spider



åˆ›å»ºï¼ˆç”¨ä¸‹é¢é‚£ä¸ªå‘½ä»¤ï¼Œæ³¨æ„åé¢æ˜¯domainsï¼‰

![image-20250302164647093](../AppData/Roaming/Typora/typora-user-images/image-20250302164647093.png)



è¿™é‡Œçš„ç¬¬ä¸€ä¸ªä¸ä¼šç»™parse_item

![image-20250302163948181](../AppData/Roaming/Typora/typora-user-images/image-20250302163948181.png)

**ä¸‹é¢æ˜¯ä¿®æ”¹ï¼š**

ä½†æ³¨æ„è¿™é‡Œçš„rulesï¼Œå¹¶ä¸”parse_itemæœ€åä¸ç”¨ä¼ 

![image-20250302163150587](../AppData/Roaming/Typora/typora-user-images/image-20250302163150587.png)

ç¬¬äºŒæ­¥ï¼šä¾æ¬¡å¯¹ `response` åº”ç”¨æ‰€æœ‰ `Rule`

åœ¨è¿™ä¸ªåˆå§‹é¡µé¢çš„ `response` ä¸Šï¼ŒScrapy ä¾æ¬¡åº”ç”¨ä½ å®šä¹‰çš„ä¸¤ä¸ª `Rule`ï¼š

1. åº”ç”¨ç¬¬ä¸€ä¸ª Rule
   - `LinkExtractor(restrict_xpaths='//div[@id="list"]/dl/dd[2]/a')` ä¼šåœ¨å½“å‰é¡µé¢ï¼ˆåˆå§‹é¡µé¢ï¼‰ä¸­ï¼Œå¯»æ‰¾ç¬¦åˆ `//div[@id="list"]/dl/dd[2]/a` çš„é“¾æ¥ã€‚
   - å¦‚æœæ‰¾åˆ°äº†ï¼ˆæ¯”å¦‚æ˜¯ â€œç¬¬ä¸€ç« â€çš„é“¾æ¥ï¼‰ï¼ŒScrapy å°±ä¼šä¸ºè¿™ä¸ªé“¾æ¥ç”Ÿæˆä¸€ä¸ªæ–°çš„ `Request`ï¼Œå¹¶æŠŠå®ƒåŠ å…¥è°ƒåº¦é˜Ÿåˆ—ã€‚è¿™ä¸ª `Request` çš„å›è°ƒæ˜¯ `parse_item`ï¼Œå¹¶ä¸”è®¾ç½®äº† `dont_filter=False`ï¼ˆé»˜è®¤ï¼‰ï¼Œ`follow=True`ï¼ˆä½ ä»£ç é‡ŒæŒ‡å®šäº†ï¼‰ã€‚
2. åº”ç”¨ç¬¬äºŒä¸ª Rule
   - åŒç†ï¼Œ`LinkExtractor(restrict_xpaths='//div[@class="bottem1"]/a[4]')` ä¼šåœ¨å½“å‰é¡µé¢ä¸­å¯»æ‰¾ç¬¦åˆ `//div[@class="bottem1"]/a[4]` çš„é“¾æ¥ï¼ˆä¹Ÿè®¸æ˜¯ â€œä¸‹ä¸€é¡µâ€/â€œä¸‹ä¸€ç« â€ï¼‰ã€‚
   - å¦‚æœä¹Ÿæ‰¾åˆ°äº†é“¾æ¥ï¼Œå°±ä¼šåŒæ ·ç”Ÿæˆä¸€ä¸ªæ–°çš„ `Request`ï¼ŒåŠ å…¥è°ƒåº¦é˜Ÿåˆ—ï¼Œå›è°ƒä¹Ÿæ˜¯ `parse_item`ï¼Œ`follow=True`ã€‚

è¿™æ ·ä¸€æ¥ï¼Œ**åŒä¸€ä¸ªé¡µé¢** ä¸Šå¦‚æœæœ‰ä¸¤ä¸ªç¬¦åˆè§„åˆ™çš„é“¾æ¥ï¼ŒScrapy å°±ä¼š **åŒæ—¶** ä¸ºå®ƒä»¬ç”Ÿæˆæ–°çš„è¯·æ±‚ï¼Œè€Œä¸æ˜¯å…ˆæ‰§è¡Œå®Œç¬¬ä¸€ä¸ª Rule å†æ‰§è¡Œç¬¬äºŒä¸ª Ruleã€‚å®ƒæ˜¯æŒ‰â€œä¾æ¬¡æ£€æŸ¥æ¯æ¡è§„åˆ™ â†’ æ‰¾åˆ°é“¾æ¥ â†’ åŠ å…¥é˜Ÿåˆ—â€çš„æ–¹å¼è¿›è¡Œã€‚

**æ³¨æ„è¿™é‡Œçš„rulesæ˜¯åŒæ—¶å»åŒ¹é…ï¼ˆæ„æ€æ˜¯åªè¦æ‰¾åˆ°ä¸€ä¸ªå°±ä¼šå°†å®ƒçš„é“¾æ¥åŠ å…¥åˆ°æ–°çš„è¯·æ±‚ï¼‰**

![image-20250302163638991](../AppData/Roaming/Typora/typora-user-images/image-20250302163638991.png)





### ä½¿ç”¨cookieä¸€äº›ç‰¹åˆ«æ³¨æ„

![image-20250303224220168](../AppData/Roaming/Typora/typora-user-images/image-20250303224220168.png)

**è¿™å„¿çš„start_urlsä¸€å®šè¦æ˜¯ç™»é™†åçš„ç¬¬ä¸€ä¸ªç•Œé¢ç½‘å€æ‰è¡Œï¼Œè€Œä¸”ä¸‹é¢ä¹Ÿå¿…é¡»ä¼ å®ƒ**



### ä¸‹è½½ä¸­é—´ä»¶ä¿®æ”¹UA

åå­—ä¸èƒ½å˜ã€‚Noneå¤„ç†ä¸‹ä¸€ä¸ªä¸‹è½½ä¸­é—´ä»¶ï¼ŒResponseå¤„ç†Responseå°±ä¸å¤„ç†åé¢çš„äº†

![image-20250304153227469](../AppData/Roaming/Typora/typora-user-images/image-20250304153227469.png)

ç”¨åˆ«çš„USERAGENT

![65eea638acd013ba6dd1b0958e0c99dd](../Documents/Tencent Files/1759751014/nt_qq/nt_data/Pic/2025-03/Ori/65eea638acd013ba6dd1b0958e0c99dd.png)

æ³¨æ„ç»†èŠ‚ï¼Œä¸‹é¢çš„è¦å†™æˆè¿™æ ·ï¼Œç¼ºä¸€ä¸å¯

![316f4eec10de99f2a9982c782511c0b7](../Documents/Tencent Files/1759751014/nt_qq/nt_data/Pic/2025-03/Ori/316f4eec10de99f2a9982c782511c0b7.png)



### ipä»£ç†

![image-20250304164716064](../AppData/Roaming/Typora/typora-user-images/image-20250304164716064.png)

è¿™å„¿éœ€è¦æ”¹æˆè¿™æ ·

![image-20250304164819351](../AppData/Roaming/Typora/typora-user-images/image-20250304164819351.png)



### scrapyç»“åˆseleniumï¼ˆå°±æ˜¯ç”¨seleniumå»ä»£æ›¿ä¸­é—´ä»¶ï¼‰

å†™çš„æ—¶å€™æ³¨æ„è¿™ä¸¤ä¸ªspider

![image-20250305192317877](../AppData/Roaming/Typora/typora-user-images/image-20250305192317877.png)

æ³¨æ„å¤´æ–‡ä»¶

![image-20250305192606038](../AppData/Roaming/Typora/typora-user-images/image-20250305192606038.png)

![image-20250305192847175](../AppData/Roaming/Typora/typora-user-images/image-20250305192847175.png)



åœ¨middlewareè¿™é‡Œé…ç½®ï¼Œrequest.urlæ˜¯å½“å‰ç½‘å€

![image-20250305191459641](../AppData/Roaming/Typora/typora-user-images/image-20250305191459641.png)



### MongoDB

#### å¯åŠ¨æ–¹å¼

![image-20250306231811424](../AppData/Roaming/Typora/typora-user-images/image-20250306231811424.png)





#### DBåŸºç¡€å‘½ä»¤

```
1 Mongoæ•°æ®åº“çš„æ“ä½œ
1.1 æŸ¥çœ‹æ•°æ®åº“
åˆ—å‡ºæ‰€æœ‰åœ¨ç‰©ç†ä¸Šå­˜åœ¨çš„æ•°æ®åº“

show dbs

1.2 åˆ‡æ¢æ•°æ®åº“/åˆ›å»ºæ•°æ®åº“
å¦‚æœæ•°æ®åº“ä¸å­˜åœ¨ï¼Œåˆ™æŒ‡å‘æ•°æ®åº“ï¼Œä½†ä¸åˆ›å»ºï¼Œç›´åˆ°æ’å…¥æ•°æ®æˆ–åˆ›å»ºé›†åˆæ—¶æ•°æ®åº“æ‰è¢«åˆ›å»º

use æ•°æ®åº“å

1.3 åˆ é™¤æ•°æ®åº“
åˆ é™¤å½“å‰æŒ‡å‘çš„æ•°æ®åº“ å¦‚æœæ•°æ®åº“ä¸å­˜åœ¨ï¼Œåˆ™ä»€ä¹ˆä¹Ÿä¸åš

use æ•°æ®åº“å
db.dropDatabase()
```



åˆ›å»ºé›†åˆ

```
2 é›†åˆçš„æ“ä½œ
2.1 åˆ›å»ºé›†åˆ
æ— éœ€æ‰‹åŠ¨åˆ›å»ºé›†åˆï¼Œå‘ä¸å­˜åœ¨çš„é›†åˆä¸­ç¬¬ä¸€æ¬¡æ·»åŠ æ•°æ®æ—¶ï¼Œé›†åˆä¼šè‡ªåŠ¨è¢«åˆ›å»ºå‡ºæ¥

db.createCollection(é›†åˆå,{capped:true,size:num})

cappedï¼šé»˜è®¤å€¼ä¸ºfalseè¡¨ç¤ºä¸è®¾ç½®ä¸Šé™ï¼Œå€¼ä¸ºtrueè¡¨ç¤ºè®¾ç½®ä¸Šé™

sizeï¼šå½“cappedå€¼ä¸ºtrueæ—¶ï¼Œéœ€è¦æŒ‡å®šæ­¤å‚æ•°ï¼Œè¡¨ç¤ºä¸Šé™å¤§å°ï¼Œå½“æ–‡æ¡£è¾¾åˆ°ä¸Šé™æ—¶ï¼Œä¼šå°†ä¹‹å‰çš„æ•°æ®è¦†ç›–ï¼Œå•ä½ä¸ºå­—èŠ‚

2.2 åˆ é™¤é›†åˆ
db.é›†åˆåç§°.drop()

2.3 æŸ¥çœ‹é›†åˆ
show tables
show collections
```





#### ä¿®æ”¹æ•°æ®

queryæ›´æ–°è°ï¼Œupdateæ›´æ–°æˆä»€ä¹ˆæ ·å­

```
3.2 æ•°æ®çš„ä¿®æ”¹
3.2.1 æ ¼å¼
db.é›†åˆåç§°.update(
<query>,
<update>,
{multi: <boolean>}
)

å‚æ•°Query:æŸ¥è¯¢æ¡ä»¶ï¼Œç±»ä¼¼sqlè¯­å¥updateä¸­whereéƒ¨åˆ†

å‚æ•°Update:æ›´æ–°æ“ä½œç¬¦ï¼Œç±»ä¼¼sqlè¯­å¥updateä¸­setéƒ¨åˆ†

å‚æ•°multi:å¯é€‰ï¼Œé»˜è®¤æ˜¯falseï¼Œè¡¨ç¤ºåªæ›´æ–°æ‰¾åˆ°çš„ç¬¬ä¸€æ¡è®°å½•ï¼Œå€¼ä¸ºtrueè¡¨ç¤ºæŠŠæ»¡è¶³æ¡ä»¶çš„æ–‡æ¡£å…¨éƒ¨æ›´æ–°

ä¸¾ä¾‹
æ›´æ–°æ‰¾åˆ°çš„ç¬¬ä¸€æ¡ï¼Œå¹¶ä¸”ç›´æ¥ä¿®æ”¹ç»“æ„
db.person.update({name: "zs"}, {age:10})

åªæ›´æ–°æ•°æ®ï¼Œä¸æ›´æ–°æ–‡æ¡£ç»“æ„
db.person.update({name: "zs"}, {$set:{age:123}})

æ›´æ–°æ‰€æœ‰æ‰¾åˆ°åŒ¹é…çš„æ•°æ®
db.person.update({name: "zs"}, {$set:{age:123}}, {multi: true})


1æ”¹äº†ä¹‹åä¼šå…¨æ”¹

2æ”¹äº†ä¹‹åï¼Œå› ä¸ºåŠ äº†keyï¼Œæ‰€ä»¥åªä¼šæ”¹é‚£ä¸€ä¸ª

3æ˜¯ä¿®æ”¹å¤šä¸ªåŒnameæ•°æ®
```





#### å¢åŠ æ•°æ®

åŒºåˆ«ï¼šinsertæ—¶ï¼Œå¦‚æœidç›¸åŒä¼šæŠ¥é”™ï¼Œsaveæ—¶ï¼Œidç›¸åŒä¼šæ›´æ–°ä¹‹å‰é‚£ä¸ªç›¸åŒidçš„å†…å®¹

```
3.1 æ•°æ®çš„å¢åŠ 
æ³¨æ„ï¼šæ’å…¥æ–‡æ¡£æ—¶ï¼Œå¦‚æœä¸æŒ‡å®š_idå‚æ•°ï¼ŒMongoDBä¼šä¸ºæ–‡æ¡£åˆ†é…ä¸€ä¸ªå”¯ä¸€çš„objectId

3.1.1 insert
db.é›†åˆåç§°.insert(document)

3.1.2 save
ä½¿ç”¨saveå‡½æ•°é‡Œï¼Œå¦‚æœåŸæ¥çš„å¯¹è±¡ä¸å­˜åœ¨ï¼Œé‚£ä»–ä»¬éƒ½å¯ä»¥å‘collectioné‡Œæ’å…¥æ•°æ®ï¼Œå¦‚æœå·²ç»å­˜åœ¨ï¼Œsaveä¼šè°ƒç”¨updateæ›´æ–°é‡Œé¢çš„è®°å½•ã€‚

db.é›†åˆåç§°.save(document)
```



æ“ä½œ

![image-20250307170022211](../AppData/Roaming/Typora/typora-user-images/image-20250307170022211.png)

#### åˆ é™¤å’ŒæŸ¥æ‰¾

```
åˆ é™¤æ‰€æœ‰åŒ¹é…æ•°æ®
db.person.remove({name:"zs"})

åªåˆ é™¤ä¸€æ¡
db.person.remove({name:"zs"},{justOne:true})

1.4 æ•°æ®çš„æŸ¥æ‰¾
db.é›†åˆå.find()
```



åˆ é™¤è¿™ä¸€ä¸ªæ‰€åŠ å‚æ•°justOne

![image-20250307171516730](../AppData/Roaming/Typora/typora-user-images/image-20250307171516730.png)

æŸ¥æ‰¾

````
æ ¹æ®æ‚¨æä¾›çš„å¤šä¸ªæ–‡ä»¶å†…å®¹ï¼Œæˆ‘å°†å…¶æ•´ç†æˆä¸€ä¸ªå®Œæ•´çš„ MongoDB æŸ¥è¯¢æ“ä½œæ–‡æ¡£ï¼š

# MongoDB æŸ¥è¯¢æ“ä½œæ‰‹å†Œ

## 1. æŸ¥æ‰¾æ“ä½œ

### 1.1 find
æŸ¥æ‰¾æ‰€æœ‰åŒ¹é…æ•°æ®
```javascript
db.é›†åˆå.find({æ¡ä»¶æ–‡æ¡£})
```

### 1.2 findOne
åªè¿”å›åŒ¹é…çš„ç¬¬ä¸€ä¸ªæ•°æ®
```javascript
db.é›†åˆå.findOne({æ¡ä»¶æ–‡æ¡£})
```

## 2. è¿ç®—ç¬¦

| è¯­æ³• | æ“ä½œ | æ ¼å¼ç¤ºä¾‹ |
|------|------|----------|
| $eq | ç­‰äº | `{age: {$eq: 25}}` |
| $lt | å°äº | `{age: {$lt: 30}}` |
| $lte | å°äºæˆ–ç­‰äº | `{age: {$lte: 30}}` |
| $gt | å¤§äº | `{age: {$gt: 20}}` |
| $gte | å¤§äºæˆ–ç­‰äº | `{age: {$gte: 20}}` |
| $ne | ä¸ç­‰äº | `{age: {$ne: 25}}` |
| $or | æˆ– | `{$or: [{age: 25}, {name: "zs"}]}` |
| $in | åœ¨èŒƒå›´å†… | `{age: {$in: [20, 25, 30]}}` |
| $nin | ä¸åœ¨èŒƒå›´å†… | `{age: {$nin: [20, 25, 30]}}` |

## 3. æ¨¡ç³ŠåŒ¹é…

ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼è¿›è¡Œæ¨¡ç³ŠæŸ¥è¯¢ï¼š

```javascript
// ä½¿ç”¨ // è¯­æ³•
db.person.find({name: /.*zs.*/})

// ä½¿ç”¨ $regex è¿ç®—ç¬¦
db.person.find({name: {$regex: ".*zs"}})
```

## 4. è‡ªå®šä¹‰æŸ¥è¯¢

ä½¿ç”¨ `$where` è¿›è¡Œå¤æ‚æ¡ä»¶æŸ¥è¯¢ï¼š

```javascript
db.person.find({
    $where: function() {
        return this.age > 28
    }
})
```

## 5. é™åˆ¶ç»“æœæ•°é‡

### 5.1 limit
ç”¨äºè¯»å–æŒ‡å®šæ•°é‡çš„æ–‡æ¡£
```javascript
db.é›†åˆåç§°.find().limit(NUMBER)
```

### 5.2 skip
ç”¨äºè·³è¿‡æŒ‡å®šæ•°é‡çš„æ–‡æ¡£
```javascript
db.é›†åˆåç§°.find().skip(2)
```

## 6. æ’åºå’Œç»Ÿè®¡

### 6.1 sort
å¯¹ç»“æœé›†è¿›è¡Œæ’åº
```javascript
db.é›†åˆåç§°.find().sort({å­—æ®µ: 1})    // 1ä¸ºå‡åº
db.é›†åˆåç§°.find().sort({å­—æ®µ: -1})   // -1ä¸ºé™åº
```

### 6.2 count
ç»Ÿè®¡ç»“æœé›†ä¸­æ–‡æ¡£æ¡æ•°
```javascript
// ä¸¤ç§å†™æ³•
db.é›†åˆåç§°.find({æ¡ä»¶}).count()
db.é›†åˆåç§°.count({æ¡ä»¶})

// ç¤ºä¾‹
db.stu.find({gender: true}).count()
db.stu.count({age: {$gt: 28}, gender: true})
```

## 7. å­—æ®µåˆ¤æ–­å’Œå»é‡

### 7.1 $exists
åˆ¤æ–­å­—æ®µæ˜¯å¦å­˜åœ¨
```javascript
db.é›†åˆåç§°.find({field: {$exists: true}})
```

### 7.2 distinct
å­—æ®µå€¼å»é‡
```javascript
db.é›†åˆåç§°.distinct("field")
```

è¿™ä¸ªæ–‡æ¡£æ¶µç›–äº† MongoDB ä¸­å¸¸ç”¨çš„æŸ¥è¯¢æ“ä½œï¼ŒåŒ…æ‹¬åŸºæœ¬æŸ¥æ‰¾ã€æ¡ä»¶è¿ç®—ç¬¦ã€æ¨¡ç³ŠåŒ¹é…ã€åˆ†é¡µã€æ’åºã€ç»Ÿè®¡ç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚
````





#### èšåˆ

**1æœ‰æ˜¾ç¤ºä¸ä¸æ˜¾ç¤ºï¼Œç”Ÿæ•ˆä¸ä¸ç”Ÿæ•ˆçš„ä½œç”¨**



![image-20250307202833290](../AppData/Roaming/Typora/typora-user-images/image-20250307202833290.png)

è¿™æ˜¯æ¨¡æ¿ï¼Œæ³¨æ„ç”»çº¢çº¿çš„æ˜¯å€æ•°

![image-20250307203950968](../AppData/Roaming/Typora/typora-user-images/image-20250307203950968.png)

![image-20250307204213308](../AppData/Roaming/Typora/typora-user-images/image-20250307204213308.png)

åŒ¹é…è¿‡æ»¤

![image-20250307204606449](../AppData/Roaming/Typora/typora-user-images/image-20250307204606449.png)



projectç­›é€‰(åœ¨æ˜¾ç¤ºæ—¶ï¼Œ0å’Œ1å…±å­˜æ—¶ï¼Œ0åªèƒ½æ˜¾ç¤ºåœ¨idä¸Š)

```
MongoDB èšåˆç®¡é“å‘½ä»¤
4. $project ç®¡é“å‘½ä»¤
$project ç”¨äºä¿®æ”¹æ–‡æ¡£çš„è¾“å…¥è¾“å‡ºç»“æ„ï¼Œä¾‹å¦‚é‡å‘½åã€å¢åŠ ã€åˆ é™¤å­—æ®µã€‚

ä½¿ç”¨ç¤ºä¾‹ï¼š
1. æŸ¥è¯¢äººç‰©çš„å§“åã€å¹´é¾„ï¼Œä¸æ˜¾ç¤º ID

javascript
db.person.aggregate([
    {$project: {_id: 0, name: 1, age: 1}}
])
2. æŸ¥è¯¢æ¯ä¸ªå›½å®¶çš„äººæ•°ï¼Œåªæ˜¾ç¤ºæ•°é‡

javascript
db.person.aggregate([
    {$group: {_id: "$country", counter: {$sum: 1}}},
    {$project: {_id: 0, counter: 1}}
])
6. $sort ç®¡é“å‘½ä»¤
$sort ç”¨äºå°†è¾“å…¥çš„æ–‡æ¡£æ’åºåè¾“å‡ºã€‚

ä½¿ç”¨ç¤ºä¾‹ï¼š
1. æŸ¥è¯¢äººç‰©ï¼ŒæŒ‰ç…§å¹´é¾„å‡åº

javascript
db.person.aggregate([
    {$sort: {age: 1}}
])
2. æŸ¥è¯¢æ¯ä¸ªå›½å®¶çš„äººæ•°ï¼Œå¹¶æ’åº

javascript
db.person.aggregate([
    {$group: {_id: "$country", counter: {$sum: 1}}},
    {$sort: {counter: 1}}
])
7. $skip å’Œ $limit ç®¡é“å‘½ä»¤
$limitï¼šé™åˆ¶è¿”å›æ•°æ®çš„æ¡æ•°

$skipï¼šè·³è¿‡æŒ‡å®šçš„æ–‡æ¡£æ•°ï¼Œå¹¶è¿”å›å‰©ä¸‹çš„æ–‡æ¡£

æ³¨æ„ï¼šåŒæ—¶ä½¿ç”¨æ—¶å…ˆä½¿ç”¨ $skip å†ä½¿ç”¨ $limit

ä½¿ç”¨ç¤ºä¾‹ï¼š
1. æŸ¥è¯¢ 2 æ¡ä¿¡æ¯

javascript
db.person.aggregate([
    {$limit: 2}
])
2. æŸ¥è¯¢ä»ç¬¬ä¸‰æ¡å¼€å§‹çš„ä¿¡æ¯

javascript
db.person.aggregate([
    {$skip: 2}
])
3. æŸ¥è¯¢æ¯ä¸ªå›½å®¶çš„äººæ•°ï¼ŒæŒ‰ç…§äººæ•°å‡åºï¼Œè¿”å›ç¬¬äºŒæ¡æ•°æ®

javascript
db.person.aggregate([
    {$group: {_id: "$country", counter: {$sum: 1}}},
    {$sort: {counter: 1}},
    {$skip: 1},
    {$limit: 1}
])
å…³é”®è¦ç‚¹æ€»ç»“ï¼š
èšåˆç®¡é“ç»“æ„ï¼šæ‰€æœ‰èšåˆæ“ä½œéƒ½ä½¿ç”¨ aggregate([]) æ–¹æ³•ï¼Œç®¡é“å‘½ä»¤æ”¾åœ¨æ•°ç»„ä¸­æŒ‰é¡ºåºæ‰§è¡Œ

å­—æ®µæ˜¾ç¤ºæ§åˆ¶ï¼š

1ï¼šæ˜¾ç¤ºè¯¥å­—æ®µ

0ï¼šéšè—è¯¥å­—æ®µ

æ’åºæ–¹å‘ï¼š

1ï¼šå‡åºæ’åˆ—

-1ï¼šé™åºæ’åˆ—

æ‰§è¡Œé¡ºåºï¼šç®¡é“å‘½ä»¤æŒ‰æ•°ç»„ä¸­çš„é¡ºåºä¾æ¬¡æ‰§è¡Œï¼Œè¿™ä¼šå½±å“æœ€ç»ˆç»“æœ

è¿™äº›ç®¡é“å‘½ä»¤å¯ä»¥ç»„åˆä½¿ç”¨ï¼Œæ„å»ºå¤æ‚çš„æ•°æ®èšåˆå’Œè½¬æ¢æ“ä½œã€‚
```



#### ç´¢å¼•

åˆ›å»ºæ–¹æ³•

```
MongoDB ç´¢å¼•æ“ä½œ
1. ä¸ºä»€ä¹ˆ MongoDB éœ€è¦åˆ›å»ºç´¢å¼•
åŠ å¿«æŸ¥è¯¢é€Ÿåº¦

è¿›è¡Œæ•°æ®çš„å»é‡

2. MongoDB åˆ›å»ºç®€å•ç´¢å¼•çš„æ–¹æ³•
è¯­æ³•ï¼š

javascript
db.é›†åˆå.ensureIndex({å±æ€§: 1})
1 è¡¨ç¤ºå‡åº

-1 è¡¨ç¤ºé™åº

3. åˆ›å»ºç´¢å¼•å‰åæŸ¥è¯¢é€Ÿåº¦å¯¹æ¯”
æµ‹è¯•ï¼šæ’å…¥ 10 ä¸‡æ¡æ•°æ®åˆ°æ•°æ®åº“ä¸­
æ’å…¥æ•°æ®ï¼š

javascript
for(i=0; i<100000; i++) {
    db.t1.insert({name: 'test'+i, age: i})
}
åˆ›å»ºç´¢å¼•å‰ï¼š

javascript
// æ™®é€šæŸ¥è¯¢
db.t1.find({name: 'test10000'})

// æ˜¾ç¤ºæŸ¥è¯¢æ“ä½œçš„è¯¦ç»†ä¿¡æ¯
db.t1.find({name: 'test10000'}).explain('executionStats')
å…³é”®è¦ç‚¹ï¼š
ç´¢å¼•ä½œç”¨ï¼šæ˜¾è‘—æé«˜æŸ¥è¯¢æ€§èƒ½ï¼Œæ”¯æŒæ•°æ®å»é‡æ“ä½œ

ç´¢å¼•åˆ›å»ºï¼šä½¿ç”¨ ensureIndex() æ–¹æ³•ï¼ŒæŒ‡å®šå­—æ®µå’Œæ’åºæ–¹å‘

æ€§èƒ½åˆ†æï¼šä½¿ç”¨ explain('executionStats') å¯ä»¥æŸ¥çœ‹æŸ¥è¯¢çš„è¯¦ç»†æ‰§è¡Œä¿¡æ¯ï¼Œç”¨äºåˆ†æç´¢å¼•æ•ˆæœ

æµ‹è¯•æ–¹æ³•ï¼šé€šè¿‡æ’å…¥å¤§é‡æ•°æ®æ¥å¯¹æ¯”ç´¢å¼•åˆ›å»ºå‰åçš„æŸ¥è¯¢æ€§èƒ½å·®å¼‚
```



**ç´¢å¼•è¯»æ›´å¿«ï¼Œä½†æ˜¯å†™å…¥æ›´æ…¢**

```
4. ç´¢å¼•çš„æŸ¥çœ‹
é»˜è®¤æƒ…å†µä¸‹ _id æ˜¯é›†åˆçš„ç´¢å¼•

æŸ¥çœ‹æ–¹å¼ï¼š

javascript
db.é›†åˆå.getIndexes()
5. åˆ é™¤ç´¢å¼•
è¯­æ³•ï¼š

javascript
db.é›†åˆå.dropIndex({'ç´¢å¼•åç§°': 1})
ç¤ºä¾‹ï¼š

javascript
// åˆ é™¤ name å­—æ®µçš„ç´¢å¼•
db.t1.dropIndex({name: 1})

// æŸ¥çœ‹åˆ é™¤åçš„ç´¢å¼•æƒ…å†µ
db.t1.getIndexes()
å…³é”®è¦ç‚¹ï¼š
é»˜è®¤ç´¢å¼•ï¼šæ¯ä¸ªé›†åˆéƒ½ä¼šè‡ªåŠ¨ä¸º _id å­—æ®µåˆ›å»ºç´¢å¼•

ç´¢å¼•æŸ¥çœ‹ï¼šgetIndexes() æ–¹æ³•å¯ä»¥æŸ¥çœ‹é›†åˆä¸­çš„æ‰€æœ‰ç´¢å¼•ä¿¡æ¯

ç´¢å¼•åˆ é™¤ï¼šä½¿ç”¨ dropIndex() æ–¹æ³•åˆ é™¤æŒ‡å®šç´¢å¼•ï¼Œéœ€è¦ä¼ å…¥ç´¢å¼•çš„é”®å’Œæ–¹å‘

éªŒè¯æ“ä½œï¼šåˆ é™¤ç´¢å¼•åå¯ä»¥å†æ¬¡ä½¿ç”¨ getIndexes() ç¡®è®¤æ“ä½œç»“æœ
```



åˆ©ç”¨ç´¢å¼•å»é‡

```
6. åˆ›å»ºå”¯ä¸€ç´¢å¼•
6.1 å”¯ä¸€ç´¢å¼•çš„æ¦‚å¿µ
é»˜è®¤æƒ…å†µä¸‹ MongoDB ç´¢å¼•é”®çš„å€¼å¯ä»¥é‡å¤

åˆ›å»ºå”¯ä¸€ç´¢å¼•åï¼Œæ•°æ®åº“ä¼šåœ¨æ’å…¥æ•°æ®æ—¶æ£€æŸ¥ç´¢å¼•é”®çš„å€¼æ˜¯å¦å­˜åœ¨

å¦‚æœå€¼å·²å­˜åœ¨åˆ™ä¸ä¼šæ’å…¥è¯¥æ¡æ•°æ®

å”¯ä¸€ç´¢å¼•ä¸ä»…èƒ½æé«˜æŸ¥è¯¢é€Ÿåº¦ï¼Œè¿˜èƒ½ä¿è¯æ•°æ®çš„å”¯ä¸€æ€§

6.2 æ·»åŠ å”¯ä¸€ç´¢å¼•çš„è¯­æ³•
javascript
db.é›†åˆå.ensureIndex({"å­—æ®µå": 1}, {"unique": true})
6.3 åˆ©ç”¨å”¯ä¸€ç´¢å¼•è¿›è¡Œæ•°æ®å»é‡
æ ¹æ®å”¯ä¸€ç´¢å¼•æŒ‡å®šçš„å­—æ®µçš„å€¼ï¼Œå¦‚æœç›¸åŒåˆ™æ— æ³•æ’å…¥æ•°æ®ï¼š

javascript
db.t1.ensureIndex({"name": 1}, {"unique": true})
db.t1.insert({name: 'test10000'})  // å¦‚æœå·²å­˜åœ¨ç›¸åŒnameï¼Œæ’å…¥ä¼šå¤±è´¥
7. å»ºç«‹å¤åˆç´¢å¼•
7.1 å¤åˆç´¢å¼•çš„æ¦‚å¿µ
å½“éœ€è¦å¤šä¸ªå­—æ®µç»„åˆæ¥ç¡®å®šæ•°æ®çš„å”¯ä¸€æ€§æ—¶ï¼Œå¯ä»¥ä½¿ç”¨å¤åˆç´¢å¼•

é€‚ç”¨äºéœ€è¦æ ¹æ®å¤šä¸ªå­—æ®µè¿›è¡ŒæŸ¥è¯¢æˆ–å»é‡çš„åœºæ™¯

7.2 å»ºç«‹å¤åˆç´¢å¼•çš„è¯­æ³•
javascript
db.é›†åˆå.ensureIndex({å­—æ®µ1: 1, å­—æ®µ2: 1})
8. å»ºç«‹ç´¢å¼•æ³¨æ„ç‚¹
æ ¹æ®éœ€è¦é€‰æ‹©æ˜¯å¦éœ€è¦å»ºç«‹å”¯ä¸€ç´¢å¼•

å”¯ä¸€ç´¢å¼•ä¼šå¼ºåˆ¶å­—æ®µå€¼çš„å”¯ä¸€æ€§ï¼Œå¯èƒ½å½±å“æ•°æ®æ’å…¥

å¤åˆç´¢å¼•çš„é¡ºåºä¼šå½±å“æŸ¥è¯¢æ€§èƒ½

ç´¢å¼•ä¼šå ç”¨é¢å¤–çš„å­˜å‚¨ç©ºé—´

ç´¢å¼•ä¼šé™ä½å†™å…¥æ“ä½œçš„æ€§èƒ½

å…³é”®è¦ç‚¹æ€»ç»“ï¼š
å”¯ä¸€ç´¢å¼•ï¼šä¿è¯å­—æ®µå€¼çš„å”¯ä¸€æ€§ï¼Œç”¨äºæ•°æ®å»é‡å’Œå®Œæ•´æ€§çº¦æŸ

å¤åˆç´¢å¼•ï¼šæ”¯æŒå¤šå­—æ®µç»„åˆæŸ¥è¯¢å’Œçº¦æŸï¼Œæé«˜å¤æ‚æŸ¥è¯¢æ€§èƒ½

æƒè¡¡è€ƒè™‘ï¼šç´¢å¼•è™½ç„¶æé«˜æŸ¥è¯¢é€Ÿåº¦ï¼Œä½†ä¼šå¢åŠ å­˜å‚¨å¼€é”€å¹¶å¯èƒ½é™ä½å†™å…¥æ€§èƒ½

å®é™…åº”ç”¨ï¼šæ ¹æ®ä¸šåŠ¡éœ€æ±‚åˆç†é€‰æ‹©ç´¢å¼•ç±»å‹ï¼Œå¹³è¡¡æŸ¥è¯¢æ€§èƒ½å’Œå†™å…¥æ€§èƒ½
```



#### pythoné‡Œä¸åŒ



æ’åº

![image-20250309172840104](../AppData/Roaming/Typora/typora-user-images/image-20250309172840104.png)

#### scrapyçš„å†™å…¥æ•°æ®åº“æ³¨æ„äº‹é¡¹

pythonçš„å†™æ³•

![image-20250310195504337](../AppData/Roaming/Typora/typora-user-images/image-20250310195504337.png)



1è¿™é‡Œå†™å…¥ä¸äº†MongoPipelineï¼Œä¹Ÿå†™å…¥ä¸äº†ä¸‹é¢é‚£ä¸ªMysqlPipeline

2è¿™é‡Œreturnåï¼Œä¼šç»™settingé‡Œçš„ä¸‹ä¸€ä¸ªPipelineï¼Œä¸return itemçš„è¯å°±åªä¼šåœ¨å½“å‰è¿™ä¸ªPipelineæŒç»­å†™å…¥

![image-20250309200822746](../AppData/Roaming/Typora/typora-user-images/image-20250309200822746.png)

![image-20250309201637317](../AppData/Roaming/Typora/typora-user-images/image-20250309201637317.png)





### scrapyçš„fake-useragent

ç™»é™†PyPiï¼Œç„¶ååœ¨é‡Œé¢æ‰¾scrapyfake-useragentï¼Œæ‰¾ä¸€ä¸ªï¼Œç„¶åå¤åˆ¶åˆ°downloadMiddlewareé‡Œ

### æ³¨æ„åçˆ¬

**è€Œä¸”get()è¿™ä¸ªæ–¹æ³•å¤ªä¸‡èƒ½äº†ï¼Œè¦æ³¨æ„**

![image-20250309174655926](../AppData/Roaming/Typora/typora-user-images/image-20250309174655926.png)

ä¸Šé¢å¯ä»¥åŠ Referer

ä¸‹é¢è¿™ä¸ªå¯ä»¥ç›´æ¥è·å–å…¨æ–‡ï¼Œç„¶åé€æ­¥è·å–jsoné‡Œçš„æ•°æ®ï¼Œæ³¨æ„è¦ç”¨getè·å–



### Splashçš„è¿ç”¨

#### å±æ€§

![image-20250327173746135](../AppData/Roaming/Typora/typora-user-images/image-20250327173746135.png)

**æ–¹æ³•ï¼š**

å¯»æ‰¾ç½‘å€

![image-20250327173925317](../AppData/Roaming/Typora/typora-user-images/image-20250327173925317.png)

ç­‰

![image-20250327174054695](../AppData/Roaming/Typora/typora-user-images/image-20250327174054695.png)

è°ƒç”¨jsçš„æ–¹æ³•

![image-20250327174310398](../AppData/Roaming/Typora/typora-user-images/image-20250327174310398.png)

å…¶ä»–æ–¹æ³•

![image-20250327174456432](../AppData/Roaming/Typora/typora-user-images/image-20250327174456432.png)

![image-20250327174555794](../AppData/Roaming/Typora/typora-user-images/image-20250327174555794.png)

![image-20250327174626851](../AppData/Roaming/Typora/typora-user-images/image-20250327174626851.png)

![image-20250327174715979](../AppData/Roaming/Typora/typora-user-images/image-20250327174715979.png)

![image-20250327174857495](../AppData/Roaming/Typora/typora-user-images/image-20250327174857495.png)

![image-20250327174947414](../AppData/Roaming/Typora/typora-user-images/image-20250327174947414.png)

#### ä¸pythonç»“åˆ

![image-20250327175156423](../AppData/Roaming/Typora/typora-user-images/image-20250327175156423.png)

å®ä¾‹

![image-20250327180351370](../AppData/Roaming/Typora/typora-user-images/image-20250327180351370.png)



### ååçˆ¬

éªŒè¯ç ç”¨è¶…çº§é¹°



















### è®²è®²request.Session

#### **`requests.Session` çš„æ ¸å¿ƒä½œç”¨**

1. **ä¿æŒä¼šè¯çŠ¶æ€**  
   åœ¨åŒä¸€ä¸ª `Session` å®ä¾‹ä¸­å‘èµ·çš„å¤šä¸ªè¯·æ±‚ä¼š**è‡ªåŠ¨å…±äº« Cookiesã€Headers ç­‰å‚æ•°**ï¼Œæ— éœ€æ‰‹åŠ¨ç®¡ç†ï¼ˆä¾‹å¦‚ç™»å½•åä¿æŒä¼šè¯çŠ¶æ€ï¼‰ã€‚

2. **å¤ç”¨ TCP è¿æ¥**  
   `Session` ä¼šå¤ç”¨åº•å±‚çš„ TCP è¿æ¥ï¼Œæå‡é«˜é¢‘è¯·æ±‚çš„æ€§èƒ½ï¼ˆå‡å°‘é‡å¤å»ºç«‹è¿æ¥çš„å¼€é”€ï¼‰ã€‚

3. **ç»Ÿä¸€é…ç½®**  
   å¯ä»¥é¢„å…ˆä¸º `Session` è®¾ç½®å…¬å…±å‚æ•°ï¼ˆå¦‚ Headersã€ä»£ç†ã€è®¤è¯ä¿¡æ¯ç­‰ï¼‰ï¼Œåç»­æ‰€æœ‰è¯·æ±‚è‡ªåŠ¨ç»§æ‰¿è¿™äº›é…ç½®ã€‚

---

#### **`Session` vs æ™®é€šè¯·æ±‚**

å‡è®¾ä½ éœ€è¦å‘æŸä¸ªç½‘ç«™å‘é€å¤šä¸ªè¯·æ±‚ï¼š
- **æ™®é€šè¯·æ±‚**ï¼ˆç›´æ¥ä½¿ç”¨ `requests.get()` æˆ– `requests.post()`ï¼‰ï¼š  
  æ¯æ¬¡è¯·æ±‚éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œä¸ä¼šå…±äº« Cookies æˆ–è¿æ¥ï¼Œéœ€è¦æ‰‹åŠ¨å¤„ç†ä¼šè¯çŠ¶æ€ã€‚
  ```python
  # æ¯æ¬¡è¯·æ±‚éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œæ— æ³•è‡ªåŠ¨ä¼ é€’ Cookies
  response1 = requests.get("https://example.com/login")
  response2 = requests.get("https://example.com/dashboard")  # å¯èƒ½æ— æ³•ä¿æŒç™»å½•çŠ¶æ€
  ```

- **ä½¿ç”¨ `Session`**ï¼š  
  é€šè¿‡ `Session` å¯¹è±¡å‘èµ·è¯·æ±‚ï¼Œè‡ªåŠ¨ç®¡ç†ä¼šè¯ç›¸å…³çš„å‚æ•°ã€‚
  ```python
  import requests
  
  # åˆ›å»ºä¼šè¯å¯¹è±¡
  session = requests.Session()
  
  # ç™»å½•ï¼ˆè‡ªåŠ¨ä¿å­˜ Cookiesï¼‰
  login_data = {"username": "user", "password": "pass"}
  session.post("https://example.com/login", data=login_data)
  
  # åç»­è¯·æ±‚è‡ªåŠ¨æºå¸¦ç™»å½•åçš„ Cookies
  response = session.get("https://example.com/dashboard")  # ä¿æŒç™»å½•çŠ¶æ€
  ```

---

#### **`Session` çš„å¸¸è§ç”¨é€”**

1. **å¤„ç†éœ€è¦ç™»å½•çš„ç½‘ç«™**  
   ```python
   session = requests.Session()
   session.post(login_url, data=credentials)  # ç™»å½•
   session.get(protected_page_url)           # è®¿é—®éœ€è¦ç™»å½•çš„é¡µé¢
   ```

2. **ç»Ÿä¸€è®¾ç½® Headers æˆ–ä»£ç†**  
   ```python
   session = requests.Session()
   session.headers.update({"User-Agent": "My Custom Agent"})  # æ‰€æœ‰è¯·æ±‚è‡ªåŠ¨æºå¸¦æ­¤ Header
   session.proxies = {"http": "http://10.10.1.10:3128"}       # ç»Ÿä¸€è®¾ç½®ä»£ç†
   ```

3. **é«˜é¢‘è¯·æ±‚ä¼˜åŒ–æ€§èƒ½**  
   å¤ç”¨ TCP è¿æ¥ï¼Œå‡å°‘å»¶è¿Ÿï¼ˆé€‚åˆçˆ¬è™«æˆ– API è°ƒç”¨ï¼‰ã€‚

4. **æ–‡ä»¶ä¸Šä¼ æˆ–å¤æ‚è¯·æ±‚**  
   é€šè¿‡ `Session` ä¿æŒä¸Šä¸‹æ–‡ï¼Œå¤„ç†å¤šæ­¥éª¤æ“ä½œï¼ˆå¦‚å…ˆè·å–ä»¤ç‰Œå†æäº¤æ•°æ®ï¼‰ã€‚

---

#### **`Session` çš„åº•å±‚åŸç†**

- **Cookie æŒä¹…åŒ–**ï¼šè‡ªåŠ¨å¤„ç†æœåŠ¡å™¨è¿”å›çš„ Cookiesï¼Œå¹¶åœ¨åç»­è¯·æ±‚ä¸­æºå¸¦ã€‚
- **è¿æ¥æ± ç®¡ç†**ï¼šé»˜è®¤å¤ç”¨ TCP è¿æ¥ï¼Œé€šè¿‡ `urllib3` åº“å®ç°è¿æ¥æ± ã€‚
- **ä¸Šä¸‹æ–‡ç®¡ç†å™¨**ï¼šå¯ä»¥ç”¨ `with` è¯­å¥è‡ªåŠ¨å…³é—­ä¼šè¯ï¼ˆæ¨èå†™æ³•ï¼‰ï¼š
  ```python
  with requests.Session() as session:
      session.get("https://example.com")
  ```

---

#### **ä»£ç ç¤ºä¾‹**

```python
import requests

# åˆ›å»ºä¼šè¯å¯¹è±¡ï¼Œå¹¶è®¾ç½®å…¬å…± Headers
session = requests.Session()
session.headers = {
    "User-Agent": "Mozilla/5.0",
    "Accept-Language": "en-US"
}

# ç™»å½•æ“ä½œï¼ˆä¿å­˜ Cookiesï¼‰
login_url = "https://example.com/login"
response = session.post(login_url, data={"user": "admin", "pass": "123"})

# è®¿é—®éœ€è¦ç™»å½•çš„é¡µé¢ï¼ˆè‡ªåŠ¨æºå¸¦ Cookiesï¼‰
profile_url = "https://example.com/profile"
response = session.get(profile_url)
print(response.text)  # è¾“å‡ºç™»å½•åçš„é¡µé¢å†…å®¹
```

## jsé€†å‘

#### æ³¨æ„æŠ“åŒ…

ç”¨requestç›´æ¥è®¿é—®æ‰€éœ€ç½‘å€ï¼ˆç”¨æ£€æŸ¥å»æŸ¥æ‰¾ï¼‰







#### debugå¯»æ‰¾æ‰€éœ€ï¼Œè¿™ç§æ–¹æ³•æ˜¯ç›´æ¥æ‰¾æ‰€éœ€è¦çš„æ•°æ®æ˜¯æ€ä¹ˆç”Ÿæˆçš„ï¼ˆåœ¨åˆçº§æ‰¾ä¿¡æ¯ä¸è¡Œæ—¶ï¼‰

ç¬¬ä¸€ç§æ–¹å¼æ˜¯ç›´æ¥æ‰¾æ˜¯å“ªä¸ªå±æ€§åŒ…å«æˆ‘æ‰€éœ€è¦çš„ä¸œè¥¿ï¼ˆç›´æ¥æ‰¾ï¼Œç„¶ådebugï¼‰

![image-20250416200947459](../AppData/Roaming/Typora/typora-user-images/image-20250416200947459.png)

ç¬¬äºŒç§æ‰“æ–­ç‚¹æ–¹å¼æ˜¯ç‚¹å³è¾¹ï¼ˆçœ‹ä»–æ˜¯é€šè¿‡ä»€ä¹ˆåŠ è½½ï¼Œå¦‚ç‚¹å‡»ï¼‰

![image-20250416201527202](../AppData/Roaming/Typora/typora-user-images/image-20250416201527202.png)



#### è‡ªå·±jsæ¸²æŸ“ä»£ç 

![image-20250416210137927](../AppData/Roaming/Typora/typora-user-images/image-20250416210137927.png)

#### ç›´æ¥åœ¨ç½‘ç»œé‡Œæ‰¾jsä¿¡æ¯ï¼Œè¿›è¡ŒæŠ“åŒ…





#### é€†å‘é¡»çŸ¥

äººå®¶ç»™æˆ‘ä»¬åŠ å¯†äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¼ çš„æ—¶å€™ä¹Ÿè¦åŠ å¯†

![image-20250416210827276](../AppData/Roaming/Typora/typora-user-images/image-20250416210827276.png)



æ³¨æ„è¿™é‡Œçš„å¿«æ·æ–¹å¼

![image-20250416212438675](../AppData/Roaming/Typora/typora-user-images/image-20250416212438675.png)











# PythonåŸºç¡€

## 1. å¸¸è¯†



### 1.1 ./çš„å«ä¹‰

![image-20250617000305646](../AppData/Roaming/Typora/typora-user-images/image-20250617000305646.png)



### 1.2 ../å’Œ./çš„æ„æ€

åœ¨Pythonå’ŒJavaä¸­ï¼Œ ./  å’Œ  ../  å¹¶éç¼–ç¨‹è¯­è¨€æœ¬èº«çš„è¯­æ³•ï¼Œè€Œæ˜¯æ–‡ä»¶ç³»ç»Ÿçš„é€šç”¨è·¯å¾„ç¬¦å·ï¼Œå«ä¹‰åœ¨ä¸¤ç§è¯­è¨€ä¸­å®Œå…¨ä¸€è‡´ï¼Œç”¨äºå®šä½æ–‡ä»¶æˆ–ç›®å½•çš„ä½ç½®ã€‚

-  ./ ï¼šè¡¨ç¤ºå½“å‰å·¥ä½œç›®å½•ï¼Œå³ä»£ç è¿è¡Œæ—¶æ‰€åœ¨çš„ç›®å½•ã€‚
- ç¤ºä¾‹ï¼šåœ¨Pythonä¸­ä½¿ç”¨  open("./test.txt") ï¼Œæˆ–åœ¨Javaä¸­ä½¿ç”¨  new File("./test.txt") ï¼Œéƒ½æ˜¯æŒ‡è¯»å–å½“å‰è¿è¡Œç›®å½•ä¸‹çš„  test.txt  æ–‡ä»¶ã€‚
-  ../ ï¼šè¡¨ç¤ºä¸Šä¸€çº§ç›®å½•ï¼Œå³å½“å‰å·¥ä½œç›®å½•çš„çˆ¶ç›®å½•ã€‚
- ç¤ºä¾‹ï¼šåœ¨Pythonä¸­ä½¿ç”¨  open("../data/test.txt") ï¼Œæˆ–åœ¨Javaä¸­ä½¿ç”¨  new File("../data/test.txt") ï¼Œéƒ½æ˜¯æŒ‡è¯»å–å½“å‰è¿è¡Œç›®å½•çš„ä¸Šä¸€çº§ç›®å½•ä¸­  data  æ–‡ä»¶å¤¹ä¸‹çš„  test.txt  æ–‡ä»¶ã€‚





### 1.3 å¦‚ä½•åœ¨ä¸åŒæ“ä½œç³»ç»Ÿç¯å¢ƒä¸‹è·¯å¾„ç»Ÿä¸€

è¿™è¡Œä»£ç  `persist_path = Path(persist_dir).expanduser().resolve()` ä½¿ç”¨äº† Python çš„ `pathlib` æ¨¡å—æ¥å¤„ç†æ–‡ä»¶ç³»ç»Ÿè·¯å¾„ï¼Œä¸»è¦å®Œæˆä¸‰ä¸ªå…³é”®æ“ä½œï¼š

#### 1. `Path(persist_dir)`

- **åŠŸèƒ½**ï¼šå°†å­—ç¬¦ä¸²è·¯å¾„è½¬æ¢ä¸º `Path` å¯¹è±¡
- **ä½œç”¨**ï¼šå°†è¾“å…¥çš„è·¯å¾„å­—ç¬¦ä¸²ï¼ˆå¦‚ `"~/my_data"` æˆ– `"../data"`) è½¬æ¢ä¸ºé¢å‘å¯¹è±¡çš„è·¯å¾„å¯¹è±¡
- **ç¤ºä¾‹**ï¼š`Path("~/documents")` â†’ åˆ›å»ºè¡¨ç¤ºè¯¥è·¯å¾„çš„å¯¹è±¡

#### 2. `.expanduser()`

- **åŠŸèƒ½**ï¼šå±•å¼€æ³¢æµªç¬¦ `~` ä¸ºç”¨æˆ·ä¸»ç›®å½•
- **ä½œç”¨**ï¼šå°† `~` æ›¿æ¢ä¸ºå½“å‰ç”¨æˆ·çš„ä¸»ç›®å½•ç»å¯¹è·¯å¾„
- **ç¤ºä¾‹**ï¼š
  - Linux/macOSï¼š`~/data` â†’ `/home/username/data`
  - Windowsï¼š`~\Documents` â†’ `C:\Users\username\Documents`

#### 3. `.resolve()`

- **åŠŸèƒ½**ï¼šè§£æè·¯å¾„ä¸ºç»å¯¹è·¯å¾„å¹¶æ ‡å‡†åŒ–
- **ä½œç”¨**ï¼š
  - å°†ç›¸å¯¹è·¯å¾„è½¬ä¸ºç»å¯¹è·¯å¾„ï¼ˆåŸºäºå½“å‰å·¥ä½œç›®å½•ï¼‰
  - è§£ææ‰€æœ‰ç¬¦å·é“¾æ¥ï¼ˆå¦‚æœæœ‰ï¼‰
  - è§„èŒƒåŒ–è·¯å¾„ï¼ˆç§»é™¤å†—ä½™çš„ `..`ã€`.` ç­‰ï¼‰
- **ç¤ºä¾‹**ï¼š
  - `../data` â†’ `/project/data`ï¼ˆå‡è®¾å½“å‰åœ¨ `/project/src`ï¼‰
  - `./config/../data` â†’ `/project/data`

#### ä¸ºä»€ä¹ˆéœ€è¦è¿™è¡Œä»£ç ï¼Ÿ

1. **è·¯å¾„ä¸€è‡´æ€§**ï¼šç¡®ä¿ä¸åŒæ“ä½œç³»ç»Ÿ/ç¯å¢ƒä¸‹è·¯å¾„æ ¼å¼ç»Ÿä¸€
2. **é˜²æ­¢é”™è¯¯**ï¼šé¿å…å›  `~` æˆ–ç›¸å¯¹è·¯å¾„å¯¼è‡´çš„æ–‡ä»¶ä½ç½®é”™è¯¯
3. **å®‰å…¨è®¿é—®**ï¼šè§£æç¬¦å·é“¾æ¥é˜²æ­¢æŒ‡å‘æ„å¤–ä½ç½®
4. **å¯é å­˜å‚¨**ï¼šæ•°æ®åº“ç­‰æŒä¹…åŒ–å­˜å‚¨éœ€è¦ç»å¯¹è·¯å¾„ä¿è¯å¯é æ€§







## 2. å°æŠ€å·§

### 2.1 zip

![image-20250225200141405](../AppData/Roaming/Typora/typora-user-images/image-20250225200141405.png)



### 2.2 åºåˆ—è§£åŒ…

```
Python åºåˆ—è§£åŒ…
1. åºåˆ—è§£åŒ…çš„åŸºæœ¬æ¦‚å¿µ
åºåˆ—è§£åŒ…å¯ä»¥ç”¨äºå…ƒç»„ã€åˆ—è¡¨ã€å­—å…¸ï¼Œèƒ½å¤Ÿæ–¹ä¾¿åœ°ä¸ºå¤šä¸ªå˜é‡èµ‹å€¼ã€‚

åŸºæœ¬è¯­æ³•ç¤ºä¾‹ï¼š
python
x, y, z = (20, 30, 10)
(a, b, c) = (9, 8, 10)
[m, n, p] = [10, 20, 30]
2. å­—å…¸çš„åºåˆ—è§£åŒ…
åºåˆ—è§£åŒ…ç”¨äºå­—å…¸æ—¶æœ‰ä¸‰ç§ä¸åŒçš„æ“ä½œæ–¹å¼ï¼š

ç¤ºä¾‹ä»£ç ï¼š
python
s = {'name': 'gaoqi', 'age': 18, 'job': 'teacher'}

# é»˜è®¤å¯¹é”®è¿›è¡Œæ“ä½œ
name, age, job = s
print(name)  # è¾“å‡ºï¼šname

# å¯¹é”®å€¼å¯¹è¿›è¡Œæ“ä½œ
name, age, job = s.items()
print(name)  # è¾“å‡ºï¼š('name', 'gaoqi')

# å¯¹å€¼è¿›è¡Œæ“ä½œ
name, age, job = s.values()
print(name)  # è¾“å‡ºï¼šgaoqi
å…³é”®è¦ç‚¹æ€»ç»“ï¼š
é€‚ç”¨èŒƒå›´ï¼šåºåˆ—è§£åŒ…é€‚ç”¨äºå…ƒç»„ã€åˆ—è¡¨ã€å­—å…¸ç­‰å¯è¿­ä»£å¯¹è±¡

å­—å…¸è§£åŒ…ï¼š

é»˜è®¤æ“ä½œï¼šå¯¹å­—å…¸çš„é”®è¿›è¡Œè§£åŒ…

ä½¿ç”¨ items()ï¼šå¯¹é”®å€¼å¯¹è¿›è¡Œè§£åŒ…ï¼Œè¿”å›å…ƒç»„å½¢å¼

ä½¿ç”¨ values()ï¼šå¯¹å€¼è¿›è¡Œè§£åŒ…

å˜é‡æ•°é‡ï¼šè§£åŒ…æ—¶å·¦è¾¹çš„å˜é‡æ•°é‡å¿…é¡»ä¸å³è¾¹å¯è¿­ä»£å¯¹è±¡çš„å…ƒç´ æ•°é‡ä¸€è‡´

å®ç”¨æ€§ï¼šåºåˆ—è§£åŒ…è®©ä»£ç æ›´åŠ ç®€æ´ï¼Œé¿å…äº†ç¹ççš„ç´¢å¼•æ“ä½œ
```





### 2.3 å­—å…¸



åˆ›å»º

é”®é‡å¤äº†ï¼Œåé¢çš„ä¼šæŠŠå‰é¢çš„å‰ƒæ‰

```
Python ä¸­ä½¿ç”¨ zip() åˆ›å»ºå­—å…¸
ä½¿ç”¨ zip() å‡½æ•°å°†ä¸¤ä¸ªåˆ—è¡¨åˆå¹¶ä¸ºå­—å…¸
ç¤ºä¾‹ä»£ç ï¼š
python
k = ['name', 'age', 'job']
v = ['gaoqi', 18, 'programmer']

# ä½¿ç”¨ zip() å°†ä¸¤ä¸ªåˆ—è¡¨åˆå¹¶ï¼Œç„¶åè½¬æ¢ä¸ºå­—å…¸
d = dict(zip(k, v))
print(d)
è¾“å‡ºç»“æœï¼š
python
{'name': 'gaoqi', 'age': 18, 'job': 'programmer'}
å…³é”®è¦ç‚¹æ€»ç»“ï¼š
zip() å‡½æ•°ï¼šå°†å¤šä¸ªå¯è¿­ä»£å¯¹è±¡ï¼ˆå¦‚åˆ—è¡¨ã€å…ƒç»„ï¼‰ä¸­å¯¹åº”çš„å…ƒç´ æ‰“åŒ…æˆä¸€ä¸ªä¸ªå…ƒç»„

dict() å‡½æ•°ï¼šå¯ä»¥å°†åŒ…å«é”®å€¼å¯¹å…ƒç»„çš„å¯è¿­ä»£å¯¹è±¡è½¬æ¢ä¸ºå­—å…¸

ç»„åˆä½¿ç”¨ï¼šdict(zip(keys, values)) æ˜¯ä¸€ç§å¿«é€Ÿåˆ›å»ºå­—å…¸çš„ç®€æ´æ–¹æ³•

åº”ç”¨åœºæ™¯ï¼šå½“æ‚¨æœ‰ä¸¤ä¸ªåˆ†åˆ«åŒ…å«é”®å’Œå€¼çš„åˆ—è¡¨æ—¶ï¼Œå¯ä»¥ä½¿ç”¨è¿™ç§æ–¹æ³•å¿«é€Ÿæ„å»ºå­—å…¸
```



æ³¨æ„

![image-20250225201432475](../AppData/Roaming/Typora/typora-user-images/image-20250225201432475.png)



### 2.4 å­—å…¸çš„getæ–¹æ³•å¥å£®æ€§æ›´å¥½

1. **åœ¨ä»£ç ä¸­çš„åº”ç”¨**
   åœ¨ `web_results.get('organic', [])` ä¸­ï¼š
   - ç¨‹åºå°è¯•ä» `web_results` å­—å…¸ä¸­è·å–é”®ä¸º `'organic'` çš„å€¼ã€‚
   - å¦‚æœå­˜åœ¨ `'organic'` é”®ï¼Œè¿”å›å…¶å¯¹åº”çš„å€¼ï¼ˆé€šå¸¸æ˜¯ä¸€ä¸ªåŒ…å«æœç´¢ç»“æœçš„åˆ—è¡¨ï¼‰ã€‚
   - å¦‚æœä¸å­˜åœ¨ `'organic'` é”®ï¼Œåˆ™è¿”å›é»˜è®¤çš„ç©ºåˆ—è¡¨ `[]`ã€‚
2. **ä¸ºä»€ä¹ˆç”¨ `get` è€Œä¸æ˜¯ç›´æ¥è®¿é—®ï¼Ÿ**
   - **é¿å…å´©æºƒ**ï¼šå¦‚æœç›´æ¥å†™ `web_results['organic']`ï¼Œå½“ `'organic'` é”®ä¸å­˜åœ¨æ—¶ï¼Œç¨‹åºä¼šæŠ›å‡º `KeyError` å¼‚å¸¸ã€‚ä½¿ç”¨ `get` å¯ä»¥é¿å…è¿™ä¸ªé—®é¢˜ã€‚
   - **æä¾›é»˜è®¤å€¼**ï¼šå½“é”®ä¸å­˜åœ¨æ—¶ï¼Œè¿”å› `[]` å¯ä»¥ä¿è¯åç»­çš„ `for result in ...` å¾ªç¯ä»ç„¶èƒ½æ­£å¸¸è¿­ä»£ä¸€ä¸ªç©ºåˆ—è¡¨ï¼ˆç›¸å½“äºè·³è¿‡å¾ªç¯ï¼Œä½†ä¸ä¼šæŠ¥é”™ï¼‰ã€‚









### 2.5 å…ƒç»„

![image-20250226194650235](../AppData/Roaming/Typora/typora-user-images/image-20250226194650235.png)



![image-20250226194734398](../AppData/Roaming/Typora/typora-user-images/image-20250226194734398.png)

### 2.6 åˆ¤æ–­ä¸€ä¸ªåˆ—è¡¨æ˜¯ä¸æ˜¯ä¸€ä¸ªå­—å…¸çš„æŸä¸ªé”®ï¼ˆä»–æ˜¯åˆ—è¡¨ï¼‰

åªèƒ½ç”¨setæŠŠè¿™ä¸ªå­—å…¸çš„é”®å…¨éƒ¨è£…å…¥ï¼Œä¸èƒ½ç›´æ¥ç”¨ inåˆ¤æ–­



### 2.7 format

![image-20250226195934661](../AppData/Roaming/Typora/typora-user-images/image-20250226195934661.png)





### 2.8 æ ¼å¼åŒ–

```
Python æ•°å­—æ ¼å¼åŒ–
ä½¿ç”¨ format() æ–¹æ³•è¿›è¡Œæ•°å­—æ ¼å¼åŒ–
åŸºæœ¬è¯­æ³•ï¼š
æµ®ç‚¹æ•°é€šè¿‡ f è¿›è¡Œæ ¼å¼åŒ–

æ•´æ•°é€šè¿‡ d è¿›è¡Œæ ¼å¼åŒ–

ç¤ºä¾‹ä»£ç ï¼š
python
a = "æˆ‘æ˜¯{0}ï¼Œæˆ‘çš„å­˜æ¬¾æœ‰{1:.2f}"
result = a.format("é«˜æ·‡", 3888.234342)
print(result)
è¾“å‡ºç»“æœï¼š
text
æˆ‘æ˜¯é«˜æ·‡ï¼Œæˆ‘çš„å­˜æ¬¾æœ‰3888.23
å…³é”®è¦ç‚¹æ€»ç»“ï¼š
ä½ç½®å‚æ•°ï¼š{0}ã€{1} è¡¨ç¤º format() æ–¹æ³•ä¸­çš„å‚æ•°ä½ç½®

æµ®ç‚¹æ•°æ ¼å¼åŒ–ï¼š{1:.2f} è¡¨ç¤ºå°†ç¬¬äºŒä¸ªå‚æ•°æ ¼å¼åŒ–ä¸ºæµ®ç‚¹æ•°ï¼Œä¿ç•™2ä½å°æ•°

æ•´æ•°æ ¼å¼åŒ–ï¼šä½¿ç”¨ d è¿›è¡Œæ•´æ•°æ ¼å¼åŒ–ï¼ˆç¤ºä¾‹ä¸­æœªå±•ç¤ºï¼‰

å­—ç¬¦ä¸²æ’å€¼ï¼šformat() æ–¹æ³•æä¾›äº†ä¸€ç§çµæ´»çš„æ–¹å¼æ¥æ ¼å¼åŒ–å­—ç¬¦ä¸²å¹¶æ’å…¥å˜é‡å€¼
```



### 2.9å‡½æ•°

![image-20250226201605289](../AppData/Roaming/Typora/typora-user-images/image-20250226201605289.png)

![image-20250226201829414](../AppData/Roaming/Typora/typora-user-images/image-20250226201829414.png)





### 2.10 å˜é‡ä½œç”¨åŸŸ

![image-20250226202035639](../AppData/Roaming/Typora/typora-user-images/image-20250226202035639.png)

![image-20250226202213481](../AppData/Roaming/Typora/typora-user-images/image-20250226202213481.png)





### 2.11 å‚æ•°ä¼ é€’

![image-20250226203602774](../AppData/Roaming/Typora/typora-user-images/image-20250226203602774.png)

![image-20250226204159290](../AppData/Roaming/Typora/typora-user-images/image-20250226204159290.png)

![image-20250226204902142](../AppData/Roaming/Typora/typora-user-images/image-20250226204902142.png)



### 2.12 ï¼ˆé‡è¦ï¼‰æ·±æµ…æ‹·è´ç†è§£



![image-20250226205256985](../AppData/Roaming/Typora/typora-user-images/image-20250226205256985.png)

æµ…æ‹·è´

![image-20250226205849623](../AppData/Roaming/Typora/typora-user-images/image-20250226205849623.png)

æ·±æ‹·è´

![image-20250226210133520](../AppData/Roaming/Typora/typora-user-images/image-20250226210133520.png)



ä¿®æ”¹ä¸å¯å˜å¯¹è±¡ä¸­çš„å¯å˜å¯¹è±¡ï¼Œè¿™ä¸ªä¸å˜

![image-20250226221608531](../AppData/Roaming/Typora/typora-user-images/image-20250226221608531.png)



### 2.13 å¤šä¸ªyield

`def count_up_to(n):`
    `count = 1`
    `while count <= n:`
        `yield count  # ç¬¬ä¸€ä¸ªyield`
        `count += 1`
    `yield 'Done'  # ç¬¬äºŒä¸ªyieldï¼Œè¿”å›ç»“æŸä¿¡å·`

`è°ƒç”¨è¯¥å‡½æ•°å¹¶éå†ç”Ÿæˆå™¨`

`counter = count_up_to(5)`

`æ¯æ¬¡è°ƒç”¨next()ï¼Œå‡½æ•°ä»ä¸Šæ¬¡æš‚åœçš„åœ°æ–¹ç»§ç»­æ‰§è¡Œ`

`print(next(counter))  # è¾“å‡º 1`
`print(next(counter))  # è¾“å‡º 2`
`print(next(counter))  # è¾“å‡º 3`
`print(next(counter))  # è¾“å‡º 4`
`print(next(counter))  # è¾“å‡º 5`
`print(next(counter))  # è¾“å‡º Done`



## 3. å¼‚æ­¥æ“ä½œ

### è§£å†³çš„é—®é¢˜

**é—®é¢˜**ï¼š`model.run` æ˜¯ä¸€ä¸ªè€—æ—¶ä¸”é˜»å¡çš„å‡½æ•°ã€‚å¦‚æœç›´æ¥åœ¨ `async` å‡½æ•°ä¸­è°ƒç”¨ `model.run(...)`ï¼Œå®ƒä¼šé˜»å¡æ•´ä¸ªäº‹ä»¶å¾ªç¯ï¼Œå¯¼è‡´ FastAPI åœ¨è¿™æ®µæ—¶é—´å†…æ— æ³•å¤„ç†å…¶ä»–ä»»ä½•è¯·æ±‚ã€‚

### ä»€ä¹ˆæ˜¯å¼‚æ­¥å’Œé˜»å¡

**å¼‚æ­¥**æŒ‡çš„æ˜¯ç¨‹åºåœ¨æ‰§è¡ŒæŸä¸ªè€—æ—¶æ“ä½œæ—¶ï¼Œä¸éœ€è¦ç­‰å¾…è¯¥æ“ä½œå®Œæˆï¼Œå°±å¯ä»¥ç»§ç»­æ‰§è¡Œåé¢çš„ä»»åŠ¡ã€‚å®ƒå°±åƒä½ å»é¤å…ç‚¹é¤ï¼ŒæœåŠ¡å‘˜å‘Šè¯‰ä½ â€œè¯·ç¨ç­‰ï¼Œé¤ç‚¹å¥½äº†ä¼šå«ä½ â€ï¼Œç„¶åä½ å°±å›åˆ°åº§ä½ä¸Šå–æ°´ã€èŠå¤©ï¼Œè€Œä¸æ˜¯ç«™åœ¨æŸœå°å‰ä¸€ç›´ç­‰ã€‚å½“é¤ç‚¹å‡†å¤‡å¥½åï¼ŒæœåŠ¡å‘˜ä¼šé€šçŸ¥ä½ ã€‚

**é˜»å¡**æ˜¯å¼‚æ­¥çš„åä¹‰è¯ã€‚å½“ä¸€ä¸ªæ“ä½œæ˜¯é˜»å¡çš„ï¼Œå®ƒä¼šâ€œéœ¸å â€å½“å‰çº¿ç¨‹ï¼Œç›´åˆ°æ“ä½œå®Œæˆï¼Œåé¢çš„æ‰€æœ‰ä»£ç éƒ½å¿…é¡»æš‚åœï¼Œç­‰å¾…å®ƒã€‚è¿™å°±åƒä½ åœ¨é¤å…ç‚¹é¤ï¼ŒæœåŠ¡å‘˜è¯´â€œä½ åœ¨è¿™é‡Œç­‰ç€ï¼Œç›´åˆ°æˆ‘æŠŠä½ çš„é¤ç‚¹åšå¥½â€ï¼Œäºæ˜¯ä½ åªèƒ½ç«™åœ¨æŸœå°å‰ï¼Œä»€ä¹ˆéƒ½ä¸èƒ½åšã€‚

åœ¨ Web æœåŠ¡ä¸­ï¼Œå¦‚æœä¸€ä¸ªè¯·æ±‚éœ€è¦æ‰§è¡Œä¸€ä¸ªè€—æ—¶çš„é˜»å¡æ“ä½œï¼ˆæ¯”å¦‚è®¿é—®æ•°æ®åº“ã€è°ƒç”¨å¤–éƒ¨ API æˆ–è¿›è¡Œå¤æ‚çš„è®¡ç®—ï¼‰ï¼Œé‚£ä¹ˆåœ¨ç­‰å¾…è¿™ä¸ªæ“ä½œå®ŒæˆæœŸé—´ï¼ŒæœåŠ¡å™¨æ— æ³•å¤„ç†å…¶ä»–ç”¨æˆ·çš„è¯·æ±‚ã€‚è¿™ä¼šå¯¼è‡´æ•´ä¸ªæœåŠ¡å˜æ…¢ï¼Œç”šè‡³æ— å“åº”ã€‚

### å¼‚æ­¥å¥½å¤„

**æå‡å¹¶å‘æ€§èƒ½ï¼š** è¿™æ˜¯æœ€æ ¸å¿ƒçš„å¥½å¤„ã€‚åœ¨ Web æœåŠ¡ä¸­ï¼Œä¸€ä¸ªçº¿ç¨‹å¯ä»¥åŒæ—¶å¤„ç†å¤šä¸ªè¯·æ±‚ã€‚å½“ä¸€ä¸ªè¯·æ±‚è§¦å‘ä¸€ä¸ªè€—æ—¶æ“ä½œæ—¶ï¼Œè¯¥çº¿ç¨‹å¯ä»¥â€œåˆ‡æ¢â€å‡ºå»ï¼Œå»å¤„ç†å¦ä¸€ä¸ªè¯·æ±‚ï¼Œè€Œä¸ç”¨é—²ç½®ç­‰å¾…ã€‚è¿™ä½¿å¾—æœåŠ¡å™¨èƒ½åŒæ—¶å¤„ç†æ›´å¤šçš„ç”¨æˆ·è¿æ¥ï¼Œå¤§å¤§æé«˜äº†ååé‡å’Œå“åº”é€Ÿåº¦ã€‚

**æ›´å¥½çš„ç”¨æˆ·ä½“éªŒï¼š** å¯¹äºå®¢æˆ·ç«¯åº”ç”¨ï¼ˆæ¯”å¦‚ç§»åŠ¨ App æˆ–æ¡Œé¢ç¨‹åºï¼‰ï¼Œå¼‚æ­¥æ“ä½œå¯ä»¥é˜²æ­¢ç•Œé¢â€œå†»ç»“â€ã€‚è€—æ—¶ä»»åŠ¡åœ¨åå°è¿è¡Œï¼Œä¸»ç•Œé¢çº¿ç¨‹å¯ä»¥ç»§ç»­å“åº”ç”¨æˆ·çš„ç‚¹å‡»ã€æ»‘åŠ¨ç­‰æ“ä½œï¼Œæä¾›æµç•…çš„ç”¨æˆ·ä½“éªŒã€‚

**èµ„æºåˆ©ç”¨ç‡æ›´é«˜ï¼š** åœ¨ I/O å¯†é›†å‹ä»»åŠ¡ï¼ˆå¦‚ç½‘ç»œè¯·æ±‚ã€æ–‡ä»¶è¯»å†™ï¼‰ä¸­ï¼Œçº¿ç¨‹é€šå¸¸å¤§éƒ¨åˆ†æ—¶é—´å¤„äºç©ºé—²ç­‰å¾…çŠ¶æ€ã€‚å¼‚æ­¥ç¼–ç¨‹æ¨¡å‹èƒ½æ›´æœ‰æ•ˆåœ°åˆ©ç”¨è¿™äº›ç©ºé—²æ—¶é—´ï¼Œè®©ä¸€ä¸ªçº¿ç¨‹å®Œæˆæ›´å¤šå·¥ä½œï¼Œå‡å°‘äº†åˆ›å»ºå’Œç®¡ç†å¤§é‡çº¿ç¨‹çš„å¼€é”€ã€‚

### è¯­æ³•

#### å…³é”®è¯

**`async`**

- `async` ç”¨äºå®šä¹‰ä¸€ä¸ª**åç¨‹ (Coroutine)**ã€‚åç¨‹æ˜¯ä¸€ç§ç‰¹æ®Šçš„å‡½æ•°ï¼Œå®ƒå¯ä»¥æš‚åœæ‰§è¡Œï¼Œå¹¶åœ¨ç¨åä»æš‚åœçš„åœ°æ–¹æ¢å¤ã€‚

**`await`**

- `await` åªèƒ½åœ¨ `async` å®šä¹‰çš„å‡½æ•°å†…éƒ¨ä½¿ç”¨ã€‚
- å®ƒçš„ä½œç”¨æ˜¯â€œæš‚åœâ€å½“å‰åç¨‹çš„æ‰§è¡Œï¼Œå¹¶ç­‰å¾…ä¸€ä¸ªå¯ç­‰å¾…å¯¹è±¡ï¼ˆé€šå¸¸æ˜¯å¦ä¸€ä¸ªåç¨‹ï¼‰å®Œæˆã€‚åœ¨ç­‰å¾…æœŸé—´ï¼Œç¨‹åºæ§åˆ¶æƒä¼šè¢«é‡Šæ”¾ï¼Œè®©äº‹ä»¶å¾ªç¯å¯ä»¥å»æ‰§è¡Œå…¶ä»–ä»»åŠ¡ã€‚
- å½“è¢«ç­‰å¾…çš„ä»»åŠ¡å®Œæˆåï¼Œ`await` è¡¨è¾¾å¼ä¼šè¿”å›ç»“æœï¼Œå½“å‰åç¨‹å°†ä»æš‚åœçš„åœ°æ–¹æ¢å¤æ‰§è¡Œã€‚

#### å‡½æ•°

Python å†…ç½®çš„å¼‚æ­¥åº“æ˜¯ **asyncio**ï¼Œå¸¸è§å…³é”®ç‚¹ï¼š

- **äº‹ä»¶å¾ªç¯ (Event Loop)**
   æ‰€æœ‰çš„åç¨‹ï¼ˆ`async def`ï¼‰éƒ½ä¼šåœ¨äº‹ä»¶å¾ªç¯é‡Œè°ƒåº¦æ‰§è¡Œã€‚

  ```
  loop = asyncio.get_running_loop()
  ```

  è¡¨ç¤ºè·å–å½“å‰æ­£åœ¨è¿è¡Œçš„äº‹ä»¶å¾ªç¯ã€‚

- **åç¨‹ (Coroutine)**
   ç”¨ `async def` å®šä¹‰ï¼Œç”¨ `await` è°ƒç”¨ï¼š

  ```
  async def f():
      return 1
  await f()
  ```

- **ä»»åŠ¡ (Task)**
   åç¨‹å¯ä»¥å°è£…æˆä»»åŠ¡åœ¨äº‹ä»¶å¾ªç¯ä¸­å¹¶å‘è¿è¡Œã€‚
   è¿™é‡Œ FastAPI è‡ªåŠ¨å¸®ä½ ç®¡ç†ï¼Œä¸éœ€è¦æ‰‹åŠ¨ `asyncio.create_task`ã€‚





##### `run_in_executor` â€”â€” æŠŠåŒæ­¥ä»»åŠ¡ä¸¢è¿›çº¿ç¨‹æ± 

ä½ çš„æ¨¡å‹ `ActRound.run` æ˜¯ **åŒæ­¥é˜»å¡å‡½æ•°**ï¼ˆå¯èƒ½è¦è·‘å¾ˆä¹…ï¼Œæ¯”å¦‚åŠ è½½æ¨¡å‹ã€æ¨ç†ï¼‰ã€‚
 ç›´æ¥ `await model.run(...)` ä¼šé˜»å¡äº‹ä»¶å¾ªç¯ï¼Œæ‰€æœ‰è¯·æ±‚éƒ½å¡æ­»ã€‚
 æ‰€ä»¥ç”¨äº†ï¼š

```
result, summary = await loop.run_in_executor(
    None,          # None è¡¨ç¤ºç”¨é»˜è®¤çš„çº¿ç¨‹æ± ï¼ˆThreadPoolExecutorï¼‰
    model.run,     # è¦æ‰§è¡Œçš„é˜»å¡å‡½æ•°
    question,      # ä¼ å…¥å‚æ•°
    round,
    all_info
)
```

ğŸ‘‰ **çŸ¥è¯†ç‚¹**ï¼š

- `run_in_executor` ä¼šæŠŠåŒæ­¥å‡½æ•°ä¸¢è¿›çº¿ç¨‹æ± /è¿›ç¨‹æ± å»æ‰§è¡Œã€‚
- `await` ä¼šæŒ‚èµ·å½“å‰åç¨‹ï¼Œç›´åˆ°çº¿ç¨‹æ± é‡Œçš„å‡½æ•°æ‰§è¡Œå®Œæˆã€‚
- è¿™æ · FastAPI çš„ä¸»äº‹ä»¶å¾ªç¯ä»ç„¶ç©ºé—²ï¼Œå¯ä»¥ç»§ç»­æ¥æ”¶åˆ«çš„è¯·æ±‚ã€‚

##### `@app.on_event("startup")`

```
@app.on_event("startup")
async def startup_event():
    ...
```

- FastAPI æä¾›çš„ç”Ÿå‘½å‘¨æœŸäº‹ä»¶ï¼šåœ¨åº”ç”¨å¯åŠ¨æ—¶ä¼šè°ƒç”¨ã€‚
- è¿™é‡Œç”¨ `loop.run_in_executor(None, ActRound)` åœ¨åå°çº¿ç¨‹é‡Œåˆå§‹åŒ–æ¨¡å‹ï¼Œé¿å…å¯åŠ¨æ—¶å¡æ­»ã€‚

## 4. OSåº“æŠ€æœ¯

### ä¸€ã€æ–‡ä»¶ä¸ç›®å½•æ“ä½œ

#### 1. è·¯å¾„æ“ä½œ

**1.1 os.path.join(path1, path2, ...)**

**åŠŸèƒ½**ï¼šå®‰å…¨åœ°å°†å¤šä¸ªè·¯å¾„ç»„ä»¶è¿æ¥æˆä¸€ä¸ªå®Œæ•´è·¯å¾„
**ç‰¹ç‚¹**ï¼šè‡ªåŠ¨å¤„ç†ä¸åŒæ“ä½œç³»ç»Ÿçš„è·¯å¾„åˆ†éš”ç¬¦

```
import os

# åœ¨ä»»ä½•æ“ä½œç³»ç»Ÿä¸Šéƒ½èƒ½æ­£ç¡®å·¥ä½œ
path = os.path.join("data", "dataset", "train.csv")
print(path)  # Windows: data\dataset\train.csv | Linux/Mac: data/dataset/train.csv

# å¤„ç†ç»å¯¹è·¯å¾„
base_dir = "/home/user" if os.name != 'nt' else "C:\\Users\\user"
full_path = os.path.join(base_dir, "documents", "report.pdf")
```

**1.2 os.path.split(path)**

**åŠŸèƒ½**ï¼šå°†è·¯å¾„åˆ†å‰²ä¸ºç›®å½•éƒ¨åˆ†å’Œæ–‡ä»¶åéƒ¨åˆ†
**è¿”å›**ï¼šå…ƒç»„(directory, file)

```
path = "/home/user/documents/report.pdf"
directory, filename = os.path.split(path)
print(f"ç›®å½•: {directory}")  # /home/user/documents
print(f"æ–‡ä»¶: {filename}")   # report.pdf
```

**1.3 os.path.abspath(path)**

**åŠŸèƒ½**ï¼šè¿”å›æŒ‡å®šè·¯å¾„çš„ç»å¯¹è·¯å¾„
**ç”¨é€”**ï¼šè§£å†³ç›¸å¯¹è·¯å¾„é—®é¢˜ï¼Œè·å–å®Œæ•´è·¯å¾„

```
# å‡è®¾å½“å‰ç›®å½•æ˜¯ /home/user/project
relative_path = "data/sample.txt"
absolute_path = os.path.abspath(relative_path)
print(absolute_path)  # /home/user/project/data/sample.t
```

#### 2. ç›®å½•ç®¡ç†

**2.1 os.mkdir(path, mode=0o777)**

**åŠŸèƒ½**ï¼šåˆ›å»ºå•ä¸ªç›®å½•
 **å‚æ•°**ï¼š

- `path`: è¦åˆ›å»ºçš„ç›®å½•è·¯å¾„
- `mode`: ç›®å½•æƒé™ï¼ˆUnixç³»ç»Ÿï¼‰
  **æ³¨æ„**ï¼šå¦‚æœçˆ¶ç›®å½•ä¸å­˜åœ¨ä¼šæŠ›å‡ºå¼‚å¸¸
  **ç¤ºä¾‹**ï¼š

```
os.mkdir("new_directory")  # åˆ›å»ºå½“å‰ç›®å½•ä¸‹çš„new_directory
```

**2.2 os.makedirs(path, mode=0o777, exist_ok=False)**

**åŠŸèƒ½**ï¼šé€’å½’åˆ›å»ºç›®å½•ï¼ˆåŒ…æ‹¬æ‰€æœ‰å¿…è¦çš„çˆ¶ç›®å½•ï¼‰
 **ç‰¹ç‚¹**ï¼šç±»ä¼¼shellä¸­çš„`mkdir -p`å‘½ä»¤
 **å‚æ•°**ï¼š

- `exist_ok`: å¦‚æœç›®å½•å·²å­˜åœ¨æ˜¯å¦æŠ›å‡ºå¼‚å¸¸ï¼ˆPython 3.2+ï¼‰
  **ç¤ºä¾‹**ï¼š

```
# åˆ›å»ºå¤šçº§ç›®å½•
os.makedirs("parent/child/grandchild", exist_ok=True)

# å®‰å…¨åˆ›å»ºï¼ˆé¿å…å¼‚å¸¸ï¼‰
try:
    os.makedirs("important/data")
except FileExistsError:
    print("ç›®å½•å·²å­˜åœ¨")
```

**2.3 `os.rmdir(path)` å’Œ `os.removedirs(path)`**

- `os.rmdir(path)`: ä»…åˆ é™¤ç©ºç›®å½•
- `os.removedirs(path)`: é€’å½’åˆ é™¤ç©ºç›®å½•ï¼ˆä»æœ€å†…å±‚å¼€å§‹åˆ é™¤ï¼Œç›´åˆ°é‡åˆ°éç©ºç›®å½•ï¼‰

#### 3. æ–‡ä»¶æ“ä½œ

**`3.1 os.remove(path)` å’Œ `os.unlink(path)`**

**åŠŸèƒ½**ï¼šåˆ é™¤æ–‡ä»¶ï¼ˆä¸¤è€…åŠŸèƒ½ç›¸åŒï¼Œunlinkæ˜¯Unixæœ¯è¯­ï¼‰
 **æ³¨æ„**ï¼šä¸èƒ½åˆ é™¤ç›®å½•ï¼Œåˆ é™¤å‰æœ€å¥½æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
 **ç¤ºä¾‹**ï¼š

```
if os.path.exists("temp.txt"):
    os.remove("temp.txt")
    print("æ–‡ä»¶å·²åˆ é™¤")
else:
    print("æ–‡ä»¶ä¸å­˜åœ¨")
```

**3.2 `os.rename(src, dst)` å’Œ `os.replace(src, dst)`**

- `os.rename(src, dst)`: é‡å‘½åæ–‡ä»¶æˆ–ç›®å½•ï¼ˆå¦‚æœdstå­˜åœ¨ï¼Œåœ¨Unixä¸Šä¼šè¦†ç›–ï¼Œåœ¨Windowsä¸Šä¼šæŠ›å‡ºå¼‚å¸¸ï¼‰
- `os.replace(src, dst)`: å®‰å…¨æ›¿æ¢ï¼Œå¦‚æœdstå­˜åœ¨ä¼šè¦†ç›–ï¼ˆè·¨å¹³å°è¡Œä¸ºä¸€è‡´ï¼‰
  **æœ€ä½³å®è·µ**ï¼šéœ€è¦è¦†ç›–æ–‡ä»¶æ—¶ä½¿ç”¨`os.replace()`

#### 4. å­˜åœ¨æ€§æ£€æŸ¥

**4.1 `os.path.exists(path)`**

**åŠŸèƒ½**ï¼šæ£€æŸ¥è·¯å¾„æ˜¯å¦å­˜åœ¨ï¼ˆæ–‡ä»¶æˆ–ç›®å½•ï¼‰
 **è¿”å›**ï¼šå¸ƒå°”å€¼
 **ç”¨é€”**ï¼šæ“ä½œå‰çš„å®‰å…¨æ£€æŸ¥
 **ç¤ºä¾‹**ï¼š



```
if not os.path.exists("data"):
    os.mkdir("data")
    print("åˆ›å»ºäº†dataç›®å½•")
```

**4.2 `os.path.isfile(path)` å’Œ `os.path.isdir(path)`**

- `os.path.isfile(path)`: æ£€æŸ¥è·¯å¾„æ˜¯å¦ä¸ºæ–‡ä»¶
- `os.path.isdir(path)`: æ£€æŸ¥è·¯å¾„æ˜¯å¦ä¸ºç›®å½•
  **ç”¨é€”**ï¼šåŒºåˆ†æ–‡ä»¶å’Œç›®å½•ï¼Œé¿å…é”™è¯¯æ“ä½œ
  **ç¤ºä¾‹**ï¼š

```
path = "example.txt"
if os.path.exists(path):
    if os.path.isfile(path):
        print("è¿™æ˜¯ä¸€ä¸ªæ–‡ä»¶")
    elif os.path.isdir(path):
        print("è¿™æ˜¯ä¸€ä¸ªç›®å½•")
```

### äºŒã€ç³»ç»Ÿä¿¡æ¯è·å–

#### 1. å·¥ä½œç›®å½•æ“ä½œ

**1.1 `os.getcwd()`**

**åŠŸèƒ½**ï¼šè·å–å½“å‰å·¥ä½œç›®å½•çš„ç»å¯¹è·¯å¾„
 **è¿”å›**ï¼šå­—ç¬¦ä¸²å½¢å¼çš„è·¯å¾„
 **ç¤ºä¾‹**ï¼š

```
current_directory = os.getcwd()
print(f"å½“å‰å·¥ä½œç›®å½•: {current_directory}")
# è¾“å‡º: /home/user/project æˆ– C:\Users\user\project
```

**1.2 `os.chdir(path)`**

**åŠŸèƒ½**ï¼šæ›´æ”¹å½“å‰å·¥ä½œç›®å½•
 **å‚æ•°**ï¼š`path` - è¦åˆ‡æ¢åˆ°çš„ç›®å½•è·¯å¾„
 **æ³¨æ„**ï¼šå¦‚æœè·¯å¾„ä¸å­˜åœ¨ä¼šæŠ›å‡ºå¼‚å¸¸
 **ç¤ºä¾‹**ï¼š

```
try:
    os.chdir("/path/to/new/directory")
    print(f"å·²åˆ‡æ¢åˆ°: {os.getcwd()}")
except FileNotFoundError:
    print("ç›®å½•ä¸å­˜åœ¨")
except PermissionError:
    print("æ²¡æœ‰æƒé™è®¿é—®è¯¥ç›®å½•")
```

#### 2. ç¯å¢ƒå˜é‡å¤„ç†

**2.1  `os.environ`**

**åŠŸèƒ½**ï¼šè®¿é—®å’Œä¿®æ”¹ç¯å¢ƒå˜é‡çš„å­—å…¸å¯¹è±¡
 **ç‰¹ç‚¹**ï¼š

- è¯»å–æ—¶å¤§å°å†™æ•æ„Ÿï¼ˆå–å†³äºæ“ä½œç³»ç»Ÿï¼‰
- ä¿®æ”¹ä¼šå½±å“å½“å‰è¿›ç¨‹åŠå…¶å­è¿›ç¨‹
- ä¸ä¼šæ°¸ä¹…ä¿®æ”¹ç³»ç»Ÿç¯å¢ƒå˜é‡

**å¸¸ç”¨æ“ä½œ**ï¼š

```
# è¯»å–ç¯å¢ƒå˜é‡
home_dir = os.environ.get('HOME') or os.environ.get('USERPROFILE')
print(f"ç”¨æˆ·ä¸»ç›®å½•: {home_dir}")

# å®‰å…¨è·å–ï¼ˆæä¾›é»˜è®¤å€¼ï¼‰
debug_mode = os.environ.get('DEBUG', 'False') == 'True'

# è®¾ç½®ç¯å¢ƒå˜é‡
os.environ['API_KEY'] = 'your_secret_key_here'

# æ£€æŸ¥ç¯å¢ƒå˜é‡æ˜¯å¦å­˜åœ¨
if 'DATABASE_URL' in os.environ:
    db_url = os.environ['DATABASE_URL']
else:
    db_url = "sqlite:///default.db"

# æ‰¹é‡è®¾ç½®ï¼ˆä»å­—å…¸ï¼‰
config_vars = {
    'LOG_LEVEL': 'DEBUG',
    'MAX_THREADS': '4'
}
os.environ.update(config_vars)
```

**æ³¨æ„äº‹é¡¹**ï¼š

- åœ¨å¤šçº¿ç¨‹ç¨‹åºä¸­ä¿®æ”¹os.environéœ€è¦åŠ é”
- å­è¿›ç¨‹ä¼šç»§æ‰¿çˆ¶è¿›ç¨‹çš„ç¯å¢ƒå˜é‡
- ä¸åŒæ“ä½œç³»ç»Ÿå¯¹ç¯å¢ƒå˜é‡åç§°çš„å¤§å°å†™å¤„ç†ä¸åŒï¼ˆWindowsä¸æ•æ„Ÿï¼ŒLinuxæ•æ„Ÿï¼‰











# åç«¯pythonå¼€å‘

## Flaskæ¡†æ¶

### 1.@appçš„è§£é‡Š

åœ¨ Flask ä¸­ï¼Œ**`@app.route` å¹¶æ²¡æœ‰ç›´æ¥â€œåˆ›å»ºä¸€ä¸ªç½‘å€â€**ï¼Œè€Œæ˜¯å®šä¹‰äº†ä¸€ä¸ª **è·¯ç”±è§„åˆ™ï¼ˆRouteï¼‰**ã€‚å®ƒçš„æ ¸å¿ƒä½œç”¨æ˜¯å‘Šè¯‰ Flaskï¼š

> **â€œå½“ç”¨æˆ·è®¿é—®æŸä¸ªç‰¹å®šçš„ URL è·¯å¾„æ—¶ï¼Œåº”è¯¥è°ƒç”¨å“ªä¸ªå‡½æ•°æ¥å¤„ç†è¿™ä¸ªè¯·æ±‚ã€‚â€**

---

å…·ä½“æ¥è¯´ï¼š

1. **å®ƒå…³è”äº†ä¸€ä¸ª URL è·¯å¾„å’Œä¸€ä¸ªå‡½æ•°**  
   ä¾‹å¦‚ï¼Œ`@app.route("/about")` çš„ä½œç”¨æ˜¯ï¼š  
   - å½“ç”¨æˆ·è®¿é—® `http://ä½ çš„ç½‘ç«™.com/about` æ—¶ï¼ŒFlask ä¼šè‡ªåŠ¨è°ƒç”¨ä¸‹æ–¹å®šä¹‰çš„è§†å›¾å‡½æ•°ï¼ˆå¦‚ `about()`ï¼‰ã€‚
   - è§†å›¾å‡½æ•°è´Ÿè´£ç”Ÿæˆå¹¶è¿”å›å“åº”å†…å®¹ï¼ˆæ¯”å¦‚è¿”å›ä¸€ä¸ªç½‘é¡µã€ä¸€æ®µæ–‡æœ¬æˆ– JSON æ•°æ®ï¼‰ã€‚

2. **URL æ˜¯â€œè®¿é—®è·¯å¾„â€ï¼Œè·¯ç”±æ˜¯â€œæ˜ å°„è§„åˆ™â€**  
   - **ç½‘å€ï¼ˆURLï¼‰** æ˜¯ç”¨æˆ·å®é™…åœ¨æµè§ˆå™¨ä¸­è¾“å…¥çš„åœ°å€ï¼ˆå¦‚ `/about`ï¼‰ã€‚
   - **è·¯ç”±ï¼ˆRouteï¼‰** æ˜¯ `@app.route` å®šä¹‰çš„è§„åˆ™ï¼Œç”¨æ¥å°† URL å’Œå¯¹åº”çš„å¤„ç†å‡½æ•°ç»‘å®šåœ¨ä¸€èµ·ã€‚

---

ä¸¾ä¸ªæ¯”å–»ï¼š

æƒ³è±¡ä¸€ä¸ªé¤å…çš„æœåŠ¡å‘˜ï¼ˆFlaskï¼‰ï¼š
- **èœå•ä¸Šçš„èœå** å°±åƒ **URL**ï¼ˆæ¯”å¦‚â€œå®«ä¿é¸¡ä¸â€ï¼‰ã€‚
- **å¨å¸ˆ** å°±åƒ **è§†å›¾å‡½æ•°**ï¼ˆè´Ÿè´£åšè¿™é“èœï¼‰ã€‚
- **`@app.route`** çš„ä½œç”¨å°±æ˜¯å‘Šè¯‰æœåŠ¡å‘˜ï¼š  
  â€œå½“å®¢äººç‚¹â€˜å®«ä¿é¸¡ä¸â€™æ—¶ï¼Œå»æ‰¾ç‹å¸ˆå‚…ï¼ˆå¯¹åº”çš„å‡½æ•°ï¼‰åšè¿™é“èœã€‚â€

**`@app.route` å¹¶æ²¡æœ‰â€œåˆ›é€ èœåâ€**ï¼Œè€Œæ˜¯å»ºç«‹äº†â€œèœåâ€å’Œâ€œå¨å¸ˆâ€ä¹‹é—´çš„å¯¹åº”å…³ç³»ã€‚

### 2.åŸºç¡€

**ç½‘é¡µæ˜¯å‰ç«¯ï¼ŒFlaskæ˜¯åç«¯ï¼ŒFlaskæ¥å—å‰é¢çš„ä¸œè¥¿**

**Flaskæ˜¯å°†è·¯ç”±äº¤ç»™ä¸€ä¸ªå‡½æ•°å¤„ç†ï¼Œä¸€èˆ¬æ¥è¯´å°±æ˜¯@appé‚£ä¸ªã€‚ä½†æ˜¯ä¹Ÿå¯ä»¥é€šè¿‡ä¸€ä¸ªå‡½æ•°å»æ‰¾è·¯ç”±**



1ï¼Œ2éƒ½æ˜¯ç½‘å€åé¢æ¥çš„ï¼Œ2ä¹Ÿæ˜¯ç«¯å£å·

![image-20250311000913667](../AppData/Roaming/Typora/typora-user-images/image-20250311000913667.png)

è®¿é—®åˆ°å…¶ä»–ç½‘å€ï¼ˆä¸ä»…é™äºæœ¬æœºï¼‰

![image-20250311002613539](../AppData/Roaming/Typora/typora-user-images/image-20250311002613539.png)

### 3.DEBUGæ–¹å¼

å¦‚ä¸‹ä¸¤ç§å’Œä¸‹ä¸€å¼ å›¾ç‰‡çš„é‚£ç§

![image-20250311191617440](../AppData/Roaming/Typora/typora-user-images/image-20250311191617440.png)

æ³¨æ„è¦åœ¨config.jsoné‡Œè®¾ç½®ä¸€ä¸ªå­—å…¸{"DEBUG":"True"}

![image-20250311192735508](../AppData/Roaming/Typora/typora-user-images/image-20250311192735508.png)





### 4.åŠ¨æ€ä¼ å‚

è¿™é‡Œçš„idæ˜¯å¯ä»¥éšä¾¿ä¼ ä»€ä¹ˆå°±è¿”å›ä»€ä¹ˆç½‘å€ï¼Œè¿™æ ·éƒ½å¯ä»¥ä¼ ä»»æ„å‚æ•°

![image-20250311193553598](../AppData/Roaming/Typora/typora-user-images/image-20250311193553598.png)



### 5.æ¥æ”¶åˆ°çš„æ•°æ®ç±»å‹å˜åŒ–

ä¸‹å›¾æ˜¯è§„åˆ™

![image-20250311195158628](../AppData/Roaming/Typora/typora-user-images/image-20250311195158628.png)



**ä¸‹å›¾æ˜¯ä¾‹å­ï¼ŒåŠ å°–æ‹¬å·çš„ï¼Œå°–æ‹¬å·å‰é¢æ˜¯æ•°æ®ç±»å‹ï¼Œä¸­é—´æ˜¯ï¼šå·**

![image-20250311194931304](../AppData/Roaming/Typora/typora-user-images/image-20250311194931304.png)



### 6.è‡ªå®šä¹‰æ•°æ®ç±»å‹

ä¸€å®šè¦é‡å†™ç”»åœˆçš„

![image-20250311203202027](../AppData/Roaming/Typora/typora-user-images/image-20250311203202027.png)



### 7.to_python

**è¯¥å‡½æ•°åœ¨åé¦ˆç»™æˆ‘ä»¬çš„æ—¶å€™ä¼šè‡ªåŠ¨æ‰§è¡Œï¼Œæ‰€ä»¥å°½é‡åœ¨è¿™é‡Œé¢å†™**

![image-20250311204058317](../AppData/Roaming/Typora/typora-user-images/image-20250311204058317.png)

![image-20250311204249458](../AppData/Roaming/Typora/typora-user-images/image-20250311204249458.png)





### 8.è·å–urlè·¯å¾„é‡Œé¢çš„æŸäº›å‚æ•°ï¼Œå¦‚å›¾

requestæ˜¯å‘ç»™æœåŠ¡å™¨é‚£ä¸ªè¯·æ±‚

![image-20250311234826577](../AppData/Roaming/Typora/typora-user-images/image-20250311234826577.png)



![image-20250311235012227](../AppData/Roaming/Typora/typora-user-images/image-20250311235012227.png)



### 9.è·¯å¾„é‡Œçš„æŸ¥è¯¢å‚æ•°å’Œè¯·æ±‚ä½“é‡Œçš„å‚æ•°åŒºåˆ«

ä¸Šå’Œä¸‹

![image-20250311235340140](../AppData/Roaming/Typora/typora-user-images/image-20250311235340140.png)



### 10.å†™äº†å°±æ˜¯è‡ªå·±ä¼ çš„ç½‘é¡µèƒ½ç”¨ä»€ä¹ˆè¯·æ±‚è®¿é—®

![image-20250312001337784](../AppData/Roaming/Typora/typora-user-images/image-20250312001337784.png)



### 11.åªæœ‰æœ‰ä»¥ä¸‹å±æ€§ï¼Œæ–‡ä»¶æ‰èƒ½ä¸Šä¼ åå°

![image-20250312142627752](../AppData/Roaming/Typora/typora-user-images/image-20250312142627752.png)

æ¥æ”¶å‰å°ä¼ çš„æ•°æ®

![image-20250312142855438](../AppData/Roaming/Typora/typora-user-images/image-20250312142855438.png)

### 12.è·å–å‰å°ä¼ çš„ä¿¡æ¯

![image-20250312143826711](../AppData/Roaming/Typora/typora-user-images/image-20250312143826711.png)



### 13.url_foræ ¹æ®å‡½æ•°å¯»æ‰¾è·¯ç”±åœ°å€

![image-20250312150435288](../AppData/Roaming/Typora/typora-user-images/image-20250312150435288.png)



### 14.ç”¨url_forçš„å¥½å¤„

![image-20250312191406815](../AppData/Roaming/Typora/typora-user-images/image-20250312191406815.png)

æŠ€å·§

![image-20250312191724420](../AppData/Roaming/Typora/typora-user-images/image-20250312191724420.png)

![image-20250312192100840](../AppData/Roaming/Typora/typora-user-images/image-20250312192100840.png)



### 15.ä»€ä¹ˆå«é‡å®šå‘

![image-20250312192657678](../AppData/Roaming/Typora/typora-user-images/image-20250312192657678.png)

### 16.é‡å®šå‘å‡½æ•°

â€œcode=301â€æ˜¯æ°¸ä¹…æ€§é‡å®šå‘ï¼Œ302æ˜¯æš‚æ—¶æ€§é‡å®šå‘

![image-20250312193702791](../AppData/Roaming/Typora/typora-user-images/image-20250312193702791.png)



### 17.å“åº”å†…å®¹

å½“å®¢æˆ·ç«¯å‘é€ä¸€ä¸ªè¯·æ±‚åˆ°FlaskæœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨ä¼šå“åº”æŒ‡å®šå†…å®¹ï¼Œä½†Flaskå¯¹è¿™ä¸ªå†…å®¹æœ‰ç›¸åº”çº¦æŸï¼Œåªæœ‰å¦‚ä¸‹å†…å®¹æ‰è¡Œ

**1.å­—ç¬¦ä¸²ï¼ˆå®é™…æ˜¯HTMLä»£ç ï¼‰2.jsonæ•°æ® 3.response**



å¦‚ä½•åˆ›å»ºjsonæ•°æ®ï¼Œä¸€å®šè¦åŠ 1

![image-20250312204048364](../AppData/Roaming/Typora/typora-user-images/image-20250312204048364.png)







**ä»¥å…ƒç»„æ–¹å¼ä¼ çš„è§„åˆ™å’Œä¾‹å­**

![image-20250312202826372](../AppData/Roaming/Typora/typora-user-images/image-20250312202826372.png)

**ä¾‹å­**

![image-20250312203811348](../AppData/Roaming/Typora/typora-user-images/image-20250312203811348.png)

![image-20250312203413433](../AppData/Roaming/Typora/typora-user-images/image-20250312203413433.png)









## Djangoæ¡†æ¶



### 1.ä¸“ä¸šæœ¯è¯­

å®¢æˆ·ç«¯æ˜¯éœ€è¦ä¸‹è½½çš„

![image-20250313164741097](../AppData/Roaming/Typora/typora-user-images/image-20250313164741097.png)

MVC

![image-20250313165121660](../AppData/Roaming/Typora/typora-user-images/image-20250313165121660.png)

MTV

![image-20250313165518736](../AppData/Roaming/Typora/typora-user-images/image-20250313165518736.png)

ORM

![image-20250313172017380](../AppData/Roaming/Typora/typora-user-images/image-20250313172017380.png)

![image-20250313172333237](../AppData/Roaming/Typora/typora-user-images/image-20250313172333237.png)







# åç«¯Javaå¼€å‘åŸºç¡€

## åŸºç¡€

### scanner

// é—®é¢˜åˆ†æï¼šSendThread ä¸­çš„ Scanner è¯»å–å¤±è´¥ï¼ŒæŠ›å‡º NoSuchElementExceptionã€‚
// åŸå› æ˜¯ SendThread ä¸ä¸»çº¿ç¨‹å…±äº« System.inï¼Œä¸»çº¿ç¨‹åœ¨ main ä¸­å·²ç»å…³é—­äº† Scannerï¼Œä»è€Œå…³é—­äº† System.in
// ä¹‹å SendThread ä¸­å°è¯•è¯»å–æ—¶å°±ä¼šæŠ¥é”™ã€‚
//

![image-20250716223832677](../AppData/Roaming/Typora/typora-user-images/image-20250716223832677.png)



### æ³¨æ„å¿«æ·æ–¹å¼

#### alt+Enter

![image-20250415221739167](../AppData/Roaming/Typora/typora-user-images/image-20250415221739167.png)

![image-20250713235920040](../AppData/Roaming/Typora/typora-user-images/image-20250713235920040.png)



#### ctrl+i

è‡ªåŠ¨è¡¥å…¨å®ç°æ–¹æ³•



### system.inä¸­ä¼šä¸€ç›´ä¿ç•™ä¸œè¥¿ï¼Œæ‰€ä»¥å¯èƒ½æœ‰å›è½¦é”®

è¦è¿™æ ·æ‰è¡Œ

![image-20250713230630970](../AppData/Roaming/Typora/typora-user-images/image-20250713230630970.png)





### è‡ªåŠ¨è¡¥å…¨

![image-20250713213642275](../AppData/Roaming/Typora/typora-user-images/image-20250713213642275.png)





### æ•°ç»„

#### åˆ›å»ºæ–¹å¼

![image-20250421222609992](../AppData/Roaming/Typora/typora-user-images/image-20250421222609992.png)

#### å†…å­˜åŸç†å›¾

![image-20250421222734304](../AppData/Roaming/Typora/typora-user-images/image-20250421222734304.png)

#### å¿«é€Ÿæ‰“å‡ºæ•°ç»„å¾ªç¯

![image-20250421223236316](../AppData/Roaming/Typora/typora-user-images/image-20250421223236316.png)



#### æ’åº+tostringç”¨æ³•

![image-20250421231940132](../AppData/Roaming/Typora/typora-user-images/image-20250421231940132.png)

#### æ•°ç»„çš„å„ç§æ–¹æ³•

![image-20250424220823649](../AppData/Roaming/Typora/typora-user-images/image-20250424220823649.png)

### foreachå¾ªç¯

![image-20250429215656811](../AppData/Roaming/Typora/typora-user-images/image-20250429215656811.png)

### ç©ºæŒ‡é’ˆ

å¯ä»¥æ‰“å°ç©ºæŒ‡é’ˆï¼Œä½†ä¸èƒ½ç”¨ç©ºæŒ‡é’ˆè®¿é—®å±æ€§ï¼Œæ–¹æ³•ç­‰ã€‚

### åˆ¤æ–­ç›¸ç­‰ï¼Œæœ€å¥½ç”¨equals



### å †æ ˆå†…å­˜èµ„æºè¯´æ˜

#### æ ˆ

![image-20250503145339730](../AppData/Roaming/Typora/typora-user-images/image-20250503145339730.png)

#### å †

æ³¨æ„å¼•ç”¨æ•°

![image-20250503150709134](../AppData/Roaming/Typora/typora-user-images/image-20250503150709134.png)

å†…å­˜å›æ”¶ï¼ˆGCï¼‰

![image-20250503151236445](../AppData/Roaming/Typora/typora-user-images/image-20250503151236445.png)



### printfçš„ç”¨æ³•

![image-20250503152127538](../AppData/Roaming/Typora/typora-user-images/image-20250503152127538.png)

### å¦‚ä½•å»ºåŒ…

![image-20250503160159282](../AppData/Roaming/Typora/typora-user-images/image-20250503160159282.png)

å¯ä»¥ç”¨è¿™äº›å»ºåŒ…

![image-20250503160309770](../AppData/Roaming/Typora/typora-user-images/image-20250503160309770.png)

### å¦‚ä½•å®šä¹‰å¸¸é‡

å¿…é¡»è¦åœ¨ç±»é‡Œé¢å®šä¹‰

![image-20250504114013581](../AppData/Roaming/Typora/typora-user-images/image-20250504114013581.png)

**å¦‚ä½•è®¿é—®**

![image-20250504114119553](../AppData/Roaming/Typora/typora-user-images/image-20250504114119553.png)

### Javaæœ€å°ç»„ç»‡å•å…ƒ

![image-20250504114215907](../AppData/Roaming/Typora/typora-user-images/image-20250504114215907.png)



### static

#### é™æ€å±æ€§

**ååˆ›å»ºçš„å¯ä»¥è®¿é—®å…ˆåˆ›å»ºçš„ï¼Œé™æ€åŒºåˆ›å»ºæ¯”è¾ƒé å‰ï¼Œå †åŒºåœ¨åé¢**

![image-20250504115941273](../AppData/Roaming/Typora/typora-user-images/image-20250504115941273.png)

#### é™æ€ä»£ç å—

**çº¢è‰²æ˜¯æ‰§è¡Œé¡ºåº**

![image-20250504151314168](../AppData/Roaming/Typora/typora-user-images/image-20250504151314168.png)

### éœ€è¦å…³æ³¨çš„

##### 1.

è¿”å›çš„éœ€è¦jsonæ ¼å¼ï¼Œå¯ä»¥ç›´æ¥æŠŠå¯¹è±¡æˆ–é›†åˆè¿”å›

### æ³›å‹

#### ç®€ä»‹

![image-20250811001101718](../AppData/Roaming/Typora/typora-user-images/image-20250811001101718.png)

#### æœªåŠ æ³›å‹

![image-20250811001418532](../AppData/Roaming/Typora/typora-user-images/image-20250811001418532.png)

#### åŠ å…¥æ³›å‹

![image-20250811001552012](../AppData/Roaming/Typora/typora-user-images/image-20250811001552012.png)









## å‡½æ•°

### å‡½æ•°é‡è½½

**å‚æ•°åˆ—è¡¨ä¸ç›¸åŒæ˜¯ä»–é‚£ä¸ªæ•°æ®ç±»å‹å’Œæ•°é‡ä¸åŒ**

![image-20250429212304482](../AppData/Roaming/Typora/typora-user-images/image-20250429212304482.png)

### å¦‚ä½•ä¼ é€’ä»»æ„å¤šä¸ªå‚æ•°

![image-20250429212955818](../AppData/Roaming/Typora/typora-user-images/image-20250429212955818.png)



### åœ°å€ä¼ é€’æ–¹æ³•åŠåŸç†

![image-20250501092641770](../AppData/Roaming/Typora/typora-user-images/image-20250501092641770.png)



### å€¼ä¼ é€’æ–¹æ³•åŠåŸç†

![image-20250501092834885](../AppData/Roaming/Typora/typora-user-images/image-20250501092834885.png)

















## å„ç§ç±»å‹åŠè½¬æ¢

![image-20250415222106897](../AppData/Roaming/Typora/typora-user-images/image-20250415222106897.png)



è½¬æ¢

![image-20250416202230654](../AppData/Roaming/Typora/typora-user-images/image-20250416202230654.png)

![image-20250416202336141](../AppData/Roaming/Typora/typora-user-images/image-20250416202336141.png)



å‡ ç§æ•°æ®ç±»å‹

![image-20250416202848626](../AppData/Roaming/Typora/typora-user-images/image-20250416202848626.png)



double éå¸¸é•¿

![image-20250416203252730](../AppData/Roaming/Typora/typora-user-images/image-20250416203252730.png)



![image-20250416204013415](../AppData/Roaming/Typora/typora-user-images/image-20250416204013415.png)



### å¼•ç”¨æ•°æ®ç±»å‹æ˜¯é™¤åŸºæœ¬æ•°æ®ç±»å‹ä»¥å¤–çš„

å¼•ç”¨æ•°æ®ç±»å‹å°±æ˜¯é‡Œé¢è®°å½•äº†ä¸€ä¸ªåœ°å€ï¼ˆè¿™æ˜¯æœ¬è´¨ï¼‰

å †ä¸éœ€è¦äººå·¥èµ‹å€¼éƒ½èƒ½è¯»ï¼Œ0ï¼›ä½†æ˜¯æ ˆä¸è¡Œ





## é¢å‘å¯¹è±¡

### åŸºç¡€

#### å‘½å

**ä¸€ä¸ªæ–‡ä»¶åªæœ‰ä¸€ä¸ªç±»ä¸æ–‡ä»¶åä¸€æ ·ï¼Œä¸”æ–‡ä»¶å†…åªæœ‰ä¸€ä¸ªpublicç±»ï¼Œå¦åˆ™æŠ¥é”™**

#### å…¥é—¨ç¤ºä¾‹

![image-20250501102218281](../AppData/Roaming/Typora/typora-user-images/image-20250501102218281.png)

![image-20250501102141848](../AppData/Roaming/Typora/typora-user-images/image-20250501102141848.png)

#### ç±»çš„å†…å­˜å›¾

![image-20250502210521436](../AppData/Roaming/Typora/typora-user-images/image-20250502210521436.png)

#### å¤šä¸ªå¯¹è±¡å†…å­˜å›¾

![image-20250502220249336](../AppData/Roaming/Typora/typora-user-images/image-20250502220249336.png)

#### æ³¨æ„è¿™é‡Œçš„æ–‡ä»¶æ”¾ç½®

![image-20250503220832094](../AppData/Roaming/Typora/typora-user-images/image-20250503220832094.png)

#### æ»¡å‚ä¼ é€’

![image-20250503222114782](../AppData/Roaming/Typora/typora-user-images/image-20250503222114782.png)

### å†…éƒ¨ç±»

![image-20250716172642899](../AppData/Roaming/Typora/typora-user-images/image-20250716172642899.png)



#### æˆå‘˜å†…éƒ¨ç±»

![image-20250716180006787](../AppData/Roaming/Typora/typora-user-images/image-20250716180006787.png)

![image-20250716180511329](../AppData/Roaming/Typora/typora-user-images/image-20250716180511329.png)

#### é™æ€å†…éƒ¨ç±»

![image-20250716184826151](../AppData/Roaming/Typora/typora-user-images/image-20250716184826151.png)

![image-20250716180055590](../AppData/Roaming/Typora/typora-user-images/image-20250716180055590.png)





#### å±€éƒ¨å†…éƒ¨ç±»

![image-20250716174818168](../AppData/Roaming/Typora/typora-user-images/image-20250716174818168.png)

#### åŒ¿åç±»

![image-20250716175218179](../AppData/Roaming/Typora/typora-user-images/image-20250716175218179.png)

new Threadçš„å­ç±»

![image-20250716175603197](../AppData/Roaming/Typora/typora-user-images/image-20250716175603197.png)



### ç±»å±æ€§è‡ªåŠ¨åˆå§‹åŒ–

**åœ¨Javaä¸­ï¼Œç±»çš„å±æ€§ä¼šè‡ªåŠ¨åˆå§‹åŒ–ï¼Œä½†å±€éƒ¨å˜é‡ä¸ä¼š**



### é¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹æ€§

#### å°è£…

##### **ä¸ºä»€ä¹ˆéœ€è¦å°è£…**

![image-20250503224332105](../AppData/Roaming/Typora/typora-user-images/image-20250503224332105.png)

##### æ­¥éª¤

![image-20250503224457880](../AppData/Roaming/Typora/typora-user-images/image-20250503224457880.png)

#### this æŒ‡é’ˆ

**æ³¨æ„å›¾ä¸Šçš„è¦ç‚¹**

![image-20250504001937580](../AppData/Roaming/Typora/typora-user-images/image-20250504001937580.png)

###### **æ³¨æ„**



![image-20250504152928008](../AppData/Roaming/Typora/typora-user-images/image-20250504152928008.png)

##### è¿™é‡Œæ—¢å¯ç”¨superï¼Œä¹Ÿå¯ç”¨this

è¿™é‡Œçš„çˆ¶ç±»æ˜¯ç§æœ‰

![image-20250509161802048](../AppData/Roaming/Typora/typora-user-images/image-20250509161802048.png)



#### ç»§æ‰¿

##### å†™åœ¨å‰é¢çš„äº‹ï¼ˆç‰¹åˆ«æ³¨æ„ç¬¬ä¸€å¼ å›¾ï¼‰

![image-20250509164430585](../AppData/Roaming/Typora/typora-user-images/image-20250509164430585.png)

![image-20250504152845590](../AppData/Roaming/Typora/typora-user-images/image-20250504152845590.png)

##### superå…³é”®å­—

**superå¿…é¡»å†™åœ¨ç¬¬ä¸€è¡Œ**

![image-20250504155746729](../AppData/Roaming/Typora/typora-user-images/image-20250504155746729.png)

![image-20250504155721338](../AppData/Roaming/Typora/typora-user-images/image-20250504155721338.png)

##### å››å¤§åŸºæœ¬æƒé™

**æ³¨æ„è¿™è¾¹çš„åŒ…**

![image-20250504161248750](../AppData/Roaming/Typora/typora-user-images/image-20250504161248750.png)

![image-20250504161212230](../AppData/Roaming/Typora/typora-user-images/image-20250504161212230.png)

##### é‡å†™

![image-20250505223401840](../AppData/Roaming/Typora/typora-user-images/image-20250505223401840.png)

æ–¹æ³•é‡å†™è§„åˆ™

![image-20250508102219696](../AppData/Roaming/Typora/typora-user-images/image-20250508102219696.png)

##### Objectçš„å‡ ä¸ªåŸºæœ¬ç»§æ‰¿æ–¹æ³•

##### æ€»çš„

![image-20250508102559790](../AppData/Roaming/Typora/typora-user-images/image-20250508102559790.png)

##### toStringé‡å†™

![image-20250508105335185](../AppData/Roaming/Typora/typora-user-images/image-20250508105335185.png)

##### equalsæ–¹æ³•

![image-20250508110043287](../AppData/Roaming/Typora/typora-user-images/image-20250508110043287.png)



##### hashCodeæ–¹æ³•

![image-20250508110335807](../AppData/Roaming/Typora/typora-user-images/image-20250508110335807.png)

##### getClassæ–¹æ³•åŠç±»çš„åº•å±‚

![image-20250508111244377](../AppData/Roaming/Typora/typora-user-images/image-20250508111244377.png)

##### æŠ½è±¡ç±»

###### æ€ä¹ˆå†™

ä½œç”¨ï¼šä¸èƒ½newã€‚æ–¹æ³•ï¼š

![image-20250508114356453](../AppData/Roaming/Typora/typora-user-images/image-20250508114356453.png)

###### æŠ½è±¡æ–¹æ³•

å­ç±»æ˜¯æŠ½è±¡ç±»ï¼Œå¯ä»¥ä¸é‡å†™è¯¥æ–¹æ³•

æŠ½è±¡æ–¹æ³•çš„çˆ¶ç±»æ²¡æœ‰æ–¹æ³•ä½“

![image-20250508142324715](../AppData/Roaming/Typora/typora-user-images/image-20250508142324715.png)

##### æœ€ç»ˆç±»

![image-20250508143018076](../AppData/Roaming/Typora/typora-user-images/image-20250508143018076.png)

#### å¤šæ€

##### å¤§çš„ä¸èƒ½é€ç»™å°çš„ï¼Œå°çš„èƒ½é€ç»™å¤§çš„ï¼ˆæŒ‡çš„æ˜¯æ•°æ®ç±»å‹ï¼‰

##### è§£é‡Š

å¤§å˜å°

![image-20250509101900461](../AppData/Roaming/Typora/typora-user-images/image-20250509101900461.png)

##### å¤šæ€å®ç°æ€è·¯

![image-20250509105210655](../AppData/Roaming/Typora/typora-user-images/image-20250509105210655.png)

###### å¤šæ€ç¬¬ä¸€ç§å®ç°ï¼ˆæœ€å¸¸ç”¨ï¼‰

![image-20250509111056982](../AppData/Roaming/Typora/typora-user-images/image-20250509111056982.png)

![image-20250509111209209](../AppData/Roaming/Typora/typora-user-images/image-20250509111209209.png)

![image-20250509111335436](../AppData/Roaming/Typora/typora-user-images/image-20250509111335436.png)

###### ç¬¬äºŒç§å¤šæ€ï¼ˆä¸å¸¸ç”¨ï¼‰

####### è§£é‡Š

![image-20250509123505682](../AppData/Roaming/Typora/typora-user-images/image-20250509123505682.png)

![image-20250509123401460](../AppData/Roaming/Typora/typora-user-images/image-20250509123401460.png)

###### ä¾‹å­

![image-20250509124919641](../AppData/Roaming/Typora/typora-user-images/image-20250509124919641.png)

![image-20250509124843959](../AppData/Roaming/Typora/typora-user-images/image-20250509124843959.png)

##### çˆ¶ç±»åˆ°å­ç±»çš„è½¬æ¢

###### è½¬æ¢æ–¹å¼

![image-20250509130841393](../AppData/Roaming/Typora/typora-user-images/image-20250509130841393.png)

![image-20250509131134840](../AppData/Roaming/Typora/typora-user-images/image-20250509131134840.png)

**å­ç±»ç‹¬æœ‰æ–¹æ³•**

![image-20250509131333083](../AppData/Roaming/Typora/typora-user-images/image-20250509131333083.png)

### æ¥å£

#### æ¥å£çš„ç”±æ¥

![image-20250509195033958](../AppData/Roaming/Typora/typora-user-images/image-20250509195033958.png)

#### æ·±å…¥ç†è§£interfaceå’Œextends

â€œæ˜¯â€ç”¨ç±»ï¼Œâ€œå…·æœ‰â€ç”¨extends

![image-20250509195908561](../AppData/Roaming/Typora/typora-user-images/image-20250509195908561.png)

#### å¤šæ¥å£

![image-20250509202628975](../AppData/Roaming/Typora/typora-user-images/image-20250509202628975.png)

#### æ¥å£å±æ€§å’Œæ–¹æ³•ç‰¹ç‚¹

![image-20250509203119913](../AppData/Roaming/Typora/typora-user-images/image-20250509203119913.png)

### å¼‚å¸¸æœºåˆ¶å¤„ç†

#### è¯­æ³•



![image-20250814211138659](../AppData/Roaming/Typora/typora-user-images/image-20250814211138659.png)

##### `throw` å…³é”®å­—



`throw` çš„ä½œç”¨æ˜¯**ä¸»åŠ¨æŠ›å‡º**ä¸€ä¸ªå¼‚å¸¸å¯¹è±¡ã€‚å®ƒç”¨äºåœ¨ç¨‹åºä¸­æ˜¾å¼åœ°åˆ›å»ºä¸€ä¸ªå¼‚å¸¸å®ä¾‹ï¼Œå¹¶ç«‹å³åœæ­¢å½“å‰æ–¹æ³•çš„æ‰§è¡Œï¼Œå°†æ§åˆ¶æƒäº¤ç»™å¼‚å¸¸å¤„ç†æœºåˆ¶ã€‚

**è¯­æ³•ï¼š**

Java

```
throw new ExceptionType("é”™è¯¯ä¿¡æ¯");
```

**ç‰¹ç‚¹ï¼š**

- **`throw` åé¢è·Ÿçš„æ˜¯ä¸€ä¸ªå…·ä½“çš„å¼‚å¸¸å¯¹è±¡å®ä¾‹**ï¼Œä¾‹å¦‚ `new IllegalArgumentException("å¹´é¾„ä¸èƒ½ä¸ºè´Ÿæ•°")`ã€‚
- å®ƒ**ç«‹å³ç»ˆæ­¢**å½“å‰æ–¹æ³•çš„æ‰§è¡Œï¼Œåé¢çš„ä»£ç å°†ä¸å†è¢«æ‰§è¡Œã€‚
- å®ƒé€šå¸¸ç”¨äºä»¥ä¸‹åœºæ™¯ï¼š
  - **ä¸šåŠ¡é€»è¾‘æ ¡éªŒ**ï¼šå½“ä½ çš„æ–¹æ³•å‚æ•°ä¸ç¬¦åˆè¦æ±‚ï¼Œæˆ–è€…ä¸šåŠ¡çŠ¶æ€ä¸æ­£ç¡®æ—¶ï¼Œå¯ä»¥æŠ›å‡ºå¼‚å¸¸æ¥ä¸­æ–­æµç¨‹ã€‚ä¾‹å¦‚ï¼Œ`setAge(int age)` æ–¹æ³•ä¸­ï¼Œå¦‚æœ `age` å°äº 0ï¼Œå°±å¯ä»¥ `throw new IllegalArgumentException()`ã€‚
  - **å°è£…åº•å±‚å¼‚å¸¸**ï¼šåœ¨ `catch` å—ä¸­æ•è·ä¸€ä¸ªä½çº§åˆ«çš„å¼‚å¸¸ï¼Œç„¶åå°†å…¶å°è£…æˆä¸€ä¸ªæ›´ç¬¦åˆä¸šåŠ¡å«ä¹‰çš„é«˜çº§åˆ«å¼‚å¸¸å†é‡æ–°æŠ›å‡ºã€‚è¿™é€šå¸¸è¢«ç§°ä¸ºâ€œå¼‚å¸¸é“¾â€ï¼ˆException Chainingï¼‰ã€‚



##### `throws` å…³é”®å­—



`throws` çš„ä½œç”¨æ˜¯**å£°æ˜**ä¸€ä¸ªæ–¹æ³•å¯èƒ½ä¼šæŠ›å‡ºå“ªäº›å¼‚å¸¸ã€‚å®ƒä¸æ˜¯ç”¨æ¥çœŸæ­£æŠ›å‡ºå¼‚å¸¸çš„ï¼Œè€Œæ˜¯ç”¨æ¥**å‘Šè¯‰è°ƒç”¨è€…**ï¼Œè¿™ä¸ªæ–¹æ³•åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å¯èƒ½ä¼šå‡ºç°è¿™äº›å¼‚å¸¸ï¼Œæ‰€ä»¥è°ƒç”¨è€…éœ€è¦å¤„ç†å®ƒä»¬ã€‚

**è¯­æ³•ï¼š**

Java

```
public void methodName() throws ExceptionType1, ExceptionType2 {
    // æ–¹æ³•ä½“
}
```

**ç‰¹ç‚¹ï¼š**

- **`throws` åé¢è·Ÿçš„æ˜¯å¼‚å¸¸ç±»å‹ï¼ˆClassï¼‰**ï¼Œè€Œä¸æ˜¯å¼‚å¸¸å¯¹è±¡å®ä¾‹ã€‚
- å®ƒç”¨äº**æ–¹æ³•ç­¾å**ä¸­ï¼Œåœ¨å‚æ•°åˆ—è¡¨çš„åé¢ã€‚
- å®ƒä¸»è¦ç”¨äºå¤„ç†**å—æ£€å¼‚å¸¸**ï¼ˆChecked Exceptionï¼‰ã€‚Java å¼ºåˆ¶è¦æ±‚ï¼Œå¦‚æœä¸€ä¸ªæ–¹æ³•å¯èƒ½ä¼šæŠ›å‡ºå—æ£€å¼‚å¸¸ï¼Œé‚£ä¹ˆå®ƒå¿…é¡»åœ¨æ–¹æ³•ç­¾åä¸Šä½¿ç”¨ `throws` å…³é”®å­—è¿›è¡Œå£°æ˜ï¼Œå¦åˆ™ç¼–è¯‘ä¸é€šè¿‡ã€‚
- å½“ä¸€ä¸ªæ–¹æ³•è¢« `throws` å£°æ˜äº†å¼‚å¸¸åï¼Œè°ƒç”¨è¿™ä¸ªæ–¹æ³•çš„ä»£ç è¦ä¹ˆä½¿ç”¨ `try-catch` å—æ¥å¤„ç†è¿™ä¸ªå¼‚å¸¸ï¼Œè¦ä¹ˆä¹Ÿç»§ç»­åœ¨è‡ªå·±çš„æ–¹æ³•ç­¾åä¸Šä½¿ç”¨ `throws` å£°æ˜è¿™ä¸ªå¼‚å¸¸ï¼Œå°†å…¶â€œå‘ä¸ŠæŠ›â€ã€‚





![image-20250814212644343](../AppData/Roaming/Typora/typora-user-images/image-20250814212644343.png)

![image-20250511104831594](../AppData/Roaming/Typora/typora-user-images/image-20250511104831594.png)

#### æ‰“å°å¼‚å¸¸ä¿¡æ¯

![image-20250511105705109](../AppData/Roaming/Typora/typora-user-images/image-20250511105705109.png)

#### finally

**finally å¾ˆå¼ºå¤§ï¼Œå“ªæ€•æ˜¯è¿™é‡Œçš„return ä¹ŸæŒ¡ä¸ä½ä»–çš„æ‰§è¡Œï¼Œå”¯ä¸€èƒ½æŒ¡ä½ä»–çš„æ‰§è¡Œæ˜¯exitï¼Œå®ƒä¼šç›´æ¥ä¸­æ–­è™šæ‹Ÿæœº**

![image-20250511110430750](../AppData/Roaming/Typora/typora-user-images/image-20250511110430750.png)

#### å¼‚å¸¸catché¡ºåº

![image-20250511111117838](../AppData/Roaming/Typora/typora-user-images/image-20250511111117838.png)

#### throwå’Œthrows

ç”¨æ³•

![image-20250511111652074](../AppData/Roaming/Typora/typora-user-images/image-20250511111652074.png)

**æ³¨æ„**

**f02è¿™é‡Œæ˜¯æŠ›å‡ºå¼‚å¸¸ï¼Œä¸€å®šè¦æ¥æ”¶æ‰ç¨‹åºæ‰èƒ½æ­£å¸¸è¿è¡Œï¼ˆç”¨tryæ¥æ”¶ï¼‰**

![image-20250511112429794](../AppData/Roaming/Typora/typora-user-images/image-20250511112429794.png)

#### å¼‚å¸¸çš„ç»§æ‰¿å…³ç³»

![image-20250511114231034](../AppData/Roaming/Typora/typora-user-images/image-20250511114231034.png)

#### è‡ªå®šä¹‰å¼‚å¸¸

ç¬¬ä¸€ç§

![image-20250511114734231](../AppData/Roaming/Typora/typora-user-images/image-20250511114734231.png)

![image-20250511114709736](../AppData/Roaming/Typora/typora-user-images/image-20250511114709736.png)

ç¬¬äºŒç§

![image-20250511114955392](../AppData/Roaming/Typora/typora-user-images/image-20250511114955392.png)

![image-20250511114917440](../AppData/Roaming/Typora/typora-user-images/image-20250511114917440.png)

### jaråŒ…

#### æ­¥éª¤

##### 1.å°†ä»€ä¹ˆæ‰“åŒ…

![image-20250512112027009](../AppData/Roaming/Typora/typora-user-images/image-20250512112027009.png)

##### 2.æ‰¾åˆ°æ–‡ä»¶ï¼Œå¹¶å‹ç¼©æˆ.zip

![image-20250512112238523](../AppData/Roaming/Typora/typora-user-images/image-20250512112238523.png)

##### 3.æ›´æ”¹åç¼€

![image-20250512112341958](../AppData/Roaming/Typora/typora-user-images/image-20250512112341958.png)

##### 4.åˆ›å»ºä¸€ä¸ªè·¯å¾„

![image-20250512112554712](../AppData/Roaming/Typora/typora-user-images/image-20250512112554712.png)

##### 5.æŠŠjaråŒ…æ”¾è¿›å»

##### 6.è¿˜ä¸èƒ½ç”¨

![image-20250512112908705](../AppData/Roaming/Typora/typora-user-images/image-20250512112908705.png)

![image-20250512112941667](../AppData/Roaming/Typora/typora-user-images/image-20250512112941667.png)

##### 7.æ‰¾åˆ°æºæ–‡ä»¶

![image-20250512113151163](../AppData/Roaming/Typora/typora-user-images/image-20250512113151163.png)

![image-20250512113238778](../AppData/Roaming/Typora/typora-user-images/image-20250512113238778.png)

##### 8.ä¸€èˆ¬ä¸æŠŠå®ƒæ”¾åœ¨libé‡Œï¼Œä¸€èˆ¬æ”¾åœ¨

![image-20250512113419931](../AppData/Roaming/Typora/typora-user-images/image-20250512113419931.png)

##### 9.é€‰æ‹©è¿™ä¸ª

![image-20250512113558967](../AppData/Roaming/Typora/typora-user-images/image-20250512113558967.png)

##### 10.æœ€ç»ˆ

![image-20250512113940498](../AppData/Roaming/Typora/typora-user-images/image-20250512113940498.png)



## å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯é€šä¿¡

### ç¤ºä¾‹

![image-20250514210051428](../AppData/Roaming/Typora/typora-user-images/image-20250514210051428.png)

å®¢æˆ·ç«¯

![image-20250514210136145](../AppData/Roaming/Typora/typora-user-images/image-20250514210136145.png)

æœåŠ¡ç«¯

![image-20250514210258968](../AppData/Roaming/Typora/typora-user-images/image-20250514210258968.png)

## è½¯ä»¶å¼€å‘é¡»çŸ¥

### è½¯ä»¶å¼€å‘æµç¨‹

![image-20250515234847511](../AppData/Roaming/Typora/typora-user-images/image-20250515234847511.png)

### å¸¸ç”¨è®¾è®¡åŸåˆ™

#### 1.å¼€é—­åŸåˆ™

å°±æ˜¯æµ‹è¯•åçš„ä»£ç ï¼Œå°½é‡ä¸è¦ä¿®æ”¹ï¼ˆæŸäº›æƒ…å†µå¯ä»¥è½¬æ¢ç»§æ‰¿ï¼‰

![image-20250516000327081](../AppData/Roaming/Typora/typora-user-images/image-20250516000327081.png)

#### 2.é‡Œæ°ä»£æ¢åŸåˆ™

![image-20250516000730851](../AppData/Roaming/Typora/typora-user-images/image-20250516000730851.png)

#### 3.ä¾èµ–å€’è½¬åŸåˆ™

![image-20250516002212113](../AppData/Roaming/Typora/typora-user-images/image-20250516002212113.png)

#### 4.æ¥å£éš”ç¦»åŸåˆ™

![image-20250516002644619](../AppData/Roaming/Typora/typora-user-images/image-20250516002644619.png)

#### 5.æœ€å°‘çŸ¥é“åŸåˆ™

![image-20250516112835760](../AppData/Roaming/Typora/typora-user-images/image-20250516112835760.png)

#### 6.åˆæˆå¤ç”¨åŸåˆ™

ç»§æ‰¿ä¸å¥½æ˜¯å› ä¸ºJavaåªèƒ½å•ç»§æ‰¿ï¼Œå¹¶ä¸”ç»§æ‰¿çš„æ–¹æ³•å¯èƒ½å¾ˆå¤š

![image-20250516113215130](../AppData/Roaming/Typora/typora-user-images/image-20250516113215130.png)

### è®¾è®¡æ¨¡å¼

#### 1.åŸºæœ¬æ¦‚å¿µ

![image-20250516113741332](../AppData/Roaming/Typora/typora-user-images/image-20250516113741332.png)

#### è®¾è®¡æ¨¡å¼åˆ†ç±»

![image-20250516130057838](../AppData/Roaming/Typora/typora-user-images/image-20250516130057838.png)

##### å•ä¾‹è®¾è®¡æ¨¡å¼

###### æ¦‚å¿µ

![image-20250516131718883](../AppData/Roaming/Typora/typora-user-images/image-20250516131718883.png)

###### åˆ†ç±»

![image-20250516132215640](../AppData/Roaming/Typora/typora-user-images/image-20250516132215640.png)

###### åˆ›å»ºæ–¹æ³•--é¥¿æ±‰å¼

**é¥¿æ±‰å¼æ–¹å¼ä¸€**

è¿™æ˜¯ç¬¬ä¸€ä¸ªç±»

**ä¹‹æ‰€ä»¥ç”¨staticï¼Œæ˜¯å› ä¸ºå¤–éƒ¨æ— æ³•åˆ›å»ºç±»ï¼Œå°±æ— æ³•è®¿é—®æ–¹æ³•ï¼Œæ‰€ä»¥å°±åŠ å…¥staticï¼Œç”¨ç±»åè®¿é—®**

![image-20250516132801651](../AppData/Roaming/Typora/typora-user-images/image-20250516132801651.png)

è¿™æ˜¯ç¬¬äºŒä¸ªç±»

![image-20250516133752780](../AppData/Roaming/Typora/typora-user-images/image-20250516133752780.png)

**é¥¿æ±‰å¼æ–¹å¼äºŒ**

**é™æ€ä»£ç å—**

![image-20250516134449211](../AppData/Roaming/Typora/typora-user-images/image-20250516134449211.png)



![image-20250516134601174](../AppData/Roaming/Typora/typora-user-images/image-20250516134601174.png)

**æœ€åçš„è¯´æ˜**

![image-20250516134703926](../AppData/Roaming/Typora/typora-user-images/image-20250516134703926.png)

###### åˆ›å»ºæ–¹æ³•--æ‡’æ±‰å¼

**æ–¹æ³•ä¸€**

**æ³¨æ„è¿™é‡Œè¦åŠ ä¸ªé”ï¼Œè¿™æ ·å¤šçº¿ç¨‹æ‰å®‰å…¨**

![image-20250516222958361](../AppData/Roaming/Typora/typora-user-images/image-20250516222958361.png)

æ–¹æ³•äºŒ

**ä¸ºä»€ä¹ˆè¦åŠ ä¸€äº›ä¸œè¥¿çš„åŸå› **

![image-20250516223725873](../AppData/Roaming/Typora/typora-user-images/image-20250516223725873.png)

![image-20250516223638543](../AppData/Roaming/Typora/typora-user-images/image-20250516223638543.png)

å®ç°

![image-20250516223606288](../AppData/Roaming/Typora/typora-user-images/image-20250516223606288.png)

æ–¹æ³•ä¸‰

**åˆ›å»ºåŸç†å’Œåˆ›å»ºæ–¹æ³•**

![image-20250516225225979](../AppData/Roaming/Typora/typora-user-images/image-20250516225225979.png)

ä¼˜ç‚¹

![image-20250516225501573](../AppData/Roaming/Typora/typora-user-images/image-20250516225501573.png)

###### åˆ›å»ºæ–¹æ³•--é¥¿æ±‰å¼æœ€ç®€

![image-20250516225814168](../AppData/Roaming/Typora/typora-user-images/image-20250516225814168.png)

![image-20250517124642899](../AppData/Roaming/Typora/typora-user-images/image-20250517124642899.png)



##### å•ä¾‹æ¨¡å¼å­˜åœ¨çš„é—®é¢˜

![image-20250517125946975](../AppData/Roaming/Typora/typora-user-images/image-20250517125946975.png)

###### åºåˆ—åŒ–ç ´åå•ä¾‹æ¨¡å¼

**å†™å…¥**

![image-20250517125232343](../AppData/Roaming/Typora/typora-user-images/image-20250517125232343.png)

**è¯»å…¥**

![image-20250517125540336](../AppData/Roaming/Typora/typora-user-images/image-20250517125540336.png)

###### åå°„ç ´åå•ä¾‹æ¨¡å¼

![image-20250517130414975](../AppData/Roaming/Typora/typora-user-images/image-20250517130414975.png)

###### ä»¥ä¸Šç¬¬ä¸€ç§é—®é¢˜çš„è§£å†³

![image-20250518000101184](../AppData/Roaming/Typora/typora-user-images/image-20250518000101184.png)

![image-20250518000707664](../AppData/Roaming/Typora/typora-user-images/image-20250518000707664.png)

###### ç¬¬äºŒç§é—®é¢˜çš„è§£å†³

![image-20250518001306499](../AppData/Roaming/Typora/typora-user-images/image-20250518001306499.png)



## æ ¸å¿ƒç¼–ç¨‹

### å¸¸ç”¨API

#### åŸºæœ¬æ•°æ®ç±»å‹åŒ…è£…ç±»

![image-20250519103102632](../AppData/Roaming/Typora/typora-user-images/image-20250519103102632.png)

![image-20250519102509425](../AppData/Roaming/Typora/typora-user-images/image-20250519102509425.png)

![image-20250519102726359](../AppData/Roaming/Typora/typora-user-images/image-20250519102726359.png)

![image-20250519102859893](../AppData/Roaming/Typora/typora-user-images/image-20250519102859893.png)

#### Javaä¸­çš„æ—¶é—´

![image-20250519110343701](../AppData/Roaming/Typora/typora-user-images/image-20250519110343701.png)

**Dateæœ€æ“…é•¿æ‹¿åˆ°æ—¶é—´å’Œåšæ—¶é—´å·®**

![image-20250519110232153](../AppData/Roaming/Typora/typora-user-images/image-20250519110232153.png)



**ä¸‹é¢æ˜¯Calendarç”¨æ³•**

![image-20250519110049608](../AppData/Roaming/Typora/typora-user-images/image-20250519110049608.png)

![image-20250519105935685](../AppData/Roaming/Typora/typora-user-images/image-20250519105935685.png)

#### æ ¼å¼åŒ–æ—¶é—´

![image-20250519111111859](../AppData/Roaming/Typora/typora-user-images/image-20250519111111859.png)

![image-20250519111453978](../AppData/Roaming/Typora/typora-user-images/image-20250519111453978.png)

![image-20250519111317123](../AppData/Roaming/Typora/typora-user-images/image-20250519111317123.png)

#### Stringç±»

**å­—ç¬¦ä¸²æ˜¯ä¸å¯å˜çš„æ•°æ®ç±»å‹ï¼Œæ”¹å˜å­—ç¬¦ä¸²çš„æ“ä½œéƒ½æ˜¯è¿”å›ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²**

![image-20250519233328606](../AppData/Roaming/Typora/typora-user-images/image-20250519233328606.png)

![image-20250519233852260](../AppData/Roaming/Typora/typora-user-images/image-20250519233852260.png)

![image-20250519234204853](../AppData/Roaming/Typora/typora-user-images/image-20250519234204853.png)

#### StringBuilderå’ŒStringBuffer

æ¯”Stringçš„ä¼˜åŠ¿æ˜¯è‡ªèº«å¯å˜

![image-20250520000616701](../AppData/Roaming/Typora/typora-user-images/image-20250520000616701.png)

![image-20250520000517992](../AppData/Roaming/Typora/typora-user-images/image-20250520000517992.png)

### IOæµ

#### ç®€ä»‹

![image-20250520001408516](../AppData/Roaming/Typora/typora-user-images/image-20250520001408516.png)

#### æ–‡ä»¶æ“ä½œFileç±»

**1æ˜¯æ‹¿æ–‡ä»¶å¯¹è±¡ï¼ŒäºŒæ˜¯æ‹¿æ–‡ä»¶å**

![image-20250520162111106](../AppData/Roaming/Typora/typora-user-images/image-20250520162111106.png)

**ç›¸å¯¹è·¯å¾„åˆ›å»ºæ–‡ä»¶ä¸€å®šè¦å…ˆåˆ›å»ºæ–‡ä»¶å¤¹ï¼Œå¦‚ä¸‹å›¾**

![image-20250520162607956](../AppData/Roaming/Typora/typora-user-images/image-20250520162607956.png)

#### èŠ‚ç‚¹æµ

##### åˆ†ç±»

æ³¨æ„è¿™å¥è¯

![image-20250520172728426](../AppData/Roaming/Typora/typora-user-images/image-20250520172728426.png)

æ–‡ä»¶æµæ˜¯å­ç±»

![image-20250520172602684](../AppData/Roaming/Typora/typora-user-images/image-20250520172602684.png

![](../AppData/Roaming/Typora/typora-user-images/image-20250520172544413.png)

##### è¯¦ç»†è§£é‡Š

![image-20250520172049495](../AppData/Roaming/Typora/typora-user-images/image-20250520172049495.png)

**å­—èŠ‚æµä¸èƒ½è¯»ä¸­æ–‡ï¼Œåªèƒ½è¯»ä¸€åŠ**

##### å­—èŠ‚æµ

FileInputStreamè¯»æ–¹æ³•

![image-20250520174000973](../AppData/Roaming/Typora/typora-user-images/image-20250520174000973.png)

FileOutputStreamå†™æ–¹æ³•

![image-20250520174510243](../AppData/Roaming/Typora/typora-user-images/image-20250520174510243.png)

##### å­—ç¬¦æµ

![image-20250520174732969](../AppData/Roaming/Typora/typora-user-images/image-20250520174732969.png)

![image-20250520174813686](../AppData/Roaming/Typora/typora-user-images/image-20250520174813686.png)

##### å¦‚ä½•é€‰æ‹©

**è¯»è§†é¢‘é€‰å­—èŠ‚æµï¼Œè¯»æ–‡å­—é€‰å­—ç¬¦æµ**

![image-20250520174919421](../AppData/Roaming/Typora/typora-user-images/image-20250520174919421.png)

#### å¤„ç†æµ

##### ä»‹ç»

![image-20250521150931308](../AppData/Roaming/Typora/typora-user-images/image-20250521150931308.png)

##### ç¼“å†²æµ

è¦å¥—åœ¨èŠ‚ç‚¹ä¸Šï¼Œå¦‚å›¾

![image-20250521151115539](../AppData/Roaming/Typora/typora-user-images/image-20250521151115539.png)

**Bufferedreaderå¾ˆæ–¹ä¾¿ï¼Œå»ºè®®ä½¿ç”¨ï¼ˆè¯»å–çš„æ˜¯å­—ç¬¦æµï¼‰**ï¼Œå…¶ä»–çš„Bufferedè·ŸFIleå¼€å¤´çš„ä¸€æ¨¡ä¸€æ ·å»ºè®®ä¸ä½¿ç”¨

![image-20250521151446058](../AppData/Roaming/Typora/typora-user-images/image-20250521151446058.png)

##### è½¬æ¢æµ

è¿™é‡Œæ˜¯å­—èŠ‚æµå…ˆè½¬æ¢æˆå­—ç¬¦æµï¼ˆIputStreamReaderï¼‰ï¼Œå†åŠ ä¸Šç¼“å†²åŒº

![image-20250521154511405](../AppData/Roaming/Typora/typora-user-images/image-20250521154511405.png)

è¿™é‡Œä¹Ÿæ˜¯å…ˆè½¬æ¢æˆå­—ç¬¦æµ

![image-20250521154354485](../AppData/Roaming/Typora/typora-user-images/image-20250521154354485.png)

##### å¯¹è±¡æµ

æ˜¯ä»€ä¹ˆï¼š

![image-20250521155648892](../AppData/Roaming/Typora/typora-user-images/image-20250521155648892.png)

å†™

![image-20250521155822539](../AppData/Roaming/Typora/typora-user-images/image-20250521155822539.png)



è¯»

![image-20250521155737108](../AppData/Roaming/Typora/typora-user-images/image-20250521155737108.png)



#### æ–‡ä»¶ä¿®æ”¹

**æ€è·¯**

![image-20250522144126135](../AppData/Roaming/Typora/typora-user-images/image-20250522144126135.png)

ä»£ç 

![image-20250522144559949](../AppData/Roaming/Typora/typora-user-images/image-20250522144559949.png)



### å¤šçº¿ç¨‹

#### å¤šçº¿ç¨‹æ„Ÿæ‚Ÿ

å…¶å®å¯ä»¥ç®€å•ç†è§£ï¼Œå¦‚æœåœ¨ä¸€ä¸ªä¸»å‡½æ•°å†…å¼€äº†å¤šä¸ªstartï¼Œå°±ç›¸å½“äºè¿™å‡ ä¸ªstartåŒæ—¶è¿›è¡Œ

#### æ“ä½œç³»ç»Ÿç®€ä»‹

![image-20250522150438947](../AppData/Roaming/Typora/typora-user-images/image-20250522150438947.png)

#### ä»€ä¹ˆæ˜¯è¿›ç¨‹ï¼Œä»€ä¹ˆæ˜¯çº¿ç¨‹

![image-20250522152552427](../AppData/Roaming/Typora/typora-user-images/image-20250522152552427.png)

#### å®ç°çš„ä¸¤ç§æ–¹æ³•

![image-20250522160338951](../AppData/Roaming/Typora/typora-user-images/image-20250522160338951.png)

##### æ–¹æ³•ä¸€



![image-20250522160308938](../AppData/Roaming/Typora/typora-user-images/image-20250522160308938.png)

![image-20250522160233831](../AppData/Roaming/Typora/typora-user-images/image-20250522160233831.png)

##### æ–¹æ³•äºŒ



![image-20250522160513808](../AppData/Roaming/Typora/typora-user-images/image-20250522160513808.png)

![image-20250522160434837](../AppData/Roaming/Typora/typora-user-images/image-20250522160434837.png)

#### çº¿ç¨‹ç›¸å…³æ“ä½œ

##### çº¿ç¨‹ä¸­ç›¸å…³æ–¹æ³•

![image-20250523102949670](../AppData/Roaming/Typora/typora-user-images/image-20250523102949670.png)

##### è®¾ç½®ä¼˜å…ˆçº§

![image-20250523103902762](../AppData/Roaming/Typora/typora-user-images/image-20250523103902762.png)

##### sleepæ–¹æ³•

![image-20250523104045034](../AppData/Roaming/Typora/typora-user-images/image-20250523104045034.png)



##### joinæ–¹æ³•

![image-20250523102111529](../AppData/Roaming/Typora/typora-user-images/image-20250523102111529.png)

##### yield

**æ”¾å¼ƒäº†ä¸ä¸€å®šæ„å‘³ç€åè·‘**

![image-20250523104351476](../AppData/Roaming/Typora/typora-user-images/image-20250523104351476.png)

##### interrupt



![image-20250523104644582](../AppData/Roaming/Typora/typora-user-images/image-20250523104644582.png)

![image-20250523104601874](../AppData/Roaming/Typora/typora-user-images/image-20250523104601874.png)

#### çº¿ç¨‹åŒæ­¥



##### æ–¹æ³•ç®€ä»‹

![image-20250523154209382](../AppData/Roaming/Typora/typora-user-images/image-20250523154209382.png)

##### ç¬¬ä¸€ç§æ–¹æ³•

![image-20250523154426097](../AppData/Roaming/Typora/typora-user-images/image-20250523154426097.png)



##### ç¬¬äºŒç§æ–¹æ³•æœ€æ¨èï¼ˆä»–æœ€çµæ´»ï¼‰

![image-20250523155754147](../AppData/Roaming/Typora/typora-user-images/image-20250523155754147.png)

![image-20250523155715963](../AppData/Roaming/Typora/typora-user-images/image-20250523155715963.png)

![image-20250523154331702](../AppData/Roaming/Typora/typora-user-images/image-20250523154331702.png)

#### æ­»é”

![image-20250523162321067](../AppData/Roaming/Typora/typora-user-images/image-20250523162321067.png)

##### ç¤ºèŒƒ

![image-20250523160636976](../AppData/Roaming/Typora/typora-user-images/image-20250523160636976.png)

![image-20250523162428091](../AppData/Roaming/Typora/typora-user-images/image-20250523162428091.png)

#### çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ

![image-20250523163023898](../AppData/Roaming/Typora/typora-user-images/image-20250523163023898.png)

#### ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹

![image-20250523224808084](../AppData/Roaming/Typora/typora-user-images/image-20250523224808084.png)

ä¸»å‡½æ•°

![image-20250523224854833](../AppData/Roaming/Typora/typora-user-images/image-20250523224854833.png)

![image-20250523235940913](../AppData/Roaming/Typora/typora-user-images/image-20250523235940913.png)

![image-20250523225101969](../AppData/Roaming/Typora/typora-user-images/image-20250523225101969.png)

![image-20250523225148113](../AppData/Roaming/Typora/typora-user-images/image-20250523225148113.png)



## ç½‘ç»œç¼–ç¨‹

### ç½‘ç»œç®€ä»‹

![image-20250525211127419](../AppData/Roaming/Typora/typora-user-images/image-20250525211127419.png)

äº’è”ç½‘åè®®



![image-20250525210848070](../AppData/Roaming/Typora/typora-user-images/image-20250525210848070.png)

ç‰©ç†å±‚

![image-20250525211202733](../AppData/Roaming/Typora/typora-user-images/image-20250525211202733.png)

æ•°æ®é“¾è·¯å±‚

![image-20250525211325801](../AppData/Roaming/Typora/typora-user-images/image-20250525211325801.png)

![image-20250525211644986](../AppData/Roaming/Typora/typora-user-images/image-20250525211644986.png)

ç½‘ç»œå±‚

å†…éƒ¨å‘æ¶ˆæ¯ï¼Œæœ‰å­ç½‘æ©ç 

![image-20250525212237369](../AppData/Roaming/Typora/typora-user-images/image-20250525212237369.png)

![image-20250525220002159](../AppData/Roaming/Typora/typora-user-images/image-20250525220002159.png)

ä¼ è¾“å±‚

![image-20250525220942955](../AppData/Roaming/Typora/typora-user-images/image-20250525220942955.png)





TCP

![image-20250525220642701](../AppData/Roaming/Typora/typora-user-images/image-20250525220642701.png)

UDP

![image-20250525220806970](../AppData/Roaming/Typora/typora-user-images/image-20250525220806970.png)

ARPå°±æ˜¯è·å–å¯¹æ–¹MACçš„åè®®

è¿™é‡Œçš„IPå¤´æ˜¯å¯¹æ–¹çš„IPå¤´

![image-20250525221949105](../AppData/Roaming/Typora/typora-user-images/image-20250525221949105.png)

çŸ¥è¯†ç‚¹

![image-20250525222518389](../AppData/Roaming/Typora/typora-user-images/image-20250525222518389.png)

### ServerSocketå’ŒSocket

![image-20250714214506571](../AppData/Roaming/Typora/typora-user-images/image-20250714214506571.png)

![image-20250714214527155](../AppData/Roaming/Typora/typora-user-images/image-20250714214527155.png)





### TCPç¼–ç¨‹

#### å†™åœ¨å‰é¢çš„ä»‹ç»

![image-20250526105020810](../AppData/Roaming/Typora/typora-user-images/image-20250526105020810.png)



#### IPåœ°å€ä¸ç«¯å£å·åŒºåˆ«

![image-20250713143903910](../AppData/Roaming/Typora/typora-user-images/image-20250713143903910.png)

![image-20250713144026700](../AppData/Roaming/Typora/typora-user-images/image-20250713144026700.png)

![image-20250713144059703](../AppData/Roaming/Typora/typora-user-images/image-20250713144059703.png)

#### ç±»æ¯”

![image-20250713141927813](../AppData/Roaming/Typora/typora-user-images/image-20250713141927813.png)







#### socketç¼–ç¨‹

![image-20250526105454377](../AppData/Roaming/Typora/typora-user-images/image-20250526105454377.png)

![image-20250526105558024](../AppData/Roaming/Typora/typora-user-images/image-20250526105558024.png)

![image-20250526105612506](../AppData/Roaming/Typora/typora-user-images/image-20250526105612506.png)

#### socketçš„æ•°æ®ä¼ é€

![image-20250526115850098](../AppData/Roaming/Typora/typora-user-images/image-20250526115850098.png)

![image-20250526120324485](../AppData/Roaming/Typora/typora-user-images/image-20250526120324485.png)

![image-20250526120400162](../AppData/Roaming/Typora/typora-user-images/image-20250526120400162.png)

#### å¤šçº¿ç¨‹è§£å†³èŠå¤©é—®é¢˜

![image-20250527121614797](../AppData/Roaming/Typora/typora-user-images/image-20250527121614797.png)

![image-20250527121650403](../AppData/Roaming/Typora/typora-user-images/image-20250527121650403.png)

æ¥æ”¶æ•°æ®

![image-20250527121837326](../AppData/Roaming/Typora/typora-user-images/image-20250527121837326.png)

å‘é€æ•°æ®

![image-20250713135527505](../AppData/Roaming/Typora/typora-user-images/image-20250713135527505.png)

### UDPç¼–ç¨‹

#### åŸºç¡€è¯­æ³•

dsç«¯å£å·

![image-20250716190602580](../AppData/Roaming/Typora/typora-user-images/image-20250716190602580.png)

dpéƒ½æ˜¯å¯¹æ–¹

![image-20250716192537447](../AppData/Roaming/Typora/typora-user-images/image-20250716192537447.png)



#### åŸºæœ¬æµç¨‹

![image-20250713220214430](../AppData/Roaming/Typora/typora-user-images/image-20250713220214430.png)

![image-20250713220345754](../AppData/Roaming/Typora/typora-user-images/image-20250713220345754.png)

#### å¤šäººèŠå¤©å®¤

![image-20250714120322884](../AppData/Roaming/Typora/typora-user-images/image-20250714120322884.png)

![image-20250714120518747](../AppData/Roaming/Typora/typora-user-images/image-20250714120518747.png)

![image-20250714120900836](../AppData/Roaming/Typora/typora-user-images/image-20250714120900836.png)

![image-20250714123049852](../AppData/Roaming/Typora/typora-user-images/image-20250714123049852.png)

ä¸¤ä¸ªçº¿ç¨‹

![image-20250714123319045](../AppData/Roaming/Typora/typora-user-images/image-20250714123319045.png)

![image-20250714123344347](../AppData/Roaming/Typora/typora-user-images/image-20250714123344347.png)



#### è¯­æ³•è®²è§£

// 1. åˆ›å»ºç¼“å†²åŒºï¼ˆ1024å­—èŠ‚ç©ºæ•°ç»„ï¼‰
byte[] bytes = new byte[1024]; 

// 2. åˆ›å»ºæ•°æ®åŒ…å®¹å™¨ï¼Œå…³è”ç¼“å†²åŒº
DatagramPacket dp = new DatagramPacket(bytes, 1024); 

// 3. å…³é”®æ“ä½œï¼šé˜»å¡æ¥æ”¶æ•°æ®ï¼ˆçº¿ç¨‹æš‚åœç›´åˆ°æ•°æ®åˆ°è¾¾ï¼‰
ds.receive(dp);  // æ•°æ®ä¼šè¢«å¡«å……åˆ° bytes æ•°ç»„ä¸­

![image-20250714121215704](../AppData/Roaming/Typora/typora-user-images/image-20250714121215704.png)

# Javaåç«¯å¼€å‘Web

## åç»­

![image-20250828175656800](../AppData/Roaming/Typora/typora-user-images/image-20250828175656800.png)

## åŸºç¡€

#### httpåè®®

![image-20250717173110283](../AppData/Roaming/Typora/typora-user-images/image-20250717173110283.png)



#### httpè¯·æ±‚å“åº”æ­¥éª¤

![image-20250717173417118](../AppData/Roaming/Typora/typora-user-images/image-20250717173417118.png)

![image-20250717173549501](../AppData/Roaming/Typora/typora-user-images/image-20250717173549501.png)

![image-20250717222910878](../AppData/Roaming/Typora/typora-user-images/image-20250717222910878.png)

#### httpè¯·æ±‚æ–¹æ³•

![image-20250717223328634](../AppData/Roaming/Typora/typora-user-images/image-20250717223328634.png)

#### ä¸¤ç§å¼€å‘æ¨¡å‹B/Så’ŒC/Sä¼˜ç¼ºç‚¹

![image-20250717223516156](../AppData/Roaming/Typora/typora-user-images/image-20250717223516156.png)

![image-20250717223734799](../AppData/Roaming/Typora/typora-user-images/image-20250717223734799.png)

#### WebæœåŠ¡å™¨

![image-20250717230649886](../AppData/Roaming/Typora/typora-user-images/image-20250717230649886.png)



### Servlet

#### ä»€ä¹ˆæ˜¯Servlet

![image-20250718220906441](../AppData/Roaming/Typora/typora-user-images/image-20250718220906441.png)

#### Servlet API

![image-20250718221037378](../AppData/Roaming/Typora/typora-user-images/image-20250718221037378.png)

#### Servleté€»è¾‘

![image-20250719003430984](../AppData/Roaming/Typora/typora-user-images/image-20250719003430984.png)

#### Servletå·¥ä½œåŸç†

æ³¨æ„è¿™ä¸ªæ˜¯å•ä¾‹æ¨¡å¼

![image-20250719175112257](../AppData/Roaming/Typora/typora-user-images/image-20250719175112257.png)

#### Servletç”Ÿå­˜å‘¨æœŸ

![image-20250719183111935](../AppData/Roaming/Typora/typora-user-images/image-20250719183111935.png)

#### è¯·æ±‚

![image-20250719204516339](../AppData/Roaming/Typora/typora-user-images/image-20250719204516339.png)

#### getä¸post

##### å®¢æˆ·ç«¯å¦‚ä½•å‘é€ä¿¡æ¯ç»™æœåŠ¡ç«¯

![image-20250719230841390](../AppData/Roaming/Typora/typora-user-images/image-20250719230841390.png)

##### å¤„ç†ä¹±ç 

![image-20250719231002963](../AppData/Roaming/Typora/typora-user-images/image-20250719231002963.png)

##### get/postçš„åŒºåˆ«

![image-20250719231946356](../AppData/Roaming/Typora/typora-user-images/image-20250719231946356.png)

#### å“åº”

![image-20250719233640973](../AppData/Roaming/Typora/typora-user-images/image-20250719233640973.png)

**é‡å®šå‘ä¸è½¬å‘åŒºåˆ«**

![image-20250719234339547](../AppData/Roaming/Typora/typora-user-images/image-20250719234339547.png)

**åŒºåˆ«**

![image-20250719234509238](../AppData/Roaming/Typora/typora-user-images/image-20250719234509238.png)



![image-20250719234009813](../AppData/Roaming/Typora/typora-user-images/image-20250719234009813.png)

#### sessionä¼šè¯

![image-20250720170828311](../AppData/Roaming/Typora/typora-user-images/image-20250720170828311.png)

![image-20250720171241992](../AppData/Roaming/Typora/typora-user-images/image-20250720171241992.png)

#### åˆå§‹åŒ–å‚æ•°è®¾ç½®



![image-20250720172321999](../AppData/Roaming/Typora/typora-user-images/image-20250720172321999.png)

![image-20250720172537477](../AppData/Roaming/Typora/typora-user-images/image-20250720172537477.png)

#### servlet3.0æ³¨è§£å®ç°

##### èµ„æ–™

![image-20250720172638706](../AppData/Roaming/Typora/typora-user-images/image-20250720172638706.png)

![image-20250720174336949](../AppData/Roaming/Typora/typora-user-images/image-20250720174336949.png)

![image-20250720180824025](../AppData/Roaming/Typora/typora-user-images/image-20250720180824025.png)

![image-20250720205744522](../AppData/Roaming/Typora/typora-user-images/image-20250720205744522.png)

æ³¨è§£

![image-20250720215020943](../AppData/Roaming/Typora/typora-user-images/image-20250720215020943.png)

![image-20250720215104633](../AppData/Roaming/Typora/typora-user-images/image-20250720215104633.png)

åœ¨ Java Servlet ä¸­ï¼Œ`doGet()` å’Œ `doPost()` æ˜¯ä¸¤ä¸ªæ ¸å¿ƒæ–¹æ³•ï¼Œç”¨äºå¤„ç†ä¸åŒç±»å‹çš„ HTTP è¯·æ±‚ã€‚å®ƒä»¬å…±åŒæ„æˆäº† Servlet å¤„ç†å®¢æˆ·ç«¯è¯·æ±‚çš„åŸºç¡€ï¼š

##### 1. `doGet()` æ–¹æ³•

java

```
@Override
protected void doGet(HttpServletRequest req, HttpServletResponse resp) {
    // å¤„ç† GET è¯·æ±‚çš„é€»è¾‘
}
```

- **ä½œç”¨**ï¼šä¸“é—¨å¤„ç† HTTP **GET** è¯·æ±‚
- **å…¸å‹åœºæ™¯**ï¼š
  - æµè§ˆå™¨åœ°å€æ ç›´æ¥è¾“å…¥ URL
  - ç‚¹å‡»ç½‘é¡µé“¾æ¥ (`<a href="...">`)
  - è¡¨å•æäº¤æŒ‡å®š `method="GET"`
  - ç½‘é¡µåŠ è½½å›¾ç‰‡/CSS/JS ç­‰é™æ€èµ„æº
- **ç‰¹ç‚¹**ï¼š
  - è¯·æ±‚å‚æ•°é™„åŠ åœ¨ URL åï¼ˆå¦‚ `?id=123&name=foo`ï¼‰
  - æ•°æ®å¯è§ï¼ˆæ˜¾ç¤ºåœ¨æµè§ˆå™¨åœ°å€æ ï¼‰
  - æœ‰é•¿åº¦é™åˆ¶ï¼ˆçº¦ 2048 å­—ç¬¦ï¼‰
  - å¯è¢«ç¼“å­˜/æ”¶è—/ä¹¦ç­¾ä¿å­˜
  - **å¹‚ç­‰æ“ä½œ**ï¼šå¤šæ¬¡æ‰§è¡Œç»“æœç›¸åŒï¼ˆåªè¯»æ“ä½œï¼‰

##### 2. `doPost()` æ–¹æ³•

java

```
@Override
protected void doPost(HttpServletRequest req, HttpServletResponse resp) {
    // å¤„ç† POST è¯·æ±‚çš„é€»è¾‘
}
```

- **ä½œç”¨**ï¼šä¸“é—¨å¤„ç† HTTP **POST** è¯·æ±‚
- **å…¸å‹åœºæ™¯**ï¼š
  - è¡¨å•æäº¤æŒ‡å®š `method="POST"`
  - æ–‡ä»¶ä¸Šä¼ 
  - æ•æ„Ÿæ•°æ®æäº¤ï¼ˆç™»å½•/æ”¯ä»˜ï¼‰
  - AJAX æ•°æ®æäº¤
- **ç‰¹ç‚¹**ï¼š
  - è¯·æ±‚å‚æ•°é€šè¿‡è¯·æ±‚ä½“ä¼ è¾“ï¼ˆä¸åœ¨ URL ä¸­ï¼‰
  - æ•°æ®ä¸å¯è§ï¼ˆä¸æ˜¾ç¤ºåœ¨åœ°å€æ ï¼‰
  - æ— é•¿åº¦é™åˆ¶ï¼ˆé€‚åˆå¤§æ•°æ®é‡ï¼‰
  - ä¸å¯è¢«ç¼“å­˜/æ”¶è—
  - **éå¹‚ç­‰æ“ä½œ**ï¼šæ¯æ¬¡æ‰§è¡Œå¯èƒ½æ”¹å˜æœåŠ¡å™¨çŠ¶æ€ï¼ˆå¦‚åˆ›å»ºè®¢å•ï¼‰

#### é‡å®šå‘

åœ¨ Java Servlet ä¸­ï¼Œ**é‡å®šå‘ï¼ˆRedirectï¼‰** æ˜¯ä¸€ç§å¸¸è§çš„ Web å¯¼èˆªæŠ€æœ¯ï¼Œå®ƒæ¶‰åŠ `HttpServletRequest` å’Œ `HttpServletResponse` å¯¹è±¡ï¼Œä½†ä¸»è¦ç”± `HttpServletResponse` å¯¹è±¡é©±åŠ¨ã€‚å®ƒæŒ‡çš„æ˜¯**æŒ‡ç¤ºå®¢æˆ·ç«¯ï¼ˆé€šå¸¸æ˜¯æµè§ˆå™¨ï¼‰å‘ä¸€ä¸ªå®Œå…¨ä¸åŒçš„ URL å‘èµ·ä¸€ä¸ªæ–°çš„è¯·æ±‚**ã€‚

##### é‡å®šå‘çš„æ ¸å¿ƒæœºåˆ¶ï¼ˆä½¿ç”¨ `HttpServletResponse`ï¼‰

1. **æœåŠ¡å™¨ç«¯æŒ‡ä»¤ï¼š** å½“ Servlet å¤„ç†ä¸€ä¸ªè¯·æ±‚ï¼ˆ`request`ï¼‰æ—¶ï¼Œå®ƒå†³å®šéœ€è¦å°†å®¢æˆ·ç«¯å¼•å¯¼åˆ°å¦ä¸€ä¸ªèµ„æºï¼ˆå¯ä»¥æ˜¯å¦ä¸€ä¸ª Servletã€JSPã€HTML é¡µé¢ï¼Œç”šè‡³æ˜¯å¤–éƒ¨ç½‘ç«™ï¼‰ã€‚
2. **è®¾ç½®çŠ¶æ€ç å’Œ Location å¤´ï¼š** Servlet è°ƒç”¨ `response.sendRedirect(String location)` æ–¹æ³•ã€‚
   - è¿™ä¸ªæ–¹æ³•ä¼šè‡ªåŠ¨è®¾ç½® HTTP å“åº”çš„çŠ¶æ€ç ä¸º `302`ï¼ˆFound / Temporary Redirectï¼‰æˆ– `307`ï¼ˆTemporary Redirectï¼‰ï¼Œè¡¨æ˜è¿™æ˜¯ä¸€ä¸ªä¸´æ—¶é‡å®šå‘ï¼ˆç°ä»£æµè§ˆå™¨/è§„èŒƒæ›´å€¾å‘äºä½¿ç”¨ 307/308 æ¥ä¿è¯æ–¹æ³•ä¸å˜ï¼‰ã€‚å¦‚æœéœ€è¦æ°¸ä¹…é‡å®šå‘ï¼Œå¯ä»¥æ‰‹åŠ¨è®¾ç½®çŠ¶æ€ç  `301` (Moved Permanently) æˆ– `308` (Permanent Redirect) å’Œ `Location` å¤´ã€‚
   - å®ƒ**å¿…é¡»**è®¾ç½® `Location` å“åº”å¤´ï¼Œå…¶å€¼å°±æ˜¯å®¢æˆ·ç«¯åº”è¯¥å»è¯·æ±‚çš„æ–° URLã€‚
3. **å‘é€å“åº”ï¼š** åŒ…å« `302/307` çŠ¶æ€ç å’Œ `Location` å¤´çš„å“åº”è¢«å‘é€å›å®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰ã€‚
4. **å®¢æˆ·ç«¯å‘èµ·æ–°è¯·æ±‚ï¼š** å®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰æ¥æ”¶åˆ°è¿™ä¸ªå“åº”ï¼Œ**è¯†åˆ«åˆ°çŠ¶æ€ç æ˜¯ 3xx å¹¶çœ‹åˆ° `Location` å¤´**ã€‚
5. **è‡ªåŠ¨å¯¼èˆªï¼š** æµè§ˆå™¨**è‡ªåŠ¨**ã€**ç«‹å³**å‘ `Location` å¤´æŒ‡å®šçš„æ–° URL å‘èµ·ä¸€ä¸ª**å…¨æ–°çš„ HTTP GET è¯·æ±‚**ï¼ˆå³ä½¿åŸå§‹è¯·æ±‚æ˜¯ POSTï¼Œæ–°è¯·æ±‚é»˜è®¤ä¹Ÿæ˜¯ GETï¼‰ã€‚
6. **æ–°è¯·æ±‚å¤„ç†ï¼š** æœåŠ¡å™¨æ¥æ”¶åˆ°è¿™ä¸ªæ–°çš„è¯·æ±‚ï¼Œç”±ç›¸åº”çš„èµ„æºï¼ˆServlet/JSPç­‰ï¼‰å¤„ç†å¹¶ç”Ÿæˆæœ€ç»ˆå“åº”ç»™å®¢æˆ·ç«¯ã€‚

##### å…³é”®ç‰¹æ€§

- **ä¸¤æ¬¡è¯·æ±‚ï¼š** æ¶‰åŠä¸¤æ¬¡å®Œå…¨ç‹¬ç«‹çš„ HTTP è¯·æ±‚/å“åº”å¾ªç¯ã€‚ç¬¬ä¸€ä¸ªè¯·æ±‚ç”±åˆå§‹ Servlet å¤„ç†å¹¶è¿”å›é‡å®šå‘æŒ‡ä»¤ï¼›ç¬¬äºŒä¸ªè¯·æ±‚ç”±ç›®æ ‡èµ„æºå¤„ç†ã€‚
- **æµè§ˆå™¨å‚ä¸ï¼š** é‡å®šå‘æ˜¯å®¢æˆ·ç«¯è¡Œä¸ºï¼Œéœ€è¦æµè§ˆå™¨çš„é…åˆæ¥å‘èµ·æ–°è¯·æ±‚ã€‚
- **URL æ”¹å˜ï¼š** æµè§ˆå™¨åœ°å€æ ä¸­çš„ URL ä¼šæ›´æ–°ä¸º `Location` å¤´æŒ‡å®šçš„æ–° URLã€‚
- **æ•°æ®éš”ç¦»ï¼š** ç¬¬ä¸€ä¸ªè¯·æ±‚ (`request`) ä¸­è®¾ç½®çš„å±æ€§ï¼ˆé€šè¿‡ `request.setAttribute()`ï¼‰**ä¸ä¼š**ä¼ é€’åˆ°ç¬¬äºŒä¸ªè¯·æ±‚ä¸­ã€‚å› ä¸ºè¿™æ˜¯ä¸¤ä¸ªç‹¬ç«‹çš„ `HttpServletRequest` å¯¹è±¡ã€‚**å¦‚æœéœ€è¦ä¼ é€’æ•°æ®ï¼Œå¿…é¡»ä½¿ç”¨ URL å‚æ•°ï¼ˆé™„åŠ åˆ°é‡å®šå‘ URL åé¢ï¼‰ã€Session (`HttpSession`) æˆ– Cookiesã€‚**
- **ç›®æ ‡çµæ´»ï¼š** ç›®æ ‡ URL å¯ä»¥æ˜¯åŒä¸€ä¸ª Web åº”ç”¨å†…çš„èµ„æºï¼Œä¹Ÿå¯ä»¥æ˜¯å¦ä¸€ä¸ª Web åº”ç”¨ï¼Œç”šè‡³æ˜¯å®Œå…¨ä¸åŒçš„åŸŸï¼ˆç½‘ç«™ï¼‰ã€‚`sendRedirect()` çš„å‚æ•°å¯ä»¥æ˜¯ç›¸å¯¹è·¯å¾„ï¼ˆç›¸å¯¹äºå½“å‰è¯·æ±‚çš„ URLï¼‰æˆ–ç»å¯¹è·¯å¾„ï¼ˆåŒ…å«åè®®ã€åŸŸåã€ç«¯å£å’Œåº”ç”¨ä¸Šä¸‹æ–‡è·¯å¾„çš„å®Œæ•´ URLï¼‰ã€‚å®¹å™¨é€šå¸¸ä¼šå°†ç›¸å¯¹è·¯å¾„è½¬æ¢ä¸ºç»å¯¹ URLã€‚
- **ä¸»è¦æ–¹æ³•ï¼š** `response.sendRedirect(location)`

##### ä¸å¦ä¸€ä¸ªé‡è¦æ¦‚å¿µçš„åŒºåˆ«ï¼š**è¯·æ±‚è½¬å‘ï¼ˆForwardï¼‰**

ç”¨æˆ·é—®é¢˜ä¸­æåˆ°çš„â€œå¦ä¸€ä¸ªâ€ï¼Œæœ€æ ¸å¿ƒã€æœ€å¸¸ä¸é‡å®šå‘æ··æ·†çš„æ¦‚å¿µå°±æ˜¯ **è¯·æ±‚è½¬å‘ï¼ˆForwardï¼‰**ã€‚å®ƒä»¬éƒ½æ˜¯æœåŠ¡å™¨ç«¯æ§åˆ¶å¯¼èˆªçš„æ–¹å¼ï¼Œä½†æœºåˆ¶å’Œç”¨é€”æˆªç„¶ä¸åŒï¼š

| ç‰¹æ€§           | é‡å®šå‘ (Redirect)                                            | è¯·æ±‚è½¬å‘ (Forward)                                           |
| :------------- | :----------------------------------------------------------- | :----------------------------------------------------------- |
| **æœºåˆ¶**       | **å®¢æˆ·ç«¯è¡Œä¸º**ã€‚æœåŠ¡å™¨å‘é€æŒ‡ä»¤ï¼Œ**æµè§ˆå™¨å‘èµ·æ–°è¯·æ±‚**ã€‚       | **æœåŠ¡å™¨å†…éƒ¨è¡Œä¸º**ã€‚æœåŠ¡å™¨å°†è¯·æ±‚**åœ¨å†…éƒ¨ç§»äº¤**ç»™å¦ä¸€ä¸ªèµ„æºå¤„ç†ã€‚ |
| **è¯·æ±‚æ¬¡æ•°**   | **ä¸¤æ¬¡**ç‹¬ç«‹çš„è¯·æ±‚/å“åº”ã€‚                                    | **ä¸€æ¬¡**è¯·æ±‚/å“åº”ã€‚                                          |
| **æµè§ˆå™¨æ„ŸçŸ¥** | **å¯è§**ã€‚æµè§ˆå™¨åœ°å€æ  URL æ”¹å˜ä¸ºæ–° URLã€‚                    | **é€æ˜**ã€‚æµè§ˆå™¨åœ°å€æ  URL **ä¿æŒä¸å˜**ï¼ˆæ˜¾ç¤ºåˆå§‹è¯·æ±‚çš„ URLï¼‰ã€‚ |
| **æ•°æ®å…±äº«**   | **ä¸å…±äº«**ã€‚ç¬¬ä¸€ä¸ªè¯·æ±‚çš„ `request` å±æ€§ä¸¢å¤±ã€‚éœ€é€šè¿‡ URL å‚æ•°ã€Sessionã€Cookies ä¼ é€’ã€‚ | **å…±äº«**ã€‚ä½¿ç”¨åŒä¸€ä¸ª `request` å¯¹è±¡ï¼Œå±æ€§ (`setAttribute/getAttribute`) åœ¨è½¬å‘é“¾ä¸­ä¼ é€’ã€‚ |
| **ç›®æ ‡é™åˆ¶**   | **ä»»æ„ URL**ï¼ˆåŒåº”ç”¨ã€ä¸åŒåº”ç”¨ã€ä¸åŒåŸŸåï¼‰ã€‚                 | **ä»…é™äºåŒä¸€ Web åº”ç”¨ä¸Šä¸‹æ–‡ï¼ˆContextï¼‰å†…çš„èµ„æº**ã€‚           |
| **HTTP æ–¹æ³•**  | æ–°è¯·æ±‚**é»˜è®¤æ€»æ˜¯ GET**ï¼ˆæ— è®ºåŸå§‹è¯·æ±‚æ˜¯ä»€ä¹ˆæ–¹æ³•ï¼‰ã€‚           | **ä¿æŒåŸå§‹è¯·æ±‚æ–¹æ³•**ï¼ˆPOST è½¬å‘åä»æ˜¯ POSTï¼‰ã€‚               |
| **æ€§èƒ½**       | ç¨æ…¢ï¼ˆæ¶‰åŠé¢å¤–çš„å®¢æˆ·ç«¯å¾€è¿”ã€ç½‘ç»œå»¶è¿Ÿï¼‰ã€‚                     | æ›´å¿«ï¼ˆçº¯æœåŠ¡å™¨å†…éƒ¨æ“ä½œï¼Œæ— é¢å¤–ç½‘ç»œå¾€è¿”ï¼‰ã€‚                   |
| **ä¸»è¦æ–¹æ³•**   | `response.sendRedirect(location)`                            | `request.getRequestDispatcher(path).forward(request, response)` |
| **çŠ¶æ€ç **     | è¿”å› `3xx` (å¦‚ 302, 307) + `Location` å¤´ã€‚                   | æœåŠ¡å™¨å†…éƒ¨å¤„ç†ï¼Œæœ€ç»ˆè¿”å› `200` OK (æˆ–ç›®æ ‡èµ„æºè®¾ç½®çš„çŠ¶æ€ç )ã€‚ |
| **å…¸å‹åœºæ™¯**   | * ç™»å½•åè·³è½¬åˆ°ä¸»é¡µã€‚ * è¡¨å•æäº¤æˆåŠŸåè·³è½¬é˜²æ­¢é‡å¤æäº¤ã€‚ * å°†ç”¨æˆ·å¼•å¯¼åˆ°å¤–éƒ¨ç«™ç‚¹ã€‚ * æ—§ URL è¿ç§»åˆ°æ–° URLã€‚ | * MVC æ¨¡å¼ï¼šServlet (Controller) å¤„ç†è¯·æ±‚ï¼Œè½¬å‘ç»™ JSP (View) æ¸²æŸ“ã€‚ * å°†è¯·æ±‚åˆ†æ´¾ç»™ä¸“é—¨çš„å¤„ç†å™¨ï¼ˆå¦‚å¤„ç† Header/Footerï¼‰ã€‚ * éœ€è¦å…±äº«è¯·æ±‚å¤„ç†ç»“æœï¼ˆæ¨¡å‹æ•°æ®ï¼‰åˆ°è§†å›¾å±‚ã€‚ |

##### æ€»ç»“

- **é‡å®šå‘ (`response.sendRedirect()`)**ï¼šå‘Šè¯‰æµè§ˆå™¨â€œè¯·å»å¦ä¸€ä¸ªåœ°æ–¹æ‰¾ä½ è¦çš„ä¸œè¥¿â€ã€‚æµè§ˆå™¨æ”¶åˆ°æŒ‡ä»¤åï¼Œä¼šä¸»åŠ¨å‘èµ·ä¸€ä¸ªå…¨æ–°çš„ GET è¯·æ±‚åˆ°æ–°åœ°å€ã€‚ç»“æœæ˜¯**ä¸¤æ¬¡è¯·æ±‚ï¼ŒURL æ”¹å˜ï¼ŒåŸå§‹è¯·æ±‚æ•°æ®ä¸ä¼ é€’**ã€‚é€‚ç”¨äºå¯¼èˆªåˆ°æ–°ä½ç½®ã€é˜²æ­¢é‡å¤æäº¤ã€è·¨åº”ç”¨/åŸŸè·³è½¬ã€‚
- **è¯·æ±‚è½¬å‘ (`request.getRequestDispatcher().forward()`)**ï¼šå‘Šè¯‰æœåŠ¡å™¨â€œè¯·æŠŠè¿™ä¸ªè¯·æ±‚äº¤ç»™å¦ä¸€ä¸ªä¼™è®¡å¤„ç†ï¼Œå¤„ç†å®Œç›´æ¥å›å¤ç»™å®¢æˆ·ç«¯â€ã€‚æ•´ä¸ªè¿‡ç¨‹å‘ç”Ÿåœ¨æœåŠ¡å™¨å†…éƒ¨ï¼Œæµè§ˆå™¨å®Œå…¨ä¸çŸ¥æƒ…ã€‚ç»“æœæ˜¯**ä¸€æ¬¡è¯·æ±‚ï¼ŒURL ä¸å˜ï¼ŒåŸå§‹è¯·æ±‚æ•°æ®å¯ä¼ é€’**ã€‚é€‚ç”¨äºæœåŠ¡å™¨ç«¯åä½œå¤„ç†è¯·æ±‚ã€MVC è§†å›¾æ¸²æŸ“ã€‚

ç†è§£è¿™ä¸¤è€…çš„åŒºåˆ«å¯¹äºè®¾è®¡æ­£ç¡®çš„ Web åº”ç”¨å¯¼èˆªæµç¨‹ã€æ•°æ®æµå’Œç”¨æˆ·ä½“éªŒè‡³å…³é‡è¦ã€‚é€‰æ‹©ä½¿ç”¨å“ªç§æ–¹å¼å–å†³äºä½ çš„å…·ä½“éœ€æ±‚ï¼šæ˜¯å¦éœ€è¦æ”¹å˜æµè§ˆå™¨åœ°å€ã€æ˜¯å¦éœ€è¦è·¨åº”ç”¨è·³è½¬ã€æ˜¯å¦éœ€è¦ä¿ç•™åŸå§‹è¯·æ±‚æ•°æ®ç­‰ã€‚

#### getAttributå’ŒsetAttributæ–¹æ³•

å¥½çš„ï¼Œæˆ‘ä»¬æ¥è¯¦ç»†è®²è§£ Servlet ä¸­çš„ `getAttribute()` å’Œ `setAttribute()` æ–¹æ³•ã€‚å®ƒä»¬æ˜¯**åœ¨è¯·æ±‚ä½œç”¨åŸŸ (`HttpServletRequest`)ã€ä¼šè¯ä½œç”¨åŸŸ (`HttpSession`) å’Œåº”ç”¨ä½œç”¨åŸŸ (`ServletContext`) ä¸­å­˜å‚¨å’Œæ£€ç´¢æ•°æ®å¯¹è±¡çš„æ ¸å¿ƒæœºåˆ¶**ï¼Œç”¨äºåœ¨ Web åº”ç”¨çš„ä¸åŒç»„ä»¶ï¼ˆServlet, JSP, Filterï¼‰ä¹‹é—´ä¼ é€’ä¿¡æ¯ã€‚

**æ ¸å¿ƒæ¦‚å¿µï¼š**

1. **ä½œç”¨åŸŸ (Scope):** æŒ‡çš„æ˜¯æ•°æ®å¯¹è±¡æœ‰æ•ˆçš„ç”Ÿå‘½å‘¨æœŸå’Œå¯è®¿é—®çš„èŒƒå›´ã€‚
2. **å±æ€§ (Attribute):** æŒ‡çš„å°±æ˜¯ä½ å­˜å‚¨åœ¨ç‰¹å®šä½œç”¨åŸŸå¯¹è±¡ï¼ˆ`request`, `session`, `application`ï¼‰ä¸­çš„ä¸€ä¸ªå‘½åæ•°æ®å¯¹è±¡ã€‚è¿™ä¸ªæ•°æ®å¯¹è±¡å¯ä»¥æ˜¯ä»»ä½• Java å¯¹è±¡ (`Object` ç±»å‹)ã€‚
3. **é”® (Key):** ä¸€ä¸ªå”¯ä¸€çš„å­—ç¬¦ä¸² (`String`)ï¼Œç”¨äºæ ‡è¯†å’Œæ£€ç´¢ç‰¹å®šçš„å±æ€§ã€‚

------

**ä¸€ã€`setAttribute(String name, Object value)`**

- **ä½œç”¨ï¼š** å°†ä¸€ä¸ª Java å¯¹è±¡ (`value`) ä»¥æŒ‡å®šçš„åç§° (`name`) **ç»‘å®šï¼ˆå­˜å‚¨ï¼‰**åˆ°ç‰¹å®šçš„ä½œç”¨åŸŸå¯¹è±¡ä¸­ã€‚

- **å‚æ•°ï¼š**

  - `name`: å±æ€§çš„åç§°ï¼ˆé”®ï¼‰ï¼Œæ˜¯ä¸€ä¸ªå”¯ä¸€çš„å­—ç¬¦ä¸²ã€‚
  - `value`: è¦å­˜å‚¨çš„æ•°æ®å¯¹è±¡æœ¬èº«ï¼ˆå¯ä»¥æ˜¯ `String`, `Integer`, è‡ªå®šä¹‰ `User` å¯¹è±¡, `List`, `Map` ç­‰ä»»ä½• `Object` çš„å­ç±»ï¼‰ã€‚

- **ç‰¹ç‚¹ï¼š**

  - **å­˜å‚¨æ•°æ®ï¼š** è¿™æ˜¯ä¸»è¦çš„å­˜å‚¨æ–¹å¼ã€‚
  - **è¦†ç›–åŒåå±æ€§ï¼š** å¦‚æœæŒ‡å®šçš„ `name` åœ¨å½“å‰ä½œç”¨åŸŸä¸­å·²ç»å­˜åœ¨å¯¹åº”çš„å±æ€§ï¼Œé‚£ä¹ˆæ—§çš„ `value` ä¼šè¢«æ–°çš„ `value` **è¦†ç›–**ã€‚
  - **ä½œç”¨åŸŸå†³å®šç”Ÿå‘½å‘¨æœŸå’Œå¯è§æ€§ï¼š**
    - **`request.setAttribute(...)`:** æ•°æ®åœ¨æ•´ä¸ª **ä¸€æ¬¡ HTTP è¯·æ±‚å¤„ç†å‘¨æœŸ** å†…æœ‰æ•ˆã€‚åŒ…æ‹¬è¯·æ±‚ç»è¿‡çš„ Servletã€Filter ä»¥åŠæœ€ç»ˆé€šè¿‡ `RequestDispatcher.forward(...)` è½¬å‘çš„ JSP æˆ– Servletã€‚**é‡å®šå‘ (`sendRedirect`) åï¼Œæ–°çš„è¯·æ±‚ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ `request` å¯¹è±¡ï¼ŒåŸ `request` ä¸­çš„å±æ€§ä¼šä¸¢å¤±ã€‚**
    - **`session.setAttribute(...)`:** æ•°æ®åœ¨æ•´ä¸ª **ç”¨æˆ·ä¼šè¯** æœŸé—´æœ‰æ•ˆï¼ˆä»ç”¨æˆ·é¦–æ¬¡è®¿é—®æœåŠ¡å™¨å»ºç«‹ Session å¼€å§‹ï¼Œç›´åˆ° Session è¶…æ—¶æˆ–æ˜¾å¼è°ƒç”¨ `session.invalidate()` é”€æ¯ï¼‰ã€‚åŒä¸€ä¸ªç”¨æˆ·ï¼ˆæµè§ˆå™¨ï¼‰çš„å¤šæ¬¡è¯·æ±‚ï¼ˆå³ä½¿æ˜¯é‡å®šå‘åçš„æ–°è¯·æ±‚ï¼‰éƒ½å¯ä»¥è®¿é—®è¿™äº›å±æ€§ã€‚å¸¸ç”¨äºå­˜å‚¨ç”¨æˆ·ç™»å½•çŠ¶æ€ã€è´­ç‰©è½¦å†…å®¹ç­‰ã€‚
    - **`application.setAttribute(...)`:** æ•°æ®åœ¨æ•´ä¸ª **Web åº”ç”¨** çš„ç”Ÿå‘½å‘¨æœŸå†…æœ‰æ•ˆï¼ˆä»åº”ç”¨å¯åŠ¨åˆ°åº”ç”¨åœæ­¢æˆ–æœåŠ¡å™¨å…³é—­ï¼‰ã€‚æ‰€æœ‰è®¿é—®è¯¥åº”ç”¨çš„ç”¨æˆ·çš„æ‰€æœ‰è¯·æ±‚éƒ½å¯ä»¥è®¿é—®è¿™äº›å±æ€§ã€‚å¸¸ç”¨äºå­˜å‚¨å…¨å±€é…ç½®ä¿¡æ¯ã€å…±äº«èµ„æºï¼ˆå¦‚æ•°æ®åº“è¿æ¥æ± çš„å¼•ç”¨ï¼‰ã€‚**éœ€è¦ç‰¹åˆ«æ³¨æ„çº¿ç¨‹å®‰å…¨ï¼**

- **ç¤ºä¾‹ï¼š**

  java

  ```
  // åœ¨ Servlet çš„ doGet/doPost æ–¹æ³•ä¸­
  // å­˜å‚¨åˆ° request ä½œç”¨åŸŸ
  String message = "æ“ä½œæˆåŠŸï¼";
  request.setAttribute("statusMessage", message); // å­˜å‚¨å­—ç¬¦ä¸²
  User currentUser = new User("John Doe", "john@example.com");
  request.setAttribute("user", currentUser); // å­˜å‚¨è‡ªå®šä¹‰å¯¹è±¡
  List<String> products = Arrays.asList("æ‰‹æœº", "ç”µè„‘", "è€³æœº");
  request.setAttribute("productList", products); // å­˜å‚¨é›†åˆ
  
  // å­˜å‚¨åˆ° session ä½œç”¨åŸŸ (ç”¨æˆ·ç™»å½•æˆåŠŸå)
  HttpSession session = request.getSession(); // è·å–æˆ–åˆ›å»º session
  session.setAttribute("loggedInUser", currentUser);
  
  // å­˜å‚¨åˆ° application ä½œç”¨åŸŸ (é€šå¸¸åœ¨ ServletContextListener æˆ– Servlet åˆå§‹åŒ–æ—¶)
  ServletContext application = getServletContext();
  application.setAttribute("appConfig", someConfigObject);
  ```

------

**äºŒã€`Object getAttribute(String name)`**

- **ä½œç”¨ï¼š** ä»ç‰¹å®šçš„ä½œç”¨åŸŸå¯¹è±¡ä¸­æ ¹æ®æŒ‡å®šçš„åç§° (`name`) **æ£€ç´¢ï¼ˆè·å–ï¼‰** ä¹‹å‰å­˜å‚¨çš„å±æ€§å€¼ã€‚

- **å‚æ•°ï¼š**

  - `name`: è¦æ£€ç´¢çš„å±æ€§çš„åç§°ï¼ˆé”®ï¼‰ã€‚

- **è¿”å›å€¼ï¼š**

  - å¦‚æœæ‰¾åˆ°æŒ‡å®šåç§°çš„å±æ€§ï¼Œåˆ™è¿”å›ä¸è¯¥åç§°ç»‘å®šçš„ `Object`ã€‚
  - å¦‚æœæ‰¾ä¸åˆ°æŒ‡å®šåç§°çš„å±æ€§ï¼Œåˆ™è¿”å› `null`ã€‚

- **ç‰¹ç‚¹ï¼š**

  - **æ£€ç´¢æ•°æ®ï¼š** è¿™æ˜¯ä¸»è¦çš„æ£€ç´¢æ–¹å¼ã€‚
  - **éœ€è¦ç±»å‹è½¬æ¢ï¼š** å› ä¸ºè¿”å›å€¼æ˜¯ `Object` ç±»å‹ï¼Œä½ éœ€è¦å°†å…¶ **å¼ºåˆ¶è½¬æ¢** å›ä½ å­˜å‚¨æ—¶çš„å®é™…ç±»å‹ã€‚
  - **ä½œç”¨åŸŸå†³å®šä»å“ªé‡Œæ£€ç´¢ï¼š**
    - **`request.getAttribute(...)`:** ä»å½“å‰çš„ `HttpServletRequest` å¯¹è±¡ä¸­æŸ¥æ‰¾å±æ€§ã€‚
    - **`session.getAttribute(...)`:** ä»ä¸å½“å‰è¯·æ±‚å…³è”çš„ `HttpSession` å¯¹è±¡ä¸­æŸ¥æ‰¾å±æ€§ã€‚
    - **`application.getAttribute(...)`:** ä»å½“å‰çš„ `ServletContext` å¯¹è±¡ä¸­æŸ¥æ‰¾å±æ€§ã€‚

- **ç¤ºä¾‹ï¼š**

  java

  ```
  // åœ¨å¦ä¸€ä¸ª Servlet æˆ– JSP ä¸­ (å‡è®¾æ˜¯åŒä¸€ä¸ªè¯·æ±‚æˆ–åŒä¸€ä¸ªä¼šè¯æˆ–åŒä¸€ä¸ªåº”ç”¨)
  // ä» request ä½œç”¨åŸŸè·å–
  String message = (String) request.getAttribute("statusMessage"); // å¼ºåˆ¶è½¬æ¢
  User user = (User) request.getAttribute("user"); // å¼ºåˆ¶è½¬æ¢
  List<String> products = (List<String>) request.getAttribute("productList"); // å¼ºåˆ¶è½¬æ¢
  
  // ä» session ä½œç”¨åŸŸè·å–
  HttpSession session = request.getSession(false); // è·å–ç°æœ‰ session (ä¸åˆ›å»ºæ–°çš„)
  if (session != null) {
      User loggedInUser = (User) session.getAttribute("loggedInUser");
      if (loggedInUser != null) {
          // ç”¨æˆ·å·²ç™»å½•
      }
  }
  
  // ä» application ä½œç”¨åŸŸè·å–
  ServletContext application = getServletContext();
  AppConfig config = (AppConfig) application.getAttribute("appConfig");
  ```

------

**ä¸‰ã€`removeAttribute(String name)`**

- **ä½œç”¨ï¼š** ä»ç‰¹å®šçš„ä½œç”¨åŸŸå¯¹è±¡ä¸­ **ç§»é™¤** æŒ‡å®šåç§° (`name`) çš„å±æ€§åŠå…¶å…³è”çš„å€¼ã€‚

- **å‚æ•°ï¼š**

  - `name`: è¦ç§»é™¤çš„å±æ€§çš„åç§°ã€‚

- **ç‰¹ç‚¹ï¼š**

  - å¦‚æœæŒ‡å®šåç§°çš„å±æ€§å­˜åœ¨ï¼Œåˆ™ç§»é™¤å®ƒã€‚
  - å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™è¯¥æ–¹æ³•ä¸æ‰§è¡Œä»»ä½•æ“ä½œï¼ˆé™é»˜å¤±è´¥ï¼‰ã€‚
  - å¸¸ç”¨äºæ¸…ç†ä¸å†éœ€è¦çš„æ•°æ®ï¼Œç‰¹åˆ«æ˜¯åœ¨ `session` ä¸­ï¼ˆå¦‚ç”¨æˆ·ç™»å‡ºæ—¶ç§»é™¤ç”¨æˆ·å¯¹è±¡ï¼‰ã€‚

- **ç¤ºä¾‹ï¼š**

  java

  ```
  // ç”¨æˆ·ç™»å‡º
  HttpSession session = request.getSession(false);
  if (session != null) {
      session.removeAttribute("loggedInUser"); // ç§»é™¤ç”¨æˆ·å±æ€§
      // session.invalidate(); // æˆ–è€…ç›´æ¥é”€æ¯æ•´ä¸ª session
  }
  ```

------

**å››ã€ä¸ `getParameter()` çš„å…³é”®åŒºåˆ«**

- **`request.getParameter(String name)`ï¼š**
  - **æ¥æºï¼š** ä¸“é—¨ç”¨äº**è·å– HTTP è¯·æ±‚å‚æ•°**ã€‚
  - **å‚æ•°æ¥æºï¼š** æ¥è‡ª URL æŸ¥è¯¢å­—ç¬¦ä¸² (å¦‚ `?id=123`) æˆ– HTML è¡¨å•æäº¤ (`<input>`, `<select>`, `<textarea>`) çš„ `POST`/`GET` è¯·æ±‚ä½“ã€‚
  - **æ•°æ®ç±»å‹ï¼š** è¿”å› **`String`** ç±»å‹æˆ– `null`ï¼ˆå¦‚æœå‚æ•°ä¸å­˜åœ¨ï¼‰ã€‚åªèƒ½è·å–å­—ç¬¦ä¸²å€¼ã€‚å¯¹äºå¤šå€¼å‚æ•°ï¼ˆå¦‚å¤é€‰æ¡†ï¼‰ï¼Œä½¿ç”¨ `getParameterValues(String name)` è¿”å› `String[]`ã€‚
  - **åªè¯»ï¼š** ä½ ä¸èƒ½é€šè¿‡ `request` å¯¹è±¡è®¾ç½® (`set`) å‚æ•°ã€‚å‚æ•°æ˜¯ç”±å®¢æˆ·ç«¯å‘é€çš„ã€‚
  - **ä½œç”¨åŸŸï¼š** åªä¸å½“å‰è¯·æ±‚ç›¸å…³ã€‚
- **`getAttribute()` / `setAttribute()`ï¼š**
  - **æ¥æºï¼š** æ˜¯**æœåŠ¡å™¨ç«¯ç¼–ç¨‹æœºåˆ¶**ï¼Œç”¨äºåœ¨æœåŠ¡å™¨å†…éƒ¨çš„ä¸åŒç»„ä»¶ä¹‹é—´ï¼ˆServletã€JSPã€Filterï¼‰**ä¼ é€’ä»»æ„ Java å¯¹è±¡**ã€‚
  - **æ•°æ®æ¥æºï¼š** æ•°æ®æ˜¯ç”±æœåŠ¡å™¨ç«¯ä»£ç ï¼ˆå¦‚ Servletï¼‰ä½¿ç”¨ `setAttribute()` æ–¹æ³•æ˜¾å¼è®¾ç½®çš„ã€‚
  - **æ•°æ®ç±»å‹ï¼š** å¯ä»¥å­˜å‚¨å’Œè·å–**ä»»ä½• Java å¯¹è±¡ (`Object`)**ã€‚
  - **å¯è¯»å†™ï¼š** é€šè¿‡ `setAttribute()` è®¾ç½®ï¼Œ`getAttribute()` è¯»å–ï¼Œ`removeAttribute()` ç§»é™¤ã€‚
  - **ä½œç”¨åŸŸï¼š** å¯ä»¥æ˜¯ `request`, `session`, `application`ï¼Œå†³å®šäº†æ•°æ®çš„ç”Ÿå‘½å‘¨æœŸå’Œå¯è§èŒƒå›´ã€‚

**ç®€å•æ¯”å–»ï¼š**

- **`getParameter()`** å°±åƒä»å®¢æˆ·å¯„æ¥çš„ä¿¡å°é‡Œï¼ˆHTTPè¯·æ±‚ï¼‰å–å‡ºä¿¡ä»¶å†…å®¹ï¼ˆå‚æ•°å€¼ï¼‰ã€‚ä½ åªèƒ½è¯»ä¿¡å°é‡Œå†™å¥½çš„å†…å®¹ï¼ˆå­—ç¬¦ä¸²ï¼‰ï¼Œä¸èƒ½å¾€ä¿¡å°é‡Œå¡æ–°çº¸ï¼ˆè®¾ç½®å‚æ•°ï¼‰ã€‚
- **`setAttribute()` / `getAttribute()`** å°±åƒä½ åœ¨å¤„ç†å®¢æˆ·ä¿¡ä»¶ï¼ˆè¯·æ±‚ï¼‰æ—¶ï¼Œè‡ªå·±å‡†å¤‡äº†ä¸€äº›ä¾¿ç­¾çº¸ï¼ˆå±æ€§ï¼‰ï¼Œå†™ä¸Šåå­—ï¼ˆkeyï¼‰å’Œå†…å®¹ï¼ˆvalueï¼Œå¯ä»¥æ˜¯å¤æ‚å¯¹è±¡ï¼‰ï¼Œè´´åœ¨è‡ªå·±çš„åŠå…¬æ¡Œï¼ˆrequestï¼‰ã€å®¢æˆ·çš„ä¸“å±æ–‡ä»¶å¤¹ï¼ˆsessionï¼‰æˆ–åŠå…¬å®¤çš„å…¬å‘Šæ¿ï¼ˆapplicationï¼‰ä¸Šï¼Œæ–¹ä¾¿è‡ªå·±æˆ–åŒäº‹åç»­å¤„ç†æ—¶æŸ¥é˜…æˆ–ä¿®æ”¹ã€‚

**æ€»ç»“ï¼š**

- **`setAttribute(name, value)`** ç”¨äºåœ¨ `request`, `session`, æˆ– `application` ä½œç”¨åŸŸä¸­å­˜å‚¨æ•°æ®å¯¹è±¡ã€‚
- **`getAttribute(name)`** ç”¨äºä»è¿™äº›ä½œç”¨åŸŸä¸­æ£€ç´¢æ•°æ®å¯¹è±¡ï¼ˆéœ€è¦å¼ºåˆ¶è½¬æ¢ï¼‰ã€‚
- **`removeAttribute(name)`** ç”¨äºç§»é™¤ä¸å†éœ€è¦çš„å±æ€§ã€‚
- å®ƒä»¬ä¸ `getParameter()` æœ‰æœ¬è´¨åŒºåˆ«ï¼š`getParameter()` ç”¨äºè·å–**å®¢æˆ·ç«¯å‘é€çš„è¯·æ±‚å‚æ•°ï¼ˆå­—ç¬¦ä¸²ï¼‰**ï¼Œè€Œ `get/setAttribute()` ç”¨äºåœ¨**æœåŠ¡å™¨ç«¯ç»„ä»¶é—´ä¼ é€’ä»»æ„å¯¹è±¡**ã€‚
- **ç†è§£ä½œç”¨åŸŸ (`request`, `session`, `application`) æ˜¯æ­£ç¡®ä½¿ç”¨è¿™äº›æ–¹æ³•çš„å…³é”®**ï¼Œå®ƒå†³å®šäº†æ•°æ®ä½•æ—¶åˆ›å»ºã€ä½•æ—¶é”€æ¯ã€è°èƒ½è®¿é—®ã€‚é€‰æ‹©é”™è¯¯çš„ä½œç”¨åŸŸä¼šå¯¼è‡´æ•°æ®æ³„éœ²ï¼ˆå¦‚ç”¨æˆ·Açœ‹åˆ°ç”¨æˆ·Bçš„æ•°æ®ï¼‰ã€å†…å­˜æµªè´¹æˆ–æ•°æ®ä¸¢å¤±ã€‚









### JSP

#### è¯­æ³•

![image-20250721155157516](../AppData/Roaming/Typora/typora-user-images/image-20250721155157516.png)

![image-20250721155936937](../AppData/Roaming/Typora/typora-user-images/image-20250721155936937.png)



![image-20250721160334467](../AppData/Roaming/Typora/typora-user-images/image-20250721160334467.png)

![image-20250721160725606](../AppData/Roaming/Typora/typora-user-images/image-20250721160725606.png)

#### JSPåŸç†

![image-20250721162557606](../AppData/Roaming/Typora/typora-user-images/image-20250721162557606.png)

#### JSPå†…ç½®å¯¹è±¡

![image-20250721163635226](../AppData/Roaming/Typora/typora-user-images/image-20250721163635226.png)



![image-20250721172652634](../AppData/Roaming/Typora/typora-user-images/image-20250721172652634.png)

![image-20250721173040154](../AppData/Roaming/Typora/typora-user-images/image-20250721173040154.png)









![image-20250721173014096](../AppData/Roaming/Typora/typora-user-images/image-20250721173014096.png)

![image-20250721172952984](../AppData/Roaming/Typora/typora-user-images/image-20250721172952984.png)

#### JSPæŒ‡ä»¤

![image-20250721203740911](../AppData/Roaming/Typora/typora-user-images/image-20250721203740911.png)

![image-20250721204044999](../AppData/Roaming/Typora/typora-user-images/image-20250721204044999.png)

![image-20250721204404641](../AppData/Roaming/Typora/typora-user-images/image-20250721204404641.png)

#### çŠ¶æ€ç 

![image-20250721205101020](../AppData/Roaming/Typora/typora-user-images/image-20250721205101020.png)

#### ELè¡¨è¾¾å¼

![image-20250721211754250](../AppData/Roaming/Typora/typora-user-images/image-20250721211754250.png)

![image-20250721214116681](../AppData/Roaming/Typora/typora-user-images/image-20250721214116681.png)

![image-20250721214340771](../AppData/Roaming/Typora/typora-user-images/image-20250721214340771.png)

![image-20250721220009262](../AppData/Roaming/Typora/typora-user-images/image-20250721220009262.png)

![image-20250721220759551](../AppData/Roaming/Typora/typora-user-images/image-20250721220759551.png)

#### JSTLæ•°æ®åº“

![image-20250722173843037](../AppData/Roaming/Typora/typora-user-images/image-20250722173843037.png)

![image-20250722173932045](../AppData/Roaming/Typora/typora-user-images/image-20250722173932045.png)

![image-20250722182826903](../AppData/Roaming/Typora/typora-user-images/image-20250722182826903.png)

![image-20250722183046165](../AppData/Roaming/Typora/typora-user-images/image-20250722183046165.png)

![image-20250722183305212](../AppData/Roaming/Typora/typora-user-images/image-20250722183305212.png)

![image-20250722184941672](../AppData/Roaming/Typora/typora-user-images/image-20250722184941672.png)

![image-20250722185508820](../AppData/Roaming/Typora/typora-user-images/image-20250722185508820.png)

![image-20250722185644461](../AppData/Roaming/Typora/typora-user-images/image-20250722185644461.png)

### Filterå’ŒListener

#### ä¼šè¯è·Ÿè¸ªæŠ€æœ¯

![image-20250722221428259](../AppData/Roaming/Typora/typora-user-images/image-20250722221428259.png)

#### cookie

##### ç†è®º

æµç¨‹å›¾

![image-20250722221812635](../AppData/Roaming/Typora/typora-user-images/image-20250722221812635.png)

![image-20250722221547114](../AppData/Roaming/Typora/typora-user-images/image-20250722221547114.png)

![image-20250722223833456](../AppData/Roaming/Typora/typora-user-images/image-20250722223833456.png)

![image-20250722230449113](../AppData/Roaming/Typora/typora-user-images/image-20250722230449113.png)

##### ä»£ç å®ç°

![image-20250722231204749](../AppData/Roaming/Typora/typora-user-images/image-20250722231204749.png)

![image-20250722231128265](../AppData/Roaming/Typora/typora-user-images/image-20250722231128265.png)

![image-20250722231408163](../AppData/Roaming/Typora/typora-user-images/image-20250722231408163.png)

#### session

##### ç†è®º

![image-20250722231807635](../AppData/Roaming/Typora/typora-user-images/image-20250722231807635.png)

![image-20250722233652884](../AppData/Roaming/Typora/typora-user-images/image-20250722233652884.png)

![image-20250722233919467](../AppData/Roaming/Typora/typora-user-images/image-20250722233919467.png)

![image-20250722234213388](../AppData/Roaming/Typora/typora-user-images/image-20250722234213388.png)

##### ä»£ç è§£é‡Š

**(1) æµ‹è¯•é“¾æ¥**

html

```
<a href="test">test-cookie</a>
```

- è¶…é“¾æ¥æŒ‡å‘ç›¸å¯¹è·¯å¾„ `test`ï¼Œç‚¹å‡»åä¼šè®¿é—®è¯¥URLï¼ˆé€šå¸¸ç”±åç«¯Servletå¤„ç†ï¼Œç”¨äºæµ‹è¯•CookieåŠŸèƒ½ï¼‰ã€‚

**(2) ç™»å½•è¡¨å•**

html

```
<form action="/login" method="post">
  username: <input type="text" name="uname"><br>
  password: <input type="password" name="pass"><br>
  <input type="submit" value="login">
</form>
```

- **`<form action="/login" method="post">`**
  è¡¨å•æäº¤åˆ°ç»å¯¹è·¯å¾„ `/login`ï¼Œä½¿ç”¨ **POST æ–¹æ³•**ï¼ˆé€‚åˆæ•æ„Ÿæ•°æ®å¦‚å¯†ç ï¼‰ã€‚

- **ç”¨æˆ·åè¾“å…¥æ¡†**
  `<input type="text" name="uname">`ï¼šæ–‡æœ¬è¾“å…¥æ¡†ï¼Œåç«¯é€šè¿‡å‚æ•°å `uname` è·å–å€¼ã€‚

- **å¯†ç è¾“å…¥æ¡†**
  `<input type="password" name="pass">`ï¼šå¯†ç è¾“å…¥æ¡†ï¼ˆå†…å®¹æ©ç æ˜¾ç¤ºï¼‰ï¼Œå‚æ•°åä¸º `pass`ã€‚

- **æäº¤æŒ‰é’®**
  `<input type="submit" value="login">`ï¼šç‚¹å‡»åæäº¤è¡¨å•æ•°æ®åˆ° `/login`ã€‚

  ![image-20250723185230669](../AppData/Roaming/Typora/typora-user-images/image-20250723185230669.png)

![image-20250723185433821](../AppData/Roaming/Typora/typora-user-images/image-20250723185433821.png)

![image-20250723185523704](../AppData/Roaming/Typora/typora-user-images/image-20250723185523704.png)

![image-20250723185723552](../AppData/Roaming/Typora/typora-user-images/image-20250723185723552.png)

#### cookieä¸session

![image-20250723190744996](../AppData/Roaming/Typora/typora-user-images/image-20250723190744996.png)

#### Filter

##### ä»‹ç»

æ‰§è¡Œé¡ºåº123ç„¶å321

![image-20250723190845128](../AppData/Roaming/Typora/typora-user-images/image-20250723190845128.png)

![image-20250723191307811](../AppData/Roaming/Typora/typora-user-images/image-20250723191307811.png)

![image-20250723191538132](../AppData/Roaming/Typora/typora-user-images/image-20250723191538132.png)

##### ä»£ç å®ç°

![c0654b46b4739e7468e9297fad6b01ae](../Documents/Tencent Files/1759751014/nt_qq/nt_data/Pic/2025-07/Ori/c0654b46b4739e7468e9297fad6b01ae.png)

![image-20250723210545329](../AppData/Roaming/Typora/typora-user-images/image-20250723210545329.png)

æ³¨æ„è¿™é‡Œçš„å…ˆåé¡ºåº

![image-20250723211849038](../AppData/Roaming/Typora/typora-user-images/image-20250723211849038.png)

![image-20250723212056917](../AppData/Roaming/Typora/typora-user-images/image-20250723212056917.png)

#### ç›‘å¬å™¨

![image-20250723212304489](../AppData/Roaming/Typora/typora-user-images/image-20250723212304489.png)

![image-20250723212702340](../AppData/Roaming/Typora/typora-user-images/image-20250723212702340.png)

![image-20250723212915603](../AppData/Roaming/Typora/typora-user-images/image-20250723212915603.png)

![image-20250723213326036](../AppData/Roaming/Typora/typora-user-images/image-20250723213326036.png)

![image-20250723213351241](../AppData/Roaming/Typora/typora-user-images/image-20250723213351241.png)

#### MVCè®¾è®¡æ¨¡å¼

##### ä»‹ç»

![image-20250724202120401](../AppData/Roaming/Typora/typora-user-images/image-20250724202120401.png)

![image-20250724203546723](../AppData/Roaming/Typora/typora-user-images/image-20250724203546723.png)

#### ä¸‰å±‚æ¶æ„

![image-20250724211824544](../AppData/Roaming/Typora/typora-user-images/image-20250724211824544.png)

![image-20250724211950946](../AppData/Roaming/Typora/typora-user-images/image-20250724211950946.png)

## é‡è¦çš„çŸ¥è¯†ç‚¹

#### 1.@RequestBodyå°†jsonå°è£…åœ¨å¯¹è±¡é‡Œ

åœ¨ **Spring Bootï¼ˆSpring MVCï¼‰** é‡Œï¼Œ`@RequestBody` çš„ä½œç”¨æ˜¯ï¼š

ğŸ‘‰ **æŠŠ HTTP è¯·æ±‚ä½“ï¼ˆRequest Bodyï¼‰é‡Œçš„ JSONã€XML æˆ–è¡¨å•æ•°æ®ï¼Œè‡ªåŠ¨ååºåˆ—åŒ–ä¸º Java å¯¹è±¡ï¼Œå¹¶æ³¨å…¥åˆ°æ–¹æ³•å‚æ•°ä¸­ã€‚**

------

###### ğŸ”¹ ä¸ºä»€ä¹ˆè¦ç”¨ `@RequestBody`ï¼Ÿ

- HTTP è¯·æ±‚æœ‰ä¸¤éƒ¨åˆ†ï¼š**è¯·æ±‚å¤´ (headers)** å’Œ **è¯·æ±‚ä½“ (body)**ã€‚
- å½“å®¢æˆ·ç«¯å‘é€ **POST/PUT** è¯·æ±‚æ—¶ï¼Œé€šå¸¸ä¼šæŠŠæ•°æ®æ”¾åœ¨è¯·æ±‚ä½“é‡Œï¼ˆJSON æ¯”è¾ƒå¸¸è§ï¼‰ã€‚
- Spring é»˜è®¤åªèƒ½è‡ªåŠ¨è§£æ **è¡¨å•é”®å€¼å¯¹ï¼ˆx-www-form-urlencodedï¼‰** è¿™ç§æ•°æ®ï¼Œ
  å¦‚æœä½ ä¼ çš„æ˜¯ **JSON**ï¼Œå°±éœ€è¦ç”¨ `@RequestBody` å‘Šè¯‰ Springï¼š**è¯·æŠŠè¯·æ±‚ä½“é‡Œçš„ JSON è½¬æˆ Java å¯¹è±¡**ã€‚

------

###### ğŸ”¹ ç¤ºä¾‹

###### 1. ä¸ä½¿ç”¨ `@RequestBody`ï¼ˆä¼ ç»Ÿè¡¨å•æ–¹å¼ï¼‰

```
@PostMapping("/addUser")
public String addUser(String name, Integer age) {
    return "ç”¨æˆ·: " + name + " å¹´é¾„: " + age;
}
```

è¯·æ±‚æ–¹å¼ï¼ˆè¡¨å•ï¼‰ï¼š

```
POST /addUser
Content-Type: application/x-www-form-urlencoded

name=å¼ ä¸‰&age=20
```

------

###### 2. ä½¿ç”¨ `@RequestBody`ï¼ˆJSON æ–¹å¼ï¼‰

```
@RestController
public class UserController {
    @PostMapping("/addUser")
    public String addUser(@RequestBody User user) {
        return "ç”¨æˆ·: " + user.getName() + " å¹´é¾„: " + user.getAge();
    }
}
```

`User` ç±»ï¼š

```
public class User {
    private String name;
    private Integer age;
    // getter/setter
}
```

è¯·æ±‚æ–¹å¼ï¼ˆJSON è¯·æ±‚ä½“ï¼‰ï¼š

```
POST /addUser
Content-Type: application/json

{
  "name": "å¼ ä¸‰",
  "age": 20
}
```

Spring ä¼šè‡ªåŠ¨ç”¨ **Jackson**ï¼ˆé»˜è®¤çš„ JSON è§£æåº“ï¼‰æŠŠ JSON è§£ææˆ `User` å¯¹è±¡ã€‚

------

######ğŸ”¹ å°ç»“

- `@RequestBody`ï¼šå– **è¯·æ±‚ä½“æ•°æ®**ï¼Œå¹¶è‡ªåŠ¨è½¬æ¢ä¸º Java å¯¹è±¡ã€‚
- å¸¸ç”¨äº `POST` / `PUT` è¯·æ±‚ã€‚
- ä¾èµ– `HttpMessageConverter`ï¼ˆé»˜è®¤ç”¨ Jackson å¤„ç† JSONï¼‰ã€‚







#### 2.@RestController

**`@RestController`** æ˜¯ Spring Framework 4.0 å¼•å…¥çš„ä¸€ä¸ªå¤åˆæ³¨è§£ï¼Œå®ƒçš„ä½œç”¨æ˜¯ç®€åŒ– **RESTful Web æœåŠ¡**çš„å¼€å‘ã€‚

å®ƒå®é™…ä¸Šæ˜¯ä¸¤ä¸ªæ³¨è§£çš„ç»„åˆï¼š

1. `@Controller`
2. `@ResponseBody`



**`@Controller` çš„ä½œç”¨**



`@Controller` ç”¨äºæ ‡è¯†ä¸€ä¸ªç±»æ˜¯ Spring MVC çš„æ§åˆ¶å™¨ã€‚åœ¨ä¼ ç»Ÿçš„ MVC æ¶æ„ä¸­ï¼Œ`@Controller` è´Ÿè´£å¤„ç†å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œå¹¶å°†è¯·æ±‚åˆ†å‘ç»™ç›¸åº”çš„æœåŠ¡å±‚è¿›è¡Œå¤„ç†ï¼Œç„¶åè¿”å›ä¸€ä¸ªè§†å›¾åï¼ˆå¦‚ JSPã€Thymeleaf æ¨¡æ¿ï¼‰ã€‚



**`@ResponseBody` çš„ä½œç”¨**



`@ResponseBody` é€šå¸¸æ ‡æ³¨åœ¨æ–¹æ³•æˆ–ç±»ä¸Šï¼Œå®ƒçš„ä½œç”¨æ˜¯å‘Šè¯‰ Spring **ä¸è¦å°†æ–¹æ³•çš„è¿”å›å€¼è§£æä¸ºè§†å›¾åç§°**ï¼Œè€Œæ˜¯å°†è¿”å›å€¼ç›´æ¥ä½œä¸º **HTTP å“åº”ä½“**ï¼ˆResponse Bodyï¼‰è¿”å›ç»™å®¢æˆ·ç«¯ã€‚

Spring ä¼šä½¿ç”¨å†…ç½®çš„ HTTP æ¶ˆæ¯è½¬æ¢å™¨ï¼ˆ`HttpMessageConverter`ï¼‰æ¥å¤„ç†è¿™ä¸ªè¿”å›å€¼ï¼Œé€šå¸¸æ˜¯å°†å…¶è½¬æ¢ä¸º **JSON** æˆ– **XML** æ ¼å¼ã€‚è¿™å¯¹äºæ„å»ºè¿”å›æ•°æ®çš„ API æœåŠ¡éå¸¸é‡è¦ã€‚





#### 3.åŸºäºSpringBootå®˜æ–¹éª¨æ¶åˆ›å»ºçš„ï¼Œè¿™äº›å­—æ®µä¼šä¿ç•™

![image-20250811005605843](../AppData/Roaming/Typora/typora-user-images/image-20250811005605843.png)





#### 4.ä¼ å‚çš„æƒ…å†µ

**å®ƒå¯ä»¥è‡ªåŠ¨æŠŠidæå–å‡ºæ¥**

![image-20250811010857934](../AppData/Roaming/Typora/typora-user-images/image-20250811010857934.png)

#### 5.@Componentçš„ä½œç”¨(@Service)

åœ¨Spring Bootä¸­ï¼Œ`@Component` æ³¨è§£çš„ä½œç”¨æ˜¯**å°†ä¸€ä¸ªç±»æ ‡è®°ä¸ºSpringç»„ä»¶**ã€‚

ç®€å•æ¥è¯´ï¼Œå½“ä½ åœ¨ä¸€ä¸ªç±»ä¸Šä½¿ç”¨ `@Component` æ³¨è§£æ—¶ï¼Œä½ å°±æ˜¯åœ¨å‘Šè¯‰Springæ¡†æ¶ï¼šâ€œå˜¿ï¼Œè¯·ç®¡ç†è¿™ä¸ªç±»ã€‚åœ¨åº”ç”¨å¯åŠ¨æ—¶ï¼Œè¯·ä¸ºæˆ‘åˆ›å»ºä¸€ä¸ªå®ƒçš„å®ä¾‹ï¼ˆä¹Ÿå°±æ˜¯ä¸€ä¸ª Beanï¼‰ï¼Œå¹¶æŠŠå®ƒæ”¾åˆ°ä½ çš„å®¹å™¨ï¼ˆSpring IoC Containerï¼‰é‡Œã€‚â€

è¿™æ ·ä¸€æ¥ï¼Œè¿™ä¸ªè¢«æ ‡è®°çš„ç±»å°±æˆä¸ºäº†Springå¯ä»¥è¯†åˆ«å’Œç®¡ç†çš„**ç»„ä»¶**ã€‚å…¶ä»–åœ°æ–¹éœ€è¦ä½¿ç”¨è¿™ä¸ªç±»çš„å®ä¾‹æ—¶ï¼ŒSpringå°±å¯ä»¥é€šè¿‡**ä¾èµ–æ³¨å…¥**ï¼ˆDependency Injectionï¼‰çš„æ–¹å¼ï¼Œå°†å®ƒè‡ªåŠ¨è£…é…è¿›æ¥ï¼Œè€Œä¸éœ€è¦ä½ æ‰‹åŠ¨å»åˆ›å»ºå’Œç®¡ç†å®ä¾‹ã€‚

é™¤äº† `@Component`ï¼ŒSpringè¿˜æä¾›äº†å‡ ä¸ªæ›´å…·ç‰¹å®šè¯­ä¹‰çš„è¡ç”Ÿæ³¨è§£ï¼Œå®ƒä»¬çš„ä½œç”¨å’Œ `@Component` åŸºæœ¬ç›¸åŒï¼Œä½†ç”¨åœ¨ä¸åŒçš„åˆ†å±‚æ¶æ„ä¸­ï¼Œè®©ä»£ç æ›´æ¸…æ™°ã€æ›´æ˜“æ‡‚ï¼š

- `@Controller`: ç”¨äºæ ‡è®°å¤„ç†Webè¯·æ±‚çš„ç±»ï¼Œé€šå¸¸åœ¨**æ§åˆ¶å±‚**ï¼ˆController layerï¼‰ä½¿ç”¨ã€‚
- `@Service`: ç”¨äºæ ‡è®°åŒ…å«ä¸šåŠ¡é€»è¾‘çš„ç±»ï¼Œé€šå¸¸åœ¨**æœåŠ¡å±‚**ï¼ˆService layerï¼‰ä½¿ç”¨ã€‚
- `@Repository`: ç”¨äºæ ‡è®°å¤„ç†æ•°æ®æŒä¹…åŒ–ï¼ˆä¾‹å¦‚ä¸æ•°æ®åº“äº¤äº’ï¼‰çš„ç±»ï¼Œé€šå¸¸åœ¨**æ•°æ®è®¿é—®å±‚**ï¼ˆData access layerï¼‰ä½¿ç”¨ã€‚

æ€»çš„æ¥è¯´ï¼Œè¿™å››ä¸ªæ³¨è§£çš„ä½œç”¨éƒ½æ˜¯ä¸€æ ·çš„ï¼šå°†ç±»æ³¨å†ŒæˆSpringçš„ç»„ä»¶ã€‚é€‰æ‹©ä½¿ç”¨å“ªä¸€ä¸ªå–å†³äºè¿™ä¸ªç»„ä»¶åœ¨ä½ çš„åº”ç”¨ä¸­æ‰®æ¼”çš„è§’è‰²ã€‚è¿™ä¸ä»…æœ‰åŠ©äºä»£ç ç»„ç»‡ï¼Œä¹Ÿè®©å¼€å‘äººå‘˜èƒ½æ›´å¿«åœ°ç†è§£æ¯ä¸ªç±»çš„èŒè´£ã€‚



#### 6.Autowired

åœ¨ Java Spring Boot ä¸­ï¼Œ @Autowired  æ˜¯ Spring æ¡†æ¶æä¾›çš„æ ¸å¿ƒæ³¨è§£ä¹‹ä¸€ï¼Œä¸»è¦ä½œç”¨æ˜¯å®ç°ä¾èµ–çš„è‡ªåŠ¨æ³¨å…¥ï¼Œå¸®åŠ©å¼€å‘è€…ç®€åŒ–å¯¹è±¡ä¹‹é—´ä¾èµ–å…³ç³»çš„ç®¡ç†ã€‚

å…·ä½“æ¥è¯´ï¼Œå®ƒçš„ä½œç”¨å¯ä»¥æ‹†è§£ä¸ºï¼š

1. è‡ªåŠ¨å…³è”ä¾èµ–å¯¹è±¡
   å½“ä¸€ä¸ªç±»ï¼ˆæ¯”å¦‚  Service ã€ Controller  ç­‰ï¼‰éœ€è¦ä¾èµ–å¦ä¸€ä¸ªç±»çš„å®ä¾‹æ—¶ï¼ˆæ¯”å¦‚  Service  ä¾èµ–  Dao ï¼‰ï¼Œä¸éœ€è¦æ‰‹åŠ¨é€šè¿‡  new  åˆ›å»ºä¾èµ–å¯¹è±¡ï¼Œåªéœ€åœ¨ä¾èµ–å­—æ®µã€æ„é€ æ–¹æ³•æˆ– setter æ–¹æ³•ä¸Šæ·»åŠ   @Autowired ï¼ŒSpring å®¹å™¨ä¼šè‡ªåŠ¨ä»å®¹å™¨ä¸­æ‰¾åˆ°åŒ¹é…çš„å¯¹è±¡ï¼Œå¹¶æ³¨å…¥åˆ°å½“å‰ç±»ä¸­ã€‚ç¤ºä¾‹ï¼š
   @Service
   public class UserService {
    // è‡ªåŠ¨æ³¨å…¥ UserDao å®ä¾‹
    @Autowired
    private UserDao userDao;

    public void addUser() {
        userDao.save(); // ç›´æ¥ä½¿ç”¨æ³¨å…¥çš„ userDao
    }
   }

2. é™ä½ä»£ç è€¦åˆåº¦
   ä¼ ç»Ÿæ–¹å¼ä¸­ï¼Œéœ€è¦æ‰‹åŠ¨åˆ›å»ºä¾èµ–å¯¹è±¡ï¼ˆå¦‚  userDao = new UserDao() ï¼‰ï¼Œå¯¼è‡´ç±»ä¸ç±»ä¹‹é—´å¼ºè€¦åˆã€‚ @Autowired  è®©ä¾èµ–å…³ç³»ç”± Spring å®¹å™¨ç®¡ç†ï¼Œå¼€å‘è€…åªéœ€å…³æ³¨ä¸šåŠ¡é€»è¾‘ï¼Œæ— éœ€å…³å¿ƒå¯¹è±¡çš„åˆ›å»ºå’Œå…³è”ï¼Œæ›´ç¬¦åˆâ€œä¾èµ–å€’ç½®åŸåˆ™â€ã€‚

3. æ”¯æŒå¤šç§æ³¨å…¥æ–¹å¼

- å­—æ®µæ³¨å…¥ï¼šç›´æ¥åœ¨æˆå‘˜å˜é‡ä¸Šæ·»åŠ   @Autowired ï¼ˆæœ€å¸¸ç”¨ï¼‰ã€‚

- æ„é€ æ–¹æ³•æ³¨å…¥ï¼šåœ¨æ„é€ æ–¹æ³•ä¸Šæ·»åŠ   @Autowired ï¼ŒSpring ä¼šåœ¨åˆ›å»ºå½“å‰å¯¹è±¡æ—¶ï¼Œè‡ªåŠ¨æ³¨å…¥æ„é€ æ–¹æ³•çš„å‚æ•°ã€‚
  @Service
  public class UserService {
    private UserDao userDao;

    // æ„é€ æ–¹æ³•æ³¨å…¥
    @Autowired
    public UserService(UserDao userDao) {
        this.userDao = userDao;
    }
  }

- setter æ–¹æ³•æ³¨å…¥ï¼šåœ¨ setter æ–¹æ³•ä¸Šæ·»åŠ   @Autowired ï¼ŒSpring ä¼šè°ƒç”¨è¯¥æ–¹æ³•æ³¨å…¥ä¾èµ–ã€‚

4. é»˜è®¤æŒ‰ç±»å‹åŒ¹é…ï¼ˆbyTypeï¼‰
   Spring å®¹å™¨ä¼šæ ¹æ®è¢«æ³¨å…¥å­—æ®µçš„ç±»å‹ï¼ˆå¦‚  UserDao ï¼‰ï¼Œåœ¨å®¹å™¨ä¸­æŸ¥æ‰¾ç›¸åŒç±»å‹çš„ bean å¹¶æ³¨å…¥ã€‚å¦‚æœå­˜åœ¨å¤šä¸ªåŒç±»å‹çš„ beanï¼Œä¼šæŠ¥é”™ï¼Œæ­¤æ—¶éœ€é…åˆ  @Qualifier  æ³¨è§£æŒ‡å®šå…·ä½“ bean çš„åç§°ï¼š
   @Autowired
   @Qualifier("userDaoImpl") // æŒ‡å®šæ³¨å…¥åç§°ä¸º userDaoImpl çš„ bean
   private UserDao userDao;

5. å¯é…ç½®æ˜¯å¦å¿…é¡»æ³¨å…¥
   @Autowired  æœ‰ä¸ª  required  å±æ€§ï¼ˆé»˜è®¤  true ï¼‰ï¼Œè¡¨ç¤ºä¾èµ–å¿…é¡»å­˜åœ¨ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚è‹¥è®¾ä¸º  false ï¼Œåˆ™å½“ä¾èµ–ä¸å­˜åœ¨æ—¶ï¼Œæ³¨å…¥  null ï¼š
   @Autowired(required = false)
   private UserDao userDao;


æ€»ä¹‹ï¼Œ @Autowired  æ˜¯ Spring å®ç°â€œæ§åˆ¶åè½¬ï¼ˆIOCï¼‰â€å’Œâ€œä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰â€çš„å…³é”®æ³¨è§£ï¼Œæå¤§ç®€åŒ–äº†å¯¹è±¡ä¾èµ–çš„ç®¡ç†ï¼Œæ˜¯ Spring Boot å¼€å‘ä¸­æœ€å¸¸ç”¨çš„æ³¨è§£ä¹‹ä¸€ã€‚

#### 7.RequestParamè®¾ç½®é»˜è®¤å€¼

![image-20250811140433455](../AppData/Roaming/Typora/typora-user-images/image-20250811140433455.png)

åœ¨ Spring Boot ä¸­ï¼Œ`@RequestParam` æ˜¯ä¸€ä¸ªéå¸¸å¸¸ç”¨çš„æ³¨è§£ï¼Œå®ƒçš„ä¸»è¦ä½œç”¨æ˜¯**å°† HTTP è¯·æ±‚ä¸­çš„å‚æ•°ç»‘å®šåˆ°ä½ çš„æ§åˆ¶å™¨ï¼ˆControllerï¼‰æ–¹æ³•çš„å‚æ•°ä¸Š**ã€‚ç®€å•æ¥è¯´ï¼Œå°±æ˜¯å½“ä½ çš„æµè§ˆå™¨å‘é€ä¸€ä¸ªå¸¦å‚æ•°çš„è¯·æ±‚åˆ°ä½ çš„æœåŠ¡å™¨æ—¶ï¼ŒSpring Boot æ¡†æ¶èƒ½é€šè¿‡ `@RequestParam` è‡ªåŠ¨æŠŠè¿™äº›å‚æ•°çš„å€¼â€œæŠ“å–â€è¿‡æ¥ï¼Œå¹¶èµ‹å€¼ç»™ä½ æ–¹æ³•ä¸­å®šä¹‰çš„å˜é‡ï¼Œè¿™æ ·ä½ å°±å¯ä»¥åœ¨ä¸šåŠ¡é€»è¾‘ä¸­ç›´æ¥ä½¿ç”¨è¿™äº›å‚æ•°äº†ã€‚



###### 1. æœ€ç®€å•çš„ç”¨æ³•



å‡è®¾ä½ æœ‰ä¸€ä¸ªæ¥å£ï¼Œéœ€è¦æ¥æ”¶ä¸€ä¸ªåä¸º `name` çš„å­—ç¬¦ä¸²å‚æ•°ã€‚

Java

```
@GetMapping("/hello")
public String hello(@RequestParam String name) {
    return "Hello, " + name + "!";
}
```

å½“ä½ è®¿é—® `http://localhost:8080/hello?name=Gemini` æ—¶ï¼ŒSpring Boot ä¼šæ‰¾åˆ° `name=Gemini` è¿™ä¸ªå‚æ•°ï¼Œç„¶åæŠŠå®ƒèµ‹å€¼ç»™ `hello` æ–¹æ³•é‡Œçš„ `name` å˜é‡ã€‚æ‰€ä»¥ï¼Œæœ€ç»ˆä½ ä¼šå¾—åˆ°ä¸€ä¸ªè¿”å›ç»“æœï¼š"Hello, Gemini!"ã€‚



###### 2. å‚æ•°åä¸ä¸€è‡´æ—¶çš„ç”¨æ³•



å¦‚æœä½ çš„è¯·æ±‚å‚æ•°åå’Œæ–¹æ³•å‚æ•°åä¸ä¸€è‡´ï¼Œä½ å¯ä»¥é€šè¿‡ `@RequestParam` çš„ `value`ï¼ˆæˆ–è€… `name`ï¼‰å±æ€§æ¥æŒ‡å®šã€‚

Java

```
@GetMapping("/user")
public String getUser(@RequestParam("userId") String id) {
    return "User ID is: " + id;
}
```

åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ éœ€è¦è®¿é—® `http://localhost:8080/user?userId=123`ï¼Œè€Œä¸æ˜¯ `?id=123`ã€‚



###### 3. è®¾å®šå‚æ•°ä¸ºéå¿…ä¼ ï¼ˆå¯é€‰ï¼‰



é»˜è®¤æƒ…å†µä¸‹ï¼Œä½¿ç”¨ `@RequestParam` æ ‡è®°çš„å‚æ•°éƒ½æ˜¯**å¿…ä¼ **çš„ã€‚å¦‚æœè¯·æ±‚ä¸­æ²¡æœ‰è¿™ä¸ªå‚æ•°ï¼ŒSpring Boot ä¼šæŠ›å‡ºä¸€ä¸ª `MissingServletRequestParameterException` å¼‚å¸¸ã€‚

å¦‚æœä½ æƒ³è®©ä¸€ä¸ªå‚æ•°å˜æˆå¯é€‰çš„ï¼Œå¯ä»¥é€šè¿‡è®¾ç½® `required = false`ã€‚

Java

```
@GetMapping("/greet")
public String greet(@RequestParam(value = "name", required = false) String name) {
    if (name == null || name.isEmpty()) {
        return "Hello, Guest!";
    }
    return "Hello, " + name + "!";
}
```

ç°åœ¨ï¼Œå½“ä½ è®¿é—® `http://localhost:8080/greet`ï¼ˆæ²¡æœ‰å¸¦å‚æ•°ï¼‰æ—¶ï¼Œ`name` å‚æ•°ä¼šè¢«èµ‹å€¼ä¸º `null`ï¼Œç¨‹åºä¼šæ­£å¸¸æ‰§è¡Œã€‚å½“ä½ è®¿é—® `http://localhost:8080/greet?name=Lily` æ—¶ï¼Œ`name` çš„å€¼å°±æ˜¯ "Lily"ã€‚

------



###### 4. è®¾å®šé»˜è®¤å€¼



å½“ä½ æŠŠå‚æ•°è®¾ä¸ºå¯é€‰åï¼Œä½ è¿˜å¯ä»¥é€šè¿‡ `defaultValue` å±æ€§ä¸ºå®ƒæŒ‡å®šä¸€ä¸ªé»˜è®¤å€¼ï¼Œè¿™æ ·å°±ä¸ç”¨å†æ‰‹åŠ¨åˆ¤æ–­ `null` äº†ã€‚

Java

```
@GetMapping("/search")
public String search(@RequestParam(defaultValue = "1") int page) {
    return "Searching on page: " + page;
}
```

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå¦‚æœä½ è®¿é—® `http://localhost:8080/search`ï¼Œ`page` çš„å€¼ä¼šè‡ªåŠ¨å˜æˆ `1`ã€‚å¦‚æœä½ è®¿é—® `http://localhost:8080/search?page=5`ï¼Œ`page` çš„å€¼å°±æ˜¯ `5`ã€‚

------



###### 5. æ¥æ”¶å¤šä¸ªåŒåå‚æ•°



å¦‚æœä½ çš„è¯·æ±‚ä¸­æœ‰å¤šä¸ªåŒåçš„å‚æ•°ï¼ˆæ¯”å¦‚ä¸€ä¸ªå¤é€‰æ¡†ï¼‰ï¼Œä½ å¯ä»¥ä½¿ç”¨ä¸€ä¸ªé›†åˆç±»å‹æ¥æ¥æ”¶å®ƒä»¬ã€‚

Java

```
@GetMapping("/items")
public String getItems(@RequestParam List<String> itemIds) {
    return "Selected items: " + String.join(", ", itemIds);
}
```

å½“ä½ è®¿é—® `http://localhost:8080/items?itemIds=101&itemIds=102&itemIds=103` æ—¶ï¼Œ`itemIds` å°†ä¼šæ˜¯ä¸€ä¸ªåŒ…å« `["101", "102", "103"]` çš„åˆ—è¡¨ã€‚





#### 8.æŸ¥çœ‹å¹¶ä¸‹è½½ä¾èµ–çš„ç½‘ç«™

https://mvnrepository.com/

#### 9.æ³¨æ„é‡è¦åˆ¤æ–­å‡½æ•°

falseéç©ºï¼Œtrueç©º

![image-20250813165334804](../AppData/Roaming/Typora/typora-user-images/image-20250813165334804.png)

#### 10.è·å–ä¸»é”®Id

![image-20250814133036081](../AppData/Roaming/Typora/typora-user-images/image-20250814133036081.png)

![image-20250814175019118](../AppData/Roaming/Typora/typora-user-images/image-20250814175019118.png)

![image-20250814175047241](../AppData/Roaming/Typora/typora-user-images/image-20250814175047241.png)

#### 11.é˜²æ­¢å…¶ä»–äº‹åŠ¡å›æ»šå½±å“

![image-20250814225749116](../AppData/Roaming/Typora/typora-user-images/image-20250814225749116.png)

![image-20250814230453904](../AppData/Roaming/Typora/typora-user-images/image-20250814230453904.png)

#### 12.æŸäº›ä¸œè¥¿å¯ä»¥æ”¾åœ¨é…ç½®æ–‡ä»¶ä¸­

ä¸¤ç§æ–¹æ³•

![image-20250816161530011](../AppData/Roaming/Typora/typora-user-images/image-20250816161530011.png)

![image-20250816160143157](../AppData/Roaming/Typora/typora-user-images/image-20250816160143157.png)

#### 13.å†…è¿æ¥å’Œå¤–è¿æ¥

ä¸€ä¸ªæ˜¯äº¤é›†ï¼Œä¸€ä¸ªæ˜¯å¹¶é›†ï¼ˆå°±æ˜¯left joinæˆ–è€…joinçš„é—®é¢˜ï¼‰

#### 14.ä¿®æ”¹æ–¹æ³•

å…ˆåˆ åå­˜

#### 15.ã€Šsetã€‹å’Œã€Šwhereã€‹æ ‡ç­¾

![image-20250817120250975](../AppData/Roaming/Typora/typora-user-images/image-20250817120250975.png)

#### 16.å…¨å±€å¼‚å¸¸å¤„ç†

![image-20250817204303527](../AppData/Roaming/Typora/typora-user-images/image-20250817204303527.png)



**è¿™é‡Œçš„é”™è¯¯ä¿¡æ¯ä¼šä»ä¸‹å¾€ä¸Šæ£€æŸ¥æ˜¯å“ªä¸ªé—®é¢˜ï¼ˆå°±æ˜¯ä»æœ€å­ç±»æ£€æŸ¥åˆ°æœ€çˆ¶ç±»ï¼‰**

![image-20250817210029213](../AppData/Roaming/Typora/typora-user-images/image-20250817210029213.png)

![image-20250817210830728](../AppData/Roaming/Typora/typora-user-images/image-20250817210830728.png)

#### 17.æ³¨æ„SQLç»†èŠ‚

å¦‚æœæ‚¨ä½¿ç”¨ MyBatis æ’å…¥ä¸€ä¸ªå®Œæ•´çš„å¯¹è±¡ï¼ŒMyBatis ä¼šè‡ªåŠ¨å¤„ç†å­—æ®µæ˜ å°„ã€‚

XML

```
<insert id="insert" parameterType="com.it.pojo.Clazz">
    insert into clazz
    (id, name, room, begin_date, end_date, master_id, subject, create_time, update_time)
    values
    (#{id}, #{name}, #{room}, #{beginDate}, #{endDate}, #{masterId}, #{subject}, #{createTime}, #{updateTime})
</insert>
```

**é‡è¦æç¤ºï¼š**

- å¦‚æœæ‚¨çš„ `id` å­—æ®µæ˜¯æ•°æ®åº“è‡ªåŠ¨ç”Ÿæˆçš„ï¼ˆä¾‹å¦‚ï¼Œä½¿ç”¨ `AUTO_INCREMENT`ï¼‰ï¼Œåˆ™åº”è¯¥åœ¨ SQL è¯­å¥ä¸­çœç•¥ `id` å­—æ®µã€‚
- å¦‚æœ `createTime` å’Œ `updateTime` å­—æ®µæ˜¯ç”±æ•°æ®åº“è‡ªåŠ¨å¡«å……çš„ï¼Œæ‚¨ä¹Ÿåº”è¯¥åœ¨æ’å…¥æ—¶çœç•¥å®ƒä»¬ã€‚
- è¿™ä¸ª `insert` è¯­å¥å‡è®¾æ‚¨æœ‰ä¸€ä¸ªæ–¹æ³•ï¼Œä¾‹å¦‚ `insert(Clazz clazz)`ï¼Œå®ƒå°†ä¸€ä¸ª `Clazz` å¯¹è±¡ä½œä¸ºå‚æ•°ã€‚MyBatis ä¼šè‡ªåŠ¨å°† `Clazz` å¯¹è±¡ä¸­çš„å±æ€§å€¼æ˜ å°„åˆ° `#{...}` å ä½ç¬¦ã€‚

#### 18.@Bean

åœ¨ **Spring / Spring Boot** é‡Œï¼Œ`@Bean` çš„ä½œç”¨å°±æ˜¯ï¼š

ğŸ‘‰ **å‘Šè¯‰ Spring å®¹å™¨ï¼šæˆ‘è¦å¾€ IOC å®¹å™¨é‡Œæ³¨å†Œä¸€ä¸ª Beanï¼ˆå¯¹è±¡ï¼‰ï¼Œå¹¶äº¤ç»™ Spring æ¥ç®¡ç†å®ƒçš„ç”Ÿå‘½å‘¨æœŸã€‚**

------

##### ğŸ”¹ åŸºæœ¬æ¦‚å¿µ

- **Bean**ï¼šå°±æ˜¯ç”± Spring å®¹å™¨ç®¡ç†çš„å¯¹è±¡ã€‚

- åœ¨ä»¥å‰æˆ‘ä»¬å†™ `applicationContext.xml` çš„æ—¶å€™ï¼Œè¦æ‰‹åŠ¨å†™ï¼š

  ```
  <bean id="myService" class="com.example.MyService"/>
  ```

- ç°åœ¨ç”¨ Java é…ç½®æ—¶ï¼Œåªè¦å†™ä¸ªæ–¹æ³•åŠ ä¸Š `@Bean`ï¼Œè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼ŒSpring å°±ä¼šæŠŠè¿™ä¸ªå¯¹è±¡æ”¾è¿›å®¹å™¨é‡Œã€‚

------

##### ğŸ”¹ ç¤ºä¾‹

```
@Configuration  // è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªé…ç½®ç±»ï¼Œç­‰ä»·äºä¸€ä¸ª Spring XML é…ç½®æ–‡ä»¶
public class AppConfig {

    @Bean   // å‘ Spring å®¹å™¨æ³¨å†Œä¸€ä¸ª Bean
    public MyService myService() {
        return new MyService(); // è¿™ä¸ªå¯¹è±¡ä¼šè¢« Spring å®¹å™¨æ‰˜ç®¡
    }
}
```

è¿™æ ·ï¼ŒSpring å®¹å™¨é‡Œå°±æœ‰äº†ä¸€ä¸ªåå­—ä¸º `myService` çš„ Beanã€‚
 ä½ å°±å¯ä»¥åœ¨åˆ«çš„åœ°æ–¹æ³¨å…¥ä½¿ç”¨ï¼š

```
@RestController
public class TestController {
    private final MyService myService;

    public TestController(MyService myService) {
        this.myService = myService;
    }

    @GetMapping("/hello")
    public String hello() {
        return myService.sayHello();
    }
}
```

------

##### ğŸ”¹ ç»†èŠ‚

1. **Bean åå­—**

   - é»˜è®¤ï¼šæ–¹æ³•åå°±æ˜¯ Bean çš„åå­—ï¼ˆä¸Šä¾‹ä¸­æ˜¯ `myService`ï¼‰ã€‚

   - ä¹Ÿå¯ä»¥æŒ‡å®šï¼š

     ```
     @Bean("customService")
     public MyService myService() { ... }
     ```

2. **å’Œ @Component çš„åŒºåˆ«**

   - `@Component`ï¼šç›´æ¥æ ‡åœ¨ç±»ä¸Šï¼Œç”± **ç±»æ‰«æ** æ³¨å†Œæˆ Beanã€‚
   - `@Bean`ï¼šæ ‡åœ¨ **æ–¹æ³•ä¸Š**ï¼Œæ‰‹åŠ¨æŒ‡å®šè¿”å›çš„å¯¹è±¡ã€‚
   - ä¸€èˆ¬ `@Component` ç”¨åœ¨è‡ªå·±å†™çš„ä¸šåŠ¡ç±»ï¼›
     `@Bean` ç”¨åœ¨ç¬¬ä¸‰æ–¹ç±»æˆ–éœ€è¦è‡ªå·±æ„é€ çš„å¯¹è±¡ã€‚

3. **ç”Ÿå‘½å‘¨æœŸ**

   - Spring ç®¡ç† Bean çš„åˆ›å»ºã€åˆå§‹åŒ–ã€é”€æ¯ã€‚
   - å¯ä»¥é…åˆ `@Scope("prototype")` æŒ‡å®šä½œç”¨åŸŸã€‚

------

âœ… **ä¸€å¥è¯æ€»ç»“ï¼š**
 `@Bean` å°±æ˜¯ **æ³¨å†Œä¸€ä¸ªæ–¹æ³•è¿”å›çš„å¯¹è±¡åˆ° Spring å®¹å™¨**ï¼Œè®©å®ƒå˜æˆä¸€ä¸ª Beanï¼Œåç»­å¯ä»¥åœ¨é¡¹ç›®é‡Œé€šè¿‡ä¾èµ–æ³¨å…¥æ¥ä½¿ç”¨







å¾ˆå¤šäººä¸€å¼€å§‹éƒ½ä¼šè§‰å¾—ï¼š**æœ‰äº† `@Component`ï¼Œä¸ºå•¥è¿˜è¦ `@Bean`ï¼Ÿ**
 å…¶å®è¿™ä¸¤ä¸ªæ³¨è§£è™½ç„¶æœ€ç»ˆæ•ˆæœéƒ½æ˜¯ **å¾€ Spring å®¹å™¨é‡Œæ³¨å†Œä¸€ä¸ª Bean**ï¼Œä½† **åº”ç”¨åœºæ™¯å®Œå…¨ä¸åŒ**ã€‚

------

##### ğŸ”¹ 1. `@Component` é€‚ç”¨åœºæ™¯

- **ä½ èƒ½æ”¹æºç **ï¼Œç±»æ˜¯ä½ è‡ªå·±å†™çš„ã€‚

- ç›´æ¥åœ¨ç±»ä¸ŠåŠ ï¼š

  ```
  @Component
  public class MyService { ... }
  ```

- Spring ä¼šè‡ªåŠ¨é€šè¿‡ **åŒ…æ‰«æ** å‘ç°å¹¶æ³¨å†Œè¿™ä¸ªç±»ä¸º Beanã€‚

- é€‚åˆæ™®é€šçš„ä¸šåŠ¡é€»è¾‘ç±»ã€Controllerã€Serviceã€Repository ç­‰ã€‚

------

##### ğŸ”¹ 2. `@Bean` é€‚ç”¨åœºæ™¯

- **ä½ ä¸èƒ½æ”¹æºç **ï¼Œæ¯”å¦‚ç¬¬ä¸‰æ–¹åº“çš„ç±»ï¼ˆ`DataSource`ã€`RestTemplate` ç­‰ï¼‰ã€‚

- æˆ–è€… **å®ä¾‹åŒ–è¿™ä¸ª Bean éœ€è¦é¢å¤–é€»è¾‘**ï¼ˆæ„é€ å‚æ•°ã€é…ç½®ã€åˆå§‹åŒ–ç­‰ï¼‰ã€‚

- ä¸¾ä¾‹ï¼š

  ```
  @Configuration
  public class AppConfig {
      
      @Bean
      public RestTemplate restTemplate() {
          // è¿™é‡Œä½ å¯ä»¥å®šåˆ¶åŒ–ï¼Œæ¯”å¦‚åŠ æ‹¦æˆªå™¨
          return new RestTemplate();
      }
  
      @Bean
      public DataSource dataSource() {
          HikariDataSource ds = new HikariDataSource();
          ds.setJdbcUrl("jdbc:mysql://localhost:3306/test");
          ds.setUsername("root");
          ds.setPassword("1234");
          return ds;
      }
  }
  ```

- å¦‚æœæ˜¯ç¬¬ä¸‰æ–¹ç±»ï¼ˆæ¯”å¦‚ `RestTemplate`ï¼‰ï¼Œä½ ä¸èƒ½åœ¨æºç ä¸ŠåŠ  `@Component`ï¼Œåªèƒ½ç”¨ `@Bean`ã€‚

------

##### ğŸ”¹ 3. äºŒè€…å…³ç³»

- `@Component` èµ° **ç±»æ‰«æ**ã€‚
- `@Bean` èµ° **æ–¹æ³•å·¥å‚**ã€‚
- å…¶å®å®ƒä»¬éƒ½åªæ˜¯ **ä¸åŒçš„ Bean å®šä¹‰æ–¹å¼**ï¼Œæœ€ç»ˆæ•ˆæœä¸€æ ·ï¼šå¯¹è±¡äº¤ç»™ Spring å®¹å™¨ç®¡ç†ã€‚

------

##### ğŸ”¹ æ€»ç»“ç±»æ¯”

- **`@Component`**ï¼šåƒæ˜¯åœ¨ç±»ä¸Šæ‰“ä¸€ä¸ª â€œè‡ªåŠ¨æ³¨å†Œâ€ æ ‡ç­¾ â†’ Spring æ‰«æåˆ°å°±å¸®ä½ æ‰˜ç®¡ã€‚
- **`@Bean`**ï¼šåƒæ˜¯è‡ªå·±å†™äº†ä¸€æ®µ â€œç”Ÿäº§è¿™ä¸ªå¯¹è±¡çš„æ–¹æ³•â€ â†’ æŠŠæ–¹æ³•è¿”å›çš„å¯¹è±¡äº¤ç»™ Spring æ‰˜ç®¡ã€‚

------

ğŸ‘‰ ä¸€å¥è¯ï¼š

- å¦‚æœæ˜¯ **è‡ªå·±å†™çš„ç±»** â†’ ç”¨ `@Component`ï¼ˆæ›´ç®€æ´ï¼‰ã€‚
- å¦‚æœæ˜¯ **ç¬¬ä¸‰æ–¹ç±»** æˆ– **éœ€è¦å¤æ‚åˆå§‹åŒ–çš„å¯¹è±¡** â†’ ç”¨ `@Bean`ã€‚



#### 19.SQLå°æŠ€å·§

```
update_time timestamp not null default current_timestamp on update current_timestamp comment 'æ›´æ–°æ—¶é—´',
```

- `timestamp`ï¼šè¿™æ˜¯æ•°æ®ç±»å‹ã€‚A`timestamp`å­˜å‚¨æ—¥æœŸå’Œæ—¶é—´ï¼Œé€šå¸¸é‡‡ç”¨ UTC æ ¼å¼ã€‚è¿™æ˜¯ä¸€ç§è¿½è¸ªç‰¹å®šæ—¶åˆ»çš„æœ‰æ•ˆæ–¹æ³•ã€‚
- `default current_timestamp`ï¼šè¿™ä¼šå°† çš„åˆå§‹å€¼è®¾ç½®`update_time`ä¸ºæ’å…¥æ–°è¡Œæ—¶çš„å½“å‰æ—¶é—´æˆ³ã€‚å› æ­¤ï¼Œ`create_time`å’Œ`update_time`åœ¨æ–°è¡Œé¦–æ¬¡åˆ›å»ºæ—¶å°†ä¿æŒä¸å˜ã€‚
- `on update current_timestamp`**ï¼šè¿™æ˜¯å…³é”®çš„åŒºåˆ«ã€‚æ¯å½“è¯¥è¡Œä¸­çš„ä»»ä½•å…¶ä»–åˆ—å‘ç”Ÿæ›´æ”¹æ—¶ï¼Œ**å®ƒéƒ½ä¼šè‡ªåŠ¨å°†çš„å€¼æ›´æ–°`update_time`ä¸ºå½“å‰æ—¶é—´æˆ³ã€‚è¿™æ˜¯ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„åŠŸèƒ½ï¼Œæ— éœ€åœ¨åº”ç”¨ç¨‹åºä¸­ç¼–å†™é¢å¤–çš„ä»£ç å³å¯è·Ÿè¸ªè®°å½•çš„ä¿®æ”¹ã€‚

------



 **`CONSTRAINT`**



```
constraint chk_phone_length check (char_length(phone) = 11)
```

- `constraint chk_phone_length`ï¼šè¿™ä¸ºçº¦æŸæä¾›äº†ä¸€ä¸ªåç§°ã€‚å‘½ååï¼Œå¦‚æœéœ€è¦ï¼Œå¯ä»¥æ›´è½»æ¾åœ°ç®¡ç†ã€å¼•ç”¨æˆ–åˆ é™¤çº¦æŸã€‚
- `check (...)`ï¼šè¿™æ˜¯ä¸€ä¸ª**`CHECK`çº¦æŸ**ã€‚å®ƒå®šä¹‰äº†åˆ—ä¸­çš„æ•°æ®å¿…é¡»æ»¡è¶³çš„è§„åˆ™ã€‚å¦‚æœæ‚¨å°è¯•æ’å…¥æˆ–æ›´æ–°è¿åæ­¤è§„åˆ™çš„å€¼çš„è¡Œï¼Œåˆ™æ“ä½œå°†å¤±è´¥å¹¶è¿”å›é”™è¯¯ã€‚
- `char_length(phone) = 11`ï¼šè¿™æ˜¯è§„åˆ™ã€‚è¯¥`CHAR_LENGTH()`å‡½æ•°è¿”å›å­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦æ•°ã€‚æ­¤è§„åˆ™ç¡®ä¿è¯¥`phone`åˆ—**å¿…é¡»æ°å¥½åŒ…å« 11 ä¸ªå­—ç¬¦**ã€‚ä»»ä½•å°‘äºæˆ–å¤šäº 11 ä¸ªå­—ç¬¦çš„å€¼éƒ½å°†è¢«æ‹’ç»ã€‚

#### 20.ç®€ä¾¿å†™æ—¥æœŸæ–¹æ³•

```
@DateTimeFormat(pattern = "yyyy-MM-dd")
private LocalDate begin;
```

#### 21.WebConfig

![image-20250904215506470](../AppData/Roaming/Typora/typora-user-images/image-20250904215506470.png)

`@Configuration`: è¿™æ˜¯ä¸€ä¸ª Spring æ¡†æ¶çš„æ³¨è§£ï¼Œè¡¨æ˜è¿™ä¸ªç±»æ˜¯ä¸€ä¸ªé…ç½®ç±»ã€‚åœ¨ Spring å®¹å™¨å¯åŠ¨æ—¶ï¼Œä¼šæ‰«æå¹¶åŠ è½½è¿™ä¸ªç±»ï¼Œå¹¶æ ¹æ®å…¶ä¸­çš„é…ç½®æ¥åˆ›å»ºå’Œé…ç½® beanã€‚ï¼ˆæ³¨æ„è¿™ä¸ªç±»æ²¡åˆ›å»ºBeanï¼ŒAAutowiredä¸‹é¢æ˜¯åˆ«äººå·²ç»åˆ›å»ºå¥½çš„ï¼‰ã€‚



`public void addInterceptors(InterceptorRegistry registry)`: è¿™æ˜¯ `WebMvcConfigurer` æ¥å£ä¸­çš„ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨äºæ³¨å†Œæ‹¦æˆªå™¨ã€‚

- `registry.addInterceptor(tokeninterceptor)`: å°† `tokeninterceptor` æ³¨å†Œä¸ºä¸€ä¸ªæ‹¦æˆªå™¨ã€‚
- `.addPathPatterns("/**")`: è¿™ä¸ªæ–¹æ³•æŒ‡å®šäº†æ‹¦æˆªå™¨è¦æ‹¦æˆªçš„ URL è·¯å¾„æ¨¡å¼ã€‚`"/**"` æ˜¯ä¸€ä¸ªé€šé…ç¬¦ï¼Œè¡¨ç¤ºæ‹¦æˆªæ‰€æœ‰çš„ URL è·¯å¾„ã€‚è¿™æ„å‘³ç€ï¼Œå½“ä»»ä½•è¯·æ±‚è¿›å…¥ä½ çš„åº”ç”¨ç¨‹åºæ—¶ï¼Œ`Tokeninterceptor` éƒ½ä¼šè¢«æ‰§è¡Œã€‚



è¿™æ®µä»£ç çš„ä½œç”¨æ˜¯**å°†ä¸€ä¸ªåä¸º `Tokeninterceptor` çš„æ‹¦æˆªå™¨æ³¨å†Œåˆ° Spring MVC åº”ç”¨ç¨‹åºä¸­ï¼Œå¹¶è®©å®ƒæ‹¦æˆªæ‰€æœ‰è¯·æ±‚**ã€‚

#### 22.Interceptoræ‹¦æˆª

```
public class Tokeninterceptor implements HandlerInterceptor
```

#### 23.Transactionalæ–¹æ³•

```
@Transactional(propagation = Propagation.REQUIRES_NEW)
```

1. **propagation = Propagation.REQUIRES_NEW å‚æ•°**ï¼š
   - è¡¨ç¤ºäº‹åŠ¡ä¼ æ’­è¡Œä¸ºè®¾ç½®ä¸º REQUIRES_NEW æ¨¡å¼ã€‚
   - è¿™æ„å‘³ç€**æ¯æ¬¡è°ƒç”¨æ­¤æ–¹æ³•æ—¶éƒ½ä¼šåˆ›å»ºä¸€ä¸ªå…¨æ–°çš„ç‹¬ç«‹äº‹åŠ¡**ã€‚
   - å¦‚æœè°ƒç”¨æ­¤æ–¹æ³•çš„å¤–å±‚æ–¹æ³•å·²ç»å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™å¤–å±‚äº‹åŠ¡ä¼šè¢«æŒ‚èµ·ï¼Œç›´åˆ°å½“å‰æ–¹æ³•çš„æ–°äº‹åŠ¡å®Œæˆåå†æ¢å¤ã€‚
2. **åœ¨å½“å‰ä»£ç ä¸­çš„åº”ç”¨åœºæ™¯**ï¼š
   - EmpLogServiceImpl æ˜¯ä¸€ä¸ªæ—¥å¿—æœåŠ¡å®ç°ç±»ï¼ŒinsertLog æ–¹æ³•ç”¨äºæ’å…¥æ“ä½œæ—¥å¿—ã€‚
   - ä½¿ç”¨ REQUIRES_NEW ä¼ æ’­ç‰¹æ€§ï¼Œç¡®ä¿æ—¥å¿—è®°å½•æ“ä½œ**ä¸å—å¤–å±‚ä¸šåŠ¡äº‹åŠ¡çš„å½±å“**ã€‚
   - å³ä½¿å¤–å±‚ä¸šåŠ¡æ“ä½œå¤±è´¥å›æ»šï¼Œæ—¥å¿—è®°å½•ä»ç„¶ä¼šè¢«æˆåŠŸä¿å­˜ï¼Œè¿™å¯¹äºç³»ç»Ÿå®¡è®¡ã€é—®é¢˜æ’æŸ¥å’Œæ•°æ®è¿½è¸ªéå¸¸é‡è¦ã€‚

#### 24.åŠ¨æ€sql

![image-20250910150548624](../AppData/Roaming/Typora/typora-user-images/image-20250910150548624.png)

![image-20250910150605339](../AppData/Roaming/Typora/typora-user-images/image-20250910150605339.png)

#### 25.é…ç½®ç±»

åœ¨ Spring é‡Œï¼Œæƒ³è®©æŸä¸ªå¯¹è±¡è¢« IoC å®¹å™¨ç®¡ç†ï¼Œæœ‰ä¸¤ç§å¸¸è§æ–¹å¼ï¼š

1. **æ³¨è§£æ‰«æï¼ˆæœ€å¸¸è§ï¼‰**
   åœ¨ç±»ä¸ŠåŠ  `@Component` / `@Service` / `@Controller`ï¼ŒSpring ä¼šè‡ªåŠ¨æ‰«æå¹¶æ³¨å†Œä¸º Beanã€‚
2. **æ˜¾å¼æ³¨å†Œï¼ˆé…ç½®ç±»æ–¹å¼ï¼‰**
   é€šè¿‡ä¸€ä¸ªé…ç½®ç±»ï¼Œç”¨ `@Bean` æ–¹æ³•æ‰‹åŠ¨å‘Šè¯‰ Springï¼šâ€œè¿™ä¸ªæ–¹æ³•è¿”å›çš„å¯¹è±¡ï¼Œè¦æ”¾è¿› IoC å®¹å™¨é‡Œï¼Œæˆä¸ºä¸€ä¸ª Beanâ€ã€‚

------

##### 2. é…ç½®ç±»æ˜¾å¼æ³¨å†Œ Bean çš„å†™æ³•

```
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

@Configuration  // è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªé…ç½®ç±»ï¼Œç›¸å½“äºä»¥å‰çš„ XML é…ç½®æ–‡ä»¶
public class AppConfig {

    @Bean  // æ˜¾å¼å‘Šè¯‰ Springï¼šæŠŠè¿™ä¸ªæ–¹æ³•è¿”å›çš„å¯¹è±¡æ³¨å†Œä¸º Bean
    public UserService userService() {
        return new UserService();
    }
}
```

##### 3. åŸç†

- `@Configuration` è¡¨ç¤ºè¿™ä¸ªç±»æ˜¯ä¸€ä¸ªé…ç½®ç±»ï¼ˆç±»ä¼¼ä»¥å‰çš„ XML `<beans>`ï¼‰ã€‚
- `@Bean` æ³¨è§£çš„æ–¹æ³•ï¼Œè¿”å›çš„å¯¹è±¡ä¼šè¢« **æ˜¾å¼åŠ å…¥ IoC å®¹å™¨**ã€‚
- å³ä½¿ `UserService` ç±»æœ¬èº«æ²¡æœ‰ `@Component` æ³¨è§£ï¼Œä¹Ÿèƒ½è¢«å®¹å™¨ç®¡ç†ã€‚

##### 4. ä½¿ç”¨åœºæ™¯

ä»€ä¹ˆæ—¶å€™éœ€è¦ç”¨ **æ˜¾å¼æ³¨å†Œ**å‘¢ï¼Ÿ

1. ä½ æ— æ³•åœ¨ç±»ä¸ŠåŠ  `@Component`ï¼ˆæ¯”å¦‚è¿™æ˜¯ç¬¬ä¸‰æ–¹åº“é‡Œçš„ç±»ï¼Œæ²¡æ³•æ”¹æºç ï¼‰ã€‚

   ```
   @Bean
   public ObjectMapper objectMapper() {
       return new ObjectMapper();
   }
   ```

2. ä½ éœ€è¦å¯¹ Bean çš„åˆ›å»ºè¿‡ç¨‹åšä¸€äº›å®šåˆ¶åŒ–å¤„ç†ã€‚

   ```
   @Bean
   public DataSource dataSource() {
       HikariDataSource ds = new HikariDataSource();
       ds.setJdbcUrl("jdbc:mysql://localhost:3306/test");
       ds.setUsername("root");
       ds.setPassword("123456");
       return ds;
   }
   ```

3. æƒ³ç»™å®¹å™¨é‡Œæ³¨å†Œå¤šä¸ªä¸åŒé…ç½®çš„åŒç±»å¯¹è±¡ï¼ˆç”¨ `@Bean(name="xxx")` åŒºåˆ†ï¼‰ã€‚















## å‰ç«¯ä¸‰å‰‘å®¢

#### HTML

##### åŸºç¡€

![b653558a4706221f65ace40052e284ea](../Documents/Tencent Files/1759751014/nt_qq/nt_data/Pic/2025-07/Ori/b653558a4706221f65ace40052e284ea.jpg)

![ac5449bbad840350d73838c850d54834](../Documents/Tencent Files/1759751014/nt_qq/nt_data/Pic/2025-07/Ori/ac5449bbad840350d73838c850d54834.jpg)

![0562544f92c8cf30207aeab3c3a53215](../Documents/Tencent Files/1759751014/nt_qq/nt_data/Pic/2025-07/Ori/0562544f92c8cf30207aeab3c3a53215.jpg)

![9abbeeccfc9a230f996d9a9dfe6b0a5b](../Documents/Tencent Files/1759751014/nt_qq/nt_data/Pic/2025-07/Ori/9abbeeccfc9a230f996d9a9dfe6b0a5b.jpg)

##### å¸¸è§æ ‡ç­¾

![image-20250724232020331](../AppData/Roaming/Typora/typora-user-images/image-20250724232020331.png)

#### CSS

##### å¸¸ç”¨æ–¹æ³•

![image-20250724232504153](../AppData/Roaming/Typora/typora-user-images/image-20250724232504153.png)

![image-20250724232742884](../AppData/Roaming/Typora/typora-user-images/image-20250724232742884.png)

é¢œè‰²è¡¨ç¤º

![image-20250724233319645](../AppData/Roaming/Typora/typora-user-images/image-20250724233319645.png)

##### CSSæ ·å¼é€‰æ‹©å™¨

![image-20250725162659972](../AppData/Roaming/Typora/typora-user-images/image-20250725162659972.png)

![image-20250725163803570](../AppData/Roaming/Typora/typora-user-images/image-20250725163803570.png)

![image-20250725163033113](../AppData/Roaming/Typora/typora-user-images/image-20250725163033113.png)

ä¼˜å…ˆçº§ï¼šIDé€‰æ‹©å™¨>ç±»é€‰æ‹©å™¨>å…ƒç´ é€‰æ‹©å™¨

![image-20250725163103348](../AppData/Roaming/Typora/typora-user-images/image-20250725163103348.png)

![image-20250725163517924](../AppData/Roaming/Typora/typora-user-images/image-20250725163517924.png)

##### ä¸€äº›è§£é‡Š

![image-20250725165132660](../AppData/Roaming/Typora/typora-user-images/image-20250725165132660.png)

ç›¸å¯¹è·¯å¾„

![image-20250725165810196](../AppData/Roaming/Typora/typora-user-images/image-20250725165810196.png)

##### ç›’å­æ¨¡å‹

![image-20250725175216060](../AppData/Roaming/Typora/typora-user-images/image-20250725175216060.png)

![image-20250725180557217](../AppData/Roaming/Typora/typora-user-images/image-20250725180557217.png)

![image-20250725180938659](../AppData/Roaming/Typora/typora-user-images/image-20250725180938659.png)

![image-20250725181139183](../AppData/Roaming/Typora/typora-user-images/image-20250725181139183.png)

![image-20250725181701968](../AppData/Roaming/Typora/typora-user-images/image-20250725181701968.png)

![image-20250725191809629](../AppData/Roaming/Typora/typora-user-images/image-20250725191809629.png)

##### è¡¨å•

![image-20250725201716762](../AppData/Roaming/Typora/typora-user-images/image-20250725201716762.png)

![image-20250725202347056](../AppData/Roaming/Typora/typora-user-images/image-20250725202347056.png)

![image-20250725202621141](../AppData/Roaming/Typora/typora-user-images/image-20250725202621141.png)

#### JavaScript

##### ä»‹ç»

![image-20250725233405324](../AppData/Roaming/Typora/typora-user-images/image-20250725233405324.png)

![image-20250725233657501](../AppData/Roaming/Typora/typora-user-images/image-20250725233657501.png)

##### ä½¿ç”¨

![image-20250725234005541](../AppData/Roaming/Typora/typora-user-images/image-20250725234005541.png)

##### è¯­æ³•

![image-20250726142218329](../AppData/Roaming/Typora/typora-user-images/image-20250726142218329.png)

![image-20250726142537011](../AppData/Roaming/Typora/typora-user-images/image-20250726142537011.png)

æ•°æ®ç±»å‹

![image-20250726142912038](../AppData/Roaming/Typora/typora-user-images/image-20250726142912038.png)

![image-20250726143151181](../AppData/Roaming/Typora/typora-user-images/image-20250726143151181.png)

å‡½æ•°

![image-20250726173333837](../AppData/Roaming/Typora/typora-user-images/image-20250726173333837.png)

![image-20250726173707824](../AppData/Roaming/Typora/typora-user-images/image-20250726173707824.png)

è‡ªå®šä¹‰å¯¹è±¡

![image-20250726174109039](../AppData/Roaming/Typora/typora-user-images/image-20250726174109039.png)

![image-20250726175804801](../AppData/Roaming/Typora/typora-user-images/image-20250726175804801.png)

DOM

![image-20250726182119862](../AppData/Roaming/Typora/typora-user-images/image-20250726182119862.png)

![image-20250726182342389](../AppData/Roaming/Typora/typora-user-images/image-20250726182342389.png)

![image-20250726182818479](../AppData/Roaming/Typora/typora-user-images/image-20250726182818479.png)

![image-20250726201751021](../AppData/Roaming/Typora/typora-user-images/image-20250726201751021.png)

![image-20250726202248002](../AppData/Roaming/Typora/typora-user-images/image-20250726202248002.png)

#### vue

##### ç”¨æ³•

![image-20250726214154370](../AppData/Roaming/Typora/typora-user-images/image-20250726214154370.png)

å¸¸ç”¨æŒ‡ä»¤

![image-20250726215029464](../AppData/Roaming/Typora/typora-user-images/image-20250726215029464.png)

## Maven

#### ç®€ä»‹

![image-20250727153034968](../AppData/Roaming/Typora/typora-user-images/image-20250727153034968.png)

![image-20250727152855591](../AppData/Roaming/Typora/typora-user-images/image-20250727152855591.png)

#### åˆ›å»ºMavené¡¹ç›®

![image-20250727162716353](../AppData/Roaming/Typora/typora-user-images/image-20250727162716353.png)

#### xmlç®€ä»‹

![image-20250727164907001](../AppData/Roaming/Typora/typora-user-images/image-20250727164907001.png)

![image-20250727164934927](../AppData/Roaming/Typora/typora-user-images/image-20250727164934927.png)



#### å¯¼å…¥é¡¹ç›®

![image-20250727165754199](../AppData/Roaming/Typora/typora-user-images/image-20250727165754199.png)



![image-20250727165034951](../AppData/Roaming/Typora/typora-user-images/image-20250727165034951.png)

![image-20250727165348337](../AppData/Roaming/Typora/typora-user-images/image-20250727165348337.png)

å°†é¡¹ç›®ç²˜è´´è¿›å»

![image-20250727165410052](../AppData/Roaming/Typora/typora-user-images/image-20250727165410052.png)









![image-20250727165130451](../AppData/Roaming/Typora/typora-user-images/image-20250727165130451.png)

![image-20250727165627286](../AppData/Roaming/Typora/typora-user-images/image-20250727165627286.png)

#### ä¾èµ–é…ç½®

![image-20250727170058629](../AppData/Roaming/Typora/typora-user-images/image-20250727170058629.png)

**å®˜ç½‘ï¼š**https://mvnrepository.com/





æ’é™¤ä¾èµ–

![image-20250727215850441](../AppData/Roaming/Typora/typora-user-images/image-20250727215850441.png)

#### ç”Ÿå‘½å‘¨æœŸ

![image-20250727220202618](../AppData/Roaming/Typora/typora-user-images/image-20250727220202618.png)

å…³æ³¨è¿™äº”ä¸ªé˜¶æ®µ

![image-20250727220303011](../AppData/Roaming/Typora/typora-user-images/image-20250727220303011.png)

![image-20250727220559918](../AppData/Roaming/Typora/typora-user-images/image-20250727220559918.png)

#### æµ‹è¯•

##### ç®€ä»‹

![image-20250727223616788](../AppData/Roaming/Typora/typora-user-images/image-20250727223616788.png)

![image-20250727223713786](../AppData/Roaming/Typora/typora-user-images/image-20250727223713786.png)

##### å•å…ƒæµ‹è¯•

![image-20250727224038828](../AppData/Roaming/Typora/typora-user-images/image-20250727224038828.png)

![image-20250727232701892](../AppData/Roaming/Typora/typora-user-images/image-20250727232701892.png)

##### æ–­è¨€

![image-20250727233819209](../AppData/Roaming/Typora/typora-user-images/image-20250727233819209.png)

![image-20250727233351593](../AppData/Roaming/Typora/typora-user-images/image-20250727233351593.png)

##### å¸¸è§æ³¨è§£

![image-20250727234244789](../AppData/Roaming/Typora/typora-user-images/image-20250727234244789.png)

![image-20250727235119694](../AppData/Roaming/Typora/typora-user-images/image-20250727235119694.png)

##### ä¼ä¸šæµ‹è¯•

![image-20250727235527535](../AppData/Roaming/Typora/typora-user-images/image-20250727235527535.png)

![image-20250727235747255](../AppData/Roaming/Typora/typora-user-images/image-20250727235747255.png)

![image-20250728000038221](../AppData/Roaming/Typora/typora-user-images/image-20250728000038221.png)

##### è¦†ç›–ç‡

![image-20250728000356871](../AppData/Roaming/Typora/typora-user-images/image-20250728000356871.png)

##### ä¾èµ–èŒƒå›´

![image-20250728110931431](../AppData/Roaming/Typora/typora-user-images/image-20250728110931431.png)

è·³è¿‡æµ‹è¯•

![image-20250728111355754](../AppData/Roaming/Typora/typora-user-images/image-20250728111355754.png)

#### å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ³•

ä¸‹è½½çš„åŒ…ä¸å®Œæ•´

![image-20250729104635205](../AppData/Roaming/Typora/typora-user-images/image-20250729104635205.png)

è§£å†³æ–¹æ³•

![image-20250729104451382](../AppData/Roaming/Typora/typora-user-images/image-20250729104451382.png)

## SpringBoot Web

#### å…¥é—¨

##### å¸¸è§é—®é¢˜åŠè§£å†³

![image-20250729164236472](../AppData/Roaming/Typora/typora-user-images/image-20250729164236472.png)

##### httpåè®®ä»‹ç»

![image-20250729165826524](../AppData/Roaming/Typora/typora-user-images/image-20250729165826524.png)



##### è¯·æ±‚æ•°æ®ï¼ˆå®¢æˆ·ç«¯å¯¹æœåŠ¡å™¨ç«¯ï¼‰

![image-20250729170657627](../AppData/Roaming/Typora/typora-user-images/image-20250729170657627.png)

![image-20250729170524303](../AppData/Roaming/Typora/typora-user-images/image-20250729170524303.png)

![image-20250729170449028](../AppData/Roaming/Typora/typora-user-images/image-20250729170449028.png)

![image-20250729171017178](../AppData/Roaming/Typora/typora-user-images/image-20250729171017178.png)

##### è·å–è¯·æ±‚ï¼ˆhttpservletrequestï¼‰æ“ä½œ

æˆ‘æ˜¯æœåŠ¡å™¨ï¼Œç¬¬ä¸€ä¸ªæ˜¯è¦è·å–åˆ°æˆ‘è¿™ä¸ªæœåŠ¡å™¨å†…å®¹çš„åœ°å€ï¼Œç¬¬äºŒä¸ªæ˜¯æˆ‘çš„å®Œæ•´åœ°å€

![image-20250729171644017](../AppData/Roaming/Typora/typora-user-images/image-20250729171644017.png)

##### å“åº”æ•°æ®ï¼ˆæœåŠ¡å™¨ç«¯å¯¹å®¢æˆ·ç«¯ï¼‰

![image-20250729180456381](../AppData/Roaming/Typora/typora-user-images/image-20250729180456381.png)

![image-20250729180607234](../AppData/Roaming/Typora/typora-user-images/image-20250729180607234.png)

![image-20250729180733399](../AppData/Roaming/Typora/typora-user-images/image-20250729180733399.png)

![image-20250729181015621](../AppData/Roaming/Typora/typora-user-images/image-20250729181015621.png)

å“åº”æ•°æ®è®¾ç½®

![image-20250729182242953](../AppData/Roaming/Typora/typora-user-images/image-20250729182242953.png)

ä»£ç å®ç°

åŸºäºServlet

![image-20250729182528654](../AppData/Roaming/Typora/typora-user-images/image-20250729182528654.png)

åŸºäºSpringå®ç°

![image-20250729183124692](../AppData/Roaming/Typora/typora-user-images/image-20250729183124692.png)

#### æ¶æ„

##### ä¸‰å±‚æ¶æ„

![image-20250730162119706](../AppData/Roaming/Typora/typora-user-images/image-20250730162119706.png)

##### å†…èšä¸è€¦åˆ

###### å®šä¹‰

![image-20250730183312243](../AppData/Roaming/Typora/typora-user-images/image-20250730183312243.png)

###### è§£å†³æ–¹æ³•

![image-20250730183646372](../AppData/Roaming/Typora/typora-user-images/image-20250730183646372.png)

è§£å†³æ–¹æ³•

![image-20250730184216869](../AppData/Roaming/Typora/typora-user-images/image-20250730184216869.png)

![image-20250730184313454](../AppData/Roaming/Typora/typora-user-images/image-20250730184313454.png)

![image-20250730184417584](../AppData/Roaming/Typora/typora-user-images/image-20250730184417584.png)

###### IOCè¯¦è§£

![image-20250730184840413](../AppData/Roaming/Typora/typora-user-images/image-20250730184840413.png)

å¿…é¡»è¦æ‰«æåˆ°ï¼Œbeanæ³¨è§£æ‰ä¼šç”Ÿæ•ˆï¼ˆæ‰«æèŒƒå›´ï¼šå¯åŠ¨ç±»åŠå…¶å­åŒ…ï¼‰

![image-20250730190919044](../AppData/Roaming/Typora/typora-user-images/image-20250730190919044.png)



###### DIè¯¦è§£

![image-20250730191705475](../AppData/Roaming/Typora/typora-user-images/image-20250730191705475.png)

![image-20250730210203595](../AppData/Roaming/Typora/typora-user-images/image-20250730210203595.png)



ç¼ºç‚¹ï¼šæ²¡æœ‰ç”¨setteræˆ–è€…getterå°è£…

![image-20250730210357202](../AppData/Roaming/Typora/typora-user-images/image-20250730210357202.png)

![image-20250730210628228](../AppData/Roaming/Typora/typora-user-images/image-20250730210628228.png)

![image-20250730210733143](../AppData/Roaming/Typora/typora-user-images/image-20250730210733143.png)

###### å¤šä¸ªç›¸åŒç±»å‹çš„beanå‡ºç°çš„é—®é¢˜

![image-20250730211349140](../AppData/Roaming/Typora/typora-user-images/image-20250730211349140.png)

## MySQL

#### å¦‚ä½•å¯åŠ¨

net start mysql

mysql -u root -p

è¾“å…¥å¯†ç 

#### ç®€ä»‹

![image-20250730232835333](../AppData/Roaming/Typora/typora-user-images/image-20250730232835333.png)

#### è¯­è¨€ç±»å‹

##### æ€»çš„

![image-20250730233716342](../AppData/Roaming/Typora/typora-user-images/image-20250730233716342.png)

##### DDLåŠå…¶è¯­æ³•

![image-20250730233916218](../AppData/Roaming/Typora/typora-user-images/image-20250730233916218.png)

###### å…³äºè¡¨

è¯­æ³•

![image-20250731181949509](../AppData/Roaming/Typora/typora-user-images/image-20250731181949509.png)

ç¤ºä¾‹

![image-20250731182502955](../AppData/Roaming/Typora/typora-user-images/image-20250731182502955.png)

![image-20250731181844829](../AppData/Roaming/Typora/typora-user-images/image-20250731181844829.png)

æ•°æ®ç±»å‹

![image-20250731183208300](../AppData/Roaming/Typora/typora-user-images/image-20250731183208300.png)

![image-20250731183618039](../AppData/Roaming/Typora/typora-user-images/image-20250731183618039.png)

![image-20250731183740644](../AppData/Roaming/Typora/typora-user-images/image-20250731183740644.png)

###### å¢åˆ æ”¹æŸ¥

![image-20250801210614496](../AppData/Roaming/Typora/typora-user-images/image-20250801210614496.png)

##### DMLè¯­å¥

###### ç®€ä»‹

![image-20250801211631619](../AppData/Roaming/Typora/typora-user-images/image-20250801211631619.png)

###### insertè¯­å¥

![image-20250801211840459](../AppData/Roaming/Typora/typora-user-images/image-20250801211840459.png)

![image-20250801212650615](../AppData/Roaming/Typora/typora-user-images/image-20250801212650615.png)

###### update

![image-20250801215725062](../AppData/Roaming/Typora/typora-user-images/image-20250801215725062.png)

![image-20250801220017078](../AppData/Roaming/Typora/typora-user-images/image-20250801220017078.png)

###### delete

![image-20250801220049673](../AppData/Roaming/Typora/typora-user-images/image-20250801220049673.png)

![image-20250801220238855](../AppData/Roaming/Typora/typora-user-images/image-20250801220238855.png)

##### DQLè¯­å¥

###### ç®€ä»‹

![image-20250801220327734](../AppData/Roaming/Typora/typora-user-images/image-20250801220327734.png)

![image-20250801220555528](../AppData/Roaming/Typora/typora-user-images/image-20250801220555528.png)

###### åŸºæœ¬æŸ¥è¯¢

![image-20250801220714521](../AppData/Roaming/Typora/typora-user-images/image-20250801220714521.png)

![image-20250801221553182](../AppData/Roaming/Typora/typora-user-images/image-20250801221553182.png)

![image-20250801221716484](../AppData/Roaming/Typora/typora-user-images/image-20250801221716484.png)

###### æ¡ä»¶æŸ¥è¯¢

![image-20250801233812015](../AppData/Roaming/Typora/typora-user-images/image-20250801233812015.png)

![image-20250801234833330](../AppData/Roaming/Typora/typora-user-images/image-20250801234833330.png)

###### åˆ†ç»„æŸ¥è¯¢

![image-20250801235036083](../AppData/Roaming/Typora/typora-user-images/image-20250801235036083.png)

![image-20250801235307487](../AppData/Roaming/Typora/typora-user-images/image-20250801235307487.png)

ä¼˜å…ˆä½¿ç”¨

![image-20250801235358765](../AppData/Roaming/Typora/typora-user-images/image-20250801235358765.png)

![image-20250801235507088](../AppData/Roaming/Typora/typora-user-images/image-20250801235507088.png)

![image-20250801235623724](../AppData/Roaming/Typora/typora-user-images/image-20250801235623724.png)

![image-20250801235841692](../AppData/Roaming/Typora/typora-user-images/image-20250801235841692.png)

![image-20250802000139621](../AppData/Roaming/Typora/typora-user-images/image-20250802000139621.png)

![image-20250802000236520](../AppData/Roaming/Typora/typora-user-images/image-20250802000236520.png)

###### æ’åºæŸ¥è¯¢

![image-20250802000500886](../AppData/Roaming/Typora/typora-user-images/image-20250802000500886.png)

![image-20250802000806025](../AppData/Roaming/Typora/typora-user-images/image-20250802000806025.png)

###### åˆ†é¡µæŸ¥è¯¢

![image-20250802001016541](../AppData/Roaming/Typora/typora-user-images/image-20250802001016541.png)

![image-20250802001315432](../AppData/Roaming/Typora/typora-user-images/image-20250802001315432.png)

## Mybatis

#### å†™åœ¨å‰é¢

è¿™æ˜¯æ“ä½œæ•°æ®åº“æœ€åº•å±‚çš„è¯­è¨€

![image-20250802185144043](../AppData/Roaming/Typora/typora-user-images/image-20250802185144043.png)

![image-20250802193212517](../AppData/Roaming/Typora/typora-user-images/image-20250802193212517.png)

![image-20250802193419294](../AppData/Roaming/Typora/typora-user-images/image-20250802193419294.png)

![image-20250802193535808](../AppData/Roaming/Typora/typora-user-images/image-20250802193535808.png)

![image-20250802200926157](../AppData/Roaming/Typora/typora-user-images/image-20250802200926157.png)

#### ç®€ä»‹

![image-20250802201359469](../AppData/Roaming/Typora/typora-user-images/image-20250802201359469.png)

#### åˆ›å»º

![image-20250802204956106](../AppData/Roaming/Typora/typora-user-images/image-20250802204956106.png)

#### æ“ä½œ

æ•°æ®åº“è¿æ¥æ“ä½œ

![image-20250802211034130](../AppData/Roaming/Typora/typora-user-images/image-20250802211034130.png)

![image-20250802210855090](../AppData/Roaming/Typora/typora-user-images/image-20250802210855090.png)

![image-20250802212132199](../AppData/Roaming/Typora/typora-user-images/image-20250802212132199.png)

![image-20250802232612465](../AppData/Roaming/Typora/typora-user-images/image-20250802232612465.png)

#### è¿æ¥ç­‰é…ç½®æ“ä½œ

![image-20250802224850354](../AppData/Roaming/Typora/typora-user-images/image-20250802224850354.png)

![image-20250802225217794](../AppData/Roaming/Typora/typora-user-images/image-20250802225217794.png)

![image-20250802225255375](../AppData/Roaming/Typora/typora-user-images/image-20250802225255375.png)

#### å¯¹æ¯”

![image-20250802231857538](../AppData/Roaming/Typora/typora-user-images/image-20250802231857538.png)

#### è¿æ¥æ± 

![image-20250802232336616](../AppData/Roaming/Typora/typora-user-images/image-20250802232336616.png)



![image-20250802232741952](../AppData/Roaming/Typora/typora-user-images/image-20250802232741952.png)

![image-20250802233037221](../AppData/Roaming/Typora/typora-user-images/image-20250802233037221.png)

#### å¢åˆ æ”¹æŸ¥

##### åˆ é™¤

![image-20250802233750234](../AppData/Roaming/Typora/typora-user-images/image-20250802233750234.png)

**![image-20250802234048814](../AppData/Roaming/Typora/typora-user-images/image-20250802234048814.png)**

![image-20250802234132453](../AppData/Roaming/Typora/typora-user-images/image-20250802234132453.png)



![image-20250802234302828](../AppData/Roaming/Typora/typora-user-images/image-20250802234302828.png)



![image-20250802234652026](../AppData/Roaming/Typora/typora-user-images/image-20250802234652026.png)

##### å¢

![image-20250802235200093](../AppData/Roaming/Typora/typora-user-images/image-20250802235200093.png)

![image-20250802235407015](../AppData/Roaming/Typora/typora-user-images/image-20250802235407015.png)

![image-20250803000937832](../AppData/Roaming/Typora/typora-user-images/image-20250803000937832.png)



##### æ”¹

![image-20250803001054625](../AppData/Roaming/Typora/typora-user-images/image-20250803001054625.png)



##### æŸ¥

ä¼ å¤šä¸ªå‚æ•°è¦å–åå­—

![image-20250803001751157](../AppData/Roaming/Typora/typora-user-images/image-20250803001751157.png)

![image-20250803001935413](../AppData/Roaming/Typora/typora-user-images/image-20250803001935413.png)

![image-20250803002503571](../AppData/Roaming/Typora/typora-user-images/image-20250803002503571.png)



å®˜æ–¹éª¨æ¶

![image-20250803002154103](../AppData/Roaming/Typora/typora-user-images/image-20250803002154103.png)

![image-20250803002128857](../AppData/Roaming/Typora/typora-user-images/image-20250803002128857.png)

#### xmlæ˜ å°„é…ç½®

##### 1.

![image-20250803164303389](../AppData/Roaming/Typora/typora-user-images/image-20250803164303389.png)



![image-20250803164529452](../AppData/Roaming/Typora/typora-user-images/image-20250803164529452.png)

![image-20250803164857758](../AppData/Roaming/Typora/typora-user-images/image-20250803164857758.png)

##### 2.

![image-20250803165608884](../AppData/Roaming/Typora/typora-user-images/image-20250803165608884.png)

#### SpringBooté¡¹ç›®é…ç½®æ–‡ä»¶

![image-20250803172414748](../AppData/Roaming/Typora/typora-user-images/image-20250803172414748.png)

![image-20250803173256060](../AppData/Roaming/Typora/typora-user-images/image-20250803173256060.png)

![image-20250803173546519](../AppData/Roaming/Typora/typora-user-images/image-20250803173546519.png)

![image-20250803173634428](../AppData/Roaming/Typora/typora-user-images/image-20250803173634428.png)



## é¡¹ç›®å¯åŠ¨

![image-20250804204800702](../AppData/Roaming/Typora/typora-user-images/image-20250804204800702.png)

è¿™æ˜¯åœ¨åˆ‡æ¢æ–‡ä»¶

```
cd /d D:\CodingAPP\nginx-1.22.0-web
.\nginx.exe -t



nginx -s reload
```



è¿™æ˜¯åœ¨çº¿ç½‘å€https://heuqqdmbyk.feishu.cn/wiki/space/7413668442156498972?ccm_open_type=lark_wiki_spaceLink&open_tab_from=wiki_home

















## è½¯ä»¶å¼€å‘



#### å‡†å¤‡å·¥ä½œ

##### Restful

![image-20250803182001318](../AppData/Roaming/Typora/typora-user-images/image-20250803182001318.png)

![image-20250803182058905](../AppData/Roaming/Typora/typora-user-images/image-20250803182058905.png)

##### é¡¹ç›®åˆ›å»º

###### å¼€å§‹

![image-20250902121038280](../AppData/Roaming/Typora/typora-user-images/image-20250902121038280.png)

![image-20250803191501755](../AppData/Roaming/Typora/typora-user-images/image-20250803191501755.png)



![image-20250803191530893](../AppData/Roaming/Typora/typora-user-images/image-20250803191530893.png)

###### ç¬¬äºŒæ­¥

æ£€æŸ¥structureçš„sdkç‰ˆæœ¬

![image-20250902121243216](../AppData/Roaming/Typora/typora-user-images/image-20250902121243216.png)

###### æ£€æŸ¥Maven

![image-20250902121439070](../AppData/Roaming/Typora/typora-user-images/image-20250902121439070.png)

###### ä¿®æ”¹ç¼–ç 

![image-20250902121531854](../AppData/Roaming/Typora/typora-user-images/image-20250902121531854.png)

###### å¼€å§‹åˆ›å»ºé¡¹ç›®

![image-20250902121631182](../AppData/Roaming/Typora/typora-user-images/image-20250902121631182.png)

###### å‹¾é€‰ä¾èµ–

![image-20250902121731186](../AppData/Roaming/Typora/typora-user-images/image-20250902121731186.png)

![image-20250902121757576](../AppData/Roaming/Typora/typora-user-images/image-20250902121757576.png)

![image-20250902121817624](../AppData/Roaming/Typora/typora-user-images/image-20250902121817624.png)

![image-20250902121835883](../AppData/Roaming/Typora/typora-user-images/image-20250902121835883.png)

###### åˆ›å»ºæˆåŠŸ

![image-20250902121919560](../AppData/Roaming/Typora/typora-user-images/image-20250902121919560.png)

###### åŸæ¥çš„åˆ æ‰

![image-20250902122022026](../AppData/Roaming/Typora/typora-user-images/image-20250902122022026.png)

###### åŠ æ–‡ä»¶

![image-20250902122214295](../AppData/Roaming/Typora/typora-user-images/image-20250902122214295.png)

###### åˆ›åŒ…

![image-20250902122310846](../AppData/Roaming/Typora/typora-user-images/image-20250902122310846.png)







##### æ€ç»´é€»è¾‘

![image-20250804004957629](../AppData/Roaming/Typora/typora-user-images/image-20250804004957629.png)

##### æœªå°è£…æ•°æ®åŸå› 

![image-20250804170746121](../AppData/Roaming/Typora/typora-user-images/image-20250804170746121.png)

è§£å†³æ–¹æ³•ï¼ˆä¸¤ç§ï¼‰

![image-20250804172128925](../AppData/Roaming/Typora/typora-user-images/image-20250804172128925.png)

æœ€ç»ˆè§£å†³æ–¹æ³•ï¼ˆè¾“å…¥camelå‡ºæ¥ï¼‰

![image-20250804172425225](../AppData/Roaming/Typora/typora-user-images/image-20250804172425225.png)

##### åå‘ä»£ç†

![image-20250804220848950](../AppData/Roaming/Typora/typora-user-images/image-20250804220848950.png)

![image-20250804221454038](../AppData/Roaming/Typora/typora-user-images/image-20250804221454038.png)

![image-20250804221613807](../AppData/Roaming/Typora/typora-user-images/image-20250804221613807.png)

#### é¡¹ç›®åŠŸèƒ½

##### åˆ é™¤æ“ä½œæ€ç»´é€»è¾‘

![image-20250804222011946](../AppData/Roaming/Typora/typora-user-images/image-20250804222011946.png)

###### æ–¹æ³•ä¸€ï¼ˆä¸æ¨èï¼‰

![image-20250804222149147](../AppData/Roaming/Typora/typora-user-images/image-20250804222149147.png)

###### æ–¹å¼äºŒ

![image-20250804222637659](../AppData/Roaming/Typora/typora-user-images/image-20250804222637659.png)

![image-20250804223553591](../AppData/Roaming/Typora/typora-user-images/image-20250804223553591.png)

###### æ–¹å¼ä¸‰

![image-20250804223840411](../AppData/Roaming/Typora/typora-user-images/image-20250804223840411.png)

![image-20250804223727103](../AppData/Roaming/Typora/typora-user-images/image-20250804223727103.png)

##### æ–°å¢åŠŸèƒ½

**æ³¨æ„è¿™é‡Œçš„RequestBody**

![image-20250805003941429](../AppData/Roaming/Typora/typora-user-images/image-20250805003941429.png)

##### ä¿®æ”¹æ“ä½œ

###### æ€ç»´é€»è¾‘

![image-20250805163341026](../AppData/Roaming/Typora/typora-user-images/image-20250805163341026.png)

###### æ“ä½œæ–¹æ³•

![image-20250805165255372](../AppData/Roaming/Typora/typora-user-images/image-20250805165255372.png)

ç®€ç•¥å†™æ³•

![image-20250805165823889](../AppData/Roaming/Typora/typora-user-images/image-20250805165823889.png)

###### æ”¹çš„æ€ç»´é€»è¾‘

![image-20250805173449523](../AppData/Roaming/Typora/typora-user-images/image-20250805173449523.png)

@RequestBodyå°†jsonå°è£…åœ¨å¯¹è±¡é‡Œ

##### æŠ½è±¡æˆå…¬å…±éƒ¨åˆ†

![image-20250805214831202](../AppData/Roaming/Typora/typora-user-images/image-20250805214831202.png)



#### æ—¥å¿—åŠŸèƒ½

##### ç®€ä»‹

![image-20250805215454136](../AppData/Roaming/Typora/typora-user-images/image-20250805215454136.png)

![image-20250805215738799](../AppData/Roaming/Typora/typora-user-images/image-20250805215738799.png)



##### æ“ä½œ

![image-20250805220221064](../AppData/Roaming/Typora/typora-user-images/image-20250805220221064.png)



![image-20250805222030593](../AppData/Roaming/Typora/typora-user-images/image-20250805222030593.png)

##### é…ç½®æ–‡ä»¶è¯¦è§£

![image-20250805222248296](../AppData/Roaming/Typora/typora-user-images/image-20250805222248296.png)

![image-20250805224832268](../AppData/Roaming/Typora/typora-user-images/image-20250805224832268.png)

æ—¥å¿—è®°å½•çš„çº¿ç¨‹å’Œä»–çš„çº§åˆ«

![image-20250805225153450](../AppData/Roaming/Typora/typora-user-images/image-20250805225153450.png)

![image-20250805230742210](../AppData/Roaming/Typora/typora-user-images/image-20250805230742210.png)

##### æ—¥å¿—çº§åˆ«

![image-20250805231245870](../AppData/Roaming/Typora/typora-user-images/image-20250805231245870.png)

#### å¤šè¡¨ç»“æ„

##### ç®€ä»‹

![image-20250806172304840](../AppData/Roaming/Typora/typora-user-images/image-20250806172304840.png)

##### ä¸€å¯¹å¤š

![image-20250806172440651](../AppData/Roaming/Typora/typora-user-images/image-20250806172440651.png)

![image-20250806173136391](../AppData/Roaming/Typora/typora-user-images/image-20250806173136391.png)

###### é—®é¢˜

![image-20250806175203640](../AppData/Roaming/Typora/typora-user-images/image-20250806175203640.png)

###### è§£å†³åŠæ³•ï¼ˆç‰©ç†å¤–é”®ï¼‰

å¿«æ·æ–¹å¼

![image-20250806180956530](../AppData/Roaming/Typora/typora-user-images/image-20250806180956530.png)

![image-20250806181103949](../AppData/Roaming/Typora/typora-user-images/image-20250806181103949.png)



![image-20250806180115014](../AppData/Roaming/Typora/typora-user-images/image-20250806180115014.png)

###### è§£å†³æ–¹æ³•ï¼ˆé€»è¾‘å¤–é”®ï¼‰

![image-20250806181314842](../AppData/Roaming/Typora/typora-user-images/image-20250806181314842.png)

##### ä¸€å¯¹ä¸€

![image-20250806183808398](../AppData/Roaming/Typora/typora-user-images/image-20250806183808398.png)

![image-20250806184034431](../AppData/Roaming/Typora/typora-user-images/image-20250806184034431.png)

##### å¤šå¯¹å¤š

###### æ–¹æ³•

![image-20250806190412513](../AppData/Roaming/Typora/typora-user-images/image-20250806190412513.png)

##### æ¡ˆä¾‹

åé¢çš„ä¸å‰é¢çš„ç›¸å…³è”ï¼ˆåæŒ‡å‰ï¼‰

![image-20250808115049044](../AppData/Roaming/Typora/typora-user-images/image-20250808115049044.png)

##### å¤šè¡¨æŸ¥è¯¢

###### å‡ºç°çš„é—®é¢˜

![image-20250808120620689](../AppData/Roaming/Typora/typora-user-images/image-20250808120620689.png)

![image-20250808120449068](../AppData/Roaming/Typora/typora-user-images/image-20250808120449068.png)

###### è§£å†³

![image-20250808120714830](../AppData/Roaming/Typora/typora-user-images/image-20250808120714830.png)

###### å¤šè¡¨æŸ¥è¯¢åˆ†ç±»

![image-20250808120844223](../AppData/Roaming/Typora/typora-user-images/image-20250808120844223.png)

###### å†…è¿æ¥

![image-20250808211741363](../AppData/Roaming/Typora/typora-user-images/image-20250808211741363.png)



###### å†…è¿æ¥æ³¨æ„äº‹é¡¹

ä»–æ˜¯æŸ¥è¯¢ä¸¤ä¸ªè¡¨çš„äº¤é›†ï¼Œç¬¬ä¸€ï¼šä¸¤ä¸ªæœ‰å¤–é”®ï¼Œç¬¬äºŒï¼šå…³è”çš„é‚£ä¸ªå±æ€§å®ƒçš„ä¸ä¸ºç©ºï¼Œå¿…é¡»æœ‰å€¼

![image-20250808121734628](../AppData/Roaming/Typora/typora-user-images/image-20250808121734628.png)

![image-20250808211628977](../AppData/Roaming/Typora/typora-user-images/image-20250808211628977.png)

###### å¤–è¿æ¥

å·¦å³å¤–è¿æ¥

æŸ¥è°å°±è°å¤–è¿æ¥

![image-20250808215353279](../AppData/Roaming/Typora/typora-user-images/image-20250808215353279.png)

###### å†…å¤–è¿æ¥åŒºåˆ«

å†…è¿æ¥å’Œå¤–è¿æ¥çš„ä¸»è¦åŒºåˆ«åœ¨äºå®ƒä»¬å¦‚ä½•å¤„ç†æ²¡æœ‰åŒ¹é…å€¼çš„è¡Œã€‚

- **å†…è¿æ¥ï¼ˆINNER JOINï¼‰**ï¼š**ä¸èƒ½æŸ¥è¯¢ç©ºçš„å­—æ®µ**ã€‚å®ƒåªè¿”å›åœ¨ä¸¤ä¸ªï¼ˆæˆ–å¤šä¸ªï¼‰è¡¨ä¸­éƒ½å­˜åœ¨åŒ¹é…å€¼çš„è¡Œã€‚å¦‚æœä¸€ä¸ªè¡¨çš„æŸè¡Œåœ¨å¦ä¸€ä¸ªè¡¨ä¸­æ²¡æœ‰åŒ¹é…ï¼Œé‚£ä¹ˆè¯¥è¡Œå°±ä¸ä¼šå‡ºç°åœ¨ç»“æœä¸­ï¼Œé›†ä¸­å› æ­¤æ°¸è¿œä¸ä¼šè¿”å›ä¸€ä¸ªâ€œç©ºâ€çš„ã€ä¸åŒ¹é…çš„å­—æ®µã€‚
- **å¤–è¿æ¥ï¼ˆOUTER JOINï¼‰**ï¼š**å¯ä»¥æŸ¥è¯¢ç©ºçš„å­—æ®µ**ã€‚å®ƒä¼šè¿”å›æ‰€æœ‰åŒ¹é…é¡¹çš„è¡Œï¼ŒåŒæ—¶æŸ“è‰²ä½“è¿”å›ä¸€ä¸ªè¡¨ä¸­æ²¡æœ‰åŒ¹é…å€¼çš„è¡Œã€‚å¯¹äºé‚£äº›æ²¡æœ‰åŒ¹é…é¡¹çš„è¡Œï¼Œåœ¨å¤–è¿æ¥ç»“æœä¸­ï¼Œæ¥è‡ªå¦ä¸€ä¸ªè¡¨çš„åˆ—å°†æ˜¾ç¤ºä¸º`NULL`ï¼ˆç©ºå€¼ï¼‰ã€‚





###### å­æŸ¥è¯¢

![image-20250808223234838](../AppData/Roaming/Typora/typora-user-images/image-20250808223234838.png)



![image-20250808232032896](../AppData/Roaming/Typora/typora-user-images/image-20250808232032896.png)

![image-20250808234835126](../AppData/Roaming/Typora/typora-user-images/image-20250808234835126.png)





###### å†™åœ¨åé¢

![image-20250808235500272](../AppData/Roaming/Typora/typora-user-images/image-20250808235500272.png)

#### åˆ†é¡µæŸ¥è¯¢

##### ç®€ä»‹æ–¹æ³•

![image-20250810221343637](../AppData/Roaming/Typora/typora-user-images/image-20250810221343637.png)

![image-20250810221439363](../AppData/Roaming/Typora/typora-user-images/image-20250810221439363.png)

##### æ€è·¯

![image-20250811003408377](../AppData/Roaming/Typora/typora-user-images/image-20250811003408377.png)

##### PageHelper

###### ç®€ä»‹

![image-20250811142644189](../AppData/Roaming/Typora/typora-user-images/image-20250811142644189.png)

###### å¿…è¦æ¡ä»¶

![image-20250811142828030](../AppData/Roaming/Typora/typora-user-images/image-20250811142828030.png)

###### è¿™é‡Œåœ¨è¿›è¡Œç±»å‹è½¬æ¢

![image-20250811151335434](../AppData/Roaming/Typora/typora-user-images/image-20250811151335434.png)

å›¾ç‰‡ä¸­çš„ä»£ç  `Page<Emp> p = (Page<Emp>) empList;` èƒ½å¤Ÿè¿›è¡Œå¼ºè½¬ï¼Œæ˜¯å› ä¸ºä½ ä½¿ç”¨äº† MyBatis åˆ†é¡µæ’ä»¶ PageHelperã€‚

å½“ä½ åœ¨ `EmpServiceImpl.java` ä¸­è°ƒç”¨ `PageHelper.startPage(page, pageSize);` åï¼ŒMyBatis åˆ†é¡µæ’ä»¶ä¼šè‡ªåŠ¨æ‹¦æˆªæ¥ä¸‹æ¥çš„ç¬¬ä¸€ä¸ª MyBatis æŸ¥è¯¢è¯·æ±‚ï¼Œå¹¶å¯¹å…¶è¿›è¡ŒåŠ¨æ€ SQL æ”¹é€ ï¼Œä¾‹å¦‚ï¼š

1. **æ·»åŠ åˆ†é¡µ SQLï¼š** å®ƒä¼šåœ¨ä½ åŸå§‹çš„ SQL è¯­å¥åé¢è‡ªåŠ¨è¿½åŠ  `limit` å­å¥ï¼Œä»¥å®ç°ç‰©ç†åˆ†é¡µã€‚
2. **æ‰§è¡Œ count æŸ¥è¯¢ï¼š** åœ¨æ‰§è¡Œä½ çš„æŸ¥è¯¢ä¹‹å‰ï¼Œå®ƒä¼šå…ˆæ‰§è¡Œä¸€ä¸ªé¢å¤–çš„ `count` æŸ¥è¯¢æ¥è·å–æ€»è®°å½•æ•°ã€‚
3. **è¿”å› `Page` å¯¹è±¡ï¼š** åœ¨æ‰§è¡Œå®Œåˆ†é¡µæŸ¥è¯¢åï¼ŒPageHelper ä¸å†è¿”å›æ™®é€šçš„ `java.util.ArrayList`ï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ªå®ç°äº† `java.util.List` æ¥å£çš„ `com.github.pagehelper.Page` å¯¹è±¡ã€‚è¿™ä¸ª `Page` å¯¹è±¡é™¤äº†åŒ…å«åˆ†é¡µåçš„ç»“æœåˆ—è¡¨ï¼Œè¿˜é¢å¤–åŒ…å«äº†æ€»è®°å½•æ•°ã€æ€»é¡µæ•°ç­‰åˆ†é¡µä¿¡æ¯ã€‚

å› æ­¤ï¼Œ`empMapper.list()` è¿”å›çš„ `empList` è™½ç„¶å£°æ˜çš„ç±»å‹æ˜¯ `List<Emp>`ï¼Œä½†å®é™…è¿è¡Œæ—¶çš„å¯¹è±¡ç±»å‹æ˜¯ `Page<Emp>`ã€‚å› ä¸º `Page<Emp>` æ˜¯ `List<Emp>` çš„ä¸€ä¸ªå­ç±»ï¼Œæ‰€ä»¥å¯ä»¥å®‰å…¨åœ°è¿›è¡Œå¼ºåˆ¶ç±»å‹è½¬æ¢ã€‚



    class Parent {}
    class Child extends Parent {}
    
    public class Test {
        public static void main(String[] args) {
            // çˆ¶ç±»å¼•ç”¨æŒ‡å‘å­ç±»å¯¹è±¡ï¼ˆå‘ä¸Šè½¬å‹ï¼Œè‡ªåŠ¨å®Œæˆï¼‰
            Parent parent = new Child(); 
        // å¼ºåˆ¶è½¬æ¢ä¸ºå­ç±»ï¼ˆåˆæ³•ï¼Œå› ä¸ºå®é™…å¯¹è±¡æ˜¯ Childï¼‰
        Child child = (Child) parent; // æ­£ç¡®ï¼Œæ— å¼‚å¸¸
    }
}

###### æ³¨æ„äº‹é¡¹

![image-20250811184724655](../AppData/Roaming/Typora/typora-user-images/image-20250811184724655.png)

æ³¨æ„æ—¥æœŸæ ¼å¼

![image-20250811191109404](../AppData/Roaming/Typora/typora-user-images/image-20250811191109404.png)

é…ç½®selectæ–‡ä»¶

![image-20250811192949960](../AppData/Roaming/Typora/typora-user-images/image-20250811192949960.png)



æ³¨æ„è¿™é‡Œçš„æ‹¼æ¥æ–¹å¼

![image-20250811220525395](../AppData/Roaming/Typora/typora-user-images/image-20250811220525395.png)

###### ä¼˜åŒ–

![image-20250811221001337](../AppData/Roaming/Typora/typora-user-images/image-20250811221001337.png)

![image-20250811222926386](../AppData/Roaming/Typora/typora-user-images/image-20250811222926386.png)



##### æ–°å¢å‘˜å·¥

###### æ€è·¯

![image-20250812004603430](../AppData/Roaming/Typora/typora-user-images/image-20250812004603430.png)



###### æ–¹æ³•

![image-20250813171020397](../AppData/Roaming/Typora/typora-user-images/image-20250813171020397.png)

###### ä¸»é”®è¿”å›

![image-20250813172231047](../AppData/Roaming/Typora/typora-user-images/image-20250813172231047.png)

![image-20250813183222420](../AppData/Roaming/Typora/typora-user-images/image-20250813183222420.png)

![image-20250813183746713](../AppData/Roaming/Typora/typora-user-images/image-20250813183746713.png)







#### äº‹åŠ¡ç®¡ç†

##### ç®€ä»‹

![image-20250814182655589](../AppData/Roaming/Typora/typora-user-images/image-20250814182655589.png)

##### æ“ä½œ

![image-20250814182757423](../AppData/Roaming/Typora/typora-user-images/image-20250814182757423.png)

##### SpringBootæ“ä½œ

![image-20250814191245916](../AppData/Roaming/Typora/typora-user-images/image-20250814191245916.png)

##### ä¸Šé¢æ–¹æ³•çš„ä¸è¶³ä»¥åŠè§£å†³æ–¹æ³•

###### ä¸è¶³

![image-20250814213021722](../AppData/Roaming/Typora/typora-user-images/image-20250814213021722.png)

###### è§£å†³æ–¹æ³•

![image-20250814215002316](../AppData/Roaming/Typora/typora-user-images/image-20250814215002316.png)

###### äº‹ç‰©è¿›é˜¶

![image-20250814215250342](../AppData/Roaming/Typora/typora-user-images/image-20250814215250342.png)

é˜²æ­¢å…¶ä»–äº‹åŠ¡å›æ»šæ‰è¿™ä¹ˆç”¨

![image-20250814225604634](../AppData/Roaming/Typora/typora-user-images/image-20250814225604634.png)

![image-20250814230508620](../AppData/Roaming/Typora/typora-user-images/image-20250814230508620.png)

###### äº‹ç‰©çš„å››å¤§ç‰¹æ€§

![image-20250814230742924](../AppData/Roaming/Typora/typora-user-images/image-20250814230742924.png)

#### æ–‡ä»¶ä¸Šä¼ 

##### ç®€ä»‹

![image-20250815165132085](../AppData/Roaming/Typora/typora-user-images/image-20250815165132085.png)

![image-20250815165449998](../AppData/Roaming/Typora/typora-user-images/image-20250815165449998.png)

![image-20250815211913563](../AppData/Roaming/Typora/typora-user-images/image-20250815211913563.png)

![image-20250815212226336](../AppData/Roaming/Typora/typora-user-images/image-20250815212226336.png)

##### é˜¿é‡Œäº‘OSS

![image-20250815220930993](../AppData/Roaming/Typora/typora-user-images/image-20250815220930993.png)

###### OSSclient

```java
import com.aliyun.oss.*;
import com.aliyun.oss.common.auth.*;
import com.aliyun.oss.common.comm.SignVersion;
import com.aliyun.oss.model.Bucket;

import java.util.List;

/**
 * OSS SDK åŸºç¡€ä½¿ç”¨ç¤ºä¾‹
 * å±•ç¤ºå¦‚ä½•åˆå§‹åŒ– OSS å®¢æˆ·ç«¯å¹¶åˆ—å‡ºæ‰€æœ‰ Bucket
 */
public class Demo {

    public static void main(String[] args) throws Exception {
        // åˆ›å»º ClientBuilderConfiguration å®ä¾‹ï¼Œç”¨äºé…ç½® OSS å®¢æˆ·ç«¯å‚æ•°
        ClientBuilderConfiguration clientBuilderConfiguration = new ClientBuilderConfiguration();
        // è®¾ç½®ç­¾åç®—æ³•ç‰ˆæœ¬ä¸º V4
        clientBuilderConfiguration.setSignatureVersion(SignVersion.V4);
        // è®¾ç½®ä½¿ç”¨ HTTPS åè®®è®¿é—® OSSï¼Œä¿è¯ä¼ è¾“å®‰å…¨æ€§
        clientBuilderConfiguration.setProtocol(Protocol.HTTPS);
        
        // åˆ›å»º OSS å®¢æˆ·ç«¯å®ä¾‹
        OSS ossClient = OSSClientBuilder.create()
                // ä»¥åä¸œ1ï¼ˆæ­å·ï¼‰åœ°åŸŸçš„å¤–ç½‘è®¿é—®åŸŸåä¸ºä¾‹ï¼ŒEndpointå¡«å†™ä¸ºoss-cn-hangzhou.aliyuncs.com
                .endpoint("oss-cn-hangzhou.aliyuncs.com")
                // ä»ç¯å¢ƒå˜é‡ä¸­è·å–è®¿é—®å‡­è¯ï¼ˆéœ€æå‰é…ç½® OSS_ACCESS_KEY_ID å’Œ OSS_ACCESS_KEY_SECRETï¼‰
                .credentialsProvider(CredentialsProviderFactory.newEnvironmentVariableCredentialsProvider())
                // è®¾ç½®å®¢æˆ·ç«¯é…ç½®
                .clientConfiguration(clientBuilderConfiguration)
                // ä»¥åä¸œ1ï¼ˆæ­å·ï¼‰åœ°åŸŸä¸ºä¾‹ï¼ŒRegionå¡«å†™ä¸ºcn-hangzhou
                .region("cn-hangzhou")
                .build();

        try {
            // åˆ—å‡ºå½“å‰ç”¨æˆ·çš„æ‰€æœ‰ Bucket
            List<Bucket> buckets = ossClient.listBuckets();
            // éå†æ‰“å°æ¯ä¸ª Bucket çš„åç§°
            for (Bucket bucket : buckets) {
                System.out.println(bucket.getName());
            }
        } finally {
            // å½“OSSClientå®ä¾‹ä¸å†ä½¿ç”¨æ—¶ï¼Œè°ƒç”¨shutdownæ–¹æ³•ä»¥é‡Šæ”¾èµ„æº
            ossClient.shutdown();
        }
    }
}
```

**è¿™ä¸ªä¾‹å­æ›´å¥½**

```
package com.it.utils;

import com.aliyun.oss.*;
import com.aliyun.oss.common.auth.CredentialsProviderFactory;
import com.aliyun.oss.common.auth.EnvironmentVariableCredentialsProvider;
import com.aliyun.oss.common.comm.SignVersion;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.beans.factory.annotation.Value;
import org.springframework.stereotype.Component;
import java.io.ByteArrayInputStream;
import java.time.LocalDate;
import java.time.format.DateTimeFormatter;
import java.util.UUID;

@Component
public class AliyunOSSOperator {
    @Autowired
    AliyunOSSProperties aliyunOSSProperties;

//    @Value("${aliyun.oss.endpoint}")
//    private String endpoint;
//    @Value("${aliyun.oss.bucketName}")
//    private String bucketName;
//    @Value("${aliyun.oss.region}")
//    private String region;


    public String upload(byte[] content, String originalFilename) throws Exception {
        String endpoint = aliyunOSSProperties.getEndpoint();
        String bucketName = aliyunOSSProperties.getBucketName();
        String region = aliyunOSSProperties.getRegion();


        // ä»ç¯å¢ƒå˜é‡ä¸­è·å–è®¿é—®å‡­è¯ã€‚è¿è¡Œæœ¬ä»£ç ç¤ºä¾‹ä¹‹å‰ï¼Œè¯·ç¡®ä¿å·²è®¾ç½®ç¯å¢ƒå˜é‡OSS_ACCESS_KEY_IDå’ŒOSS_ACCESS_KEY_SECRETã€‚
        EnvironmentVariableCredentialsProvider credentialsProvider = CredentialsProviderFactory.newEnvironmentVariableCredentialsProvider();

        // å¡«å†™Objectå®Œæ•´è·¯å¾„ï¼Œä¾‹å¦‚202406/1.pngã€‚Objectå®Œæ•´è·¯å¾„ä¸­ä¸èƒ½åŒ…å«Bucketåç§°ã€‚
        //è·å–å½“å‰ç³»ç»Ÿæ—¥æœŸçš„å­—ç¬¦ä¸²,æ ¼å¼ä¸º yyyy/MM
        String dir = LocalDate.now().format(DateTimeFormatter.ofPattern("yyyy/MM"));
        //ç”Ÿæˆä¸€ä¸ªæ–°çš„ä¸é‡å¤çš„æ–‡ä»¶å
        String newFileName = UUID.randomUUID() + originalFilename.substring(originalFilename.lastIndexOf("."));
        String objectName = dir + "/" + newFileName;

        // åˆ›å»ºOSSClientå®ä¾‹ã€‚
        ClientBuilderConfiguration clientBuilderConfiguration = new ClientBuilderConfiguration();
        clientBuilderConfiguration.setSignatureVersion(SignVersion.V4);
        OSS ossClient = OSSClientBuilder.create()
                .endpoint(endpoint)
                .credentialsProvider(credentialsProvider)
                .clientConfiguration(clientBuilderConfiguration)
                .region(region)
                .build();

        try {
            ossClient.putObject(bucketName, objectName, new ByteArrayInputStream(content));
        } finally {
            ossClient.shutdown();
        }

        return endpoint.split("//")[0] + "//" + bucketName + "." + endpoint.split("//")[1] + "/" + objectName;
    }

}
```



###### å­˜å›¾ç‰‡æ€è·¯

![image-20250815234148028](../AppData/Roaming/Typora/typora-user-images/image-20250815234148028.png)

###### å­˜å›¾ç‰‡ä¿®æ”¹åä»£ç 

![image-20250815234948089](../AppData/Roaming/Typora/typora-user-images/image-20250815234948089.png)

ä¿®æ”¹åå­—

![image-20250816001406931](../AppData/Roaming/Typora/typora-user-images/image-20250816001406931.png)

###### ä¼˜åŒ–

ä¸¤ç§æ–¹æ³•

![image-20250816161546742](../AppData/Roaming/Typora/typora-user-images/image-20250816161546742.png)

![image-20250816160031819](../AppData/Roaming/Typora/typora-user-images/image-20250816160031819.png)

#### åˆ é™¤å‘˜å·¥

##### ç›®æ ‡

![image-20250816171401151](../AppData/Roaming/Typora/typora-user-images/image-20250816171401151.png)

##### æ€è·¯

![image-20250816171721177](../AppData/Roaming/Typora/typora-user-images/image-20250816171721177.png)

##### æ–¹æ³•

![image-20250816171900736](../AppData/Roaming/Typora/typora-user-images/image-20250816171900736.png)

#### ä¿®æ”¹å‘˜å·¥

##### å›æ˜¾æ€è·¯

![image-20250816231104798](../AppData/Roaming/Typora/typora-user-images/image-20250816231104798.png)

##### å›æ˜¾æ³¨æ„

![image-20250816235406552](../AppData/Roaming/Typora/typora-user-images/image-20250816235406552.png)

![image-20250816235239776](../AppData/Roaming/Typora/typora-user-images/image-20250816235239776.png)

##### ä¿®æ”¹æ€è·¯ï¼ˆå…ˆåˆ åå­˜ï¼‰

![image-20250817003126984](../AppData/Roaming/Typora/typora-user-images/image-20250817003126984.png)

#### ç»Ÿè®¡å‘˜å·¥

##### sqlè¯­å¥

**æ³¨æ„è¿™é‡Œçš„caseè¯­å¥ï¼Œæœ‰ä¸¤ç§æ–¹æ³•**

![image-20250818113235768](../AppData/Roaming/Typora/typora-user-images/image-20250818113235768.png)

![image-20250818113506094](../AppData/Roaming/Typora/typora-user-images/image-20250818113506094.png)

##### æ€è·¯

![image-20250818113725019](../AppData/Roaming/Typora/typora-user-images/image-20250818113725019.png)

##### é‡ç‚¹å‡½æ•°

![image-20250818140909659](../AppData/Roaming/Typora/typora-user-images/image-20250818140909659.png)

```
List<Object> joblist = list.stream().map(dataMap -> dataMap.get("pos")).toList();
```

- `list.stream()`: è¿™è¡Œä»£ç å°† `list`ï¼ˆå‡è®¾å®ƒæ˜¯ä¸€ä¸ª `List<Map<String, Object>>` ç±»å‹çš„å¯¹è±¡ï¼Œå…¶ä¸­æ¯ä¸ª `Map` ä»£è¡¨ä¸€è¡Œæ•°æ®ï¼ŒåŒ…å«é”®å€¼å¯¹ï¼Œä¾‹å¦‚ `{"pos": "å­¦å·¥éƒ¨", "num": 10}`ï¼‰è½¬æ¢ä¸ºä¸€ä¸ª `Stream`ã€‚`Stream` æä¾›äº†ä¸€ç§å‡½æ•°å¼ç¼–ç¨‹çš„æ–¹å¼æ¥å¤„ç†é›†åˆã€‚
- `.map(dataMap -> dataMap.get("pos"))`: è¿™æ˜¯å¯¹æµä¸­çš„æ¯ä¸ªå…ƒç´ è¿›è¡Œæ“ä½œã€‚`map` æ–¹æ³•æ¥å—ä¸€ä¸ªå‡½æ•°ï¼Œå¹¶å°†å…¶åº”ç”¨äºæµä¸­çš„æ¯ä¸ªå…ƒç´ ï¼Œç„¶åè¿”å›ä¸€ä¸ªæ–°çš„æµã€‚
  - `dataMap -> dataMap.get("pos")`: è¿™æ˜¯ä¸€ä¸ª Lambda è¡¨è¾¾å¼ã€‚å®ƒè¡¨ç¤ºå¯¹äºæµä¸­çš„æ¯ä¸€ä¸ªå…ƒç´  `dataMap`ï¼ˆå³åˆ—è¡¨ä¸­çš„æ¯ä¸€ä¸ª `Map`ï¼‰ï¼Œæ‰§è¡Œ `dataMap.get("pos")` æ“ä½œã€‚è¿™ä¼šä»æ¯ä¸ª `Map` ä¸­è·å–é”®ä¸º `"pos"` å¯¹åº”çš„å€¼ã€‚
- `.toList()`: è¿™æ˜¯ Java 16 å¼•å…¥çš„ä¾¿æ·æ–¹æ³•ï¼Œç”¨äºå°†æµä¸­çš„æ‰€æœ‰å…ƒç´ æ”¶é›†åˆ°ä¸€ä¸ªæ–°çš„ `List` ä¸­ã€‚
- **æ€»ä½“æ¥è¯´**ï¼šè¿™è¡Œä»£ç éå†äº† `list` ä¸­çš„æ‰€æœ‰å…ƒç´ ï¼ˆ`Map`ï¼‰ï¼Œä»æ¯ä¸ª `Map` ä¸­æå– `"pos"` é”®å¯¹åº”çš„å€¼ï¼Œå¹¶å°†è¿™äº›å€¼æ”¶é›†æˆä¸€ä¸ªæ–°çš„ `List`ï¼Œèµ‹å€¼ç»™ `joblist` å˜é‡ã€‚`joblist` å°†åŒ…å«æ‰€æœ‰çš„â€œéƒ¨é—¨åç§°â€ï¼ˆä¾‹å¦‚ï¼š`["å­¦å·¥éƒ¨", "æ•™ç ”éƒ¨", "å’¨è¯¢éƒ¨", ...]`ï¼‰ã€‚

##### mysqlçš„ifå‡½æ•°

![image-20250818145940614](../AppData/Roaming/Typora/typora-user-images/image-20250818145940614.png)

#### ç™»å½•

##### æ€è·¯

![image-20250819215247719](../AppData/Roaming/Typora/typora-user-images/image-20250819215247719.png)

![image-20250819215842807](../AppData/Roaming/Typora/typora-user-images/image-20250819215842807.png)

##### ç™»å½•æ ¡éªŒæ€è·¯

![image-20250819225450883](../AppData/Roaming/Typora/typora-user-images/image-20250819225450883.png)

##### ä¼šè¯æŠ€æœ¯

![image-20250819230410098](../AppData/Roaming/Typora/typora-user-images/image-20250819230410098.png)

###### åŸºäºcookie

**æœåŠ¡å™¨ç«¯åˆ›å»ºcookieï¼Œåˆå°†cookieå€¼ä¼ ç»™ç½‘é¡µï¼Œæ­¤åæ¯æ¬¡ä¼ ä¿¡æ¯éƒ½ä¼šæŠŠcookieä¼ ç»™æœåŠ¡ç«¯**

![image-20250819233320263](../AppData/Roaming/Typora/typora-user-images/image-20250819233320263.png)

![image-20250819231534404](../AppData/Roaming/Typora/typora-user-images/image-20250819231534404.png)

###### åŸºäºsession

![image-20250820172339035](../AppData/Roaming/Typora/typora-user-images/image-20250820172339035.png)

###### ä»¤ç‰Œæ–¹æ¡ˆ

![image-20250820172729533](../AppData/Roaming/Typora/typora-user-images/image-20250820172729533.png)



##### ä»¤ç‰Œå®ç°

###### JWTä»¤ç‰Œç®€ä»‹

![image-20250820175059556](../AppData/Roaming/Typora/typora-user-images/image-20250820175059556.png)

###### JWTä»¤ç‰Œç”Ÿæˆï¼Œä»£ç å¦‚ä¸‹

![image-20250904204652175](../AppData/Roaming/Typora/typora-user-images/image-20250904204652175.png)

![image-20250820175204975](../AppData/Roaming/Typora/typora-user-images/image-20250820175204975.png)

![image-20250820180837812](../AppData/Roaming/Typora/typora-user-images/image-20250820180837812.png)

**è§£æ**

![image-20250820193143678](../AppData/Roaming/Typora/typora-user-images/image-20250820193143678.png)

![image-20250820193451006](../AppData/Roaming/Typora/typora-user-images/image-20250820193451006.png)

##### è¿‡æ»¤å™¨

![image-20250820210501340](../AppData/Roaming/Typora/typora-user-images/image-20250820210501340.png)

###### **ä»£ç å®ç°åŠå…¶é‡ç‚¹**

![image-20250820211930858](../AppData/Roaming/Typora/typora-user-images/image-20250820211930858.png)

![image-20250820212229783](../AppData/Roaming/Typora/typora-user-images/image-20250820212229783.png)

**é‡Šæ”¾æ‹¦æˆªæ“ä½œ**

![image-20250820213751006](../AppData/Roaming/Typora/typora-user-images/image-20250820213751006.png)

###### é‡ç‚¹

![image-20250820221746357](../AppData/Roaming/Typora/typora-user-images/image-20250820221746357.png)

###### filteræ‰§è¡Œæµç¨‹

![image-20250821002110117](../AppData/Roaming/Typora/typora-user-images/image-20250821002110117.png)

###### filteræ‹¦æˆª

![image-20250821002606963](../AppData/Roaming/Typora/typora-user-images/image-20250821002606963.png)

###### è¿‡æ»¤å™¨é“¾

![image-20250821002846065](../AppData/Roaming/Typora/typora-user-images/image-20250821002846065.png)

##### æ‹¦æˆªå™¨

###### ç®€ä»‹

![image-20250822111923789](../AppData/Roaming/Typora/typora-user-images/image-20250822111923789.png)

**ç›®æ ‡èµ„æºæ–¹æ³•é€šå¸¸æ˜¯æ§åˆ¶å™¨Controller**

###### ä»¤ç‰Œæ‹¦æˆªå™¨æ€è·¯

![image-20250822113625616](../AppData/Roaming/Typora/typora-user-images/image-20250822113625616.png)

###### æ³¨æ„å’Œä¼˜åŒ–

![image-20250822142051112](../AppData/Roaming/Typora/typora-user-images/image-20250822142051112.png)

**æ‰§è¡Œæµç¨‹**

![image-20250822142851289](../AppData/Roaming/Typora/typora-user-images/image-20250822142851289.png)



## Spring AOP

##### ç®€ä»‹

![image-20250822152300042](../AppData/Roaming/Typora/typora-user-images/image-20250822152300042.png)

##### ç‰¹æœ‰æ–¹æ³•

joinPoint.getTarget()è·å–**ç›®æ ‡å¯¹è±¡ï¼ˆTarget Objectï¼‰**ï¼Œä¹Ÿå°±æ˜¯è¢«ä»£ç†çš„åŸå§‹å¯¹è±¡ã€‚

joinPoint.getSignature()å½“ä½ éœ€è¦è·å–æ–¹æ³•çš„åç§°ã€å‚æ•°ç±»å‹ã€è¿”å›å€¼ç±»å‹ç­‰ä¿¡æ¯æ—¶ã€‚







##### æ“ä½œæ–¹æ³•

###### ç®€ä»‹

![image-20250822152824863](../AppData/Roaming/Typora/typora-user-images/image-20250822152824863.png)

###### å®æ“

**æ³¨æ„ä¸Šé¢çš„ä¸¤ä¸ª@**

**æ³¨æ„Around*()è¯¥åŒ…ä¸‹æ‰€æœ‰ç±» *()è¯¥ç±»ä¸‹æ‰€æœ‰å‡½æ•° *(..)æ— è®ºæ˜¯å¦æœ‰å‚æ•°**

**getSignatureæ˜¯è·å–æ–¹æ³•å**

![image-20250822155334249](../AppData/Roaming/Typora/typora-user-images/image-20250822155334249.png)

###### æ ¸å¿ƒæ¦‚å¿µ

![image-20250822190040807](../AppData/Roaming/Typora/typora-user-images/image-20250822190040807.png)

###### å¾ˆé‡è¦

å®åœ¨ä¸è¡Œå†æ”¶é›†èµ„æ–™ç†è§£

![image-20250822190642272](../AppData/Roaming/Typora/typora-user-images/image-20250822190642272.png)

**å°±æ˜¯å…ˆè¿›å…¥ä¸‹å›¾(Controller)ï¼Œæ³¨æ„æ­¤æ—¶çš„deptServiceæ˜¯ä»–å¯¹åº”çš„ä»£ç†å¯¹è±¡ï¼Œç„¶ååˆè¿›å…¥åˆ°ä¸‹äºŒproceedæ–¹æ³•ï¼Œæ¥ç€è¿›å…¥ä¸‹ä¸‰ï¼Œæ‰§è¡Œåå†å›ä¸‹äºŒ**

![image-20250822195653155](../AppData/Roaming/Typora/typora-user-images/image-20250822195653155.png)

![image-20250822200153836](../AppData/Roaming/Typora/typora-user-images/image-20250822200153836.png)

![image-20250822200340073](../AppData/Roaming/Typora/typora-user-images/image-20250822200340073.png)

##### é€šçŸ¥ç±»å‹

###### ç®€ä»‹

![image-20250822210415524](../AppData/Roaming/Typora/typora-user-images/image-20250822210415524.png)

###### ä¾‹å­

![image-20250822211036632](../AppData/Roaming/Typora/typora-user-images/image-20250822211036632.png)

**è¿™ä¸ªæ˜¯å‰é¢ï¼Œè¿™ä¸ªæ˜¯åé¢ï¼Œåƒä¸‡æ³¨æ„åˆ«ç†è§£é”™äº†**

![image-20250822211352993](../AppData/Roaming/Typora/typora-user-images/image-20250822211352993.png)

###### ç®€ä¾¿æ–¹æ³•

![image-20250822211715585](../AppData/Roaming/Typora/typora-user-images/image-20250822211715585.png)

##### é€šçŸ¥é¡ºåº

###### é¡ºåº

**æ³¨æ„ï¼šæ˜¯ç±»çš„ç±»åçš„å­—æ¯é¡ºåº**

![image-20250822213248357](../AppData/Roaming/Typora/typora-user-images/image-20250822213248357.png)

##### åˆ‡å…¥ç‚¹è¡¨è¾¾å¼

###### ç®€ä»‹ï¼ˆä¸¤ç§ï¼‰

![image-20250822234710564](../AppData/Roaming/Typora/typora-user-images/image-20250822234710564.png)



###### ç¬¬ä¸€ç§çš„è¯­æ³•è§„åˆ™ï¼ˆæ¨èï¼‰

**æ‰“ç®­å¤´çš„åœ°æ–¹æœ€å¥½ä¸è¦çœç•¥**

![image-20250822235221351](../AppData/Roaming/Typora/typora-user-images/image-20250822235221351.png)

![image-20250822235823069](../AppData/Roaming/Typora/typora-user-images/image-20250822235823069.png)



![image-20250823001615082](../AppData/Roaming/Typora/typora-user-images/image-20250823001615082.png)

åªæœ‰è¿™ä¸¤ä¸ªä½ç½®æ‰èƒ½ç”¨..

![image-20250823001801576](../AppData/Roaming/Typora/typora-user-images/image-20250823001801576.png)



###### æ–¹æ³•äºŒ

![image-20250823002042300](../AppData/Roaming/Typora/typora-user-images/image-20250823002042300.png)

1. `@Target(ElementType.METHOD)`



è¿™ä¸ªæ³¨è§£æŒ‡å®šäº† `@Log` æ³¨è§£å¯ä»¥ç”¨äºå“ªäº› Java å…ƒç´ ä¸Šã€‚

- **`ElementType.METHOD`** è¡¨ç¤ºä½ çš„ `@Log` æ³¨è§£åªèƒ½ç”¨äº**æ–¹æ³•**ä¸Šã€‚

è¿™æ„å‘³ç€å¦‚æœä½ å°è¯•å°† `@Log` æ³¨è§£æ”¾åœ¨ä¸€ä¸ªç±»ã€ä¸€ä¸ªå­—æ®µæˆ–ä¸€ä¸ªå‚æ•°ä¸Šï¼Œç¼–è¯‘å™¨ä¼šæŠ¥é”™ã€‚



2. `@Retention(RetentionPolicy.RUNTIME)`



è¿™ä¸ªæ³¨è§£æŒ‡å®šäº† `@Log` æ³¨è§£çš„ç”Ÿå‘½å‘¨æœŸï¼Œä¹Ÿå°±æ˜¯å®ƒåœ¨ä»€ä¹ˆæ—¶å€™æœ‰æ•ˆã€‚

- **`RetentionPolicy.RUNTIME`** è¡¨ç¤º `@Log` æ³¨è§£åœ¨**è¿è¡Œæ—¶**ä»ç„¶å¯ç”¨ã€‚





å¦‚ä¸‹æ–¹æ³•ï¼ˆä¸¤å¼ å›¾éƒ½è¦ï¼‰

![image-20250823002241134](../AppData/Roaming/Typora/typora-user-images/image-20250823002241134.png)

![image-20250823002331236](../AppData/Roaming/Typora/typora-user-images/image-20250823002331236.png)

##### è¿æ¥ç‚¹

###### ç®€ä»‹

![image-20250823004450541](../AppData/Roaming/Typora/typora-user-images/image-20250823004450541.png)

###### æ“ä½œæ–¹æ³•

![image-20250823004829164](../AppData/Roaming/Typora/typora-user-images/image-20250823004829164.png)



##### å¦‚ä½•ä¼ å€¼ç»™AOPç¨‹åº

###### åˆ©ç”¨ThreadLocal

![image-20250823151921869](../AppData/Roaming/Typora/typora-user-images/image-20250823151921869.png)

###### æ€è·¯

![image-20250823152739020](../AppData/Roaming/Typora/typora-user-images/image-20250823152739020.png)



![image-20250823154700871](../AppData/Roaming/Typora/typora-user-images/image-20250823154700871.png)

###### ä»£ç 

æ³¨æ„staticå’Œfinal

![image-20250823155048057](../AppData/Roaming/Typora/typora-user-images/image-20250823155048057.png)

## SpringBootåŸç†

#### é‡è¦

##### 1.ä¸¤ä¸ªæ³¨è§£

```
@Target({ElementType.TYPE})` `@Retention(RetentionPolicy.RUNTIME)
```

è¿™ä¸¤ä¸ªæ³¨è§£ä¸€èµ·ä½¿ç”¨ï¼Œè¡¨ç¤ºä½ æ­£åœ¨å®šä¹‰ä¸€ä¸ªè‡ªå®šä¹‰æ³¨è§£ï¼Œè¿™ä¸ªæ³¨è§£ï¼š

1. **åªèƒ½ç”¨äºç±»ã€æ¥å£ã€æšä¸¾æˆ–æ³¨è§£**ï¼ˆ`@Target({ElementType.TYPE})`ï¼‰ã€‚
2. **åœ¨è¿è¡Œæ—¶ä»ç„¶æœ‰æ•ˆ**ï¼Œå¯ä»¥é€šè¿‡åå°„æœºåˆ¶è¿›è¡Œè®¿é—®ï¼ˆ`@Retention(RetentionPolicy.RUNTIME)`ï¼‰ã€‚



##### 2.Controllerå’ŒIOCå®¹å™¨çš„å…³ç³»

Controller å’Œ IoC å®¹å™¨çš„å…³ç³»å¯ä»¥æ€»ç»“ä¸ºä»¥ä¸‹å‡ ç‚¹ï¼š

**ç”± IoC å®¹å™¨åˆ›å»ºå’Œç®¡ç† Controller å¯¹è±¡**ï¼š å½“ä½ å¯åŠ¨ Spring åº”ç”¨æ—¶ï¼ŒIoC å®¹å™¨ä¼šæ‰«æä½ çš„ä»£ç ã€‚ä¸€æ—¦å‘ç°è¢« `@Controller` æ³¨è§£çš„ç±»ï¼Œå®ƒå°±ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªè¯¥ç±»çš„å®ä¾‹ï¼Œå¹¶å°†å…¶æ”¾å…¥å®¹å™¨ä¸­è¿›è¡Œç®¡ç†ã€‚ä½ ä¸å†éœ€è¦è‡ªå·± `new Controller()`ã€‚

**ç”± IoC å®¹å™¨ä¸º Controller æ³¨å…¥ä¾èµ–**ï¼š Controller ç»å¸¸éœ€è¦ä¾èµ–å…¶ä»–æœåŠ¡æ¥å®Œæˆå·¥ä½œï¼Œæ¯”å¦‚ä¸€ä¸ª `UserService` æˆ– `OrderService`ã€‚ä½ åªéœ€è¦åœ¨ Controller ç±»ä¸­ç”¨ `@Autowired` æ³¨è§£è¿™äº›æœåŠ¡ï¼ŒIoC å®¹å™¨å°±ä¼šè‡ªåŠ¨æ‰¾åˆ°å¯¹åº”çš„å®ä¾‹ï¼Œå¹¶æ³¨å…¥åˆ°ä½ çš„ Controller ä¸­ã€‚è¿™ç§ä¾èµ–æ³¨å…¥ï¼ˆDependency Injectionï¼ŒDIï¼‰æ˜¯ IoC æ€æƒ³çš„å…·ä½“å®ç°ã€‚





##### 3.@EnableConfigurationProperties

**`@EnableConfigurationProperties(AliyunOSSProperties.class)`**æ˜¯ Spring Boot ä¸­ä¸€ä¸ªéå¸¸å¸¸ç”¨çš„æ³¨è§£ï¼Œå®ƒä¸»è¦æœ‰ä¸¤ä¸ªä½œç”¨ï¼š

1. **æ¿€æ´»é…ç½®ç±»ï¼š** è¿™ä¸ªæ³¨è§£å‘Šè¯‰ Spring Boot æ¡†æ¶ï¼Œå»**å¯ç”¨**å¹¶**åŠ è½½**æ‹¬å·é‡ŒæŒ‡å®šçš„é…ç½®ç±»ï¼ˆ`AliyunOSSProperties.class`ï¼‰ã€‚è¿™æ„å‘³ç€ Spring Boot ä¼šå¤„ç†è¿™ä¸ªç±»ä¸Šçš„ `@ConfigurationProperties` æ³¨è§£ã€‚
2. **æ³¨å†Œä¸º Spring Beanï¼š** ä¸€æ—¦è¿™ä¸ªé…ç½®ç±»è¢«å¯ç”¨ï¼ŒSpring Boot å°±ä¼šè‡ªåŠ¨åˆ›å»º `AliyunOSSProperties` ç±»çš„ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶å°†å…¶ä½œä¸º **Spring Bean** æ³¨å†Œåˆ° **IoC å®¹å™¨**ä¸­ã€‚





#### SpringBooté…ç½®ä¼˜å…ˆçº§

##### é…ç½®æ–‡ä»¶

###### ç¬¬ä¸€ç§æ–¹æ³•

ä¼˜å…ˆçº§å¦‚ä¸‹ï¼š

![image-20250823212151294](../AppData/Roaming/Typora/typora-user-images/image-20250823212151294.png)

###### ç¬¬äºŒç§æ–¹æ³•

![image-20250823212530246](../AppData/Roaming/Typora/typora-user-images/image-20250823212530246.png)

![image-20250823213252494](../AppData/Roaming/Typora/typora-user-images/image-20250823213252494.png)

æµç¨‹ï¼š

![image-20250823212631922](../AppData/Roaming/Typora/typora-user-images/image-20250823212631922.png)

![image-20250823212748111](../AppData/Roaming/Typora/typora-user-images/image-20250823212748111.png)

æ‰“åŒ…æˆjaråŒ…ï¼Œå¹¶åœ¨å‘½ä»¤è¡Œçª—å£è¿è¡Œå¿«æ·é”®(sp+ tabç›´æ¥å‡ºé¡¹ç›®åå­—)

åŒå‡»package

![image-20250823213752090](../AppData/Roaming/Typora/typora-user-images/image-20250823213752090.png)

![image-20250823213851253](../AppData/Roaming/Typora/typora-user-images/image-20250823213851253.png)







###### æ€»çš„ä¼˜å…ˆçº§

å‘½ä»¤è¡Œå‚æ•°>javaç³»ç»Ÿå±æ€§>properties>yml>yaml

#### Beanç®¡ç†

##### Beançš„ä½œç”¨åŸŸ

###### ç®€ä»‹

ç®­å¤´æ˜¯å¦‚ä½•è®¾ç½®ä½œç”¨åŸŸ

![image-20250823220426917](../AppData/Roaming/Typora/typora-user-images/image-20250823220426917.png)

![image-20250823225836069](../AppData/Roaming/Typora/typora-user-images/image-20250823225836069.png)

###### é»˜è®¤çš„Beanæ˜¯å•ä¾‹æ¨¡å¼

![image-20250823222443107](../AppData/Roaming/Typora/typora-user-images/image-20250823222443107.png)

###### å¦‚ä½•é€‰æ‹©Beançš„ä½œç”¨åŸŸ

å¤šä¾‹çš„Beanæ˜¯å¤šä¸ªçº¿ç¨‹ä¿å­˜å„ä¸ªçº¿ç¨‹ä¿¡æ¯æ—¶é€‰æ‹©

![image-20250823230405611](../AppData/Roaming/Typora/typora-user-images/image-20250823230405611.png)

![image-20250823230753466](../AppData/Roaming/Typora/typora-user-images/image-20250823230753466.png)

##### ç¬¬ä¸‰æ–¹çš„Bean

###### æ€ä¹ˆåš

![image-20250823232134636](../AppData/Roaming/Typora/typora-user-images/image-20250823232134636.png)

![image-20250823231257041](../AppData/Roaming/Typora/typora-user-images/image-20250823231257041.png)

![image-20250823231311380](../AppData/Roaming/Typora/typora-user-images/image-20250823231311380.png)

###### ä»£ç æ¼”ç¤º



**ç›¸å½“äº  AliyunOSSOperatorè¿™ä¸ªç±»æ˜¯ä½ ç”¨çš„jaråŒ…ä¸‹çš„ç±»  ä½ æ— æ³•æ‰‹åŠ¨ç»™å…¶æ·»åŠ æ³¨è§£äº¤ç»™IOCå®¹å™¨ç®¡ç†  è¿™æ ·å¯ä»¥äº¤ç»™IOCå®¹å™¨ç®¡ç†**

å¿…é¡»è¦æœ‰ä¸‹é¢è¿™ä¸ªç®­å¤´Bean

![image-20250823232322860](../AppData/Roaming/Typora/typora-user-images/image-20250823232322860.png)

![image-20250823232404113](../AppData/Roaming/Typora/typora-user-images/image-20250823232404113.png)

æ³¨æ„è¿™é‡Œçš„ç®­å¤´

![image-20250824005111963](../AppData/Roaming/Typora/typora-user-images/image-20250824005111963.png)

#### SpringBootåŸç†

##### é…ç½®ç±»

###### **é…ç½®ç±»çš„æ ¸å¿ƒä½œç”¨**



1. **å®šä¹‰Bean** é…ç½®ç±»è®¾ç½®çš„ä½œç”¨æ˜¯ä½¿ç”¨**`@Bean`**æ³¨è§£æ¥å®šä¹‰Beanã€‚è¢«`@Bean`æ³¨è§£çš„æ–¹æ³•ï¼Œå…¶è¿”å›å€¼ä¼šè¢«Spring IoCå®¹å™¨æ³¨å†Œä¸ºä¸€ä¸ªBeanã€‚

   **è¯‘æ–‡ï¼š**

   Java

   ```
   @Configuration
   public class AppConfig {
   
       @Bean
       public MyService myService() {
           // åˆ›å»ºå¹¶è¿”å› MyService å®ä¾‹
           return new MyServiceImpl();
       }
   
       @Bean
       public MyRepository myRepository() {
           // åˆ›å»ºå¹¶è¿”å› MyRepository å®ä¾‹
           return new MyRepositoryImpl();
       }
   }
   ```

   åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæ–¹æ³•è¿”å›çš„å¯¹è±¡éƒ½ä¼šæˆä¸º Spring å®¹å™¨ä¸­çš„ Beanï¼Œå¯ä»¥è¢«ç»„ä»¶å…¶ä»–æ³¨å…¥å’Œä½¿ç”¨`myService`ã€‚`myRepository`

2. **ç®¡ç†Beanä¹‹é—´çš„ä¾èµ–** ä½ å¯ä»¥åœ¨ä¸€ä¸ª`@Bean`æ–¹æ³•ä¸­è°ƒç”¨å¦ä¸€ä¸ª`@Bean`æ–¹æ³•ï¼Œæ¥å®ç°Beanä¹‹é—´çš„ä¾èµ–æ³¨å…¥ã€‚

   **è¯‘æ–‡ï¼š**

   Java

   ```
   @Configuration
   public class ServiceConfig {
   
       @Bean
       public UserService userService() {
           // åœ¨è¿™é‡Œè°ƒç”¨å¦ä¸€ä¸ª @Bean æ–¹æ³•æ¥è·å–ä¾èµ–
           return new UserServiceImpl(userRepository());
       }
   
       @Bean
       public UserRepository userRepository() {
           return new UserRepositoryImpl();
       }
   }
   ```

   Springä¼šç¡®ä¿`userRepository()`æ–¹æ³•åªè¢«è°ƒç”¨ä¸€æ¬¡ï¼Œå¹¶å°†å…¶ä½œä¸ºå•ä¾‹Beanæ³¨å…¥åˆ°`userService`ä¸­ã€‚

3. **é›†æˆç¬¬ä¸‰æ–¹åº“** é…ç½®ç±»å¯ä»¥ç”¨äºé…ç½®å’Œé›†æˆéSpringçš„ç¬¬ä¸‰æ–¹åº“ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥å®šä¹‰ä¸€ä¸ªæ•°æ®æºï¼ˆDataSourceï¼‰Beanï¼Œæˆ–è€…ä¸€ä¸ªç”¨äºè¿æ¥æ•°æ®åº“çš„`JdbcTemplate`Beanã€‚

------



###### **é…ç½®ç±»åŠå…¶`@Component`åŒºåˆ«**



- **`@Configuration`**ï¼šä¸“ç”¨äºå®šä¹‰**`@Bean`**æ–¹æ³•æ¥åˆ›å»ºå’Œé…ç½®Beanã€‚å®ƒé€šå¸¸ç”¨äº**å·¥å‚æ¨¡å¼**ï¼Œå³ä¸€ä¸ªç±»ä¸“é—¨ç”¨äºåˆ›å»ºå…¶ä»–ç±»çš„å®ä¾‹ã€‚
- **`@Component`**( `@Service`, `@Repository`, `@Controller`)ï¼šç”¨äºæ ‡è®°ä¸€ä¸ªç±»æœ¬èº«å°±æ˜¯ä¸€ä¸ªBeanã€‚Springä¼šè‡ªåŠ¨æ‰«æè¿™äº›ç±»å¹¶å°†å…¶æ³¨å†Œä¸ºBeanã€‚å®ƒä»¬é€šå¸¸ç”¨äº**å£°æ˜ä¸€ä¸ªä¸šåŠ¡ç»„ä»¶**ã€‚

ä½ å¯ä»¥æŠŠ`@Configuration`æƒ³è±¡æˆä¸€ä¸ª**å·¥å‚**ï¼Œç„¶åæŠŠ`@Component`ä¸€ä¸ª**äº§å“**åˆ†ç±»ã€‚

åœ¨ Spring Boot ä¸­ï¼Œé…ç½®ç±»æ˜¯æ„å»ºå’Œç»„ç»‡åº”ç”¨é…ç½®ç¨‹åºé…ç½®çš„æ ¸å¿ƒï¼Œå®ƒä½¿å¾—é…ç½®æ›´åŠ æ¸…æ™°ã€å¯ç»´æŠ¤ï¼Œå¹¶ä¸ Java ä»£ç ç´§å¯†é›†æˆï¼Œæ˜¯ Spring Boot æ¨èçš„é…ç½®æ–¹å¼ã€‚





##### æ ¸å¿ƒ

**Spring Bootæä¾›çš„**

![image-20250824001935967](../AppData/Roaming/Typora/typora-user-images/image-20250824001935967.png)

##### **èµ·æ­¥ä¾èµ–åŸç†**

![image-20250824002212304](../AppData/Roaming/Typora/typora-user-images/image-20250824002212304.png)

##### è‡ªåŠ¨é…ç½®åŸç†

###### ä»€ä¹ˆæ˜¯è‡ªåŠ¨é…ç½®

**è¿™äº›éƒ½ä¸æ˜¯è‡ªå·±å®šä¹‰äº†çš„å¯¹è±¡ï¼Œæ˜¯ç³»ç»Ÿè‡ªå·±æ³¨å…¥çš„**

![image-20250824002501060](../AppData/Roaming/Typora/typora-user-images/image-20250824002501060.png)

###### é‡è¦çš„ä¸ºä»€ä¹ˆ

![image-20250824011208857](../AppData/Roaming/Typora/typora-user-images/image-20250824011208857.png)

###### ä»£ç æ¼”ç¤ºä¸€ï¼ˆä¸æ¨èï¼‰

**åªæœ‰Componentï¼Œä¸èƒ½æ³¨å…¥**

![image-20250824005705716](../AppData/Roaming/Typora/typora-user-images/image-20250824005705716.png)

æ³¨æ„è¿™é‡Œçš„ç®­å¤´æŒ‡å®šçš„æ˜¯**åªèƒ½**æ‰«æçš„åœ°æ–¹

![image-20250824004955974](../AppData/Roaming/Typora/typora-user-images/image-20250824004955974.png)

![image-20250824005432222](../AppData/Roaming/Typora/typora-user-images/image-20250824005432222.png)

###### æ–¹æ³•äºŒï¼ˆæ¨èï¼‰

![image-20250824005932810](../AppData/Roaming/Typora/typora-user-images/image-20250824005932810.png)

æ™®é€šç±»

![image-20250824011413449](../AppData/Roaming/Typora/typora-user-images/image-20250824011413449.png)

![image-20250824010101309](../AppData/Roaming/Typora/typora-user-images/image-20250824010101309.png)

å¯¼å…¥é…ç½®ç±»

![image-20250824010148779](../AppData/Roaming/Typora/typora-user-images/image-20250824010148779.png)

![image-20250824010236712](../AppData/Roaming/Typora/typora-user-images/image-20250824010236712.png)

æ‰¹é‡å¯¼å…¥

![image-20250824010538784](../AppData/Roaming/Typora/typora-user-images/image-20250824010538784.png)

![image-20250824011541522](../AppData/Roaming/Typora/typora-user-images/image-20250824011541522.png)



æœ€åæœ€æ¨è

**è¿™æ˜¯åšè¿™ä¸ªjaråŒ…çš„äººè‡ªå·±åšçš„ï¼ŒåŠ ä¸Š2å›¾çš„ç®­å¤´å°±è¡Œ**

![image-20250824010745229](../AppData/Roaming/Typora/typora-user-images/image-20250824010745229.png)

![image-20250824010907966](../AppData/Roaming/Typora/typora-user-images/image-20250824010907966.png)

##### è‡ªåŠ¨é…ç½®åŸç†æºä»£ç 

###### å¯åŠ¨ç±»æœ¬è´¨æ˜¯é…ç½®ç±»

**ä¸‹é¢æ˜¯ä¸ºä»€ä¹ˆèƒ½è‡ªåŠ¨æ³¨å…¥åŸç†ï¼ˆå› ä¸ºæœ‰150å‡ ä¸ªé…ç½®ç±»ä¼šè‡ªåŠ¨æ³¨å…¥ç°é˜¶æ®µé¡¹ç›®æ‰€éœ€çš„ï¼‰**

![image-20250824115732313](../AppData/Roaming/Typora/typora-user-images/image-20250824115732313.png)

![image-20250824120157867](../AppData/Roaming/Typora/typora-user-images/image-20250824120157867.png)

ç¬¦åˆæ¡ä»¶æ‰è‡ªåŠ¨æ³¨å…¥

![image-20250824120307981](../AppData/Roaming/Typora/typora-user-images/image-20250824120307981.png)

##### Conditionalæ³¨è§£

###### ç®€ä»‹

![image-20250824132640140](../AppData/Roaming/Typora/typora-user-images/image-20250824132640140.png)

###### ä¸‰ä¸ªæ¼”ç¤º

![image-20250824132845857](../AppData/Roaming/Typora/typora-user-images/image-20250824132845857.png)

![image-20250824133508175](../AppData/Roaming/Typora/typora-user-images/image-20250824133508175.png)

###### æ€»ç»“

![image-20250824133736107](../AppData/Roaming/Typora/typora-user-images/image-20250824133736107.png)

![image-20250824133903618](../AppData/Roaming/Typora/typora-user-images/image-20250824133903618.png)

##### è‡ªå®šä¹‰starter

###### ç®€ä»‹

![image-20250824202907342](../AppData/Roaming/Typora/typora-user-images/image-20250824202907342.png)

###### æ“ä½œé¡ºåº

![image-20250824203330759](../AppData/Roaming/Typora/typora-user-images/image-20250824203330759.png)

## Mavené«˜çº§

#### é‡è¦

##### 1.æ³¨æ„æ‰“åŒ…æ–‡ä»¶æ—¶

**ç›´æ¥æ‰“åŒ…æ˜¯ä¸è¡Œçš„ï¼Œè¦å…ˆæŠŠæ‹†åˆ†å‡ºæ¥çš„æ¨¡å—åœ¨å³ä¾§ä¸‹è½½**

![image-20250825151611490](../AppData/Roaming/Typora/typora-user-images/image-20250825151611490.png)

#### åˆ†æ¨¡å—è®¾è®¡ä¸å¼€å‘

##### ç®€ä»‹

![image-20250825001519666](../AppData/Roaming/Typora/typora-user-images/image-20250825001519666.png)

##### æ‹†åˆ†ç­–ç•¥

![image-20250825001710185](../AppData/Roaming/Typora/typora-user-images/image-20250825001710185.png)

##### ç¤ºä¾‹

å°±æ˜¯æŠŠä¸‹é¢æ¨¡å—çš„ä¸€äº›ä¸œè¥¿æ”¾è¿›å¦ä¸€ä¸ªæ¨¡å—

![image-20250825003151297](../AppData/Roaming/Typora/typora-user-images/image-20250825003151297.png)

åˆ›å»ºæ–¹æ³•

![image-20250825003301949](../AppData/Roaming/Typora/typora-user-images/image-20250825003301949.png)

æ³¨æ„

![image-20250825003343427](../AppData/Roaming/Typora/typora-user-images/image-20250825003343427.png)

#### ç»§æ‰¿

##### ä»¥ä¸‹å‡ ä¸ªæ–¹æ³•å¯ä»¥ä¸€èµ·ç”¨

##### æ¦‚å¿µ

![image-20250825110644474](../AppData/Roaming/Typora/typora-user-images/image-20250825110644474.png)

##### å¦‚ä½•æ“ä½œ

![image-20250825111459011](../AppData/Roaming/Typora/typora-user-images/image-20250825111459011.png)

![image-20250825111542381](../AppData/Roaming/Typora/typora-user-images/image-20250825111542381.png)

![image-20250825112652988](../AppData/Roaming/Typora/typora-user-images/image-20250825112652988.png)

![image-20250825115042825](../AppData/Roaming/Typora/typora-user-images/image-20250825115042825.png)

##### ç‰ˆæœ¬é”å®š

**æ³¨æ„è¿™é‡Œçš„æ ‡ç­¾æ˜¯dependencyManagement**

![image-20250825115902374](../AppData/Roaming/Typora/typora-user-images/image-20250825115902374.png)

##### æ›´æ–¹ä¾¿çš„è°ƒæ•´ç‰ˆæœ¬

![image-20250825121040037](../AppData/Roaming/Typora/typora-user-images/image-20250825121040037.png)

![image-20250825121408837](../AppData/Roaming/Typora/typora-user-images/image-20250825121408837.png)

![image-20250825121815039](../AppData/Roaming/Typora/typora-user-images/image-20250825121815039.png)

#### èšåˆ

##### ç®€ä»‹

![image-20250825151922386](../AppData/Roaming/Typora/typora-user-images/image-20250825151922386.png)

##### æ“ä½œ

![image-20250825152114471](../AppData/Roaming/Typora/typora-user-images/image-20250825152114471.png)

#### ç»§æ‰¿ä¸èšåˆ

![image-20250825152530639](../AppData/Roaming/Typora/typora-user-images/image-20250825152530639.png)

#### ç§æœ

##### ç®€ä»‹

![image-20250825153551153](../AppData/Roaming/Typora/typora-user-images/image-20250825153551153.png)

![image-20250825153859992](../AppData/Roaming/Typora/typora-user-images/image-20250825153859992.png)

##### æ“ä½œ

###### ä¸Šä¼ 

![image-20250825154034862](../AppData/Roaming/Typora/typora-user-images/image-20250825154034862.png)

###### ä¸‹è½½

![image-20250825154200441](../AppData/Roaming/Typora/typora-user-images/image-20250825154200441.png)

![image-20250825154252454](../AppData/Roaming/Typora/typora-user-images/image-20250825154252454.png)



## éƒ¨ç½²

### Linux

#### æ“ä½œç³»ç»Ÿç®€ä»‹

![image-20250825161359829](../AppData/Roaming/Typora/typora-user-images/image-20250825161359829.png)

#### Linuxå„ç§ç›®å½•

![image-20250826115002120](../AppData/Roaming/Typora/typora-user-images/image-20250826115002120.png)

![image-20250826115346954](../AppData/Roaming/Typora/typora-user-images/image-20250826115346954.png)



#### æŒ‡ä»¤

Linuxä¸èƒ½çœ‹æ–‡ä»¶åç¼€åï¼Œè¦çœ‹å‰é¢-dç¡®å®š

![image-20250826115715053](../AppData/Roaming/Typora/typora-user-images/image-20250826115715053.png)

##### ç›®å½•æ–‡ä»¶æŒ‡ä»¤

###### ls

çœ‹æœ‰æ²¡æœ‰æŒ‡å®šç›®å½•ï¼Œæ²¡æœ‰å°±é»˜è®¤å½“å‰ç›®å½•

![image-20250826120035063](../AppData/Roaming/Typora/typora-user-images/image-20250826120035063.png)



-è¡¨ç¤ºæ–‡ä»¶ï¼Œdè¡¨ç¤ºç›®å½•

![image-20250826120356546](../AppData/Roaming/Typora/typora-user-images/image-20250826120356546.png)

###### cd

![image-20250826141357987](../AppData/Roaming/Typora/typora-user-images/image-20250826141357987.png)

###### mkdir

![image-20250826142027201](../AppData/Roaming/Typora/typora-user-images/image-20250826142027201.png)

è¿™ä¸ªå‘½ä»¤ä¼š**åœ¨å½“å‰æ‰€åœ¨çš„ç›®å½•ä¸‹**åˆ›å»ºä¸€ä¸ªåä¸º**itcast**çš„æ–‡ä»¶å¤¹ï¼Œç„¶ååœ¨**itcast**æ–‡ä»¶å¤¹é‡Œå†åˆ›å»ºä¸€ä¸ªåä¸º**test**çš„æ–‡ä»¶å¤¹ã€‚

###### rm

![image-20250826142805234](../AppData/Roaming/Typora/typora-user-images/image-20250826142805234.png)

###### cat

![image-20250826172933274](../AppData/Roaming/Typora/typora-user-images/image-20250826172933274.png)

###### more

![image-20250826173237381](../AppData/Roaming/Typora/typora-user-images/image-20250826173237381.png)

###### head

![image-20250826173526881](../AppData/Roaming/Typora/typora-user-images/image-20250826173526881.png)

###### tail

![image-20250826174241689](../AppData/Roaming/Typora/typora-user-images/image-20250826174241689.png)

##### æ‹·è´ç§»åŠ¨å‘½ä»¤

###### cp

![image-20250826181806779](../AppData/Roaming/Typora/typora-user-images/image-20250826181806779.png)

![image-20250826182056238](../AppData/Roaming/Typora/typora-user-images/image-20250826182056238.png)

###### mv

ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä»¥å­˜åœ¨ç›®å½•æ‰æ‰§è¡Œç§»åŠ¨

![image-20250826184712649](../AppData/Roaming/Typora/typora-user-images/image-20250826184712649.png)

##### æ‰“åŒ…è§£åŒ…æ“ä½œ

###### tar

**æ‰“åŒ…å’Œå‹ç¼©è¦åŠ ä¸Šfiles**

![image-20250826212744645](../AppData/Roaming/Typora/typora-user-images/image-20250826212744645.png)

![image-20250826215519764](../AppData/Roaming/Typora/typora-user-images/image-20250826215519764.png)

##### æ–‡æœ¬ç¼–è¾‘å‘½ä»¤

###### vim



![image-20250826225316032](../AppData/Roaming/Typora/typora-user-images/image-20250826225316032.png)

![image-20250826225918606](../AppData/Roaming/Typora/typora-user-images/image-20250826225918606.png)

###### find

![image-20250826233356650](../AppData/Roaming/Typora/typora-user-images/image-20250826233356650.png)

###### grep

![image-20250826234356605](../AppData/Roaming/Typora/typora-user-images/image-20250826234356605.png)

##### mysql

å¯åŠ¨æŒ‡ä»¤

![image-20250827115200745](../AppData/Roaming/Typora/typora-user-images/image-20250827115200745.png)

![image-20250827115253342](../AppData/Roaming/Typora/typora-user-images/image-20250827115253342.png)

![image-20250827120140640](../AppData/Roaming/Typora/typora-user-images/image-20250827120140640.png)

### Linuxéƒ¨ç½²

##### å‰ç«¯æ“ä½œ

**ç«¯å£å¯†ç **

3306   root  1234

**localhosté‚£é‡Œä¸ç¡®å®šï¼Œåæ­£è¦å¡«åç«¯æœåŠ¡å™¨åœ°å€**

![image-20250827134835234](../AppData/Roaming/Typora/typora-user-images/image-20250827134835234.png)

é‡æ–°åŠ è½½    åœæ­¢æœåŠ¡

![image-20250827135712518](../AppData/Roaming/Typora/typora-user-images/image-20250827135712518.png)

![image-20250827135812569](../AppData/Roaming/Typora/typora-user-images/image-20250827135812569.png)

##### åç«¯æ“ä½œ

![image-20250827234108505](../AppData/Roaming/Typora/typora-user-images/image-20250827234108505.png)

![image-20250827135947290](../AppData/Roaming/Typora/typora-user-images/image-20250827135947290.png)

![image-20250827144245605](../AppData/Roaming/Typora/typora-user-images/image-20250827144245605.png)

![image-20250827145354416](../AppData/Roaming/Typora/typora-user-images/image-20250827145354416.png)



### dockeréƒ¨ç½²

#### ç®€ä»‹

![image-20250827222304877](../AppData/Roaming/Typora/typora-user-images/image-20250827222304877.png)

![image-20250827222242660](../AppData/Roaming/Typora/typora-user-images/image-20250827222242660.png)

#### dockerè¯­æ³•

ä¸‹é¢æ˜¯docker  mysqlçš„ç«¯å£å¯†ç 

![image-20250827223849190](../AppData/Roaming/Typora/typora-user-images/image-20250827223849190.png)



![image-20250827223246923](../AppData/Roaming/Typora/typora-user-images/image-20250827223246923.png)

![image-20250827223504408](../AppData/Roaming/Typora/typora-user-images/image-20250827223504408.png)

![image-20250827223603350](../AppData/Roaming/Typora/typora-user-images/image-20250827223603350.png)

#### dockerå¸¸è§å‘½ä»¤

##### ç®€ä»‹

![image-20250827231712010](../AppData/Roaming/Typora/typora-user-images/image-20250827231712010.png)

#### æ•°æ®å·

##### ç®€ä»‹

æ•°æ®å·æ˜¯è™šæ‹Ÿçš„ï¼Œä½†æ˜¯å®¿ä¸»æœºæ˜¯çœŸçš„

![image-20250828000156579](../AppData/Roaming/Typora/typora-user-images/image-20250828000156579.png)

##### å¦‚ä½•æ“ä½œ

![image-20250828004129025](../AppData/Roaming/Typora/typora-user-images/image-20250828004129025.png)

![image-20250828000911455](../AppData/Roaming/Typora/typora-user-images/image-20250828000911455.png)

![image-20250828000655064](../AppData/Roaming/Typora/typora-user-images/image-20250828000655064.png)

å«ä¹‰è§£é‡Šï¼š

- **`Mountpoint`**
   è¡¨ç¤ºè¿™ä¸ª Docker Volume åœ¨å®¿ä¸»æœºï¼ˆHostï¼‰ä¸Šçš„å®é™…å­˜å‚¨è·¯å¾„ã€‚
   æ¢å¥è¯è¯´ï¼Œè™½ç„¶åœ¨å®¹å™¨é‡Œä½ å¯èƒ½æŠŠè¿™ä¸ª volume æŒ‚è½½åˆ° `/usr/share/nginx/html` ä¹‹ç±»çš„è·¯å¾„ï¼Œä½†åœ¨å®¿ä¸»æœºé‡Œï¼ŒDocker å®é™…æ˜¯æŠŠæ•°æ®å­˜åœ¨ï¼š

  ```
  /var/lib/docker/volumes/html/_data
  ```

![image-20250828002402598](../AppData/Roaming/Typora/typora-user-images/image-20250828002402598.png)

![image-20250828003834732](../AppData/Roaming/Typora/typora-user-images/image-20250828003834732.png)

##### æ³¨æ„

ä¸Šé¢æ˜ å°„çš„æ˜¯å®¿ä¸»æœºä¸Šç›®å½•ï¼Œä¸‹é¢æ˜ å°„çš„æ˜¯æŒ‚è½½çš„å®¹å™¨çš„ç›®å½•

![image-20250828130345674](../AppData/Roaming/Typora/typora-user-images/image-20250828130345674.png)

#### æœ¬åœ°ç›®å½•æŒ‚è½½ï¼ˆæœ€å¸¸ç”¨ï¼‰

##### å¥½å¤„

ä»»æ„æŒ‡å®šç›®å½•

##### æ–¹æ³•

![image-20250828131744235](../AppData/Roaming/Typora/typora-user-images/image-20250828131744235.png)

##### è¯­æ³•ä¾‹å­

docker run -d \
--name mysql \
-p 3307:3306 \
-e TZ=Asia/Shanghai \
-e MYSQL_ROOT_PASSWORD=123 \
-v /root/mysql/data:/var/lib/mysql \
-v /root/mysql/conf:/etc/mysql/conf.d \
-v /root/mysql/init:/docker-entrypoint-initdb.d \
mysql:8

#### æœ¬åœ°é•œåƒ

##### ç®€ä»‹

![image-20250828142759140](../AppData/Roaming/Typora/typora-user-images/image-20250828142759140.png)

![image-20250828143007187](../AppData/Roaming/Typora/typora-user-images/image-20250828143007187.png)

##### å¸¸è§æŒ‡ä»¤

![image-20250828143415771](../AppData/Roaming/Typora/typora-user-images/image-20250828143415771.png)

![image-20250828143754186](../AppData/Roaming/Typora/typora-user-images/image-20250828143754186.png)

![image-20250828143842614](../AppData/Roaming/Typora/typora-user-images/image-20250828143842614.png)

![image-20250828151407830](../AppData/Roaming/Typora/typora-user-images/image-20250828151407830.png)

#### ç½‘ç»œ

##### ç®€ä»‹

![image-20250828152929488](../AppData/Roaming/Typora/typora-user-images/image-20250828152929488.png)

##### å‘½ä»¤

**åˆ›å»ºè‡ªå®šä¹‰ç½‘ç»œï¼Œå®¹å™¨è¿æ¥åˆ°è‡ªå®šä¹‰ç½‘ç»œï¼Œå®¹å™¨ä¹‹é—´é€šä¿¡å¯ä»¥ç”¨åå­—**

![image-20250828153000725](../AppData/Roaming/Typora/typora-user-images/image-20250828153000725.png)

#### éƒ¨ç½²

##### æ­¥éª¤

åç«¯éƒ¨ç½²

![image-20250828161221309](../AppData/Roaming/Typora/typora-user-images/image-20250828161221309.png)

![image-20250828162032925](../AppData/Roaming/Typora/typora-user-images/image-20250828162032925.png)

å‰ç«¯éƒ¨ç½²

![image-20250828164952683](../AppData/Roaming/Typora/typora-user-images/image-20250828164952683.png)

ä¸‹é¢æ˜¯æ•´ä¸ªé¡¹ç›®çš„å¯åŠ¨å’Œè®¿é—®æ–¹æ³•ï¼š

------



**1. ç™»å½•è™šæ‹Ÿæœº**



é¦–å…ˆï¼Œä½ éœ€è¦é€šè¿‡ SSH æˆ–å…¶ä»–æ–¹å¼ç™»å½•åˆ°ä½ çš„è™šæ‹Ÿæœºã€‚



**2. å¯åŠ¨ Docker å®¹å™¨**



å› ä¸ºä½ ä¹‹å‰å·²ç»åˆ›å»ºäº† `tlias-server` å’Œ `nginx-tlias` è¿™ä¸¤ä¸ªå®¹å™¨ï¼Œæ‰€ä»¥ä½ ä¸éœ€è¦å†æ¬¡ `run`ï¼ˆåˆ›å»ºï¼‰å®ƒä»¬ã€‚åªéœ€ä½¿ç”¨ `start` å‘½ä»¤æ¥å¯åŠ¨å®ƒä»¬å³å¯ã€‚

Bash

```
# å¯åŠ¨ tlias-server å®¹å™¨ï¼ˆåç«¯æœåŠ¡ï¼‰
docker start tlias-server

# å¯åŠ¨ nginx-tlias å®¹å™¨ï¼ˆå‰ç«¯å’Œåå‘ä»£ç†ï¼‰
docker start nginx-tlias
```



**3. éªŒè¯å®¹å™¨æ˜¯å¦å¯åŠ¨æˆåŠŸ**



è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œç¡®è®¤ä¸¤ä¸ªå®¹å™¨éƒ½å¤„äº `Up`ï¼ˆè¿è¡Œä¸­ï¼‰çŠ¶æ€ã€‚

Bash

```
docker ps
```

å¦‚æœçœ‹åˆ° `tlias-server` å’Œ `nginx-tlias` çš„çŠ¶æ€éƒ½æ˜¾ç¤ºä¸º `Up`ï¼Œé‚£å°±è¯´æ˜å®ƒä»¬å·²ç»æˆåŠŸè¿è¡Œäº†ã€‚



**4. è®¿é—®é¡¹ç›®**



ç°åœ¨ï¼Œä½ å¯ä»¥é€šè¿‡ Nginx çš„ IP åœ°å€æ¥è®¿é—®ä½ çš„é¡¹ç›®ã€‚

- **é¡¹ç›® IP**ï¼š`192.168.100.128`
- **è®¿é—®åœ°å€**ï¼š`http://192.168.100.128`

å› ä¸º Nginx å®¹å™¨çš„ `80` ç«¯å£å·²ç»æ˜ å°„åˆ°äº†è™šæ‹Ÿæœºçš„ `80` ç«¯å£ï¼Œæ‰€ä»¥ä½ ä¸éœ€è¦åœ¨åœ°å€åé¢åŠ ä¸Š `:80`ã€‚



**æ€»ç»“**



ä¸‹æ¬¡åªéœ€è¦è®°ä½ä¸¤ä¸ªç®€å•çš„å‘½ä»¤ï¼š`docker start tlias-server` å’Œ `docker start nginx-tlias`ï¼Œé¡¹ç›®å°±ä¼šé‡æ–°è¿è¡Œèµ·æ¥äº†ã€‚

##### DockerCompose

![image-20250828174120697](../AppData/Roaming/Typora/typora-user-images/image-20250828174120697.png)

![image-20250828174230416](../AppData/Roaming/Typora/typora-user-images/image-20250828174230416.png)

![image-20250828175146776](../AppData/Roaming/Typora/typora-user-images/image-20250828175146776.png)

### è¿æ¥pythonçš„fastapi

#### **RestTemplate å‘é€ HTTP è¯·æ±‚**

##### æ ¸å¿ƒå·¥å…·ï¼š`RestTemplate`ï¼ˆSpringæä¾›çš„HTTPå®¢æˆ·ç«¯ï¼‰

```java
private String callFastAPI(String question) {
    try {
        String apiUrl = "http://localhost:8000/model_get_result";  // ç›®æ ‡APIåœ°å€
        Map<String, String> request = new HashMap<>();  // è¯·æ±‚å‚æ•°ï¼ˆJSONæ ¼å¼ï¼‰
        request.put("question", question);

        // å‘é€POSTè¯·æ±‚å¹¶æ¥æ”¶å“åº”ï¼ˆè‡ªåŠ¨ååºåˆ—åŒ–ä¸ºAiResponseå¯¹è±¡ï¼‰
        AiResponse response = restTemplate.postForObject(apiUrl, request, AiResponse.class);
        // ... å¤„ç†å“åº” ...
    } catch (Exception e) {
        // ... å¼‚å¸¸å¤„ç† ...
    }
}
```

- `RestTemplate`

  ï¼šSpringæä¾›çš„ç”¨äºå‘é€HTTPè¯·æ±‚çš„å·¥å…·ç±»ï¼Œç®€åŒ–äº†RESTful APIè°ƒç”¨ã€‚æ ¸å¿ƒæ–¹æ³•

   

  ```
  postForObject
  ```

   

  åŠŸèƒ½ï¼š

  - å‘é€ **POSTè¯·æ±‚** åˆ° `apiUrl`ï¼›
  - è‡ªåŠ¨å°† `request`ï¼ˆMapç±»å‹ï¼‰è½¬æ¢ä¸ºJSONè¯·æ±‚ä½“ï¼›
  - è‡ªåŠ¨å°†APIè¿”å›çš„JSONå“åº” **ååºåˆ—åŒ–ä¸º `AiResponse` å¯¹è±¡**ï¼ˆéœ€é…åˆPOJOç±»å®ç°ï¼‰ã€‚











# è‹ç©¹å¤–å–

## é‡è¦å°çŸ¥è¯†ç‚¹

### 1.å¿«æ·æ–¹å¼

#### 1.1TODO

å¯ä»¥æé†’è‡ªå·±ä¿®æ”¹

![image-20250910112631416](../AppData/Roaming/Typora/typora-user-images/image-20250910112631416.png)

#### 1.2ctrl+i

å¿«é€Ÿé‡å†™çˆ¶ç±»æ–¹æ³•



#### 1.3./å’Œ../

**æ€»ç»“å¯¹æ¯”**

| ç¬¦å·     | åç§°               | å«ä¹‰                         | ç¤ºä¾‹ï¼ˆå½“å‰åœ¨ `/a/b/` ç›®å½•ï¼‰       |
| :------- | :----------------- | :--------------------------- | :-------------------------------- |
| `./`     | **å½“å‰ç›®å½•**       | æŒ‡å‘å½“å‰æ‰€åœ¨çš„æ–‡ä»¶å¤¹         | `./file.txt` è¡¨ç¤º `/a/b/file.txt` |
| `../`    | **çˆ¶ç›®å½•**         | æŒ‡å‘å½“å‰æ–‡ä»¶å¤¹çš„ä¸Šä¸€çº§æ–‡ä»¶å¤¹ | `../file.txt` è¡¨ç¤º `/a/file.txt`  |
| `../../` | **çˆ¶ç›®å½•çš„çˆ¶ç›®å½•** | å¯ä»¥è¿ç»­ä½¿ç”¨å‘ä¸Šè·³è½¬å¤šçº§     | `../../file.txt` è¡¨ç¤º `/file.txt` |













### 2.æ³¨æ„

#### 2.1æ•°æ®åº“å­˜çš„å¯†ç è¦åŠ å¯†

![image-20250910112947043](../AppData/Roaming/Typora/typora-user-images/image-20250910112947043.png)

#### 2.2DTOå°è£…

ç”¨å¯¹è±¡å°è£…å¯ä»¥ï¼Œä½†æ˜¯å°è£…éƒ¨åˆ†æ•°æ®æœ€å¥½é€‰æ‹©DTO

```
@Data
public class EmployeeDTO implements Serializable {

    private Long id;

    private String username;

    private String name;

    private String phone;

    private String sex;

    private String idNumber;

}
```

#### 2.3æ³›å‹æ˜¯ä»€ä¹ˆ

1.`Result` ç±»å£°æ˜ä¸­çš„ `<T>`

```
public class Result<T> implements Serializable {
    // ...
    private T data; // æ•°æ®
    // ...
}
```

è¿™é‡Œçš„ `<T>` å£°æ˜äº† `Result` æ˜¯ä¸€ä¸ª**æ³›å‹ç±»**ã€‚è¿™æ„å‘³ç€åœ¨åˆ›å»º `Result` ç±»çš„å¯¹è±¡æ—¶ï¼Œä½ å¯ä»¥æŒ‡å®šå®ƒè¦æºå¸¦çš„æ•°æ®ï¼ˆ`data` å­—æ®µï¼‰æ˜¯ä»€ä¹ˆç±»å‹ã€‚



2. æ³›å‹é™æ€æ–¹æ³•

`success()` å’Œ `success(T object)` è¿™ä¸¤ä¸ªé™æ€æ–¹æ³•ä¹Ÿä½¿ç”¨äº†æ³›å‹ã€‚

- **`public static <T> Result<T> success()`** è¿™ä¸ªæ–¹æ³•è¿”å›ä¸€ä¸ªæˆåŠŸçš„ `Result` å¯¹è±¡ï¼Œä½†**ä¸åŒ…å«ä»»ä½•æ•°æ®**ã€‚è™½ç„¶æ–¹æ³•æœ¬èº«ä¸ä½¿ç”¨ `T` ä½œä¸ºå‚æ•°ï¼Œä½†å®ƒè¿”å›çš„ `Result` å¯¹è±¡éœ€è¦ä¸€ä¸ªç±»å‹ã€‚è¿™é‡Œçš„ `<T>` æ˜¯ä¸€ä¸ª**æ³›å‹æ–¹æ³•å£°æ˜**ï¼Œå®ƒå…è®¸ä½ åœ¨è°ƒç”¨æ—¶æŒ‡å®šè¿”å›çš„ `Result` ç±»å‹ï¼Œä¾‹å¦‚ `Result<Void> result = Result.success();`ã€‚

- **`public static <T> Result<T> success(T object)`** è¿™ä¸ªæ–¹æ³•æ¥æ”¶ä¸€ä¸ª `T` ç±»å‹çš„å‚æ•° `object`ï¼Œå¹¶è¿”å›ä¸€ä¸ªåŒ…å«è¯¥æ•°æ®çš„ `Result` å¯¹è±¡ã€‚è¿™é‡Œçš„æ³›å‹ `<T>` åŒæ ·æ˜¯**æ³›å‹æ–¹æ³•å£°æ˜**ï¼Œå®ƒä½¿å¾—è¿™ä¸ªæ–¹æ³•å¯ä»¥å¤„ç†ä»»ä½•ç±»å‹çš„æ•°æ®ã€‚

  ä¾‹å¦‚ï¼š

  - `Result<String> r1 = Result.success("æ“ä½œæˆåŠŸ");`
  - `User u = new User(); Result<User> r2 = Result.success(u);`



```java
public static <T> Result<T> success(T object)//å‰é¢çš„<T>æ˜¯è¯­æ³•ç±»å‹ï¼Œåé¢çš„æ˜¯Resultç±»å‹
```

#### 2.4æ³›å‹æ³¨æ„

```java
@GetMapping("/page")
@ApiOperation("å‘˜å·¥åˆ†é¡µæŸ¥è¯¢")
public Result<PageResult> page(EmployeePageQueryDTO employeePageQueryDTO) {
    log.info("å‘˜å·¥åˆ†é¡µæŸ¥è¯¢ï¼Œå‚æ•°ä¸ºï¼š{}", employeePageQueryDTO);
    PageResult pageResult = employeeService.pageQuery(employeePageQueryDTO);
    return Result.success(pageResult);
}
//åœ¨æ‚¨æä¾›çš„ä»£ç ç‰‡æ®µä¸­ï¼Œæ–¹æ³•è¿”å›ç±»å‹å£°æ˜ä¸º Result<PageResult>ï¼Œè¿™é‡Œçš„æ³›å‹å‚æ•° PageResult ä»…ç”¨äºæŒ‡å®šè¯¥æ–¹æ³•è¿”å›çš„ Result å¯¹è±¡çš„ç±»å‹å‚æ•°ã€‚å®ƒä¸ä¼šè‡ªåŠ¨ä¼ æ’­æˆ–å½±å“æ–¹æ³•å†…éƒ¨å…¶ä»–æ³›å‹çš„ä½¿ç”¨ã€‚æ–¹æ³•å†…éƒ¨çš„æ³›å‹æ¨æ–­æ˜¯åŸºäºå„è‡ªçš„ä¸Šä¸‹æ–‡ç‹¬ç«‹è¿›è¡Œçš„ã€‚
```

#### 2.5ä¸è¦é‡å¤æ³¨å…¥å¯¹è±¡

```java
@Componentå’Œ@Bean
```

#### 2.6AliyunOSSæ–‡ä»¶ä¸Šä¼ 

```java
package com.sky.utils;

import com.aliyun.oss.*;
import com.aliyun.oss.common.auth.CredentialsProviderFactory;
import com.aliyun.oss.common.auth.EnvironmentVariableCredentialsProvider;
import com.aliyun.oss.common.comm.SignVersion;
import com.sky.properties.AliOssProperties;
import lombok.AllArgsConstructor;
import lombok.Data;
import lombok.extern.slf4j.Slf4j;

import java.io.ByteArrayInputStream;
import java.time.LocalDate;
import java.time.format.DateTimeFormatter;
import java.util.UUID;

@Slf4j
@AllArgsConstructor
@Data
public class AliOssUtil {
    private String endpoint;
    private String bucketName;
    private String region;

    public String upload(byte[] content, String originalFilename) throws Exception {
        // ä»ç¯å¢ƒå˜é‡ä¸­è·å–è®¿é—®å‡­è¯
        EnvironmentVariableCredentialsProvider credentialsProvider = 
            CredentialsProviderFactory.newEnvironmentVariableCredentialsProvider();

        String dir = LocalDate.now().format(DateTimeFormatter.ofPattern("yyyy/MM"));
        String newFileName = UUID.randomUUID() + originalFilename.substring(originalFilename.lastIndexOf("."));
        String objectName = dir + "/" + newFileName;

        // åˆ›å»ºOSSClientå®ä¾‹ï¼ˆä¿®æ”¹è¿™é‡Œï¼‰
        OSS ossClient = new OSSClientBuilder().build(endpoint, credentialsProvider);

        try {
            ossClient.putObject(bucketName, objectName, new ByteArrayInputStream(content));
        } finally {
            ossClient.shutdown();
        }

        return endpoint.split("//")[0] + "//" + bucketName + "." + endpoint.split("//")[1] + "/" + objectName;
    }
}
```



#### 2.7å†…è¿æ¥ä¸å¤–è¿æ¥

| è¿æ¥ç±»å‹     | å…³é”®å­—                 | æè¿°                                | ç»“æœç›¸å½“äº |
| :----------- | :--------------------- | :---------------------------------- | :--------- |
| **å†…è¿æ¥**   | `INNER JOIN` æˆ– `JOIN` | åªè¿”å›ä¸¤ä¸ªè¡¨ä¸­**åŒ¹é…**çš„è¡Œ          | **äº¤é›†**   |
| **å·¦å¤–è¿æ¥** | `LEFT JOIN`            | è¿”å›**å·¦è¡¨å…¨éƒ¨** + **å³è¡¨åŒ¹é…**çš„è¡Œ | å·¦è¡¨å…¨é›†   |
| **å³å¤–è¿æ¥** | `RIGHT JOIN`           | è¿”å›**å³è¡¨å…¨éƒ¨** + **å·¦è¡¨åŒ¹é…**çš„è¡Œ | å³è¡¨å…¨é›†   |





#### 2.8sql< if >è¯­å¥

```java
<if test="name != null">//è¿™é‡Œçš„nameæ˜¯ä¼ è¿›æ¥çš„å¯¹è±¡çš„å±æ€§
    s.name like concat('%',#{name},'%')
</if>
<if test="categoryId != null">
    s.category_id = #{categoryId}
</if>
```

#### 2.9æ¥æ”¶å‚æ•°

jsonæ•°æ®æ¥æ”¶éœ€è¦åŠ @RequestBody

è·¯å¾„å‚æ•°{id}éœ€è¦åŠ @PathVarieble

è¯·æ±‚å‚æ•°å¯ä»¥ä¸ç”¨åŠ å…¶ä»–ä¸œè¥¿















### 3.æŠ€æœ¯



#### 3.1Threadlocal

è·å–æˆ–è€…å­˜å…¥æ•´ä¸ªçº¿ç¨‹çš„ä¸å˜é‡

![image-20250911163655563](../AppData/Roaming/Typora/typora-user-images/image-20250911163655563.png)

```java
public class ThreadLocalDemo {
    private static ThreadLocal<String> threadLocal = new ThreadLocal<>();
public static void main(String[] args) {
    // è®¾ç½®å½“å‰çº¿ç¨‹çš„çº¿ç¨‹å±€éƒ¨å˜é‡çš„å€¼
    threadLocal.set("ä¸»çº¿ç¨‹çš„å€¼");
    
    // è¿”å›å½“å‰çº¿ç¨‹æ‰€å¯¹åº”çš„çº¿ç¨‹å±€éƒ¨å˜é‡çš„å€¼
    System.out.println("è·å–çš„å€¼: " + threadLocal.get());
    
    // ç§»é™¤å½“å‰çº¿ç¨‹çš„çº¿ç¨‹å±€éƒ¨å˜é‡
    threadLocal.remove();
    
    // å†æ¬¡å°è¯•è·å–ï¼ˆåº”ä¸ºnullï¼‰
    System.out.println("ç§»é™¤åè·å–çš„å€¼: " + threadLocal.get());
}
}
```

![image-20250911163957405](../AppData/Roaming/Typora/typora-user-images/image-20250911163957405.png)



#### 3.2çˆ¶ç±»ä¸å­ç±»

**ä¸‹é¢è¿™è¯çš„æ„æ€æ˜¯å­ç±»åœ¨æŸç§ç¨‹åº¦ä¸Šç§°ä½œçˆ¶ç±»**

ä»é‡Œæ°æ›¿æ¢åŸåˆ™ï¼ˆLiskov Substitution Principleï¼‰ çš„è§’åº¦ï¼Œå­ç±»å¯ä»¥è¢«è§†ä¸ºä¸çˆ¶ç±»â€œç›¸åŒç±»å‹â€â€”â€”å› ä¸ºå­ç±»å¯¹è±¡èƒ½åœ¨ä¸æ”¹å˜ç¨‹åºæ­£ç¡®æ€§çš„å‰æä¸‹ï¼Œå®Œå…¨æ›¿ä»£çˆ¶ç±»å¯¹è±¡ä½¿ç”¨ã€‚

å…·ä½“æ¥è¯´ï¼Œè¿™ç§â€œç±»å‹ä¸€è‡´æ€§â€ä½“ç°åœ¨Javaçš„è¯­æ³•å’Œè®¾è®¡åŸåˆ™ä¸­ï¼š

1. å‘ä¸Šè½¬å‹ï¼ˆè‡ªåŠ¨ç±»å‹è½¬æ¢ï¼‰ï¼šå­ç±»å¯¹è±¡å¯ä»¥ç›´æ¥èµ‹å€¼ç»™çˆ¶ç±»ç±»å‹çš„å˜é‡ï¼Œä¾‹å¦‚  Animal dog = new Dog(); ï¼ˆå‡è®¾ Dog ç»§æ‰¿ Animal ï¼‰ï¼Œæ­¤æ—¶ dog å˜é‡çš„ç¼–è¯‘ç±»å‹æ˜¯ Animal ï¼Œä½†è¿è¡Œç±»å‹æ˜¯ Dog ã€‚
2. è¡Œä¸ºå…¼å®¹æ€§ï¼šå­ç±»ä¼šç»§æ‰¿çˆ¶ç±»çš„éç§æœ‰æ–¹æ³•ï¼Œæˆ–é€šè¿‡é‡å†™ä¿è¯æ–¹æ³•ç­¾åï¼ˆå‚æ•°ã€è¿”å›å€¼ï¼‰ä¸çˆ¶ç±»ä¸€è‡´ï¼Œå› æ­¤è°ƒç”¨çˆ¶ç±»æ–¹æ³•æ—¶ï¼Œæ— è®ºå®é™…æ˜¯çˆ¶ç±»è¿˜æ˜¯å­ç±»å¯¹è±¡ï¼Œéƒ½èƒ½ç¬¦åˆé¢„æœŸé€»è¾‘ã€‚

ä½†éœ€æ³¨æ„ï¼šè¿™æ˜¯â€œå•å‘çš„ç±»å‹å…¼å®¹â€â€”â€”çˆ¶ç±»å¯¹è±¡ä¸èƒ½è¢«å½“ä½œå­ç±»ç±»å‹ä½¿ç”¨ï¼ˆå¦‚ Dog d = new Animal(); ä¼šç¼–è¯‘æŠ¥é”™ï¼‰ï¼Œå› ä¸ºå­ç±»å¯èƒ½æœ‰çˆ¶ç±»æ²¡æœ‰çš„å±æ€§æˆ–æ–¹æ³•ï¼Œçˆ¶ç±»æ— æ³•æ»¡è¶³å­ç±»çš„ç±»å‹è¦æ±‚ã€‚



#### 3.3PageHelper

```java
PageHelper.startPage(Page,PageSize)//è¿™é‡Œæ˜¯æ‹¦æˆªå™¨ï¼Œä¸ºåç»­sqlæŸ¥è¯¢è¯­å¥å¢åŠ limit
//ä¾‹å­ï¼š
//PageHelper.startPage(employeePageQueryDTO.getPage(),employeePageQueryDTO.getPageSize());
    
//æ³¨æ„è¿”å›çš„å¯¹è±¡
Page<OrderVO> list =  orderMapper.findAllOrders(ordersPageQueryDTO);

-------------------------------------------------------------------------

// 1. å¯åŠ¨åˆ†é¡µ
PageHelper.startPage(pageNum, pageSize);

// 2. æ‰§è¡ŒæŸ¥è¯¢
List<User> userList = userMapper.selectUsers();

// 3. å°†æŸ¥è¯¢ç»“æœè½¬æ¢ä¸º Page å¯¹è±¡ï¼Œè·å–åˆ†é¡µä¿¡æ¯
Page<User> page = (Page<User>) userList;

// 4. æ„å»ºè‡ªå®šä¹‰çš„ PageResult å¯¹è±¡
PageResult<User> pageResult = new PageResult<>();
pageResult.setTotal((int) page.getTotal());
pageResult.setPage(pageNum);
pageResult.setPageSize(pageSize);
pageResult.setList(page.getResult());

// 5. è¿”å›ç»“æœ
return pageResult;
```



#### 3.4ç»Ÿä¸€å¯¹æ—¥æœŸç±»å‹è¿›è¡Œæ ¼å¼åŒ–å¤„ç†

åœ¨ WebMvcConfiguration ä¸­æ‰©å±•Spring MVCçš„æ¶ˆæ¯è½¬æ¢å™¨ï¼Œç»Ÿä¸€å¯¹æ—¥æœŸç±»å‹è¿›è¡Œæ ¼å¼åŒ–å¤„ç†

![image-20250912152841168](../AppData/Roaming/Typora/typora-user-images/image-20250912152841168.png)

```java
public class JacksonObjectMapper extends ObjectMapper {

    public static final String DEFAULT_DATE_FORMAT = "yyyy-MM-dd";
    //public static final String DEFAULT_DATE_TIME_FORMAT = "yyyy-MM-dd HH:mm:ss";
    public static final String DEFAULT_DATE_TIME_FORMAT = "yyyy-MM-dd HH:mm";
    public static final String DEFAULT_TIME_FORMAT = "HH:mm:ss";

    public JacksonObjectMapper() {
        super();
        //æ”¶åˆ°æœªçŸ¥å±æ€§æ—¶ä¸æŠ¥å¼‚å¸¸
        this.configure(FAIL_ON_UNKNOWN_PROPERTIES, false);

        //ååºåˆ—åŒ–æ—¶ï¼Œå±æ€§ä¸å­˜åœ¨çš„å…¼å®¹å¤„ç†
        this.getDeserializationConfig().withoutFeatures(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES);

        SimpleModule simpleModule = new SimpleModule()
                .addDeserializer(LocalDateTime.class, new LocalDateTimeDeserializer(DateTimeFormatter.ofPattern(DEFAULT_DATE_TIME_FORMAT)))
                .addDeserializer(LocalDate.class, new LocalDateDeserializer(DateTimeFormatter.ofPattern(DEFAULT_DATE_FORMAT)))
                .addDeserializer(LocalTime.class, new LocalTimeDeserializer(DateTimeFormatter.ofPattern(DEFAULT_TIME_FORMAT)))
                .addSerializer(LocalDateTime.class, new LocalDateTimeSerializer(DateTimeFormatter.ofPattern(DEFAULT_DATE_TIME_FORMAT)))
                .addSerializer(LocalDate.class, new LocalDateSerializer(DateTimeFormatter.ofPattern(DEFAULT_DATE_FORMAT)))
                .addSerializer(LocalTime.class, new LocalTimeSerializer(DateTimeFormatter.ofPattern(DEFAULT_TIME_FORMAT)));

        //æ³¨å†ŒåŠŸèƒ½æ¨¡å— ä¾‹å¦‚ï¼Œå¯ä»¥æ·»åŠ è‡ªå®šä¹‰åºåˆ—åŒ–å™¨å’Œååºåˆ—åŒ–å™¨
        this.registerModule(simpleModule);
    }
}

```







#### 3.5å¿«é€Ÿæ‹·è´å¯¹è±¡å±æ€§

```java
BeanUtils.copyProperties(employeeDTO,employee)
//å‰æ‹·åˆ°åï¼Œä¸”å±æ€§åè¦ç›¸åŒ
```



#### 3.6å½“ä¸¤ä¸ªè¡¨æœ‰å¤šä¸ªç›¸åŒå­—æ®µ

![image-20250913105041963](../AppData/Roaming/Typora/typora-user-images/image-20250913105041963.png)

```java
//ä¼˜åŒ–æ–¹æ³•ï¼š
è‡ªå®šä¹‰æ³¨è§£ AutoFillï¼Œç”¨äºæ ‡è¯†éœ€è¦è¿›è¡Œå…¬å…±å­—æ®µè‡ªåŠ¨å¡«å……çš„æ–¹æ³•

è‡ªå®šä¹‰åˆ‡é¢ç±» AutoFillAspectï¼Œç»Ÿä¸€æ‹¦æˆªåŠ å…¥äº† AutoFill æ³¨è§£çš„æ–¹æ³•ï¼Œé€šè¿‡åå°„ä¸ºå…¬å…±å­—æ®µèµ‹å€¼

åœ¨ Mapper çš„æ–¹æ³•ä¸ŠåŠ å…¥ AutoFill æ³¨è§£

æŠ€æœ¯ç‚¹ï¼šæšä¸¾ã€æ³¨è§£ã€AOPã€åå°„
```

#### 3.7è‡ªå®šä¹‰æ³¨è§£

```java
@Target(ElementType.METHOD)  // è¡¨ç¤ºè¿™ä¸ªæ³¨è§£åªèƒ½ç”¨äºæ–¹æ³•ä¸Š
@Retention(RetentionPolicy.RUNTIME)  // è¡¨ç¤ºè¿™ä¸ªæ³¨è§£åœ¨è¿è¡Œæ—¶å¯ä»¥é€šè¿‡åå°„è·å–
public @interface AutoFill {
    // æ•°æ®åº“æ“ä½œç±»å‹ï¼šUPDATE æˆ– INSERT
    OperationType value();  // æ³¨è§£çš„å±æ€§ï¼Œç±»å‹ä¸º OperationType æšä¸¾
}
```



```java
//å¦‚ä¸‹æ˜¯OperationTypeæšä¸¾ç±»å†…å®¹

/**
 * æ›´æ–°æ“ä½œ 
 */
UPDATE,  // è¡¨ç¤ºæ›´æ–°æ“ä½œçš„æšä¸¾å€¼

/**
 * æ’å…¥æ“ä½œ 
 */
INSERT   // è¡¨ç¤ºæ’å…¥æ“ä½œçš„æšä¸¾å€¼
```



#### 3.8åˆ‡å…¥ç‚¹æ‹¦æˆª

**è¿™ä¸ªçš„ä½œç”¨æ˜¯åœ¨è‡ªå·±è®¾ç½®çš„æŸä¸ªæ–¹æ³•æ‰§è¡Œå‰æˆ–è€…æ‰§è¡Œåæ‰§è¡Œ**

```java
//ä¸»ä½“éƒ¨åˆ†
@Slf4j
@Component
@Aspect
public class AutoFillAspect {
    @Pointcut("execution(* com.sky.mapper.*.*(..)) && @annotation(com.sky.annotation.AutoFill)")
    public void autoFillPointcut() {

    }

    @Before("autoFillPointcut()")
    public void autoFill(JoinPoint joinPoint) {
        log.info("å¼€å§‹è¿›è¡Œè‡ªåŠ¨å¡«å……");
    }
}
//è¿™æ˜¯å®šä¹‰çš„æ³¨è§£
@Target(ElementType.METHOD)
@Retention(RetentionPolicy.RUNTIME)
public @interface AutoFill {
    OperationType value();
}
//åŠ åœ¨æŸä¸ªæ–¹æ³•ä¸Š
@AutoFill(value = OperationType.UPDATE)
```



#### 3.9åå°„

##### 1.ä»€ä¹ˆæ˜¯åå°„

åå°„ï¼ˆReflectionï¼‰æ˜¯ Java ä¸­çš„ä¸€ç§å¼ºå¤§æœºåˆ¶ï¼Œå®ƒå…è®¸ç¨‹åºåœ¨è¿è¡Œæ—¶åŠ¨æ€åœ°è·å–ä¸€ä¸ªç±»çš„æ‰€æœ‰ä¿¡æ¯ï¼ŒåŒ…æ‹¬ç±»çš„æ„é€ æ–¹æ³•ã€æˆå‘˜å˜é‡ï¼ˆå­—æ®µï¼‰å’Œæˆå‘˜æ–¹æ³•ï¼ˆå‡½æ•°ï¼‰ï¼Œè€Œä¸éœ€è¦åœ¨ç¼–è¯‘æ—¶çŸ¥é“è¿™ä¸ªç±»ã€‚

##### 2.åå°„ä½œç”¨

åå°„ä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªæ ¸å¿ƒç”¨é€”ï¼š

1. **åœ¨è¿è¡Œæ—¶åˆ†æç±»çš„ç»“æ„**ï¼šä½ å¯ä»¥è·å–ä¸€ä¸ªç±»ä¸­çš„æ‰€æœ‰æ–¹æ³•ã€å­—æ®µã€æ„é€ å™¨ï¼Œä»¥åŠå®ƒä»¬çš„ä¿®é¥°ç¬¦ï¼ˆpublicã€private ç­‰ï¼‰ã€å‚æ•°ç±»å‹å’Œè¿”å›ç±»å‹ã€‚è¿™å¯¹äºç¼–å†™é€šç”¨å·¥å…·æˆ–æ¡†æ¶éå¸¸æœ‰ç”¨ã€‚
2. **åŠ¨æ€åˆ›å»ºå¯¹è±¡**ï¼šä½ å¯ä»¥æ ¹æ®ç±»çš„å­—ç¬¦ä¸²åç§°æ¥åˆ›å»ºå¯¹è±¡ï¼Œè€Œä¸éœ€è¦ä½¿ç”¨ `new` å…³é”®å­—ã€‚
3. **åŠ¨æ€è°ƒç”¨æ–¹æ³•**ï¼šä½ å¯ä»¥æ ¹æ®æ–¹æ³•åå­—ç¬¦ä¸²æ¥æ‰§è¡Œæ–¹æ³•ï¼Œå¹¶ä¼ é€’å‚æ•°ã€‚
4. **åŠ¨æ€æ“ä½œå­—æ®µ**ï¼šä½ å¯ä»¥æ ¹æ®å­—æ®µåå­—ç¬¦ä¸²æ¥è¯»å–æˆ–ä¿®æ”¹å¯¹è±¡çš„ç§æœ‰æˆå‘˜å˜é‡ã€‚



**ä¸¾ä¸ªä¾‹å­**

æƒ³è±¡ä¸€ä¸‹ä½ æ­£åœ¨å¼€å‘ä¸€ä¸ªé€šç”¨çš„æ•°æ®åº“æ“ä½œæ¡†æ¶ã€‚è¿™ä¸ªæ¡†æ¶éœ€è¦å°†æ•°æ®åº“æŸ¥è¯¢çš„ç»“æœï¼ˆæ¯”å¦‚ä¸€è¡Œæ•°æ®ï¼‰è‡ªåŠ¨æ˜ å°„åˆ°ä»»ä½•ä¸€ä¸ªä½ å®šä¹‰çš„ Java å¯¹è±¡ä¸Šï¼ˆæ¯”å¦‚ `User` å¯¹è±¡æˆ– `Product` å¯¹è±¡ï¼‰ã€‚

å¦‚æœæ²¡æœ‰åå°„ï¼Œä½ éœ€è¦ä¸ºæ¯ä¸€ç§ç±»å‹çš„å¯¹è±¡ï¼ˆ`User`ã€`Product` ç­‰ï¼‰éƒ½æ‰‹åŠ¨ç¼–å†™ä¸€éèµ‹å€¼çš„ä»£ç ï¼Œéå¸¸ç¹çã€‚



##### 3.åŸºæœ¬æ–¹æ³•

```java
1.
    è·å–æ„é€ æ–¹æ³• (Constructor) å¹¶åˆ›å»ºå¯¹è±¡     getDeclaredConstructor(Class<?>... parameterTypes)ï¼š

è·å–æŒ‡å®šå‚æ•°ç±»å‹çš„å•ä¸ªæ„é€ æ–¹æ³•ã€‚

ä¾‹å­ï¼šConstructor<?> constructor = userClass.getDeclaredConstructor(String.class, int.class);


2.
	è·å–æˆå‘˜æ–¹æ³• (Method) å¹¶è°ƒç”¨        getDeclaredMethod(String name, Class<?>... parameterTypes)ï¼š

è·å–æŒ‡å®šåç§°å’Œå‚æ•°ç±»å‹çš„å•ä¸ªæ–¹æ³•ï¼ŒåŒ…æ‹¬ private æ–¹æ³•ã€‚

ä¾‹å­ï¼šMethod setUserName = userClass.getDeclaredMethod("setUserName", String.class);


3.
    è·å–æˆå‘˜å˜é‡ (Field) å¹¶æ“ä½œ				getDeclaredField(String name)ï¼š

è·å–æŒ‡å®šåç§°çš„å•ä¸ªæˆå‘˜å˜é‡ï¼ŒåŒ…æ‹¬ private å˜é‡ã€‚

ä¾‹å­ï¼šField userNameField = userClass.getDeclaredField("userName");


4.
    é‡è¦çš„è¾…åŠ©æ–¹æ³•					setAccessible(boolean flag)ï¼š

è¿™æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„æ–¹æ³•ï¼Œå®ƒå±äº AccessibleObject ç±»ï¼ˆMethodã€Field å’Œ Constructor çš„çˆ¶ç±»ï¼‰ã€‚

å½“ä½ éœ€è¦è®¿é—®æˆ–æ“ä½œä¸€ä¸ª private çš„æˆå‘˜ï¼ˆæ–¹æ³•ã€å­—æ®µã€æ„é€ æ–¹æ³•ï¼‰æ—¶ï¼Œå¿…é¡»å…ˆè°ƒç”¨ setAccessible(true) æ¥ç¦ç”¨ Java çš„è®¿é—®æ£€æŸ¥ï¼Œå¦åˆ™ä¼šæŠ›å‡º IllegalAccessExceptionã€‚

   
5.ä¾‹å­ï¼š

Method setCreateTime = entity.getClass().getDeclaredMethod("setCreateTime", LocalDateTime.class);
                Method setCreateUser = entity.getClass().getDeclaredMethod("setCreateUser", Long.class);
                Method setUpdateTime = entity.getClass().getDeclaredMethod("setUpdateTime", LocalDateTime.class);
                Method setUpdateUser = entity.getClass().getDeclaredMethod("setUpdateUser", Long.class);
                setCreateTime.invoke(entity, now);
                setCreateUser.invoke(entity, currentId);
                setUpdateTime.invoke(entity, now);
                setUpdateUser.invoke(entity, currentId);
```



#### 3.10@ConfigurationProperties(prefix = "sky.alioss")

```
@ConfigurationProperties(prefix = "sky.alioss")` ä¼šæŠŠ `application.yml` çš„é…ç½®æ³¨å…¥å±æ€§ã€‚
```

```java
//å¯ç”¨æ–¹å¼
åœ¨è¯¥ç±»ä¸ŠåŠ @Component
    
    
æˆ–è€…åœ¨å¯åŠ¨ç±»ä¸ŠåŠ ä¸Š@EnableConfigurationProperties(WeChatConfig.class)
    
    
@SpringBootApplication
@EnableConfigurationProperties(WeChatConfig.class)
public class Application {
    public static void main(String[] args) {
        SpringApplication.run(Application.class, args);
    }
}
```







#### 3.11é…ç½®ç±»ä½œç”¨

##### 0.ä»€ä¹ˆæ˜¯é…ç½®ç±»

```
@Configuration ç±»æœ¬èº«é¦–å…ˆè¢«è¯†åˆ«ä¸ºä¸€ä¸ªBeanå®šä¹‰ï¼ˆBean Definitionï¼‰æ³¨å†Œåˆ°å®¹å™¨ä¸­ã€‚ä½ å¯ä»¥æŠŠå®ƒçœ‹ä½œä¸€ä¸ªç”Ÿäº§Beançš„â€œå·¥å‚Beanâ€ã€‚
```



##### 1. **é›†ä¸­ç®¡ç†Beanå®šä¹‰**

é…ç½®ç±»å°†åº”ç”¨ç¨‹åºä¸­æ‰€æœ‰éœ€è¦ç”±Springå®¹å™¨ç®¡ç†çš„å¯¹è±¡ï¼ˆBeanï¼‰é›†ä¸­åœ¨ä¸€ä¸ªåœ°æ–¹å®šä¹‰ï¼Œå–ä»£äº†ä¼ ç»Ÿçš„XMLé…ç½®æ–‡ä»¶æ–¹å¼ã€‚

##### 2. **ä¾èµ–æ³¨å…¥é…ç½®**

é…ç½®ç±»å¯ä»¥æ˜ç¡®æŒ‡å®šBeanä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼ŒSpringå®¹å™¨ä¼šè‡ªåŠ¨å¤„ç†è¿™äº›ä¾èµ–çš„æ³¨å…¥ã€‚

```java
@Configuration
public class ServiceConfig {
    @Bean
    public TransferService transferService(AccountRepository accountRepository) {
        return new TransferServiceImpl(accountRepository);
    }
}
```

##### 3. **æ¡ä»¶åŒ–Beanåˆ›å»º**

é…ç½®ç±»æ”¯æŒæ¡ä»¶åŒ–Beanåˆ›å»ºï¼Œå¯ä»¥æ ¹æ®ç‰¹å®šæ¡ä»¶å†³å®šæ˜¯å¦åˆ›å»ºæŸä¸ªBeanã€‚

```java
@Configuration
public class ConditionalConfig {
    @Bean
    @ConditionalOnMissingBean // åªåœ¨æ²¡æœ‰åŒç±»å‹Beanæ—¶æ‰åˆ›å»º
    public AliOssUtil aliOssUtil(AliOssProperties props) {
        return new AliOssUtil(props.getEndpoint(), props.getBucketName(), props.getRegion());
    }
    
    @Bean
    @ConditionalOnProperty(name = "cache.enabled", havingValue = "true")
    public CacheManager cacheManager() {
        return new RedisCacheManager();
    }
}
```

##### 4. **å¤–éƒ¨åŒ–é…ç½®é›†æˆ**

é…ç½®ç±»å¯ä»¥ä¸Springçš„é…ç½®å±æ€§ç³»ç»Ÿé›†æˆï¼Œè½»æ¾è¯»å–å¤–éƒ¨é…ç½®æ–‡ä»¶ï¼ˆå¦‚application.ymlï¼‰ä¸­çš„å€¼ã€‚

```java
@Configuration
@EnableConfigurationProperties(AliOssProperties.class)
public class OssConfiguration {
    // å¯ä»¥ç›´æ¥æ³¨å…¥é…ç½®å±æ€§
    @Bean
    public AliOssUtil aliOssUtil(AliOssProperties props) {
        return new AliOssUtil(props.getEndpoint(), props.getBucketName(), props.getRegion());
    }
}
```

##### 5. **AOPå’Œä»£ç†é…ç½®**

é…ç½®ç±»å¯ä»¥ç”¨äºé…ç½®AOPï¼ˆé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰å’Œåˆ›å»ºä»£ç†å¯¹è±¡ã€‚

```java
@Configuration
@EnableAspectJAutoProxy
public class AopConfig {
    @Bean
    public LoggingAspect loggingAspect() {
        return new LoggingAspect();
    }
}
```

##### 6.æ€»ç»“

é…ç½®ç±»æ˜¯Springæ¡†æ¶å®ç°"çº¦å®šä¼˜äºé…ç½®"ç†å¿µçš„æ ¸å¿ƒæœºåˆ¶ï¼Œå®ƒé€šè¿‡Javaä»£ç çš„æ–¹å¼æä¾›äº†æ¯”XMLé…ç½®æ›´å¼ºå¤§ã€æ›´çµæ´»ã€æ›´ç±»å‹å®‰å…¨çš„é…ç½®æ–¹å¼ã€‚é…ç½®ç±»ä½¿å¾—åº”ç”¨ç¨‹åºçš„å„ä¸ªç»„ä»¶èƒ½å¤Ÿä»¥å£°æ˜å¼çš„æ–¹å¼ç»„åˆåœ¨ä¸€èµ·ï¼ŒåŒæ—¶ä¿æŒäº†ä»£ç çš„ç®€æ´æ€§å’Œå¯æµ‹è¯•æ€§ã€‚

åœ¨æ‚¨çš„é¡¹ç›®ä¸­ï¼Œé…ç½®ç±»å¸®åŠ©å°†é˜¿é‡Œäº‘OSSå·¥å…·ç±»çš„åˆ›å»ºå’Œé…ç½®é›†ä¸­ç®¡ç†ï¼Œä½¿ä»£ç æ›´åŠ æ¨¡å—åŒ–å’Œå¯ç»´æŠ¤ï¼ŒåŒæ—¶ä¹Ÿä¸ºå¯èƒ½çš„æ‰©å±•å’Œè‡ªå®šä¹‰æä¾›äº†çµæ´»çš„æœºåˆ¶ã€‚



#### 3.12æ–‡ä»¶æŠ€æœ¯

```java
// åŸå§‹æ–‡ä»¶å
String originalFilename = file.getOriginalFilename();
// æˆªå–åŸå§‹æ–‡ä»¶åçš„åç¼€
String extension = originalFilename.substring(originalFilename.lastIndexOf("."));
// æ„é€ æ–°æ–‡ä»¶åç§°
String objectName = UUID.randomUUID().toString() + extension;
```



#### 3.13GlobalExceptionHandler

```java
@Slf4j
@RestControllerAdvice//æ³¨æ„è¿™ä¸ªæ³¨è§£
public class GlobalExceptionHandler {

    @ExceptionHandler
    public Result exceptionHandler(SQLIntegrityConstraintViolationException ex){
        String msgs =ex.getMessage();
        if(msgs.contains("Duplicate entry")){
            String[] split = msgs.split(" ");
            String username = split[2];
            String mg = username+ "å·²å­˜åœ¨";
            return Result.error(mg);
        }
        else{
            return Result.error("æœªçŸ¥é”™è¯¯");
        }
    }
}
```



#### 3.14ä¸¤ä¸ªymlæ–‡ä»¶

```java
application.yml
application-dev.yml
//è¿™æ ·çš„å¥½å¤„æ˜¯å¯ä»¥æé«˜è‡ªå·±æ•°æ®çš„å®‰å…¨æ€§ï¼ˆä¸Šé¢ç”¨$ï¼Œä¸‹é¢å†é…ç½®å€¼ï¼‰
//ä½†æ˜¯ä¸Šé¢è¦é…ç½®profileï¼Œå¦‚ä¸‹ï¼š
spring:
  application:
    name: MyServer
  # æ·»åŠ è¿™ä¸€è¡Œæ¥æ¿€æ´»devç¯å¢ƒé…ç½®
  profiles:
    active: dev
```

#### 3.15Queryä¼ å¤šä¸ªå‚æ•°

```java
//?ids=1,2,3
//ç”¨@RequestParamæ¥æ”¶
public Result delete(@RequestParam List<Long> id)
```

#### 3.16foreachç”¨æ³•

```java
ids.forEach(id -> {
    dishMapper.deleteById(id);
    dishFlavorMapper.deleteByDishId(id);
});
```

#### 3.17PageHelperçš„page

```java
//è¿™é‡Œçš„pageæ˜¯åˆ«äººçš„åŒ…å°è£…å¥½çš„é¡µé¢ï¼ˆè¿™é‡Œæ²¡å†™é”™ï¼‰


PageHelper.startPage(setmealPageQueryDTO.getPage(),setmealPageQueryDTO.getPageSize());//ä½œç”¨æ˜¯æ‹¦æˆªsqlè¯­å¥ï¼ŒåŠ ä¸Šlimitç­‰è¯­å¥


Page<Setmeal> page = setmealMapper.pageQuery(setmealPageQueryDTO);
```

#### 3.18 JWTåŸç†

##### å†™åœ¨å‰é¢

ä¸€ã€JWTæ ¡éªŒçš„æœ¬è´¨ï¼šæ¯”è¾ƒâ€œä¸¤ä¸ªç­¾åâ€æ˜¯å¦ä¸€è‡´

JWTçš„å®‰å…¨æ ¸å¿ƒå…¨åœ¨ç¬¬ä¸‰éƒ¨åˆ† Signatureï¼ˆç­¾åï¼‰ï¼Œæ ¡éªŒçš„æœ¬è´¨å°±æ˜¯ï¼š
æœåŠ¡ç«¯ç”¨â€œä»¤ç‰Œé‡Œçš„Header+Payloadâ€é‡æ–°è®¡ç®—ä¸€ä¸ªç­¾åï¼Œå†å’Œä»¤ç‰Œé‡Œè‡ªå¸¦çš„Signatureå¯¹æ¯”ã€‚å¦‚æœä¸€è‡´ï¼Œè¯´æ˜ä»¤ç‰Œæ²¡è¢«ç¯¡æ”¹ï¼›ä¸ä¸€è‡´ï¼Œç›´æ¥åˆ¤å®šæ— æ•ˆã€‚

è¿™é‡Œçš„å…³é”®æ˜¯â€œé‡æ–°è®¡ç®—â€çš„è¿‡ç¨‹â€”â€”åªæœ‰æŒæœ‰æœåŠ¡ç«¯ä¸“å±å¯†é’¥ï¼Œæ‰èƒ½ç®—å‡ºå’ŒåŸå§‹ç­¾åä¸€è‡´çš„ç»“æœã€‚ä¸€æ—¦ä»¤ç‰Œè¢«ç¯¡æ”¹ï¼ˆæ¯”å¦‚æ”¹äº†Payloadé‡Œçš„ç”¨æˆ·IDï¼‰ï¼Œé‡æ–°è®¡ç®—çš„ç­¾åå°±ä¼šå®Œå…¨ä¸åŒã€‚

äºŒã€åº•å±‚æ ¡éªŒçš„5ä¸ªæ ¸å¿ƒæ­¥éª¤ï¼ˆé€å¥æ‹†è§£ï¼‰

å…ˆå›é¡¾JWTç»“æ„ï¼š Header.Base64ç¼–ç .Payload.Base64ç¼–ç .Signature ï¼Œæ ¡éªŒå…¨ç¨‹å›´ç»•è¿™ä¸‰éƒ¨åˆ†å±•å¼€ï¼š

1. ç¬¬ä¸€æ­¥ï¼šæ‹†åˆ†ä»¤ç‰Œç»“æ„
æœåŠ¡ç«¯æ‹¿åˆ°ä»¤ç‰Œåï¼Œå…ˆæŒ‰ . åˆ†å‰²ï¼Œæ‹†å‡ºHeaderï¼ˆç¼–ç åï¼‰ã€Payloadï¼ˆç¼–ç åï¼‰ã€Signatureï¼ˆåŸå§‹ç­¾åï¼‰ä¸‰ä¸ªéƒ¨åˆ†ã€‚
2. ç¬¬äºŒæ­¥ï¼šè§£æHeaderï¼Œç¡®å®šå…³é”®ä¿¡æ¯
æŠŠç¼–ç åçš„Headerè§£ç ï¼Œæ‹¿åˆ°ä¸¤ä¸ªæ ¸å¿ƒå†…å®¹ï¼š
- ç­¾åç®—æ³•ï¼ˆå¦‚ HS256 ï¼Œå³HMAC-SHA256ï¼‰ï¼›
- ç¡®ä¿ç®—æ³•æ˜¯æœåŠ¡ç«¯æ”¯æŒçš„ï¼ˆé˜²æ­¢ç”¨ä¸å®‰å…¨çš„ç®—æ³•ä¼ªé€ ï¼‰ã€‚
3. ç¬¬ä¸‰æ­¥ï¼šé‡æ–°è®¡ç®—ç­¾åï¼ˆæ ¸å¿ƒæ­¥éª¤ï¼‰
ç”¨å’Œâ€œç”Ÿæˆä»¤ç‰Œæ—¶å®Œå…¨ç›¸åŒçš„è§„åˆ™â€ç®—æ–°ç­¾åï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š
- æŠŠæ‹†åˆ†å‡ºçš„â€œHeaderç¼–ç ä¸²+ . +Payloadç¼–ç ä¸²â€æ‹¼æ¥æˆä¸€ä¸ªå­—ç¬¦ä¸²ï¼ˆæ¯”å¦‚ eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjEwMDEsInJvbGUiOiJVU0VSIiwiZXhwIjoxNzE2Nz... ï¼‰ï¼›
- ç”¨Headeré‡ŒæŒ‡å®šçš„ç®—æ³•ï¼ˆå¦‚HS256ï¼‰ï¼Œç»“åˆæœåŠ¡ç«¯çš„ä¸“å±å¯†é’¥ï¼Œå¯¹è¿™ä¸ªæ‹¼æ¥å­—ç¬¦ä¸²è¿›è¡ŒåŠ å¯†ï¼Œå¾—åˆ°ä¸€ä¸ªâ€œæ–°çš„Signatureâ€ã€‚
4. ç¬¬å››æ­¥ï¼šå¯¹æ¯”ä¸¤ä¸ªç­¾å
æŠŠâ€œé‡æ–°è®¡ç®—çš„æ–°ç­¾åâ€å’Œâ€œä»¤ç‰Œé‡Œè‡ªå¸¦çš„åŸå§‹Signatureâ€åšå­—èŠ‚çº§å¯¹æ¯”ï¼š
- ä¸€è‡´ï¼šè¯´æ˜Headerå’ŒPayloadæ²¡è¢«ç¯¡æ”¹ï¼Œä¸”æ˜¯ç”¨æ­£ç¡®çš„å¯†é’¥ç”Ÿæˆçš„ï¼Œç»§ç»­ä¸‹ä¸€æ­¥ï¼›
- ä¸ä¸€è‡´ï¼šç›´æ¥æŠ›å‡º SignatureException ï¼Œåˆ¤å®šä»¤ç‰Œæ— æ•ˆï¼ˆå¯èƒ½è¢«ç¯¡æ”¹ï¼Œæˆ–ç”¨é”™äº†å¯†é’¥ï¼‰ã€‚
5. ç¬¬äº”æ­¥ï¼šæ ¡éªŒPayloadé‡Œçš„â€œæ—¶æ•ˆæ€§â€
ç­¾åé€šè¿‡åï¼Œè¿˜è¦è§£ç Payloadï¼Œæ£€æŸ¥ä¸¤ä¸ªå…³é”®æ—¶é—´ï¼š
- è¿‡æœŸæ—¶é—´ï¼ˆ exp å­—æ®µï¼‰ï¼šå¦‚æœå½“å‰æ—¶é—´è¶…è¿‡ exp ï¼ŒæŠ›å‡º ExpiredJwtException ï¼›
- ç”Ÿæ•ˆæ—¶é—´ï¼ˆå¯é€‰ï¼Œ nbf å­—æ®µï¼‰ï¼šå¦‚æœå½“å‰æ—¶é—´æ²¡åˆ° nbf ï¼Œä¹Ÿåˆ¤å®šæ— æ•ˆã€‚
è¿™ä¸€æ­¥æ˜¯è¡¥å……æ ¡éªŒï¼Œç¡®ä¿ä»¤ç‰Œåœ¨æœ‰æ•ˆæ—¶é—´å†…ä½¿ç”¨ã€‚

ä¸‰ã€ä¸¤ä¸ªå…³é”®ç»†èŠ‚ï¼ˆé˜²è¸©å‘ï¼‰

- Headerå’ŒPayloadæ˜¯â€œç¼–ç â€ä¸æ˜¯â€œåŠ å¯†â€ï¼šBase64ç¼–ç å¯ä»¥ç›´æ¥è§£ç ï¼ˆç½‘ä¸Šæœ‰å¾ˆå¤šJWTè§£ç å·¥å…·ï¼‰ï¼Œæ‰€ä»¥ç»å¯¹ä¸èƒ½å­˜å¯†ç ã€æ‰‹æœºå·ç­‰æ•æ„Ÿæ•°æ®ï¼Œåªèƒ½å­˜ç”¨æˆ·IDã€è§’è‰²è¿™ç±»éæ•æ„Ÿä¿¡æ¯ã€‚
- å¯†é’¥æ˜¯â€œå”¯ä¸€å‘½è„‰â€ï¼šåªè¦å¯†é’¥ä¸æ³„éœ²ï¼Œåˆ«äººå°±ç®—ç¯¡æ”¹äº†Payloadï¼Œä¹Ÿæ— æ³•ç®—å‡ºæ­£ç¡®çš„ç­¾åï¼›ä¸€æ—¦å¯†é’¥æ³„éœ²ï¼Œæ•´ä¸ªJWTæ ¡éªŒä½“ç³»å°±å¤±æ•ˆäº†ï¼Œå¿…é¡»ç«‹åˆ»æ›´æ¢å¯†é’¥ã€‚

##### 1. JWTçš„åŸºæœ¬ç»“æ„åŸç†

JWTç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼Œç”¨ç‚¹å·åˆ†éš”ï¼š

```
header.payload.signature
```

**å„éƒ¨åˆ†çš„ä½œç”¨ï¼š**

- **Header**ï¼šBase64ç¼–ç ï¼ŒåŒ…å«ç®—æ³•å’Œç±»å‹ä¿¡æ¯
- **Payload**ï¼šBase64ç¼–ç ï¼ŒåŒ…å«å£°æ˜ä¿¡æ¯ï¼ˆç”¨æˆ·æ•°æ®ï¼‰
- **Signature**ï¼šå¯¹å‰ä¸¤éƒ¨åˆ†çš„æ•°å­—ç­¾å

##### 2. ç­¾åç”ŸæˆåŸç†

**ç­¾åè®¡ç®—å…¬å¼ï¼š**

```
signature = HMACSHA256(
  base64UrlEncode(header) + "." + base64UrlEncode(payload),
  secret
)
```

##### 3. JWTæ ¡éªŒçš„æ ¸å¿ƒåŸç†

**åŸç†å›¾ï¼š**

```
å®¢æˆ·ç«¯è¯·æ±‚ â†’ æå–JWTä»¤ç‰Œ â†’ åˆ†å‰²ä¸‰éƒ¨åˆ† â†’ é‡æ–°è®¡ç®—ç­¾å â†’ å¯¹æ¯”ç­¾å â†’ éªŒè¯å£°æ˜ â†’ æˆæƒè®¿é—®
```



**è¯¦ç»†æ ¡éªŒæµç¨‹ï¼š**

java

```
public class JwtValidationPrinciple {
    
    /**
     * JWTæ ¡éªŒçš„å®Œæ•´åŸç†æ¼”ç¤º
     */
    public boolean validateJwtPrinciple(String jwtToken, String secretKey) {
        
        // 1. ç»“æ„éªŒè¯ï¼šæ£€æŸ¥æ˜¯å¦ä¸ºä¸‰æ®µå¼ç»“æ„
        String[] parts = jwtToken.split("\\.");
        if (parts.length != 3) {
            throw new RuntimeException("æ— æ•ˆçš„JWTç»“æ„");
        }
        
        String headerBase64 = parts[0];
        String payloadBase64 = parts[1];
        String signatureProvided = parts[2];
        
        // 2. Base64è§£ç éªŒè¯
        try {
            String header = new String(Base64.getUrlDecoder().decode(headerBase64));
            String payload = new String(Base64.getUrlDecoder().decode(payloadBase64));
            
            // éªŒè¯JSONæ ¼å¼
            validateJsonFormat(header, payload);
            
        } catch (Exception e) {
            throw new RuntimeException("Base64è§£ç å¤±è´¥");
        }
        
        // 3. ç­¾åéªŒè¯ï¼ˆæ ¸å¿ƒå®‰å…¨æœºåˆ¶ï¼‰
        if (!verifySignature(headerBase64, payloadBase64, signatureProvided, secretKey)) {
            throw new RuntimeException("ç­¾åéªŒè¯å¤±è´¥");
        }
        
        // 4. å£°æ˜éªŒè¯
        Claims claims = extractClaims(payloadBase64);
        return validateClaims(claims);
    }
    
    /**
     * ç­¾åéªŒè¯åŸç†
     */
    private boolean verifySignature(String header, String payload, 
                                  String providedSignature, String secret) {
        // é‡æ–°è®¡ç®—ç­¾å
        String data = header + "." + payload;
        String computedSignature = calculateHMACSHA256(data, secret);
        
        // å…³é”®åŸç†ï¼šç­¾åå¯¹æ¯”å¿…é¡»ä½¿ç”¨æ’å®šæ—¶é—´æ¯”è¾ƒï¼Œé˜²æ­¢æ—¶åºæ”»å‡»
        return constantTimeEquals(computedSignature, providedSignature);
    }
    
    /**
     * æ’å®šæ—¶é—´æ¯”è¾ƒï¼ˆé˜²æ­¢æ—¶åºæ”»å‡»ï¼‰
     */
    private boolean constantTimeEquals(String a, String b) {
        if (a.length() != b.length()) {
            return false;
        }
        
        int result = 0;
        for (int i = 0; i < a.length(); i++) {
            result |= a.charAt(i) ^ b.charAt(i);
        }
        return result == 0;
    }
}
```



#### 3.19 åŠ¨æ€sqlçš„è½¬ä¹‰å­—ç¬¦

```sql
//>=
&gt;=



//<=
&lt;=
```

#### 3.20 æ•°ç»„æ±‚å’Œå¿«æ·æ–¹å¼

```java
Integer totalOrderCount = orderCountList.stream().reduce(Integer::sum).get();
```















### 4.é…ç½®æ³¨æ„

#### 4.1åˆ›å»ºxmlé…ç½®æ–‡ä»¶

**è¦ç”¨/**

![image-20250912222916308](../AppData/Roaming/Typora/typora-user-images/image-20250912222916308.png)







### 5.è®¾è®¡æ€æƒ³

#### 5.1å…³äºsql

å°½é‡å°‘æ‰§è¡Œsqlè¯­å¥ï¼Œå³ï¼šèƒ½æ‰¹é‡åˆ é™¤å°±æ‰¹é‡åˆ é™¤





## é‡è¦å°å‰ç½®çŸ¥è¯†ç‚¹

#### 1.@RequestBodyå°†jsonå°è£…åœ¨å¯¹è±¡é‡Œ

åœ¨ **Spring Bootï¼ˆSpring MVCï¼‰** é‡Œï¼Œ`@RequestBody` çš„ä½œç”¨æ˜¯ï¼š

ğŸ‘‰ **æŠŠ HTTP è¯·æ±‚ä½“ï¼ˆRequest Bodyï¼‰é‡Œçš„ JSONã€XML æˆ–è¡¨å•æ•°æ®ï¼Œè‡ªåŠ¨ååºåˆ—åŒ–ä¸º Java å¯¹è±¡ï¼Œå¹¶æ³¨å…¥åˆ°æ–¹æ³•å‚æ•°ä¸­ã€‚**

------

###### ğŸ”¹ ä¸ºä»€ä¹ˆè¦ç”¨ `@RequestBody`ï¼Ÿ

- HTTP è¯·æ±‚æœ‰ä¸¤éƒ¨åˆ†ï¼š**è¯·æ±‚å¤´ (headers)** å’Œ **è¯·æ±‚ä½“ (body)**ã€‚
- å½“å®¢æˆ·ç«¯å‘é€ **POST/PUT** è¯·æ±‚æ—¶ï¼Œé€šå¸¸ä¼šæŠŠæ•°æ®æ”¾åœ¨è¯·æ±‚ä½“é‡Œï¼ˆJSON æ¯”è¾ƒå¸¸è§ï¼‰ã€‚
- Spring é»˜è®¤åªèƒ½è‡ªåŠ¨è§£æ **è¡¨å•é”®å€¼å¯¹ï¼ˆx-www-form-urlencodedï¼‰** è¿™ç§æ•°æ®ï¼Œ
  å¦‚æœä½ ä¼ çš„æ˜¯ **JSON**ï¼Œå°±éœ€è¦ç”¨ `@RequestBody` å‘Šè¯‰ Springï¼š**è¯·æŠŠè¯·æ±‚ä½“é‡Œçš„ JSON è½¬æˆ Java å¯¹è±¡**ã€‚

------

###### ğŸ”¹ ç¤ºä¾‹

###### 1. ä¸ä½¿ç”¨ `@RequestBody`ï¼ˆä¼ ç»Ÿè¡¨å•æ–¹å¼ï¼‰

```
@PostMapping("/addUser")
public String addUser(String name, Integer age) {
    return "ç”¨æˆ·: " + name + " å¹´é¾„: " + age;
}
```

è¯·æ±‚æ–¹å¼ï¼ˆè¡¨å•ï¼‰ï¼š

```
POST /addUser
Content-Type: application/x-www-form-urlencoded

name=å¼ ä¸‰&age=20
```

------

###### 2. ä½¿ç”¨ `@RequestBody`ï¼ˆJSON æ–¹å¼ï¼‰

```
@RestController
public class UserController {
    @PostMapping("/addUser")
    public String addUser(@RequestBody User user) {
        return "ç”¨æˆ·: " + user.getName() + " å¹´é¾„: " + user.getAge();
    }
}
```

`User` ç±»ï¼š

```
public class User {
    private String name;
    private Integer age;
    // getter/setter
}
```

è¯·æ±‚æ–¹å¼ï¼ˆJSON è¯·æ±‚ä½“ï¼‰ï¼š

```
POST /addUser
Content-Type: application/json

{
  "name": "å¼ ä¸‰",
  "age": 20
}
```

Spring ä¼šè‡ªåŠ¨ç”¨ **Jackson**ï¼ˆé»˜è®¤çš„ JSON è§£æåº“ï¼‰æŠŠ JSON è§£ææˆ `User` å¯¹è±¡ã€‚

------

######ğŸ”¹ å°ç»“

- `@RequestBody`ï¼šå– **è¯·æ±‚ä½“æ•°æ®**ï¼Œå¹¶è‡ªåŠ¨è½¬æ¢ä¸º Java å¯¹è±¡ã€‚
- å¸¸ç”¨äº `POST` / `PUT` è¯·æ±‚ã€‚
- ä¾èµ– `HttpMessageConverter`ï¼ˆé»˜è®¤ç”¨ Jackson å¤„ç† JSONï¼‰ã€‚







#### 2.@RestController

**`@RestController`** æ˜¯ Spring Framework 4.0 å¼•å…¥çš„ä¸€ä¸ªå¤åˆæ³¨è§£ï¼Œå®ƒçš„ä½œç”¨æ˜¯ç®€åŒ– **RESTful Web æœåŠ¡**çš„å¼€å‘ã€‚

å®ƒå®é™…ä¸Šæ˜¯ä¸¤ä¸ªæ³¨è§£çš„ç»„åˆï¼š

1. `@Controller`
2. `@ResponseBody`



**`@Controller` çš„ä½œç”¨**



`@Controller` ç”¨äºæ ‡è¯†ä¸€ä¸ªç±»æ˜¯ Spring MVC çš„æ§åˆ¶å™¨ã€‚åœ¨ä¼ ç»Ÿçš„ MVC æ¶æ„ä¸­ï¼Œ`@Controller` è´Ÿè´£å¤„ç†å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œå¹¶å°†è¯·æ±‚åˆ†å‘ç»™ç›¸åº”çš„æœåŠ¡å±‚è¿›è¡Œå¤„ç†ï¼Œç„¶åè¿”å›ä¸€ä¸ªè§†å›¾åï¼ˆå¦‚ JSPã€Thymeleaf æ¨¡æ¿ï¼‰ã€‚



**`@ResponseBody` çš„ä½œç”¨**



`@ResponseBody` é€šå¸¸æ ‡æ³¨åœ¨æ–¹æ³•æˆ–ç±»ä¸Šï¼Œå®ƒçš„ä½œç”¨æ˜¯å‘Šè¯‰ Spring **ä¸è¦å°†æ–¹æ³•çš„è¿”å›å€¼è§£æä¸ºè§†å›¾åç§°**ï¼Œè€Œæ˜¯å°†è¿”å›å€¼ç›´æ¥ä½œä¸º **HTTP å“åº”ä½“**ï¼ˆResponse Bodyï¼‰è¿”å›ç»™å®¢æˆ·ç«¯ã€‚

Spring ä¼šä½¿ç”¨å†…ç½®çš„ HTTP æ¶ˆæ¯è½¬æ¢å™¨ï¼ˆ`HttpMessageConverter`ï¼‰æ¥å¤„ç†è¿™ä¸ªè¿”å›å€¼ï¼Œé€šå¸¸æ˜¯å°†å…¶è½¬æ¢ä¸º **JSON** æˆ– **XML** æ ¼å¼ã€‚è¿™å¯¹äºæ„å»ºè¿”å›æ•°æ®çš„ API æœåŠ¡éå¸¸é‡è¦ã€‚





#### 3.åŸºäºSpringBootå®˜æ–¹éª¨æ¶åˆ›å»ºçš„ï¼Œè¿™äº›å­—æ®µä¼šä¿ç•™

![image-20250811005605843](../AppData/Roaming/Typora/typora-user-images/image-20250811005605843.png)





#### 4.ä¼ å‚çš„æƒ…å†µ

**å®ƒå¯ä»¥è‡ªåŠ¨æŠŠidæå–å‡ºæ¥**

![image-20250811010857934](../AppData/Roaming/Typora/typora-user-images/image-20250811010857934.png)

#### 5.@Componentçš„ä½œç”¨(@Service)

åœ¨Spring Bootä¸­ï¼Œ`@Component` æ³¨è§£çš„ä½œç”¨æ˜¯**å°†ä¸€ä¸ªç±»æ ‡è®°ä¸ºSpringç»„ä»¶**ã€‚

ç®€å•æ¥è¯´ï¼Œå½“ä½ åœ¨ä¸€ä¸ªç±»ä¸Šä½¿ç”¨ `@Component` æ³¨è§£æ—¶ï¼Œä½ å°±æ˜¯åœ¨å‘Šè¯‰Springæ¡†æ¶ï¼šâ€œå˜¿ï¼Œè¯·ç®¡ç†è¿™ä¸ªç±»ã€‚åœ¨åº”ç”¨å¯åŠ¨æ—¶ï¼Œè¯·ä¸ºæˆ‘åˆ›å»ºä¸€ä¸ªå®ƒçš„å®ä¾‹ï¼ˆä¹Ÿå°±æ˜¯ä¸€ä¸ª Beanï¼‰ï¼Œå¹¶æŠŠå®ƒæ”¾åˆ°ä½ çš„å®¹å™¨ï¼ˆSpring IoC Containerï¼‰é‡Œã€‚â€

è¿™æ ·ä¸€æ¥ï¼Œè¿™ä¸ªè¢«æ ‡è®°çš„ç±»å°±æˆä¸ºäº†Springå¯ä»¥è¯†åˆ«å’Œç®¡ç†çš„**ç»„ä»¶**ã€‚å…¶ä»–åœ°æ–¹éœ€è¦ä½¿ç”¨è¿™ä¸ªç±»çš„å®ä¾‹æ—¶ï¼ŒSpringå°±å¯ä»¥é€šè¿‡**ä¾èµ–æ³¨å…¥**ï¼ˆDependency Injectionï¼‰çš„æ–¹å¼ï¼Œå°†å®ƒè‡ªåŠ¨è£…é…è¿›æ¥ï¼Œè€Œä¸éœ€è¦ä½ æ‰‹åŠ¨å»åˆ›å»ºå’Œç®¡ç†å®ä¾‹ã€‚

é™¤äº† `@Component`ï¼ŒSpringè¿˜æä¾›äº†å‡ ä¸ªæ›´å…·ç‰¹å®šè¯­ä¹‰çš„è¡ç”Ÿæ³¨è§£ï¼Œå®ƒä»¬çš„ä½œç”¨å’Œ `@Component` åŸºæœ¬ç›¸åŒï¼Œä½†ç”¨åœ¨ä¸åŒçš„åˆ†å±‚æ¶æ„ä¸­ï¼Œè®©ä»£ç æ›´æ¸…æ™°ã€æ›´æ˜“æ‡‚ï¼š

- `@Controller`: ç”¨äºæ ‡è®°å¤„ç†Webè¯·æ±‚çš„ç±»ï¼Œé€šå¸¸åœ¨**æ§åˆ¶å±‚**ï¼ˆController layerï¼‰ä½¿ç”¨ã€‚
- `@Service`: ç”¨äºæ ‡è®°åŒ…å«ä¸šåŠ¡é€»è¾‘çš„ç±»ï¼Œé€šå¸¸åœ¨**æœåŠ¡å±‚**ï¼ˆService layerï¼‰ä½¿ç”¨ã€‚
- `@Repository`: ç”¨äºæ ‡è®°å¤„ç†æ•°æ®æŒä¹…åŒ–ï¼ˆä¾‹å¦‚ä¸æ•°æ®åº“äº¤äº’ï¼‰çš„ç±»ï¼Œé€šå¸¸åœ¨**æ•°æ®è®¿é—®å±‚**ï¼ˆData access layerï¼‰ä½¿ç”¨ã€‚

æ€»çš„æ¥è¯´ï¼Œè¿™å››ä¸ªæ³¨è§£çš„ä½œç”¨éƒ½æ˜¯ä¸€æ ·çš„ï¼šå°†ç±»æ³¨å†ŒæˆSpringçš„ç»„ä»¶ã€‚é€‰æ‹©ä½¿ç”¨å“ªä¸€ä¸ªå–å†³äºè¿™ä¸ªç»„ä»¶åœ¨ä½ çš„åº”ç”¨ä¸­æ‰®æ¼”çš„è§’è‰²ã€‚è¿™ä¸ä»…æœ‰åŠ©äºä»£ç ç»„ç»‡ï¼Œä¹Ÿè®©å¼€å‘äººå‘˜èƒ½æ›´å¿«åœ°ç†è§£æ¯ä¸ªç±»çš„èŒè´£ã€‚



#### 6.Autowired

åœ¨ Java Spring Boot ä¸­ï¼Œ @Autowired  æ˜¯ Spring æ¡†æ¶æä¾›çš„æ ¸å¿ƒæ³¨è§£ä¹‹ä¸€ï¼Œä¸»è¦ä½œç”¨æ˜¯å®ç°ä¾èµ–çš„è‡ªåŠ¨æ³¨å…¥ï¼Œå¸®åŠ©å¼€å‘è€…ç®€åŒ–å¯¹è±¡ä¹‹é—´ä¾èµ–å…³ç³»çš„ç®¡ç†ã€‚

å…·ä½“æ¥è¯´ï¼Œå®ƒçš„ä½œç”¨å¯ä»¥æ‹†è§£ä¸ºï¼š

1. è‡ªåŠ¨å…³è”ä¾èµ–å¯¹è±¡
   å½“ä¸€ä¸ªç±»ï¼ˆæ¯”å¦‚  Service ã€ Controller  ç­‰ï¼‰éœ€è¦ä¾èµ–å¦ä¸€ä¸ªç±»çš„å®ä¾‹æ—¶ï¼ˆæ¯”å¦‚  Service  ä¾èµ–  Dao ï¼‰ï¼Œä¸éœ€è¦æ‰‹åŠ¨é€šè¿‡  new  åˆ›å»ºä¾èµ–å¯¹è±¡ï¼Œåªéœ€åœ¨ä¾èµ–å­—æ®µã€æ„é€ æ–¹æ³•æˆ– setter æ–¹æ³•ä¸Šæ·»åŠ   @Autowired ï¼ŒSpring å®¹å™¨ä¼šè‡ªåŠ¨ä»å®¹å™¨ä¸­æ‰¾åˆ°åŒ¹é…çš„å¯¹è±¡ï¼Œå¹¶æ³¨å…¥åˆ°å½“å‰ç±»ä¸­ã€‚ç¤ºä¾‹ï¼š
   @Service
   public class UserService {
    // è‡ªåŠ¨æ³¨å…¥ UserDao å®ä¾‹
    @Autowired
    private UserDao userDao;

    public void addUser() {
        userDao.save(); // ç›´æ¥ä½¿ç”¨æ³¨å…¥çš„ userDao
    }
   }

2. é™ä½ä»£ç è€¦åˆåº¦
   ä¼ ç»Ÿæ–¹å¼ä¸­ï¼Œéœ€è¦æ‰‹åŠ¨åˆ›å»ºä¾èµ–å¯¹è±¡ï¼ˆå¦‚  userDao = new UserDao() ï¼‰ï¼Œå¯¼è‡´ç±»ä¸ç±»ä¹‹é—´å¼ºè€¦åˆã€‚ @Autowired  è®©ä¾èµ–å…³ç³»ç”± Spring å®¹å™¨ç®¡ç†ï¼Œå¼€å‘è€…åªéœ€å…³æ³¨ä¸šåŠ¡é€»è¾‘ï¼Œæ— éœ€å…³å¿ƒå¯¹è±¡çš„åˆ›å»ºå’Œå…³è”ï¼Œæ›´ç¬¦åˆâ€œä¾èµ–å€’ç½®åŸåˆ™â€ã€‚

3. æ”¯æŒå¤šç§æ³¨å…¥æ–¹å¼

- å­—æ®µæ³¨å…¥ï¼šç›´æ¥åœ¨æˆå‘˜å˜é‡ä¸Šæ·»åŠ   @Autowired ï¼ˆæœ€å¸¸ç”¨ï¼‰ã€‚

- æ„é€ æ–¹æ³•æ³¨å…¥ï¼šåœ¨æ„é€ æ–¹æ³•ä¸Šæ·»åŠ   @Autowired ï¼ŒSpring ä¼šåœ¨åˆ›å»ºå½“å‰å¯¹è±¡æ—¶ï¼Œè‡ªåŠ¨æ³¨å…¥æ„é€ æ–¹æ³•çš„å‚æ•°ã€‚
  @Service
  public class UserService {
    private UserDao userDao;

    // æ„é€ æ–¹æ³•æ³¨å…¥
    @Autowired
    public UserService(UserDao userDao) {
        this.userDao = userDao;
    }
  }

- setter æ–¹æ³•æ³¨å…¥ï¼šåœ¨ setter æ–¹æ³•ä¸Šæ·»åŠ   @Autowired ï¼ŒSpring ä¼šè°ƒç”¨è¯¥æ–¹æ³•æ³¨å…¥ä¾èµ–ã€‚

4. é»˜è®¤æŒ‰ç±»å‹åŒ¹é…ï¼ˆbyTypeï¼‰
   Spring å®¹å™¨ä¼šæ ¹æ®è¢«æ³¨å…¥å­—æ®µçš„ç±»å‹ï¼ˆå¦‚  UserDao ï¼‰ï¼Œåœ¨å®¹å™¨ä¸­æŸ¥æ‰¾ç›¸åŒç±»å‹çš„ bean å¹¶æ³¨å…¥ã€‚å¦‚æœå­˜åœ¨å¤šä¸ªåŒç±»å‹çš„ beanï¼Œä¼šæŠ¥é”™ï¼Œæ­¤æ—¶éœ€é…åˆ  @Qualifier  æ³¨è§£æŒ‡å®šå…·ä½“ bean çš„åç§°ï¼š
   @Autowired
   @Qualifier("userDaoImpl") // æŒ‡å®šæ³¨å…¥åç§°ä¸º userDaoImpl çš„ bean
   private UserDao userDao;

5. å¯é…ç½®æ˜¯å¦å¿…é¡»æ³¨å…¥
   @Autowired  æœ‰ä¸ª  required  å±æ€§ï¼ˆé»˜è®¤  true ï¼‰ï¼Œè¡¨ç¤ºä¾èµ–å¿…é¡»å­˜åœ¨ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚è‹¥è®¾ä¸º  false ï¼Œåˆ™å½“ä¾èµ–ä¸å­˜åœ¨æ—¶ï¼Œæ³¨å…¥  null ï¼š
   @Autowired(required = false)
   private UserDao userDao;


æ€»ä¹‹ï¼Œ @Autowired  æ˜¯ Spring å®ç°â€œæ§åˆ¶åè½¬ï¼ˆIOCï¼‰â€å’Œâ€œä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰â€çš„å…³é”®æ³¨è§£ï¼Œæå¤§ç®€åŒ–äº†å¯¹è±¡ä¾èµ–çš„ç®¡ç†ï¼Œæ˜¯ Spring Boot å¼€å‘ä¸­æœ€å¸¸ç”¨çš„æ³¨è§£ä¹‹ä¸€ã€‚

#### 7.RequestParamè®¾ç½®é»˜è®¤å€¼

![image-20250811140433455](../AppData/Roaming/Typora/typora-user-images/image-20250811140433455.png)

åœ¨ Spring Boot ä¸­ï¼Œ`@RequestParam` æ˜¯ä¸€ä¸ªéå¸¸å¸¸ç”¨çš„æ³¨è§£ï¼Œå®ƒçš„ä¸»è¦ä½œç”¨æ˜¯**å°† HTTP è¯·æ±‚ä¸­çš„å‚æ•°ç»‘å®šåˆ°ä½ çš„æ§åˆ¶å™¨ï¼ˆControllerï¼‰æ–¹æ³•çš„å‚æ•°ä¸Š**ã€‚ç®€å•æ¥è¯´ï¼Œå°±æ˜¯å½“ä½ çš„æµè§ˆå™¨å‘é€ä¸€ä¸ªå¸¦å‚æ•°çš„è¯·æ±‚åˆ°ä½ çš„æœåŠ¡å™¨æ—¶ï¼ŒSpring Boot æ¡†æ¶èƒ½é€šè¿‡ `@RequestParam` è‡ªåŠ¨æŠŠè¿™äº›å‚æ•°çš„å€¼â€œæŠ“å–â€è¿‡æ¥ï¼Œå¹¶èµ‹å€¼ç»™ä½ æ–¹æ³•ä¸­å®šä¹‰çš„å˜é‡ï¼Œè¿™æ ·ä½ å°±å¯ä»¥åœ¨ä¸šåŠ¡é€»è¾‘ä¸­ç›´æ¥ä½¿ç”¨è¿™äº›å‚æ•°äº†ã€‚



###### 1. æœ€ç®€å•çš„ç”¨æ³•



å‡è®¾ä½ æœ‰ä¸€ä¸ªæ¥å£ï¼Œéœ€è¦æ¥æ”¶ä¸€ä¸ªåä¸º `name` çš„å­—ç¬¦ä¸²å‚æ•°ã€‚

Java

```
@GetMapping("/hello")
public String hello(@RequestParam String name) {
    return "Hello, " + name + "!";
}
```

å½“ä½ è®¿é—® `http://localhost:8080/hello?name=Gemini` æ—¶ï¼ŒSpring Boot ä¼šæ‰¾åˆ° `name=Gemini` è¿™ä¸ªå‚æ•°ï¼Œç„¶åæŠŠå®ƒèµ‹å€¼ç»™ `hello` æ–¹æ³•é‡Œçš„ `name` å˜é‡ã€‚æ‰€ä»¥ï¼Œæœ€ç»ˆä½ ä¼šå¾—åˆ°ä¸€ä¸ªè¿”å›ç»“æœï¼š"Hello, Gemini!"ã€‚



###### 2. å‚æ•°åä¸ä¸€è‡´æ—¶çš„ç”¨æ³•



å¦‚æœä½ çš„è¯·æ±‚å‚æ•°åå’Œæ–¹æ³•å‚æ•°åä¸ä¸€è‡´ï¼Œä½ å¯ä»¥é€šè¿‡ `@RequestParam` çš„ `value`ï¼ˆæˆ–è€… `name`ï¼‰å±æ€§æ¥æŒ‡å®šã€‚

Java

```
@GetMapping("/user")
public String getUser(@RequestParam("userId") String id) {
    return "User ID is: " + id;
}
```

åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ éœ€è¦è®¿é—® `http://localhost:8080/user?userId=123`ï¼Œè€Œä¸æ˜¯ `?id=123`ã€‚



###### 3. è®¾å®šå‚æ•°ä¸ºéå¿…ä¼ ï¼ˆå¯é€‰ï¼‰



é»˜è®¤æƒ…å†µä¸‹ï¼Œä½¿ç”¨ `@RequestParam` æ ‡è®°çš„å‚æ•°éƒ½æ˜¯**å¿…ä¼ **çš„ã€‚å¦‚æœè¯·æ±‚ä¸­æ²¡æœ‰è¿™ä¸ªå‚æ•°ï¼ŒSpring Boot ä¼šæŠ›å‡ºä¸€ä¸ª `MissingServletRequestParameterException` å¼‚å¸¸ã€‚

å¦‚æœä½ æƒ³è®©ä¸€ä¸ªå‚æ•°å˜æˆå¯é€‰çš„ï¼Œå¯ä»¥é€šè¿‡è®¾ç½® `required = false`ã€‚

Java

```
@GetMapping("/greet")
public String greet(@RequestParam(value = "name", required = false) String name) {
    if (name == null || name.isEmpty()) {
        return "Hello, Guest!";
    }
    return "Hello, " + name + "!";
}
```

ç°åœ¨ï¼Œå½“ä½ è®¿é—® `http://localhost:8080/greet`ï¼ˆæ²¡æœ‰å¸¦å‚æ•°ï¼‰æ—¶ï¼Œ`name` å‚æ•°ä¼šè¢«èµ‹å€¼ä¸º `null`ï¼Œç¨‹åºä¼šæ­£å¸¸æ‰§è¡Œã€‚å½“ä½ è®¿é—® `http://localhost:8080/greet?name=Lily` æ—¶ï¼Œ`name` çš„å€¼å°±æ˜¯ "Lily"ã€‚

------



###### 4. è®¾å®šé»˜è®¤å€¼



å½“ä½ æŠŠå‚æ•°è®¾ä¸ºå¯é€‰åï¼Œä½ è¿˜å¯ä»¥é€šè¿‡ `defaultValue` å±æ€§ä¸ºå®ƒæŒ‡å®šä¸€ä¸ªé»˜è®¤å€¼ï¼Œè¿™æ ·å°±ä¸ç”¨å†æ‰‹åŠ¨åˆ¤æ–­ `null` äº†ã€‚

Java

```
@GetMapping("/search")
public String search(@RequestParam(defaultValue = "1") int page) {
    return "Searching on page: " + page;
}
```

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå¦‚æœä½ è®¿é—® `http://localhost:8080/search`ï¼Œ`page` çš„å€¼ä¼šè‡ªåŠ¨å˜æˆ `1`ã€‚å¦‚æœä½ è®¿é—® `http://localhost:8080/search?page=5`ï¼Œ`page` çš„å€¼å°±æ˜¯ `5`ã€‚

------



###### 5. æ¥æ”¶å¤šä¸ªåŒåå‚æ•°



å¦‚æœä½ çš„è¯·æ±‚ä¸­æœ‰å¤šä¸ªåŒåçš„å‚æ•°ï¼ˆæ¯”å¦‚ä¸€ä¸ªå¤é€‰æ¡†ï¼‰ï¼Œä½ å¯ä»¥ä½¿ç”¨ä¸€ä¸ªé›†åˆç±»å‹æ¥æ¥æ”¶å®ƒä»¬ã€‚

Java

```
@GetMapping("/items")
public String getItems(@RequestParam List<String> itemIds) {
    return "Selected items: " + String.join(", ", itemIds);
}
```

å½“ä½ è®¿é—® `http://localhost:8080/items?itemIds=101&itemIds=102&itemIds=103` æ—¶ï¼Œ`itemIds` å°†ä¼šæ˜¯ä¸€ä¸ªåŒ…å« `["101", "102", "103"]` çš„åˆ—è¡¨ã€‚





#### 8.æŸ¥çœ‹å¹¶ä¸‹è½½ä¾èµ–çš„ç½‘ç«™

https://mvnrepository.com/

#### 9.æ³¨æ„é‡è¦åˆ¤æ–­å‡½æ•°

falseéç©ºï¼Œtrueç©º

![image-20250813165334804](../AppData/Roaming/Typora/typora-user-images/image-20250813165334804.png)

#### 10.è·å–ä¸»é”®Id

![image-20250814133036081](../AppData/Roaming/Typora/typora-user-images/image-20250814133036081.png)

![image-20250814175019118](../AppData/Roaming/Typora/typora-user-images/image-20250814175019118.png)

![image-20250814175047241](../AppData/Roaming/Typora/typora-user-images/image-20250814175047241.png)

#### 11.é˜²æ­¢å…¶ä»–äº‹åŠ¡å›æ»šå½±å“

![image-20250814225749116](../AppData/Roaming/Typora/typora-user-images/image-20250814225749116.png)

![image-20250814230453904](../AppData/Roaming/Typora/typora-user-images/image-20250814230453904.png)

#### 12.æŸäº›ä¸œè¥¿å¯ä»¥æ”¾åœ¨é…ç½®æ–‡ä»¶ä¸­

ä¸¤ç§æ–¹æ³•

![image-20250816161530011](../AppData/Roaming/Typora/typora-user-images/image-20250816161530011.png)

![image-20250816160143157](../AppData/Roaming/Typora/typora-user-images/image-20250816160143157.png)

#### 13.å†…è¿æ¥å’Œå¤–è¿æ¥

| è¿æ¥ç±»å‹     | å…³é”®å­—                 | æè¿°                                | ç»“æœç›¸å½“äº |
| :----------- | :--------------------- | :---------------------------------- | :--------- |
| **å†…è¿æ¥**   | `INNER JOIN` æˆ– `JOIN` | åªè¿”å›ä¸¤ä¸ªè¡¨ä¸­**åŒ¹é…**çš„è¡Œ          | **äº¤é›†**   |
| **å·¦å¤–è¿æ¥** | `LEFT JOIN`            | è¿”å›**å·¦è¡¨å…¨éƒ¨** + **å³è¡¨åŒ¹é…**çš„è¡Œ | å·¦è¡¨å…¨é›†   |
| **å³å¤–è¿æ¥** | `RIGHT JOIN`           | è¿”å›**å³è¡¨å…¨éƒ¨** + **å·¦è¡¨åŒ¹é…**çš„è¡Œ | å³è¡¨å…¨é›†   |

#### 14.ä¿®æ”¹æ–¹æ³•

å…ˆåˆ åå­˜

#### 15.ã€Šsetã€‹å’Œã€Šwhereã€‹æ ‡ç­¾

![image-20250817120250975](../AppData/Roaming/Typora/typora-user-images/image-20250817120250975.png)

#### 16.å…¨å±€å¼‚å¸¸å¤„ç†

![image-20250817204303527](../AppData/Roaming/Typora/typora-user-images/image-20250817204303527.png)



**è¿™é‡Œçš„é”™è¯¯ä¿¡æ¯ä¼šä»ä¸‹å¾€ä¸Šæ£€æŸ¥æ˜¯å“ªä¸ªé—®é¢˜ï¼ˆå°±æ˜¯ä»æœ€å­ç±»æ£€æŸ¥åˆ°æœ€çˆ¶ç±»ï¼‰**

![image-20250817210029213](../AppData/Roaming/Typora/typora-user-images/image-20250817210029213.png)

![image-20250817210830728](../AppData/Roaming/Typora/typora-user-images/image-20250817210830728.png)

#### 17.æ³¨æ„SQLç»†èŠ‚

å¦‚æœæ‚¨ä½¿ç”¨ MyBatis æ’å…¥ä¸€ä¸ªå®Œæ•´çš„å¯¹è±¡ï¼ŒMyBatis ä¼šè‡ªåŠ¨å¤„ç†å­—æ®µæ˜ å°„ã€‚

XML

```
<insert id="insert" parameterType="com.it.pojo.Clazz">
    insert into clazz
    (id, name, room, begin_date, end_date, master_id, subject, create_time, update_time)
    values
    (#{id}, #{name}, #{room}, #{beginDate}, #{endDate}, #{masterId}, #{subject}, #{createTime}, #{updateTime})
</insert>
```

**é‡è¦æç¤ºï¼š**

- å¦‚æœæ‚¨çš„ `id` å­—æ®µæ˜¯æ•°æ®åº“è‡ªåŠ¨ç”Ÿæˆçš„ï¼ˆä¾‹å¦‚ï¼Œä½¿ç”¨ `AUTO_INCREMENT`ï¼‰ï¼Œåˆ™åº”è¯¥åœ¨ SQL è¯­å¥ä¸­çœç•¥ `id` å­—æ®µã€‚
- å¦‚æœ `createTime` å’Œ `updateTime` å­—æ®µæ˜¯ç”±æ•°æ®åº“è‡ªåŠ¨å¡«å……çš„ï¼Œæ‚¨ä¹Ÿåº”è¯¥åœ¨æ’å…¥æ—¶çœç•¥å®ƒä»¬ã€‚
- è¿™ä¸ª `insert` è¯­å¥å‡è®¾æ‚¨æœ‰ä¸€ä¸ªæ–¹æ³•ï¼Œä¾‹å¦‚ `insert(Clazz clazz)`ï¼Œå®ƒå°†ä¸€ä¸ª `Clazz` å¯¹è±¡ä½œä¸ºå‚æ•°ã€‚MyBatis ä¼šè‡ªåŠ¨å°† `Clazz` å¯¹è±¡ä¸­çš„å±æ€§å€¼æ˜ å°„åˆ° `#{...}` å ä½ç¬¦ã€‚

#### 18.@Bean

åœ¨ **Spring / Spring Boot** é‡Œï¼Œ`@Bean` çš„ä½œç”¨å°±æ˜¯ï¼š

ğŸ‘‰ **å‘Šè¯‰ Spring å®¹å™¨ï¼šæˆ‘è¦å¾€ IOC å®¹å™¨é‡Œæ³¨å†Œä¸€ä¸ª Beanï¼ˆå¯¹è±¡ï¼‰ï¼Œå¹¶äº¤ç»™ Spring æ¥ç®¡ç†å®ƒçš„ç”Ÿå‘½å‘¨æœŸã€‚**

------

##### ğŸ”¹ åŸºæœ¬æ¦‚å¿µ

- **Bean**ï¼šå°±æ˜¯ç”± Spring å®¹å™¨ç®¡ç†çš„å¯¹è±¡ã€‚

- åœ¨ä»¥å‰æˆ‘ä»¬å†™ `applicationContext.xml` çš„æ—¶å€™ï¼Œè¦æ‰‹åŠ¨å†™ï¼š

  ```
  <bean id="myService" class="com.example.MyService"/>
  ```

- ç°åœ¨ç”¨ Java é…ç½®æ—¶ï¼Œåªè¦å†™ä¸ªæ–¹æ³•åŠ ä¸Š `@Bean`ï¼Œè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼ŒSpring å°±ä¼šæŠŠè¿™ä¸ªå¯¹è±¡æ”¾è¿›å®¹å™¨é‡Œã€‚

------

##### ğŸ”¹ ç¤ºä¾‹

```
@Configuration  // è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªé…ç½®ç±»ï¼Œç­‰ä»·äºä¸€ä¸ª Spring XML é…ç½®æ–‡ä»¶
public class AppConfig {

    @Bean   // å‘ Spring å®¹å™¨æ³¨å†Œä¸€ä¸ª Bean
    public MyService myService() {
        return new MyService(); // è¿™ä¸ªå¯¹è±¡ä¼šè¢« Spring å®¹å™¨æ‰˜ç®¡
    }
}
```

è¿™æ ·ï¼ŒSpring å®¹å™¨é‡Œå°±æœ‰äº†ä¸€ä¸ªåå­—ä¸º `myService` çš„ Beanã€‚
 ä½ å°±å¯ä»¥åœ¨åˆ«çš„åœ°æ–¹æ³¨å…¥ä½¿ç”¨ï¼š

```
@RestController
public class TestController {
    private final MyService myService;

    public TestController(MyService myService) {
        this.myService = myService;
    }

    @GetMapping("/hello")
    public String hello() {
        return myService.sayHello();
    }
}
```

------

##### ğŸ”¹ ç»†èŠ‚

1. **Bean åå­—**

   - é»˜è®¤ï¼šæ–¹æ³•åå°±æ˜¯ Bean çš„åå­—ï¼ˆä¸Šä¾‹ä¸­æ˜¯ `myService`ï¼‰ã€‚

   - ä¹Ÿå¯ä»¥æŒ‡å®šï¼š

     ```
     @Bean("customService")
     public MyService myService() { ... }
     ```

2. **å’Œ @Component çš„åŒºåˆ«**

   - `@Component`ï¼šç›´æ¥æ ‡åœ¨ç±»ä¸Šï¼Œç”± **ç±»æ‰«æ** æ³¨å†Œæˆ Beanã€‚
   - `@Bean`ï¼šæ ‡åœ¨ **æ–¹æ³•ä¸Š**ï¼Œæ‰‹åŠ¨æŒ‡å®šè¿”å›çš„å¯¹è±¡ã€‚
   - ä¸€èˆ¬ `@Component` ç”¨åœ¨è‡ªå·±å†™çš„ä¸šåŠ¡ç±»ï¼›
     `@Bean` ç”¨åœ¨ç¬¬ä¸‰æ–¹ç±»æˆ–éœ€è¦è‡ªå·±æ„é€ çš„å¯¹è±¡ã€‚

3. **ç”Ÿå‘½å‘¨æœŸ**

   - Spring ç®¡ç† Bean çš„åˆ›å»ºã€åˆå§‹åŒ–ã€é”€æ¯ã€‚
   - å¯ä»¥é…åˆ `@Scope("prototype")` æŒ‡å®šä½œç”¨åŸŸã€‚

------

âœ… **ä¸€å¥è¯æ€»ç»“ï¼š**
 `@Bean` å°±æ˜¯ **æ³¨å†Œä¸€ä¸ªæ–¹æ³•è¿”å›çš„å¯¹è±¡åˆ° Spring å®¹å™¨**ï¼Œè®©å®ƒå˜æˆä¸€ä¸ª Beanï¼Œåç»­å¯ä»¥åœ¨é¡¹ç›®é‡Œé€šè¿‡ä¾èµ–æ³¨å…¥æ¥ä½¿ç”¨







å¾ˆå¤šäººä¸€å¼€å§‹éƒ½ä¼šè§‰å¾—ï¼š**æœ‰äº† `@Component`ï¼Œä¸ºå•¥è¿˜è¦ `@Bean`ï¼Ÿ**
 å…¶å®è¿™ä¸¤ä¸ªæ³¨è§£è™½ç„¶æœ€ç»ˆæ•ˆæœéƒ½æ˜¯ **å¾€ Spring å®¹å™¨é‡Œæ³¨å†Œä¸€ä¸ª Bean**ï¼Œä½† **åº”ç”¨åœºæ™¯å®Œå…¨ä¸åŒ**ã€‚

------

##### ğŸ”¹ 1. `@Component` é€‚ç”¨åœºæ™¯

- **ä½ èƒ½æ”¹æºç **ï¼Œç±»æ˜¯ä½ è‡ªå·±å†™çš„ã€‚

- ç›´æ¥åœ¨ç±»ä¸ŠåŠ ï¼š

  ```
  @Component
  public class MyService { ... }
  ```

- Spring ä¼šè‡ªåŠ¨é€šè¿‡ **åŒ…æ‰«æ** å‘ç°å¹¶æ³¨å†Œè¿™ä¸ªç±»ä¸º Beanã€‚

- é€‚åˆæ™®é€šçš„ä¸šåŠ¡é€»è¾‘ç±»ã€Controllerã€Serviceã€Repository ç­‰ã€‚

------

##### ğŸ”¹ 2. `@Bean` é€‚ç”¨åœºæ™¯

- **ä½ ä¸èƒ½æ”¹æºç **ï¼Œæ¯”å¦‚ç¬¬ä¸‰æ–¹åº“çš„ç±»ï¼ˆ`DataSource`ã€`RestTemplate` ç­‰ï¼‰ã€‚

- æˆ–è€… **å®ä¾‹åŒ–è¿™ä¸ª Bean éœ€è¦é¢å¤–é€»è¾‘**ï¼ˆæ„é€ å‚æ•°ã€é…ç½®ã€åˆå§‹åŒ–ç­‰ï¼‰ã€‚

- ä¸¾ä¾‹ï¼š

  ```
  @Configuration
  public class AppConfig {
      
      @Bean
      public RestTemplate restTemplate() {
          // è¿™é‡Œä½ å¯ä»¥å®šåˆ¶åŒ–ï¼Œæ¯”å¦‚åŠ æ‹¦æˆªå™¨
          return new RestTemplate();
      }
  
      @Bean
      public DataSource dataSource() {
          HikariDataSource ds = new HikariDataSource();
          ds.setJdbcUrl("jdbc:mysql://localhost:3306/test");
          ds.setUsername("root");
          ds.setPassword("1234");
          return ds;
      }
  }
  ```

- å¦‚æœæ˜¯ç¬¬ä¸‰æ–¹ç±»ï¼ˆæ¯”å¦‚ `RestTemplate`ï¼‰ï¼Œä½ ä¸èƒ½åœ¨æºç ä¸ŠåŠ  `@Component`ï¼Œåªèƒ½ç”¨ `@Bean`ã€‚

------

##### ğŸ”¹ 3. äºŒè€…å…³ç³»

- `@Component` èµ° **ç±»æ‰«æ**ã€‚
- `@Bean` èµ° **æ–¹æ³•å·¥å‚**ã€‚
- å…¶å®å®ƒä»¬éƒ½åªæ˜¯ **ä¸åŒçš„ Bean å®šä¹‰æ–¹å¼**ï¼Œæœ€ç»ˆæ•ˆæœä¸€æ ·ï¼šå¯¹è±¡äº¤ç»™ Spring å®¹å™¨ç®¡ç†ã€‚

------

##### ğŸ”¹ æ€»ç»“ç±»æ¯”

- **`@Component`**ï¼šåƒæ˜¯åœ¨ç±»ä¸Šæ‰“ä¸€ä¸ª â€œè‡ªåŠ¨æ³¨å†Œâ€ æ ‡ç­¾ â†’ Spring æ‰«æåˆ°å°±å¸®ä½ æ‰˜ç®¡ã€‚
- **`@Bean`**ï¼šåƒæ˜¯è‡ªå·±å†™äº†ä¸€æ®µ â€œç”Ÿäº§è¿™ä¸ªå¯¹è±¡çš„æ–¹æ³•â€ â†’ æŠŠæ–¹æ³•è¿”å›çš„å¯¹è±¡äº¤ç»™ Spring æ‰˜ç®¡ã€‚

------

ğŸ‘‰ ä¸€å¥è¯ï¼š

- å¦‚æœæ˜¯ **è‡ªå·±å†™çš„ç±»** â†’ ç”¨ `@Component`ï¼ˆæ›´ç®€æ´ï¼‰ã€‚
- å¦‚æœæ˜¯ **ç¬¬ä¸‰æ–¹ç±»** æˆ– **éœ€è¦å¤æ‚åˆå§‹åŒ–çš„å¯¹è±¡** â†’ ç”¨ `@Bean`ã€‚



#### 19.SQLå°æŠ€å·§

```
update_time timestamp not null default current_timestamp on update current_timestamp comment 'æ›´æ–°æ—¶é—´',
```

- `timestamp`ï¼šè¿™æ˜¯æ•°æ®ç±»å‹ã€‚A`timestamp`å­˜å‚¨æ—¥æœŸå’Œæ—¶é—´ï¼Œé€šå¸¸é‡‡ç”¨ UTC æ ¼å¼ã€‚è¿™æ˜¯ä¸€ç§è¿½è¸ªç‰¹å®šæ—¶åˆ»çš„æœ‰æ•ˆæ–¹æ³•ã€‚
- `default current_timestamp`ï¼šè¿™ä¼šå°† çš„åˆå§‹å€¼è®¾ç½®`update_time`ä¸ºæ’å…¥æ–°è¡Œæ—¶çš„å½“å‰æ—¶é—´æˆ³ã€‚å› æ­¤ï¼Œ`create_time`å’Œ`update_time`åœ¨æ–°è¡Œé¦–æ¬¡åˆ›å»ºæ—¶å°†ä¿æŒä¸å˜ã€‚
- `on update current_timestamp`**ï¼šè¿™æ˜¯å…³é”®çš„åŒºåˆ«ã€‚æ¯å½“è¯¥è¡Œä¸­çš„ä»»ä½•å…¶ä»–åˆ—å‘ç”Ÿæ›´æ”¹æ—¶ï¼Œ**å®ƒéƒ½ä¼šè‡ªåŠ¨å°†çš„å€¼æ›´æ–°`update_time`ä¸ºå½“å‰æ—¶é—´æˆ³ã€‚è¿™æ˜¯ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„åŠŸèƒ½ï¼Œæ— éœ€åœ¨åº”ç”¨ç¨‹åºä¸­ç¼–å†™é¢å¤–çš„ä»£ç å³å¯è·Ÿè¸ªè®°å½•çš„ä¿®æ”¹ã€‚

------



 **`CONSTRAINT`**



```
constraint chk_phone_length check (char_length(phone) = 11)
```

- `constraint chk_phone_length`ï¼šè¿™ä¸ºçº¦æŸæä¾›äº†ä¸€ä¸ªåç§°ã€‚å‘½ååï¼Œå¦‚æœéœ€è¦ï¼Œå¯ä»¥æ›´è½»æ¾åœ°ç®¡ç†ã€å¼•ç”¨æˆ–åˆ é™¤çº¦æŸã€‚
- `check (...)`ï¼šè¿™æ˜¯ä¸€ä¸ª**`CHECK`çº¦æŸ**ã€‚å®ƒå®šä¹‰äº†åˆ—ä¸­çš„æ•°æ®å¿…é¡»æ»¡è¶³çš„è§„åˆ™ã€‚å¦‚æœæ‚¨å°è¯•æ’å…¥æˆ–æ›´æ–°è¿åæ­¤è§„åˆ™çš„å€¼çš„è¡Œï¼Œåˆ™æ“ä½œå°†å¤±è´¥å¹¶è¿”å›é”™è¯¯ã€‚
- `char_length(phone) = 11`ï¼šè¿™æ˜¯è§„åˆ™ã€‚è¯¥`CHAR_LENGTH()`å‡½æ•°è¿”å›å­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦æ•°ã€‚æ­¤è§„åˆ™ç¡®ä¿è¯¥`phone`åˆ—**å¿…é¡»æ°å¥½åŒ…å« 11 ä¸ªå­—ç¬¦**ã€‚ä»»ä½•å°‘äºæˆ–å¤šäº 11 ä¸ªå­—ç¬¦çš„å€¼éƒ½å°†è¢«æ‹’ç»ã€‚

#### 20.ç®€ä¾¿å†™æ—¥æœŸæ–¹æ³•

```
@DateTimeFormat(pattern = "yyyy-MM-dd")
private LocalDate begin;
```

#### 21.WebConfig

![image-20250904215506470](../AppData/Roaming/Typora/typora-user-images/image-20250904215506470.png)

`@Configuration`: è¿™æ˜¯ä¸€ä¸ª Spring æ¡†æ¶çš„æ³¨è§£ï¼Œè¡¨æ˜è¿™ä¸ªç±»æ˜¯ä¸€ä¸ªé…ç½®ç±»ã€‚åœ¨ Spring å®¹å™¨å¯åŠ¨æ—¶ï¼Œä¼šæ‰«æå¹¶åŠ è½½è¿™ä¸ªç±»ï¼Œå¹¶æ ¹æ®å…¶ä¸­çš„é…ç½®æ¥åˆ›å»ºå’Œé…ç½® beanã€‚ï¼ˆæ³¨æ„è¿™ä¸ªç±»æ²¡åˆ›å»ºBeanï¼ŒAAutowiredä¸‹é¢æ˜¯åˆ«äººå·²ç»åˆ›å»ºå¥½çš„ï¼‰ã€‚



`public void addInterceptors(InterceptorRegistry registry)`: è¿™æ˜¯ `WebMvcConfigurer` æ¥å£ä¸­çš„ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨äºæ³¨å†Œæ‹¦æˆªå™¨ã€‚

- `registry.addInterceptor(tokeninterceptor)`: å°† `tokeninterceptor` æ³¨å†Œä¸ºä¸€ä¸ªæ‹¦æˆªå™¨ã€‚
- `.addPathPatterns("/**")`: è¿™ä¸ªæ–¹æ³•æŒ‡å®šäº†æ‹¦æˆªå™¨è¦æ‹¦æˆªçš„ URL è·¯å¾„æ¨¡å¼ã€‚`"/**"` æ˜¯ä¸€ä¸ªé€šé…ç¬¦ï¼Œè¡¨ç¤ºæ‹¦æˆªæ‰€æœ‰çš„ URL è·¯å¾„ã€‚è¿™æ„å‘³ç€ï¼Œå½“ä»»ä½•è¯·æ±‚è¿›å…¥ä½ çš„åº”ç”¨ç¨‹åºæ—¶ï¼Œ`Tokeninterceptor` éƒ½ä¼šè¢«æ‰§è¡Œã€‚



è¿™æ®µä»£ç çš„ä½œç”¨æ˜¯**å°†ä¸€ä¸ªåä¸º `Tokeninterceptor` çš„æ‹¦æˆªå™¨æ³¨å†Œåˆ° Spring MVC åº”ç”¨ç¨‹åºä¸­ï¼Œå¹¶è®©å®ƒæ‹¦æˆªæ‰€æœ‰è¯·æ±‚**ã€‚

#### 22.Interceptoræ‹¦æˆª

```
public class Tokeninterceptor implements HandlerInterceptor
```

#### 23.Transactionalæ–¹æ³•

```
@Transactional(propagation = Propagation.REQUIRES_NEW)
```

1. **propagation = Propagation.REQUIRES_NEW å‚æ•°**ï¼š
   - è¡¨ç¤ºäº‹åŠ¡ä¼ æ’­è¡Œä¸ºè®¾ç½®ä¸º REQUIRES_NEW æ¨¡å¼ã€‚
   - è¿™æ„å‘³ç€**æ¯æ¬¡è°ƒç”¨æ­¤æ–¹æ³•æ—¶éƒ½ä¼šåˆ›å»ºä¸€ä¸ªå…¨æ–°çš„ç‹¬ç«‹äº‹åŠ¡**ã€‚
   - å¦‚æœè°ƒç”¨æ­¤æ–¹æ³•çš„å¤–å±‚æ–¹æ³•å·²ç»å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™å¤–å±‚äº‹åŠ¡ä¼šè¢«æŒ‚èµ·ï¼Œç›´åˆ°å½“å‰æ–¹æ³•çš„æ–°äº‹åŠ¡å®Œæˆåå†æ¢å¤ã€‚
2. **åœ¨å½“å‰ä»£ç ä¸­çš„åº”ç”¨åœºæ™¯**ï¼š
   - EmpLogServiceImpl æ˜¯ä¸€ä¸ªæ—¥å¿—æœåŠ¡å®ç°ç±»ï¼ŒinsertLog æ–¹æ³•ç”¨äºæ’å…¥æ“ä½œæ—¥å¿—ã€‚
   - ä½¿ç”¨ REQUIRES_NEW ä¼ æ’­ç‰¹æ€§ï¼Œç¡®ä¿æ—¥å¿—è®°å½•æ“ä½œ**ä¸å—å¤–å±‚ä¸šåŠ¡äº‹åŠ¡çš„å½±å“**ã€‚
   - å³ä½¿å¤–å±‚ä¸šåŠ¡æ“ä½œå¤±è´¥å›æ»šï¼Œæ—¥å¿—è®°å½•ä»ç„¶ä¼šè¢«æˆåŠŸä¿å­˜ï¼Œè¿™å¯¹äºç³»ç»Ÿå®¡è®¡ã€é—®é¢˜æ’æŸ¥å’Œæ•°æ®è¿½è¸ªéå¸¸é‡è¦ã€‚

#### 24.åŠ¨æ€sql

![image-20250910150548624](../AppData/Roaming/Typora/typora-user-images/image-20250910150548624.png)

![image-20250910150605339](../AppData/Roaming/Typora/typora-user-images/image-20250910150605339.png)

#### 25.é…ç½®ç±»

åœ¨ Spring é‡Œï¼Œæƒ³è®©æŸä¸ªå¯¹è±¡è¢« IoC å®¹å™¨ç®¡ç†ï¼Œæœ‰ä¸¤ç§å¸¸è§æ–¹å¼ï¼š

1. **æ³¨è§£æ‰«æï¼ˆæœ€å¸¸è§ï¼‰**
   åœ¨ç±»ä¸ŠåŠ  `@Component` / `@Service` / `@Controller`ï¼ŒSpring ä¼šè‡ªåŠ¨æ‰«æå¹¶æ³¨å†Œä¸º Beanã€‚
2. **æ˜¾å¼æ³¨å†Œï¼ˆé…ç½®ç±»æ–¹å¼ï¼‰**
   é€šè¿‡ä¸€ä¸ªé…ç½®ç±»ï¼Œç”¨ `@Bean` æ–¹æ³•æ‰‹åŠ¨å‘Šè¯‰ Springï¼šâ€œè¿™ä¸ªæ–¹æ³•è¿”å›çš„å¯¹è±¡ï¼Œè¦æ”¾è¿› IoC å®¹å™¨é‡Œï¼Œæˆä¸ºä¸€ä¸ª Beanâ€ã€‚

------

##### 2. é…ç½®ç±»æ˜¾å¼æ³¨å†Œ Bean çš„å†™æ³•

```
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

@Configuration  // è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªé…ç½®ç±»ï¼Œç›¸å½“äºä»¥å‰çš„ XML é…ç½®æ–‡ä»¶
public class AppConfig {

    @Bean  // æ˜¾å¼å‘Šè¯‰ Springï¼šæŠŠè¿™ä¸ªæ–¹æ³•è¿”å›çš„å¯¹è±¡æ³¨å†Œä¸º Bean
    public UserService userService() {
        return new UserService();
    }
}
```

##### 3. åŸç†

- `@Configuration` è¡¨ç¤ºè¿™ä¸ªç±»æ˜¯ä¸€ä¸ªé…ç½®ç±»ï¼ˆç±»ä¼¼ä»¥å‰çš„ XML `<beans>`ï¼‰ã€‚
- `@Bean` æ³¨è§£çš„æ–¹æ³•ï¼Œè¿”å›çš„å¯¹è±¡ä¼šè¢« **æ˜¾å¼åŠ å…¥ IoC å®¹å™¨**ã€‚
- å³ä½¿ `UserService` ç±»æœ¬èº«æ²¡æœ‰ `@Component` æ³¨è§£ï¼Œä¹Ÿèƒ½è¢«å®¹å™¨ç®¡ç†ã€‚

##### 4. ä½¿ç”¨åœºæ™¯

ä»€ä¹ˆæ—¶å€™éœ€è¦ç”¨ **æ˜¾å¼æ³¨å†Œ**å‘¢ï¼Ÿ

1. ä½ æ— æ³•åœ¨ç±»ä¸ŠåŠ  `@Component`ï¼ˆæ¯”å¦‚è¿™æ˜¯ç¬¬ä¸‰æ–¹åº“é‡Œçš„ç±»ï¼Œæ²¡æ³•æ”¹æºç ï¼‰ã€‚

   ```
   @Bean
   public ObjectMapper objectMapper() {
       return new ObjectMapper();
   }
   ```

2. ä½ éœ€è¦å¯¹ Bean çš„åˆ›å»ºè¿‡ç¨‹åšä¸€äº›å®šåˆ¶åŒ–å¤„ç†ã€‚

   ```
   @Bean
   public DataSource dataSource() {
       HikariDataSource ds = new HikariDataSource();
       ds.setJdbcUrl("jdbc:mysql://localhost:3306/test");
       ds.setUsername("root");
       ds.setPassword("123456");
       return ds;
   }
   ```

3. æƒ³ç»™å®¹å™¨é‡Œæ³¨å†Œå¤šä¸ªä¸åŒé…ç½®çš„åŒç±»å¯¹è±¡ï¼ˆç”¨ `@Bean(name="xxx")` åŒºåˆ†ï¼‰ã€‚

#### 26.å·¦è¿æ¥

**ï¼ˆ1ï¼‰å·¦è¿æ¥é€€åŒ–ä¸ºå†…è¿æ¥ï¼ˆinner joinï¼‰**

å·¦è¿æ¥çš„ç‰¹æ€§æ˜¯ **ä¿ç•™å·¦è¡¨ï¼ˆ`emp`ï¼‰çš„æ‰€æœ‰è®°å½•ï¼Œå³ä½¿å³è¡¨ï¼ˆ`emp_expr`ï¼‰æ— åŒ¹é…**ã€‚ä½† `where ee.emp_id = #{id}` ä¼šå¼ºåˆ¶è¦æ±‚å³è¡¨ `emp_expr` ä¸­å¿…é¡»å­˜åœ¨ `ee.emp_id = #{id}` çš„è®°å½•ï¼Œå¦åˆ™æ•´è¡Œç»“æœä¼šè¢«è¿‡æ»¤ã€‚**ï¼ˆæ³¨æ„è¿™é‡Œæ˜¯e.*ï¼‰**

- è‹¥å‘˜å·¥æ²¡æœ‰å±¥å†è®°å½•ï¼ˆ`emp_expr` æ— æ•°æ®ï¼‰ï¼Œåˆ™æŸ¥è¯¢ç»“æœä¸ºç©ºï¼ˆè¿å‘˜å·¥åŸºæœ¬ä¿¡æ¯éƒ½æ— æ³•è¿”å›ï¼‰ï¼Œè¿™ä¸ã€ŒæŸ¥è¯¢å‘˜å·¥ä¿¡æ¯å¹¶å…³è”å±¥å†ã€çš„éœ€æ±‚çŸ›ç›¾ã€‚

```mysql
select
    e.*,
    ee.id ee_id,
    ee.emp_id ee_empid,
    ee.begin ee_begin,
    ee.end ee_end,
    ee.company ee_company,
    ee.job ee_job
from emp e left join emp_expr ee on e.id = ee.emp_id
where e.id = #{id}
```







## è®¾è®¡æ€æƒ³å’Œæ„Ÿæƒ³

### 1.æ›´æ–°æ•°æ®åº“å­—æ®µçš„æ–°æƒ³æ³•

åœ¨æ›´æ–°æ—¶ï¼Œå¯ä»¥ç»¼åˆè€ƒè™‘ï¼ŒæŠŠä¸€ä¸ªå¯¹è±¡çš„å…¨éƒ¨å±æ€§å­—æ®µå…¨éƒ¨å†™è¿›å»ï¼Œå†™æˆåŠ¨æ€sqlï¼Œç„¶ååœ¨ä¼ é€’æ—¶ï¼Œå°±ç›´æ¥ä¼ ä¸ªå¯¹è±¡ï¼ˆå…ˆå°†ä¸€ä¸ªå¯¹è±¡å°è£…å¥½ï¼‰ï¼Œè¿™æ ·ä»£ç ä¸ä¼šå†—æ‚ã€‚

å¦‚ä¸‹ï¼š

```java
 <update id="update" parameterType="com.sky.entity.Orders">
        update orders
        <set>
            <if test="cancelReason != null and cancelReason!='' ">
                cancel_reason=#{cancelReason},
            </if>
            <if test="rejectionReason != null and rejectionReason!='' ">
                rejection_reason=#{rejectionReason},
            </if>
            <if test="cancelTime != null">
                cancel_time=#{cancelTime},
            </if>
            <if test="payStatus != null">
                pay_status=#{payStatus},
            </if>
            <if test="payMethod != null">
                pay_method=#{payMethod},
            </if>
            <if test="checkoutTime != null">
                checkout_time=#{checkoutTime},
            </if>
            <if test="status != null">
                status = #{status},
            </if>
            <if test="deliveryTime != null">
                delivery_time = #{deliveryTime}
            </if>
        </set>
        where id = #{id}
    </update>
```

### 2.å…³äºWebSocket

æˆ‘ä¹‹å‰ä¸€ç›´æ€è€ƒè¿™ä¸ªæŠ€æœ¯æœ‰ä»€ä¹ˆç”¨ï¼Œå…¶å®æˆ‘è§‰å¾—æ˜¯è¿™æ ·å¯ä»¥åœ¨adminå’Œuserä¸¤ä¸ªç«¯å£ç›´æ¥ä¼ é€’ä¿¡æ¯ã€‚æ¯”å¦‚ä»/user/..ä¼ é€’äº†ä¸€æ¡ä¿¡æ¯ï¼Œæƒ³è®©ä»–ç›´æ¥ä¼ é€’åˆ°/admin/..çš„é‚£ä¸€ç«¯ã€‚ç›´æ¥ä¼ è‚¯å®šä¸è¡Œï¼Œå› ä¸ºhttpæ˜¯å“åº”å¼çš„ï¼Œä¹Ÿå°±æ˜¯å¯¹æ–¹å‘æ¡ä¿¡æ¯ï¼Œä½ æ‰èƒ½ç›¸åº”ä¸€æ¡ä¿¡æ¯å›å»ï¼Œåœ¨è¿™é‡Œï¼Œæ²¡æœ‰å‘/admin/..ç›´æ¥ä¼ é€’ä¿¡æ¯ï¼Œä»–æ˜¯æ— æ³•åœ¨/adminç«¯å“åº”å›å‰ç«¯çš„ã€‚













## é¡¹ç›®å‰ç½®é…ç½®

### é¡¹ç›®ç»“æ„

![image-20250908224935231](../AppData/Roaming/Typora/typora-user-images/image-20250908224935231.png)

### nginx

#### ä¸ºä»€ä¹ˆä½¿ç”¨

![image-20250910105822945](../AppData/Roaming/Typora/typora-user-images/image-20250910105822945.png)

![image-20250910105748636](../AppData/Roaming/Typora/typora-user-images/image-20250910105748636.png)

#### æ“ä½œåŸç†

##### é…ç½®æ–¹å¼

![image-20250910110656769](../AppData/Roaming/Typora/typora-user-images/image-20250910110656769.png)

##### åˆ†ç»™ç®­å¤´çš„å‡ ä¸ªæœåŠ¡å™¨

![image-20250910111101001](../AppData/Roaming/Typora/typora-user-images/image-20250910111101001.png)

![image-20250910111326717](../AppData/Roaming/Typora/typora-user-images/image-20250910111326717.png)

### Swagger

#### ç®€ä»‹ï¼ˆä»€ä¹ˆç”¨ï¼‰

![image-20250910154121573](../AppData/Roaming/Typora/typora-user-images/image-20250910154121573.png)

![image-20250910154311570](../AppData/Roaming/Typora/typora-user-images/image-20250910154311570.png)

![image-20250910170100027](../AppData/Roaming/Typora/typora-user-images/image-20250910170100027.png)

#### å¸¸ç”¨æ³¨è§£

![image-20250910170347582](../AppData/Roaming/Typora/typora-user-images/image-20250910170347582.png)





## Redis

### 1.åŸºç¡€

#### 1.1ç®€ä»‹

```
Redisæ˜¯ä¸€ä¸ªåŸºäºå†…å­˜çš„ key-value ç»“æ„æ•°æ®åº“ã€‚

- åŸºäºå†…å­˜å­˜å‚¨ï¼Œè¯»å†™æ€§èƒ½é«˜  
- é€‚åˆå­˜å‚¨çƒ­ç‚¹æ•°æ®ï¼ˆçƒ­ç‚¹å•†å“ã€èµ„è®¯ã€æ–°é—»ï¼‰  
- ä¼ä¸šåº”ç”¨å¹¿æ³›
```

#### 1.2å¯åŠ¨ä¸è¿æ¥

```
//å¯åŠ¨
redis-server.exe redis.windows.conf
//è¿æ¥
redis-cli.exe
```



**æˆ–è€…**



```
redis-cli.exe -h localhost -p 6379 -a Gongyusong666
```

**è¿™ä¸ªå‘½ä»¤çš„æ„æ€æ˜¯ï¼š**

è¿™æ˜¯ä¸€ä¸ªç”¨äºè¿æ¥ Redis æ•°æ®åº“çš„å‘½ä»¤è¡Œå·¥å…·å‘½ä»¤ã€‚

- `redis-cli.exe`: Redis è‡ªå¸¦çš„å‘½ä»¤è¡Œå®¢æˆ·ç«¯ç¨‹åºã€‚
- `-h localhost`: æŒ‡å®šè¦è¿æ¥çš„ Redis æœåŠ¡å™¨åœ°å€ä¸ºæœ¬åœ°æœºå™¨ (`localhost`)ã€‚
- `-p 6379`: æŒ‡å®šè¦è¿æ¥çš„ Redis æœåŠ¡å™¨ç«¯å£å·ä¸º `6379` (è¿™æ˜¯ Redis çš„é»˜è®¤ç«¯å£)ã€‚

### 2.Redisæ•°æ®ç±»å‹åŠç‰¹ç‚¹

#### 2.1æ•°æ®ç±»å‹

Rediså­˜å‚¨çš„æ˜¯key-valueç»“æ„çš„æ•°æ®ï¼Œå…¶ä¸­keyæ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œvalueæœ‰5ç§å¸¸ç”¨çš„æ•°æ®ç±»å‹ï¼š

- å­—ç¬¦ä¸² string
- å“ˆå¸Œ hash
- åˆ—è¡¨ list
- é›†åˆ set
- æœ‰åºé›†åˆ sorted set / zset

#### 2.2ç‰¹ç‚¹

![image-20250919163523810](../AppData/Roaming/Typora/typora-user-images/image-20250919163523810.png)

### 3.Rediså¸¸ç”¨å‘½ä»¤

#### 3.1ç®€ä»‹

**Rediså¸¸ç”¨å‘½ä»¤**

- å­—ç¬¦ä¸²æ“ä½œå‘½ä»¤  
- å“ˆå¸Œæ“ä½œå‘½ä»¤  
- åˆ—è¡¨æ“ä½œå‘½ä»¤  
- é›†åˆæ“ä½œå‘½ä»¤  
- æœ‰åºé›†åˆæ“ä½œå‘½ä»¤  
- é€šç”¨å‘½ä»¤  

#### 3.2å­—ç¬¦ä¸²å¸¸ç”¨å‘½ä»¤

```Redis
Redis å­—ç¬¦ä¸²ç±»å‹å¸¸ç”¨å‘½ä»¤ï¼š

- SET key value          è®¾ç½®æŒ‡å®škeyçš„å€¼
- GET key                è·å–æŒ‡å®škeyçš„å€¼
- SETEX key seconds value  è®¾ç½®æŒ‡å®škeyçš„å€¼ï¼Œå¹¶å°† key çš„è¿‡æœŸæ—¶é—´è®¾ä¸º seconds ç§’
- SETNX key value        åªæœ‰åœ¨ key ä¸å­˜åœ¨æ—¶è®¾ç½® key çš„å€¼
```

#### 3.3å“ˆå¸Œæ“ä½œå‘½ä»¤

```Redis
Redis hash æ˜¯ä¸€ä¸ªstringç±»å‹çš„ field å’Œ value çš„æ˜ å°„è¡¨ï¼Œhashç‰¹åˆ«é€‚åˆç”¨äºå­˜å‚¨å¯¹è±¡ï¼Œå¸¸ç”¨å‘½ä»¤ï¼š

- HSET key field value
  å°†å“ˆå¸Œè¡¨ key ä¸­çš„å­—æ®µ field çš„å€¼è®¾ä¸º value

- HGET key field
  è·å–å­˜å‚¨åœ¨å“ˆå¸Œè¡¨ä¸­æŒ‡å®šå­—æ®µçš„å€¼

- HDEL key field
  åˆ é™¤å­˜å‚¨åœ¨å“ˆå¸Œè¡¨ä¸­çš„æŒ‡å®šå­—æ®µ

- HKEYS key
  è·å–å“ˆå¸Œè¡¨ä¸­æ‰€æœ‰å­—æ®µ

- HVALS key
  è·å–å“ˆå¸Œè¡¨ä¸­æ‰€æœ‰å€¼
```

#### 3.4åˆ—è¡¨æ“ä½œå‘½ä»¤

**å¤´æ’æ³•**

![image-20250919171722642](../AppData/Roaming/Typora/typora-user-images/image-20250919171722642.png)

```Redis
Redis åˆ—è¡¨æ˜¯ç®€å•çš„å­—ç¬¦ä¸²åˆ—è¡¨ï¼ŒæŒ‰ç…§æ’å…¥é¡ºåºæ’åºï¼Œå¸¸ç”¨å‘½ä»¤ï¼š

- LPUSH key value1 [value2]
  å°†ä¸€ä¸ªæˆ–å¤šä¸ªå€¼æ’å…¥åˆ°åˆ—è¡¨å¤´éƒ¨

- LRANGE key start stop
  è·å–åˆ—è¡¨æŒ‡å®šèŒƒå›´å†…çš„å…ƒç´ 

- RPOP key
  ç§»é™¤å¹¶è·å–åˆ—è¡¨æœ€åä¸€ä¸ªå…ƒç´ 

- LLEN key
  è·å–åˆ—è¡¨é•¿åº¦
```

#### **3.5é›†åˆæ“ä½œå‘½ä»¤**

Redis Set æ˜¯ string ç±»å‹çš„æ— åºé›†åˆã€‚é›†åˆæˆå‘˜æ˜¯å”¯ä¸€çš„ï¼Œè¿™æ„å‘³ç€é›†åˆä¸­ä¸èƒ½å‡ºç°é‡å¤çš„æ•°æ®ã€‚

å…¶å¸¸ç”¨å‘½ä»¤åŒ…æ‹¬ï¼š

```Redis
- **SADD key member1 [member2]**
  å‘é›†åˆ (key) ä¸­æ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªæˆå‘˜ã€‚
- **SMEMBERS key**
  è¿”å›é›†åˆ (key) ä¸­çš„æ‰€æœ‰æˆå‘˜ã€‚
- **SCARD key**
  è·å–é›†åˆ (key) çš„æˆå‘˜æ•°é‡ã€‚
- **SINTER key1 [key2]**
  è¿”å›ç»™å®šæ‰€æœ‰é›†åˆçš„äº¤é›†ã€‚
- **SUNION key1 [key2]**
  è¿”å›æ‰€æœ‰ç»™å®šé›†åˆçš„å¹¶é›†ã€‚
- **SREM key member1 [member2]**
  ç§»é™¤å¹¶åˆ é™¤é›†åˆ (key) ä¸­ä¸€ä¸ªæˆ–å¤šä¸ªæˆå‘˜ã€‚
```

#### 3.6æœ‰åºé›†åˆæ“ä½œå‘½ä»¤

Redis çš„æœ‰åºé›†åˆæ˜¯ç”±å­—ç¬¦ä¸²å…ƒç´ ç»„æˆçš„é›†åˆï¼Œ**ä¸å…è®¸é‡å¤æˆå‘˜**ï¼Œæ¯ä¸ªå…ƒç´ éƒ½å…³è”ä¸€ä¸ª `double` ç±»å‹çš„åˆ†æ•°ï¼ˆscoreï¼‰ã€‚å¸¸ç”¨å‘½ä»¤å¦‚ä¸‹ï¼š

| å‘½ä»¤        | è¯­æ³•                                           | è¯´æ˜                                                         |
| :---------- | :--------------------------------------------- | :----------------------------------------------------------- |
| **ZADD**    | `ZADD key score1 member1 [score2 member2 ...]` | å‘æœ‰åºé›†åˆä¸­æ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªæˆå‘˜ï¼ˆæˆ–æ›´æ–°å·²å­˜åœ¨æˆå‘˜çš„åˆ†æ•°ï¼‰     |
| **ZRANGE**  | `ZRANGE key start stop [WITHSCORES]`           | é€šè¿‡ç´¢å¼•åŒºé—´è¿”å›æœ‰åºé›†åˆä¸­æŒ‡å®šåŒºé—´å†…çš„æˆå‘˜ï¼ˆå¯é€‰æ˜¯å¦è¿”å›åˆ†æ•°ï¼‰ |
| **ZINCRBY** | `ZINCRBY key increment member`                 | å¯¹æœ‰åºé›†åˆä¸­æŒ‡å®šæˆå‘˜çš„åˆ†æ•°åŠ ä¸Šå¢é‡ `increment`               |
| **ZREM**    | `ZREM key member [member ...]`                 | ç§»é™¤æœ‰åºé›†åˆä¸­çš„ä¸€ä¸ªæˆ–å¤šä¸ªæˆå‘˜                               |

#### 3.7é€šç”¨æ“ä½œå‘½ä»¤

è¿™äº›å‘½ä»¤é€‚ç”¨äºæ‰€æœ‰ Redis æ•°æ®ç±»å‹ï¼Œæ˜¯é€šç”¨çš„é”®ï¼ˆkeyï¼‰ç®¡ç†å‘½ä»¤ï¼š

| å‘½ä»¤       | è¯­æ³•           | è¯´æ˜                                    |
| :--------- | :------------- | :-------------------------------------- |
| **KEYS**   | `KEYS pattern` | æŸ¥æ‰¾æ‰€æœ‰ç¬¦åˆç»™å®šæ¨¡å¼ (`pattern`) çš„ key |
| **EXISTS** | `EXISTS key`   | æ£€æŸ¥ç»™å®šçš„ key æ˜¯å¦å­˜åœ¨                 |
| **TYPE**   | `TYPE key`     | è¿”å› key æ‰€å‚¨å­˜çš„å€¼çš„ç±»å‹               |
| **DEL**    | `DEL key`      | åœ¨ key å­˜åœ¨æ—¶åˆ é™¤ key                   |

### 4.Redisåœ¨Java

#### 4.1é…ç½®

![image-20250920114354181](../AppData/Roaming/Typora/typora-user-images/image-20250920114354181.png)

![image-20250920114521332](../AppData/Roaming/Typora/typora-user-images/image-20250920114521332.png)

#### 4.2åˆ›å»ºRedisTemplateå¯¹è±¡

```java
@Configuration
@Slf4j
public class RedisConfiguration {
    @Bean
    public RedisTemplate redisTemplate(RedisConnectionFactory redisConnectionFactory){
        log.info("å¼€å§‹åˆ›å»ºRedisæ¨¡æ¿å¯¹è±¡");
        RedisTemplate redisTemplate = new RedisTemplate();
        //è®¾ç½®redisçš„è¿æ¥å·¥å‚å¯¹è±¡
        redisTemplate.setConnectionFactory(redisConnectionFactory);
        //è®¾ç½®redisçš„keyçš„åºåˆ—åŒ–å™¨
        redisTemplate.setKeySerializer(new StringRedisSerializer());
        return redisTemplate;
    }
}
```

#### 4.3å¸¸ç”¨å‘½ä»¤

##### 4.3.1 Stringï¼ˆå­—ç¬¦ä¸²ï¼‰ç±»å‹æ“ä½œæ€»ç»“

**Stringï¼ˆå­—ç¬¦ä¸²ï¼‰ç±»å‹æ“ä½œæ€»ç»“ (testString æ–¹æ³•)**

| æ“ä½œ                             | ä»£ç ç¤ºä¾‹                                                     | è¯´æ˜                                                         |
| :------------------------------- | :----------------------------------------------------------- | :----------------------------------------------------------- |
| **è®¾ç½®å€¼**                       | `redisTemplate.opsForValue().set("name", "å¼ ä¸‰");`           | è®¾ç½®ä¸€ä¸ªé”®å€¼å¯¹ã€‚                                             |
| **è·å–å€¼**                       | `String name = (String) redisTemplate.opsForValue().get("name");` | æ ¹æ®é”®è·å–å¯¹åº”çš„å€¼ã€‚                                         |
| **è®¾ç½®å€¼ï¼ˆå«è¿‡æœŸæ—¶é—´ï¼‰**         | `set("code", "123456", 30, TimeUnit.SECONDS);`               | è®¾ç½®ä¸€ä¸ªé”®å€¼å¯¹ï¼Œå¹¶æŒ‡å®šå…¶å­˜æ´»æ—¶é—´ä¸º 30 ç§’ã€‚`TimeUnit` æ˜¯æ—¶é—´å•ä½æšä¸¾ï¼ˆç§’ã€åˆ†ã€æ—¶ç­‰ï¼‰ã€‚ |
| **æ¡ä»¶è®¾ç½® (SET if not exists)** | `setIfAbsent("lock", "1")`                                   | **åˆ†å¸ƒå¼é”çš„åŸºç¡€å®ç°**ã€‚å¦‚æœé”® `lock` ä¸å­˜åœ¨ï¼Œåˆ™è®¾ç½®å…¶å€¼ä¸º `1` å¹¶è¿”å› `true`ï¼›å¦‚æœå·²å­˜åœ¨ï¼Œåˆ™ä¸è¿›è¡Œä»»ä½•æ“ä½œå¹¶è¿”å› `false`ã€‚ä»£ç ä¸­ç¬¬äºŒæ¬¡è®¾ç½®ä¼šå¤±è´¥ã€‚ |

**String ç±»å‹ç‰¹ç‚¹**ï¼šä¸€ä¸ª Key å¯¹åº”ä¸€ä¸ªç®€å•çš„ Valueï¼Œæ˜¯ Redis ä¸­æœ€åŸºç¡€çš„æ•°æ®ç»“æ„ã€‚



##### 4.3.2 Hashï¼ˆå“ˆå¸Œ/å­—å…¸ï¼‰ç±»å‹æ“ä½œæ€»ç»“ (testHash æ–¹æ³•)

Hash ç±»ä¼¼äº Java ä¸­çš„ `Map<String, Object>`ï¼Œå®ƒé€‚åˆå­˜å‚¨å¯¹è±¡ã€‚

| æ“ä½œ               | ä»£ç ç¤ºä¾‹                                     | è¯´æ˜                                                         |
| :----------------- | :------------------------------------------- | :----------------------------------------------------------- |
| **æ·»åŠ /ä¿®æ”¹å­—æ®µ**  | `hashOperations.put("100", "name", "å¼ ä¸‰");` | å‘é”®ä¸º `100` çš„ Hash ç»“æ„ä¸­æ·»åŠ ä¸€ä¸ªå­—æ®µ `name`ï¼Œå€¼ä¸º `å¼ ä¸‰`ã€‚å¦‚æœå­—æ®µå·²å­˜åœ¨ï¼Œåˆ™æ›´æ–°å…¶å€¼ã€‚ |
| **è·å–å­—æ®µå€¼**     | `hashOperations.get("100", "name");`         | è·å–é”® `100` çš„ Hash ç»“æ„ä¸­å­—æ®µ `name` å¯¹åº”çš„å€¼ã€‚            |
| **è·å–æ‰€æœ‰å­—æ®µå** | `hashOperations.keys("100");`                | è·å–é”® `100` çš„ Hash ç»“æ„ä¸­æ‰€æœ‰çš„å­—æ®µåï¼ˆfieldï¼‰ã€‚è¿”å›ä¸€ä¸ª `Set`ã€‚ |
| **è·å–æ‰€æœ‰å­—æ®µå€¼** | `hashOperations.values("100");`              | è·å–é”® `100` çš„ Hash ç»“æ„ä¸­æ‰€æœ‰çš„å€¼ï¼ˆvalueï¼‰ã€‚è¿”å›ä¸€ä¸ª `List`ã€‚ |
| **åˆ é™¤å­—æ®µ**       | `hashOperations.delete("100", "age");`       | åˆ é™¤é”® `100` çš„ Hash ç»“æ„ä¸­çš„ä¸€ä¸ªæˆ–å¤šä¸ªå­—æ®µï¼ˆè¿™é‡Œæ˜¯ `age`ï¼‰ã€‚ |

**Hash ç±»å‹ç‰¹ç‚¹**ï¼šä¸€ä¸ª Key å¯¹åº”ä¸€ä¸ª Field-Value çš„æ˜ å°„è¡¨ï¼Œéå¸¸é€‚åˆå­˜å‚¨å¯¹è±¡ï¼ˆå¦‚ç”¨æˆ·ä¿¡æ¯ã€å•†å“ä¿¡æ¯ï¼‰ã€‚



##### 4.3.3 Listï¼ˆåˆ—è¡¨ï¼‰ç±»å‹æ“ä½œæ€»ç»“ (`testList` æ–¹æ³•)

List æ˜¯ä¸€ä¸ªåŒå‘é“¾è¡¨ï¼Œå…ƒç´ æœ‰åºä¸”å¯é‡å¤ã€‚å¸¸ç”¨äºæ¶ˆæ¯é˜Ÿåˆ—ã€æœ€æ–°åˆ—è¡¨ç­‰åœºæ™¯ã€‚

| æ“ä½œ           | ä»£ç ç¤ºä¾‹                             | å¯¹åº” Redis å‘½ä»¤      | è¯´æ˜                                                         |
| :------------- | :----------------------------------- | :------------------- | :----------------------------------------------------------- |
| **æ‰¹é‡å·¦æ¨å…¥** | `leftPushAll("mylist", "a","b","c")` | `LPUSH mylist a b c` | å°†ä¸€ä¸ªæˆ–å¤šä¸ªå€¼**ä»å·¦ç«¯**ï¼ˆå¤´éƒ¨ï¼‰æ’å…¥åˆ—è¡¨ã€‚ç»“æœæ˜¯ `c, b, a`ã€‚ |
| **å·¦æ¨å…¥**     | `leftPush("mylist", "d")`            | `LPUSH mylist d`     | å°†å•ä¸ªå€¼ä»å·¦ç«¯æ’å…¥åˆ—è¡¨ã€‚ç»“æœæ˜¯ `d, c, b, a`ã€‚                |
| **è·å–èŒƒå›´**   | `range("mylist", 0, -1)`             | `LRANGE mylist 0 -1` | è·å–åˆ—è¡¨ä¸­æŒ‡å®šèŒƒå›´çš„å…ƒç´ ã€‚`0` èµ·å§‹ç´¢å¼•ï¼Œ`-1` è¡¨ç¤ºç›´åˆ°æœ«å°¾ã€‚  |
| **å³å¼¹å‡º**     | `rightPop("mylist")`                 | `RPOP mylist`        | **ç§»é™¤å¹¶è¿”å›**åˆ—è¡¨**å³ç«¯**ï¼ˆå°¾éƒ¨ï¼‰çš„å…ƒç´ ã€‚è¿™æ˜¯å®ç°é˜Ÿåˆ—çš„å…³é”®ï¼ˆFIFOï¼‰ã€‚ |
| **è·å–é•¿åº¦**   | `size("mylist")`                     | `LLEN mylist`        | è·å–åˆ—è¡¨çš„é•¿åº¦ï¼ˆå…ƒç´ ä¸ªæ•°ï¼‰ã€‚                                 |

**List ç±»å‹ç‰¹ç‚¹**ï¼šæœ‰åºã€å¯é‡å¤ï¼Œæ”¯æŒä»ä¸¤ç«¯æ“ä½œã€‚å·¦æ¨å³å¼¹æ˜¯æ ˆï¼ˆLIFOï¼‰ï¼Œå·¦æ¨å·¦å¼¹/å³æ¨å³å¼¹æ˜¯é˜Ÿåˆ—ï¼ˆFIFOï¼‰ã€‚



##### 4.3.4 Setï¼ˆé›†åˆï¼‰ç±»å‹æ“ä½œæ€»ç»“ (`testSet` æ–¹æ³•)

Set æ˜¯æ— åºçš„å­—ç¬¦ä¸²é›†åˆï¼Œå…ƒç´ ä¸å¯é‡å¤ï¼Œæ”¯æŒé«˜æ•ˆçš„é›†åˆè¿ç®—ã€‚å¸¸ç”¨äºæ ‡ç­¾ã€å…±åŒå¥½å‹ã€æŠ½å¥–ç­‰åœºæ™¯ã€‚

| æ“ä½œ             | ä»£ç ç¤ºä¾‹                       | å¯¹åº” Redis å‘½ä»¤     | è¯´æ˜                                   |
| :--------------- | :----------------------------- | :------------------ | :------------------------------------- |
| **æ·»åŠ å…ƒç´ **     | `add("set1", "a","b","c","d")` | `SADD set1 a b c d` | å‘é›†åˆä¸­æ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªæˆå‘˜ï¼Œè‡ªåŠ¨å»é‡ã€‚ |
| **è·å–æ‰€æœ‰å…ƒç´ ** | `members("set1")`              | `SMEMBERS set1`     | è¿”å›é›†åˆä¸­çš„æ‰€æœ‰æˆå‘˜ã€‚**æ³¨æ„ï¼šæ— åº**ã€‚ |
| **è·å–å…ƒç´ ä¸ªæ•°** | `size("set1")`                 | `SCARD set1`        | è¿”å›é›†åˆçš„åŸºæ•°ï¼ˆå…ƒç´ æ•°é‡ï¼‰ã€‚           |
| **æ±‚äº¤é›†**       | `intersect("set1", "set2")`    | `SINTER set1 set2`  | è¿”å›ä¸¤ä¸ªé›†åˆçš„äº¤é›†ï¼ˆå…±æœ‰çš„å…ƒç´ ï¼‰ã€‚     |
| **æ±‚å¹¶é›†**       | `union("set1", "set2")`        | `SUNION set1 set2`  | è¿”å›ä¸¤ä¸ªé›†åˆçš„å¹¶é›†ï¼ˆæ‰€æœ‰çš„å…ƒç´ ï¼‰ã€‚     |
| **ç§»é™¤å…ƒç´ **     | `remove("set1", "a","b")`      | `SREM set1 a b`     | ç§»é™¤é›†åˆä¸­ä¸€ä¸ªæˆ–å¤šä¸ªæˆå‘˜ã€‚             |

**Set ç±»å‹ç‰¹ç‚¹**ï¼šæ— åºã€å”¯ä¸€ï¼Œæä¾›å¼ºå¤§çš„é›†åˆè¿ç®—èƒ½åŠ›ã€‚



##### 4.3.5 ZSetï¼ˆæœ‰åºé›†åˆï¼‰ç±»å‹æ“ä½œæ€»ç»“ (`testZset` æ–¹æ³•)

ZSet ä¸ Set ç±»ä¼¼ï¼Œä½†æ¯ä¸ªå…ƒç´ éƒ½ä¼šå…³è”ä¸€ä¸ª `score`ï¼ˆåˆ†æ•°ï¼‰ï¼Œç”¨äºæ’åºã€‚å…ƒç´ å”¯ä¸€ï¼Œä½† `score` å¯ä»¥é‡å¤ã€‚é€‚ç”¨äºæ’è¡Œæ¦œã€å¸¦æƒé‡çš„é˜Ÿåˆ—ç­‰åœºæ™¯ã€‚

| æ“ä½œ               | ä»£ç ç¤ºä¾‹                           | å¯¹åº” Redis å‘½ä»¤      | è¯´æ˜                                                         |
| :----------------- | :--------------------------------- | :------------------- | :----------------------------------------------------------- |
| **æ·»åŠ å…ƒç´ **       | `add("zset1", "a", 10)`            | `ZADD zset1 10 a`    | å‘æœ‰åºé›†åˆä¸­æ·»åŠ ä¸€ä¸ªæˆå‘˜åŠå…¶åˆ†æ•°ã€‚                           |
| **æŒ‰ç´¢å¼•èŒƒå›´è·å–** | `range("zset1", 0, -1)`            | `ZRANGE zset1 0 -1`  | æŒ‰åˆ†æ•°**ä»å°åˆ°å¤§**çš„é¡ºåºè¿”å›ç´¢å¼•èŒƒå›´å†…çš„æˆå‘˜ï¼ˆ**ä¸åŒ…å«åˆ†æ•°**ï¼‰ã€‚`ZREVRANGE` ä¸ºä»å¤§åˆ°å°ã€‚ |
| **å¢åŠ åˆ†æ•°**       | `incrementScore("zset1", "c", 10)` | `ZINCRBY zset1 10 c` | ä¸ºæŒ‡å®šæˆå‘˜çš„åˆ†æ•°å¢åŠ å¢é‡ `delta`ã€‚æ˜¯å®ç°æ’è¡Œæ¦œè®¡æ•°æ›´æ–°çš„æ ¸å¿ƒæ“ä½œã€‚ |
| **ç§»é™¤å…ƒç´ **       | `remove("zset1", "a","b")`         | `ZREM zset1 a b`     | ç§»é™¤æœ‰åºé›†åˆä¸­çš„ä¸€ä¸ªæˆ–å¤šä¸ªæˆå‘˜ã€‚                             |

**ZSet ç±»å‹ç‰¹ç‚¹**ï¼šå”¯ä¸€ã€æœ‰åºï¼ˆé€šè¿‡åˆ†æ•°æ’åºï¼‰ï¼Œæ˜¯å®ç°æ’è¡Œæ¦œç­‰åŠŸèƒ½çš„é¦–é€‰æ•°æ®ç»“æ„ã€‚



##### 4.3.6 é€šç”¨é”®æ“ä½œæ€»ç»“ (`testCommon` æ–¹æ³•)

è¿™äº›å‘½ä»¤ä¸é’ˆå¯¹ç‰¹å®šæ•°æ®ç±»å‹ï¼Œè€Œæ˜¯ç”¨äºç®¡ç†æ‰€æœ‰çš„é”®ã€‚

| æ“ä½œ               | ä»£ç ç¤ºä¾‹           | å¯¹åº” Redis å‘½ä»¤ | è¯´æ˜                                                         |
| :----------------- | :----------------- | :-------------- | :----------------------------------------------------------- |
| **æ¨¡å¼åŒ¹é…æŸ¥è¯¢é”®** | `keys("*")`        | `KEYS *`        | **è°¨æ…ä½¿ç”¨ï¼** è¿”å›åŒ¹é…ç»™å®šæ¨¡å¼çš„æ‰€æœ‰é”®ã€‚`*` é€šé…æ‰€æœ‰ã€‚åœ¨ç”Ÿäº§ç¯å¢ƒä¸­å¯èƒ½é˜»å¡æœåŠ¡ã€‚ |
| **åˆ¤æ–­é”®æ˜¯å¦å­˜åœ¨** | `hasKey("name")`   | `EXISTS name`   | æ£€æŸ¥æŒ‡å®šé”®æ˜¯å¦å­˜åœ¨ã€‚è¿”å›å¸ƒå°”å€¼ã€‚                             |
| **è·å–é”®çš„ç±»å‹**   | `type(key)`        | `TYPE key`      | è¿”å›é”®æ‰€å­˜å‚¨çš„å€¼çš„ç±»å‹ï¼ˆstring, list, hash, set, zsetï¼‰ã€‚    |
| **åˆ é™¤é”®**         | `delete("mylist")` | `DEL mylist`    | åˆ é™¤ä¸€ä¸ªæˆ–å¤šä¸ªæŒ‡å®šçš„é”®åŠå…¶å¯¹åº”çš„å€¼ã€‚                         |



## Spring Cache

### 1.åŸºç¡€

#### 1.1ç®€ä»‹

![image-20250925222406317](../AppData/Roaming/Typora/typora-user-images/image-20250925222406317.png)

#### 1.1è¯­æ³•

##### 1.@CachePut

**é‡ç‚¹**

å¦‚æœç¼“å­˜ä¸­å·²ç»æœ‰æ•°æ®ï¼Œ**`@CachePut`** **ä¸ä¼š** ç›´æ¥è¿”å›é‚£ä¸ªæ—§çš„ç¼“å­˜å€¼ã€‚

**`@CachePut` çš„å·¥ä½œåŸç†**

`@CachePut` çš„è®¾è®¡ç›®çš„æ˜¯**æ›´æ–°**ç¼“å­˜ï¼Œè€Œä¸æ˜¯ä»ç¼“å­˜ä¸­è¯»å–æ•°æ®ã€‚å®ƒçš„æ­¥éª¤æ€»æ˜¯å¦‚ä¸‹ï¼š

1. å®ƒ**æ€»æ˜¯ä¼šå…ˆæ‰§è¡Œ**ç›®æ ‡æ–¹æ³•ã€‚
2. å®ƒè·å–è¯¥æ–¹æ³•æ‰§è¡Œåçš„**è¿”å›å€¼**ï¼ˆå³æœ€æ–°çš„æ•°æ®ï¼‰ã€‚
3. ç„¶åï¼Œå®ƒä½¿ç”¨è¿™ä¸ªæ–°çš„è¿”å›å€¼ï¼Œæ ¹æ®æŒ‡å®šçš„ `cacheNames` å’Œ `key` æ¥**æ›´æ–°**ç¼“å­˜ã€‚

```java
//@CachePut(cacheNames = "userCache",key = "#user.id")  //å¦‚æœä½¿ç”¨SpringCacheç¼“å­˜æ•°æ®ï¼Œkeyçš„ç”Ÿæˆï¼ŒuserCache::2
//@CachePut(cacheNames = "userCache",key = "#result.id") //%R FM

//@CachePut(cacheNames = "userCache", key="p0.id")
//@CachePut(cacheNames = "userCache", key="a0.id")
public User save(@RequestBody User user){
    userMapper.insert(user);
    return user;
}
```

##### 2.Cacheable

å®ƒçš„å·¥ä½œæµç¨‹æ˜¯ï¼š

1. **æŸ¥è¯¢ç¼“å­˜ï¼š** å½“å¸¦æœ‰ `@Cacheable` æ³¨è§£çš„æ–¹æ³•è¢«è°ƒç”¨æ—¶ï¼Œå®ƒä¼šæ ¹æ®æŒ‡å®šçš„ `cacheNames` å’Œ `key`ï¼Œå…ˆå»ç¼“å­˜ä¸­æŸ¥æ‰¾æ˜¯å¦å­˜åœ¨å¯¹åº”çš„å€¼ã€‚
2. **å‘½ä¸­ï¼ˆHitï¼‰- è¿”å›ç¼“å­˜å€¼ï¼š** å¦‚æœæ‰¾åˆ°äº†ï¼Œç¼“å­˜ç®¡ç†å™¨ä¼š**ç›´æ¥è¿”å›**è¿™ä¸ªç¼“å­˜å€¼ï¼Œ**æ–¹æ³•ä½“å†…çš„ä»£ç ï¼ˆæ¯”å¦‚æŸ¥è¯¢æ•°æ®åº“çš„ä»£ç ï¼‰å°†ä¸ä¼šè¢«æ‰§è¡Œ**ã€‚
3. **æœªå‘½ä¸­ï¼ˆMissï¼‰- æ‰§è¡Œæ–¹æ³•ï¼š** å¦‚æœç¼“å­˜ä¸­æ²¡æœ‰æ‰¾åˆ°ï¼Œæ–¹æ³•ä½“å†…çš„ä»£ç ï¼ˆé€šå¸¸æ˜¯æŸ¥è¯¢æ•°æ®åº“æˆ–è¿›è¡Œå¤æ‚è®¡ç®—çš„ä»£ç ï¼‰ä¼šè¢«**æ­£å¸¸æ‰§è¡Œ**ã€‚
4. **å­˜å…¥ç¼“å­˜ï¼š** æ–¹æ³•æ‰§è¡Œå®Œæ¯•åï¼ŒSpring ä¼šå°†æ–¹æ³•çš„**è¿”å›å€¼**å­˜å…¥ç¼“å­˜ä¸­ï¼Œä»¥ä¾¿ä¸‹æ¬¡ä½¿ç”¨ã€‚

```java
@Cacheable(cacheNames = "userCache", key = "#id")
public User getById(Long id){
    User user = userMapper.getById(id);
    return user;
}
```

##### 3.@CacheEvict

**æŒ‰ ID åˆ é™¤ï¼ˆæ¸…é™¤å•ä¸ªç¼“å­˜é¡¹ï¼‰**

è¿™ä¸ªæ–¹æ³•ç”¨äºæ ¹æ®ç”¨æˆ· ID åˆ é™¤å•ä¸ªç”¨æˆ·ï¼Œå¹¶æ¸…é™¤ç¼“å­˜ä¸­å¯¹åº”é”®å€¼çš„æ¡ç›®ã€‚

```java
@DeleteMapping
@CacheEvict(cacheNames = "userCache", key = "#id") // keyçš„ç”Ÿæˆ: userCache::10 (å‡è®¾id=10)
public void deleteById(Long id){
    userMapper.deleteById(id);
}
```



**åˆ é™¤å…¨éƒ¨ï¼ˆæ¸…é™¤æ•´ä¸ªç¼“å­˜ï¼‰**

è¿™ä¸ªæ–¹æ³•ç”¨äºåˆ é™¤æ‰€æœ‰ç”¨æˆ·ï¼Œå¹¶é€šè¿‡è®¾ç½® `allEntries = true` æ¸…é™¤æ•´ä¸ªç¼“å­˜ç©ºé—´ï¼ˆ`"userCache"`ï¼‰ä¸­çš„æ‰€æœ‰æ•°æ®ã€‚

```java
@DeleteMapping("/delAll")
@CacheEvict(cacheNames = "userCache", allEntries = true)
public void deleteAll(){
    userMapper.deleteAll();
}
```







## é¡¹ç›®

### 1.HttpClient

#### 1.1ç®€ä»‹

![image-20250921112655181](../AppData/Roaming/Typora/typora-user-images/image-20250921112655181.png)

#### 1.2å…¥é—¨è¯­æ³•

**GetåŸºæœ¬æ–¹æ³•**

```java
@Test
public void testGET() throws Exception {
    // åˆ›å»ºhttpclientå¯¹è±¡
    CloseableHttpClient httpClient = HttpClients.createDefault();
    // åˆ›å»ºè¯·æ±‚å¯¹è±¡
    HttpGet httpGet = new HttpGet("http://localhost:8080/user/shop/status");
    // å‘é€è¯·æ±‚ï¼Œæ¥å—å“åº”ç»“æœ
    CloseableHttpResponse response = httpClient.execute(httpGet);
    // è·å–æœåŠ¡ç«¯è¿”å›çš„çŠ¶æ€ç 
    int statusCode = response.getStatusLine().getStatusCode();
    System.out.println("æœåŠ¡ç«¯è¿”å›çš„çŠ¶æ€ç ä¸ºï¼š" + statusCode);
    HttpEntity entity = response.getEntity();
    String body = EntityUtils.toString(entity);
    System.out.println("æœåŠ¡ç«¯è¿”å›çš„æ•°æ®ä¸ºï¼š" + body);
    // å…³é—­èµ„æº
    response.close();
    httpClient.close();
}
```





**PoståŸºæœ¬æ–¹æ³•**

```java
@Test
public void testPOST() throws Exception {
    // åˆ›å»ºhttpclientå¯¹è±¡
    CloseableHttpClient httpClient = HttpClients.createDefault();
    // åˆ›å»ºè¯·æ±‚å¯¹è±¡
    HttpPost httpPost = new HttpPost("http://localhost:8080/admin/employee/login");
    
    JSONObject jsonObject = new JSONObject();
    jsonObject.put("username", "admin");
    jsonObject.put("password", "123456");
    
    StringEntity entity = new StringEntity(jsonObject.toString());
    // æŒ‡å®šè¯·æ±‚ç¼–ç æ–¹å¼
    entity.setContentEncoding("utf-8");
    // æ•°æ®æ ¼å¼
    entity.setContentType("application/json");
    httpPost.setEntity(entity);
    
    // å‘é€è¯·æ±‚
    CloseableHttpResponse response = httpClient.execute(httpPost);
    
    // è§£æè¿”å›ç»“æœ
    int statusCode = response.getStatusLine().getStatusCode();
    System.out.println("å“åº”ç ä¸ºï¼š" + statusCode);
    
    HttpEntity entity1 = response.getEntity();
    String body = EntityUtils.toString(entity1);
    System.out.println("å“åº”æ•°æ®ä¸ºï¼š" + body);
    
    //å…³é—­èµ„æº
    response.close();
    httpClient.close();
}
```



### 2.å¾®ä¿¡å°ç¨‹åº

#### 2.1ç®€ä»‹

![image-20250921221921042](../AppData/Roaming/Typora/typora-user-images/image-20250921221921042.png)

#### 2.2å¾®ä¿¡æ”¯ä»˜

![image-20250928225713503](../AppData/Roaming/Typora/typora-user-images/image-20250928225713503.png)

![image-20250928225848563](../AppData/Roaming/Typora/typora-user-images/image-20250928225848563.png)



### 3.Spring Task

#### 1.åŸºç¡€

##### 1.1ç®€ä»‹

![image-20250930221151229](../AppData/Roaming/Typora/typora-user-images/image-20250930221151229.png)

##### 1.2 cronè¡¨è¾¾å¼

https://qqe2.com/dev/createreg

![image-20250930221922865](../AppData/Roaming/Typora/typora-user-images/image-20250930221922865.png)

### 4.WebSocket

#### 1.åŸºç¡€

##### 1.1ç®€ä»‹

![image-20251001105317167](../AppData/Roaming/Typora/typora-user-images/image-20251001105317167.png)



### 5. Apache POI

#### 5.1 åŸºç¡€

##### ç®€ä»‹

![image-20251002130353592](../AppData/Roaming/Typora/typora-user-images/image-20251002130353592.png)

![image-20251002130529893](../AppData/Roaming/Typora/typora-user-images/image-20251002130529893.png)

##### æ“ä½œæ–¹æ³•

###### å†™å…¥

![image-20251002131419150](../AppData/Roaming/Typora/typora-user-images/image-20251002131419150.png)

![image-20251002131513237](../AppData/Roaming/Typora/typora-user-images/image-20251002131513237.png)

###### è¯»å–

![image-20251002132345776](../AppData/Roaming/Typora/typora-user-images/image-20251002132345776.png)









# è‡ªå·±é¡¹ç›®

## AIServer

### 1.é¡¹ç›®å¯åŠ¨

```json
//http://localhost:8080/user/ques/newGetQues
//http://localhost:8080/user/login
http://localhost:8000/model/get_result



// å¯åŠ¨ï¼š  uvicorn RunAPP:app --reload

{

  "userId":1,

  "talkId":1,

  "question":"æˆ‘å››è‚¢æŠ½æè¿™æ˜¯ä»€ä¹ˆç–¾ç—…ï¼Ÿ"

}
----------------------------------------------------------------
{

 	"question":"æˆ‘è¿˜å£åç™½æ²«è¿™æ˜¯ä»€ä¹ˆç–¾ç—…ï¼Ÿ",

 	"round": 2,

  	"all_info":""

}
----------------------------------------------------------------
{

	"name":"darkside",

	"password":"123456"

}


{
    "result": "\nè¿™æ˜¯ç»¼åˆè¯Šç–—ç»“æœï¼š\næ ¹æ®æ‚¨æä¾›çš„åŒ»ç–—å†å²ä¿¡æ¯â€œæˆ‘å£åç™½æ²«â€ï¼Œæˆ‘å°†ä¸“æ³¨äºè¿™ä¸€ç—‡çŠ¶è¿›è¡Œåˆ†æã€‚å£åç™½æ²«é€šå¸¸æ˜¯ç™«ç—«å‘ä½œï¼ˆç‰¹åˆ«æ˜¯å¼ºç›´-é˜µæŒ›å‘ä½œï¼‰çš„å…¸å‹è¡¨ç°ï¼Œä½†ä¹Ÿå¯èƒ½ä¸å…¶ä»–ç–¾ç—…ç›¸å…³ã€‚ä»¥ä¸‹æˆ‘å°†åŸºäºæ‚¨çš„æè¿°ã€å‚è€ƒå­é—®é¢˜ï¼ˆå¦‚ç™«ç—«çš„æ½œåœ¨ç—…å› ã€è¯Šæ–­æµ‹è¯•å’Œå³æ—¶ç®¡ç†ï¼‰ä»¥åŠæœç´¢ç»“æœçš„æ‘˜è¦ï¼Œæä¾›å‡ ç§å¯èƒ½çš„è¯Šæ–­è€ƒè™‘ã€‚è¯·æ³¨æ„ï¼Œè¿™äº›ä»…æ˜¯åˆæ­¥æ¨æµ‹ï¼Œå¹¶éæœ€ç»ˆè¯Šæ–­ï¼Œå®é™…è¯Šæ–­éœ€ç”±åŒ»ç”Ÿé€šè¿‡è¯¦ç»†è¯„ä¼°ç¡®å®šã€‚å¦‚æœä¿¡æ¯ä¸è¶³ï¼Œæˆ‘å°†åœ¨æœ€ååˆç†è¯¢é—®æ›´å¤šç»†èŠ‚ã€‚\n\n### ç»¼åˆè¯Šæ–­è€ƒè™‘\nå£åç™½æ²«å¯èƒ½æ¶‰åŠå¤šç§ç–¾ç—…ï¼Œä»¥ä¸‹åˆ—å‡ºå‡ ç§æœ€å¸¸è§å’Œç›¸å…³çš„å¯èƒ½æ€§ï¼ŒåŸºäºä¸€èˆ¬åŒ»å­¦çŸ¥è¯†å’Œæœç´¢ç»“æœä¸­æåˆ°çš„ç¥ç»ç§‘ç´§æ€¥æƒ…å†µï¼ˆå¦‚ä¸­é£ç›¸å…³æœºåˆ¶ï¼‰ï¼š\n1. **ç™«ç—«å‘ä½œ**ï¼šè¿™æ˜¯å£åç™½æ²«çš„æœ€å¸¸è§åŸå› ï¼Œå°¤å…¶æ˜¯å…¨èº«æ€§å¼ºç›´-é˜µæŒ›å‘ä½œã€‚ç™«ç—«å¯èƒ½ç”±ç‰¹å‘æ€§ï¼ˆåŸå› ä¸æ˜ï¼‰æˆ–ç»§å‘æ€§å› ç´ å¼•èµ·ï¼Œå¦‚è„‘éƒ¨ç»“æ„å¼‚å¸¸ã€ä»£è°¢ç´Šä¹±æˆ–ä¸­æ¯’ã€‚\n2. **ä¸­é£ï¼ˆè„‘å’ä¸­ï¼‰**ï¼šæœç´¢ç»“æœå¼ºè°ƒä¸­é£ï¼ˆå¦‚ç—‡çŠ¶æ€§é¢…å†…åŠ¨è„‰ç²¥æ ·ç¡¬åŒ–ï¼Œs-ICASï¼‰å¯èƒ½å¯¼è‡´ç™«ç—«å‘ä½œä½œä¸ºå¹¶å‘ç—‡ã€‚ä¸­é£å¯é€šè¿‡è„‘ç¼ºè¡€æˆ–å‡ºè¡€å¼•å‘ç¥ç»ç—‡çŠ¶ï¼ŒåŒ…æ‹¬å£åç™½æ²«ã€‚\n3. **ä¸­æ¯’æˆ–ä»£è°¢ç´Šä¹±**ï¼šä¾‹å¦‚è¯ç‰©è¿‡é‡ï¼ˆå¦‚æŠ—ç²¾ç¥ç—…è¯ï¼‰ã€é…’ç²¾æˆ–è¯ç‰©æˆ’æ–­ã€ä½è¡€ç³–æˆ–ç”µè§£è´¨å¤±è¡¡ï¼Œè¿™äº›å¯èƒ½å¼•èµ·å‘ä½œæ€§ç—‡çŠ¶ã€‚\n4. **ä¸­æ¢ç¥ç»ç³»ç»Ÿæ„ŸæŸ“**ï¼šå¦‚è„‘è†œç‚æˆ–è„‘ç‚ï¼Œå¯èƒ½ä¼´éšå‘çƒ­ã€å¤´ç—›å’Œç¥ç»åŠŸèƒ½å¼‚å¸¸ï¼Œå¯¼è‡´å£åç™½æ²«ã€‚\n5. **å…¶ä»–ç¥ç»ç³»ç»Ÿç–¾ç—…**ï¼šå¦‚è„‘è‚¿ç˜¤ã€è„‘å¤–ä¼¤æˆ–é—ä¼ æ€§ç–¾ç—…ï¼Œä½†è¿™äº›é€šå¸¸ä¼´æœ‰å…¶ä»–é•¿æœŸç—‡çŠ¶ã€‚\n\n### é’ˆå¯¹å­é—®é¢˜çš„æ•´åˆè¯´æ˜\nå°½ç®¡å­é—®é¢˜ä»…ä¾›å‚è€ƒï¼Œä½†ä¸ºç¡®ä¿å…¨é¢æ€§ï¼Œæˆ‘åœ¨æ­¤æ˜ç¡®æ¶‰åŠï¼š\n- **ç™«ç—«çš„æ½œåœ¨ç—…å› **ï¼šå¯èƒ½åŒ…æ‹¬ä¸­é£ï¼ˆå¦‚æœç´¢ç»“æœä¸­æåˆ°çš„åŠ¨è„‰-åŠ¨è„‰æ “å¡æˆ–ä½çŒæ³¨æœºåˆ¶ï¼‰ã€æ„ŸæŸ“ã€ä»£è°¢é—®é¢˜æˆ–ç‰¹å‘æ€§ç™«ç—«ã€‚ç—…å› éœ€é€šè¿‡è¿›ä¸€æ­¥è¯„ä¼°æ’é™¤ã€‚\n- **è¯Šæ–­æµ‹è¯•çš„å¿…è¦æ€§**ï¼šæ ¹æ®æœç´¢ç»“æœï¼Œè¯Šæ–­åº”ä¼˜å…ˆä½¿ç”¨ç¥ç»å½±åƒå­¦ï¼ˆå¦‚MRIã€CTè¡€ç®¡é€ å½±ï¼‰å’Œè„‘ç”µå›¾ï¼ˆEEGï¼‰ä»¥è¯„ä¼°è„‘éƒ¨ç»“æ„å’Œç”µæ´»åŠ¨ï¼›è¡€æ¶²æ£€æŸ¥ï¼ˆå¦‚è¡€ç³–ã€ç”µè§£è´¨ï¼‰å¯æ’é™¤ä»£è°¢åŸå› ã€‚\n- **å³æ—¶ç®¡ç†è¦æ±‚**ï¼šåœ¨å‘ä½œæœŸé—´ï¼Œé‡ç‚¹ä¿æŠ¤æ‚£è€…å®‰å…¨ï¼ˆå¦‚ä¾§å§é˜²æ­¢çª’æ¯ï¼‰ã€é¿å… restraintï¼›å‘ä½œåéœ€åŒ»ç–—ç›‘æµ‹ï¼Œå¹¶å¯èƒ½å¯åŠ¨æŠ—ç™«ç—«è¯ç‰©æˆ–ä¸­é£äºŒçº§é¢„é˜²ï¼ˆå¦‚æŠ—è¡€å°æ¿æ²»ç–—ï¼Œå‚è€ƒæœç´¢ç»“æœä¸­çš„åŒ»ç–—ç®¡ç†å»ºè®®ï¼‰ã€‚\n\n### å»ºè®®ä¸åç»­è¯¢é—®\nç”±äºæ‚¨ä»…æä¾›äº†â€œå£åç™½æ²«â€è¿™ä¸€ç—‡çŠ¶ï¼Œä¿¡æ¯å¯èƒ½ä¸å……åˆ†ã€‚ä¸ºäº†æ›´å‡†ç¡®è¯„ä¼°ï¼Œæˆ‘å»ºè®®æ‚¨ç«‹å³å°±åŒ»è¿›è¡Œç´§æ€¥è¯„ä¼°ã€‚åŒæ—¶ï¼Œå¦‚æœæ‚¨èƒ½æä¾›ä»¥ä¸‹é¢å¤–ä¿¡æ¯ï¼Œå°†æœ‰åŠ©äºç¼©å°è¯Šæ–­èŒƒå›´ï¼š\n- å‘ä½œæ—¶æ˜¯å¦æœ‰æ„è¯†ä¸§å¤±ã€è‚¢ä½“æŠ½ææˆ–å¤§å°ä¾¿å¤±ç¦ï¼Ÿ\n- æ˜¯å¦æœ‰å…¶ä»–ç—‡çŠ¶ï¼Œå¦‚å¤´ç—›ã€å‘çƒ­æˆ–è¿‘æœŸå¤–ä¼¤ï¼Ÿ\n- æ‚¨çš„ä¸ªäººç—…å²ï¼ˆå¦‚ç™«ç—«ã€é«˜è¡€å‹æˆ–ç³–å°¿ç—…ï¼‰å’Œç”¨è¯æƒ…å†µï¼Ÿ\n\nè¯·è®°ä½ï¼Œå£åç™½æ²«å¯èƒ½æ˜¯åŒ»ç–—æ€¥ç—‡ï¼ŒåŠ¡å¿…å°½å¿«å¯»æ±‚ä¸“ä¸šåŒ»ç–—å¸®åŠ©ã€‚å¦‚æœæ‚¨æœ‰æ›´å¤šç»†èŠ‚ï¼Œæˆ‘å¯ä»¥è¿›ä¸€æ­¥ååŠ©åˆ†æã€‚",
    "summary": "æ ¹æ®æ‚¨çš„æŸ¥è¯¢â€œæˆ‘å£åç™½æ²«â€ä»¥åŠæˆ‘çš„å›ç­”ï¼Œæˆ‘å·²å¯¹ç—‡çŠ¶è¿›è¡Œäº†åˆæ­¥åˆ†æã€‚ä»¥ä¸‹æ€»ç»“äº†å¯¹åç»­åŒ»ç–—è¯Šæ–­æœ‰ç”¨çš„å…³é”®å†…å®¹ï¼ŒåŸºäºç—‡çŠ¶æè¿°ã€å¯èƒ½è¯Šæ–­ã€è¯Šæ–­å»ºè®®ã€ç®¡ç†è¦æ±‚å’Œéœ€è¦è¿›ä¸€æ­¥è¯¢é—®çš„ä¿¡æ¯ã€‚è¿™äº›ç‚¹æ—¨åœ¨å¸®åŠ©åŒ»ç”Ÿæˆ–åŒ»ç–—å›¢é˜Ÿå¿«é€Ÿè¯„ä¼°æƒ…å†µï¼Œä½†è¯·æ³¨æ„ï¼Œè¿™å¹¶éæœ€ç»ˆè¯Šæ–­ï¼Œå®é™…è¯Šæ–­éœ€ç”±ä¸“ä¸šåŒ»ç”Ÿé€šè¿‡è¯¦ç»†æ£€æŸ¥ç¡®å®šã€‚\n\n### æ€»ç»“å¯¹åç»­åŒ»ç–—è¯Šæ–­æœ‰ç”¨çš„å†…å®¹\n- **ç—‡çŠ¶æè¿°**ï¼šæ‚£è€…æŠ¥å‘Šâ€œå£åç™½æ²«â€ï¼Œè¿™é€šå¸¸æ˜¯ç™«ç—«å‘ä½œï¼ˆå¦‚å¼ºç›´-é˜µæŒ›å‘ä½œï¼‰çš„å…¸å‹è¡¨ç°ï¼Œä½†ä¹Ÿå¯èƒ½ä¸å…¶ä»–æ€¥ç—‡ç›¸å…³ã€‚\n- **å¯èƒ½è¯Šæ–­è€ƒè™‘**ï¼š\n  - **ç™«ç—«å‘ä½œ**ï¼šæœ€å¸¸è§åŸå› ï¼Œå¯èƒ½ä¸ç‰¹å‘æ€§æˆ–ç»§å‘æ€§å› ç´ ï¼ˆå¦‚è„‘éƒ¨å¼‚å¸¸ã€ä»£è°¢é—®é¢˜ï¼‰æœ‰å…³ã€‚\n  - **ä¸­é£ï¼ˆè„‘å’ä¸­ï¼‰**ï¼šå¯èƒ½é€šè¿‡è„‘ç¼ºè¡€æˆ–å‡ºè¡€å¼•å‘ï¼Œä½œä¸ºå¹¶å‘ç—‡å¯¼è‡´å£åç™½æ²«ã€‚\n  - **ä¸­æ¯’æˆ–ä»£è°¢ç´Šä¹±**ï¼šä¾‹å¦‚è¯ç‰©è¿‡é‡ã€æˆ’æ–­ååº”ã€ä½è¡€ç³–æˆ–ç”µè§£è´¨å¤±è¡¡ã€‚\n  - **ä¸­æ¢ç¥ç»ç³»ç»Ÿæ„ŸæŸ“**ï¼šå¦‚è„‘è†œç‚æˆ–è„‘ç‚ï¼Œå¸¸ä¼´å‘çƒ­æˆ–å¤´ç—›ã€‚\n  - **å…¶ä»–ç¥ç»ç³»ç»Ÿç–¾ç—…**ï¼šå¦‚è„‘è‚¿ç˜¤æˆ–è„‘å¤–ä¼¤ï¼Œä½†é€šå¸¸æœ‰é•¿æœŸç—‡çŠ¶ã€‚\n- **è¯Šæ–­å»ºè®®**ï¼š\n  - ä¼˜å…ˆè¿›è¡Œç¥ç»å½±åƒå­¦æ£€æŸ¥ï¼ˆå¦‚MRIæˆ–CTè¡€ç®¡é€ å½±ï¼‰å’Œè„‘ç”µå›¾ï¼ˆEEGï¼‰ä»¥è¯„ä¼°è„‘éƒ¨ç»“æ„å’Œç”µæ´»åŠ¨ã€‚\n  - è¡€æ¶²æ£€æŸ¥ï¼ˆå¦‚è¡€ç³–ã€ç”µè§£è´¨ï¼‰å¯æ’é™¤ä»£è°¢åŸå› ã€‚\n  - è¿™äº›æµ‹è¯•æœ‰åŠ©äºåŒºåˆ†ç—…å› ï¼Œä¾‹å¦‚æ’é™¤ä¸­é£æˆ–æ„ŸæŸ“ã€‚\n- **å³æ—¶ç®¡ç†è¦æ±‚**ï¼š\n  - åœ¨å‘ä½œæœŸé—´ï¼Œç¡®ä¿æ‚£è€…å®‰å…¨ï¼šä¾§å§ä»¥é˜²æ­¢çª’æ¯ï¼Œé¿å…çº¦æŸã€‚\n  - å‘ä½œåéœ€åŒ»ç–—ç›‘æµ‹ï¼Œå¯èƒ½éœ€å¯åŠ¨æŠ—ç™«ç—«è¯ç‰©æˆ–ä¸­é£é¢„é˜²æªæ–½ï¼ˆå¦‚æŠ—è¡€å°æ¿æ²»ç–—ï¼‰ã€‚\n  - å¼ºè°ƒç«‹å³å°±åŒ»ï¼Œå› ä¸ºå£åç™½æ²«å¯èƒ½ä¸ºåŒ»ç–—æ€¥ç—‡ã€‚\n- **éœ€è¦è¿›ä¸€æ­¥è¯¢é—®çš„ä¿¡æ¯**ï¼ˆä»¥å¸®åŠ©ç¼©å°è¯Šæ–­èŒƒå›´ï¼‰ï¼š\n  - å‘ä½œæ—¶æ˜¯å¦æœ‰æ„è¯†ä¸§å¤±ã€è‚¢ä½“æŠ½ææˆ–å¤§å°ä¾¿å¤±ç¦ï¼Ÿ\n  - æ˜¯å¦æœ‰å…¶ä»–ç—‡çŠ¶ï¼ˆå¦‚å¤´ç—›ã€å‘çƒ­æˆ–è¿‘æœŸå¤–ä¼¤ï¼‰ï¼Ÿ\n  - ä¸ªäººç—…å²ï¼ˆå¦‚ç™«ç—«ã€é«˜è¡€å‹ã€ç³–å°¿ç—…ï¼‰å’Œå½“å‰ç”¨è¯æƒ…å†µï¼Ÿ\n\næ­¤æ€»ç»“åŸºäºç°æœ‰ä¿¡æ¯ï¼Œå»ºè®®æ‚¨å°½å¿«æä¾›æ›´å¤šç»†èŠ‚æˆ–ç›´æ¥å¯»æ±‚ç´§æ€¥åŒ»ç–—è¯„ä¼°ï¼Œä»¥ç¡®ä¿å‡†ç¡®è¯Šæ–­å’Œå¤„ç†ã€‚å¦‚æœæ‚¨èƒ½è¡¥å……ä¸Šè¿°ä¿¡æ¯ï¼Œæˆ‘å¯ä»¥è¿›ä¸€æ­¥ååŠ©åˆ†æã€‚",
    "name": "å£åç™½æ²«ç—…å› åˆ†æ"
}
```



### 2.æŠ€æœ¯

#### 2.1restTemplate.postForObject()

**æ–¹æ³•ä½œç”¨**

1. **å‘é€POSTè¯·æ±‚**ï¼šå‘æŒ‡å®šçš„URLï¼ˆ`aiApiUrl`ï¼‰å‘é€ä¸€ä¸ªHTTP POSTè¯·æ±‚ã€‚
2. **ä¼ é€’è¯·æ±‚ä½“**ï¼šå°†`request`å¯¹è±¡ï¼ˆè¿™é‡Œæ˜¯`Map<String, Object>`ï¼‰è‡ªåŠ¨åºåˆ—åŒ–ä¸ºJSONæ ¼å¼ä½œä¸ºè¯·æ±‚ä½“ã€‚
3. **å¤„ç†å“åº”**ï¼šå°†æœåŠ¡å™¨è¿”å›çš„JSONå“åº”è‡ªåŠ¨ååºåˆ—åŒ–ä¸º`AiResponse.class`ç±»å‹çš„Javaå¯¹è±¡

```java
    private AiResponse callFastAPI(String question, String preAnswer) {
        try {
            Map<String, Object> request = new HashMap<>();
            request.put("question", question);
            request.put("round", 2);
            request.put("all_info", preAnswer);

            // ç›´æ¥è¿”å›å®Œæ•´å“åº”å¯¹è±¡ï¼ˆåŒ…å«resultå’Œsummaryï¼‰
            return restTemplate.postForObject(aiApiUrl, request, AiResponse.class);

        } catch (Exception e) {
            e.printStackTrace();
            // å¼‚å¸¸æ—¶è¿”å›é»˜è®¤å“åº”å¯¹è±¡
            AiResponse errorResponse = new AiResponse();
            errorResponse.setResult("è°ƒç”¨AIæ¨¡å‹æ—¶å‘ç”Ÿé”™è¯¯: " + e.getMessage());
            errorResponse.setSummary("");
            return errorResponse;
        }
    }
```

#### 2.2 HttpSeervletRequest

**HttpServletRequest æ˜¯å¦éœ€è¦å‰ç«¯ä¼ é€’**

åœ¨ Spring MVC æ¡†æ¶ä¸­ï¼Œ`HttpServletRequest` å¯¹è±¡**ä¸éœ€è¦å‰ç«¯æ˜¾å¼ä¼ é€’**ï¼Œè€Œæ˜¯ç”± Web å®¹å™¨ï¼ˆå¦‚ Tomcatï¼‰åœ¨æ¥æ”¶åˆ° HTTP è¯·æ±‚æ—¶è‡ªåŠ¨åˆ›å»ºå¹¶æ³¨å…¥åˆ°æ§åˆ¶å™¨æ–¹æ³•ä¸­çš„ã€‚

**å·¥ä½œåŸç†**

1. å½“ç”¨æˆ·ï¼ˆå‰ç«¯ï¼‰å‘é€ HTTP è¯·æ±‚åˆ°æœåŠ¡å™¨æ—¶ï¼ŒWeb å®¹å™¨ä¼šï¼š
   - è§£æè¯·æ±‚çš„ URLã€HTTP æ–¹æ³•ã€è¯·æ±‚å¤´ã€è¯·æ±‚ä½“ç­‰ä¿¡æ¯
   - åˆ›å»ºä¸€ä¸ª `HttpServletRequest` å¯¹è±¡ï¼Œå¹¶å°†è§£æåˆ°çš„ä¿¡æ¯å°è£…è¿›å»
   - è°ƒç”¨ç›¸åº”æ§åˆ¶å™¨æ–¹æ³•æ—¶ï¼Œè‡ªåŠ¨å°†è¯¥å¯¹è±¡ä½œä¸ºå‚æ•°æ³¨å…¥
2. åœ¨ `LoginController` çš„ `logOut` æ–¹æ³•ä¸­ï¼Œè™½ç„¶å£°æ˜äº† `HttpServletRequest request` å‚æ•°ï¼Œä½†ï¼š
   - å‰ç«¯åªéœ€è¦å‘é€ä¸€ä¸ªæ™®é€šçš„ HTTP è¯·æ±‚åˆ° `/user/logOut` æ¥å£
   - æ— éœ€ç‰¹æ„ä¼ é€’ä»»ä½•é¢å¤–æ•°æ®ç»™è¿™ä¸ªå‚æ•°
   - å½“å‰å®ç°ä¸­ï¼Œè¯¥å‚æ•°å®é™…ä¸Šå¹¶æœªè¢«ä½¿ç”¨ï¼ˆåªè°ƒç”¨äº† `ThreadLocalUtil.removeCurrentId()`ï¼‰



#### 2.3 Jwtsæ–¹æ³•ç†è§£

```java
public static String generateToken(Map<String,Object> claims) {
    return Jwts.builder()                    // åˆ›å»º JWT æ„å»ºå™¨å®ä¾‹
            .signWith(SignatureAlgorithm.HS256, SECRET_KEY)  // è®¾ç½®ç­¾åç®—æ³•å’Œå¯†é’¥
            .addClaims(claims)               // æ·»åŠ è‡ªå®šä¹‰å£°æ˜(claims)
            .setExpiration(new Date(System.currentTimeMillis() + EXPIRATION_TIME)) // è®¾ç½®è¿‡æœŸæ—¶é—´
            .compact();                      // ç”Ÿæˆæœ€ç»ˆçš„ JWT å­—ç¬¦ä¸²
}




public static Claims parseToken(String token) {
    return Jwts.parser()                     // åˆ›å»º JWT è§£æå™¨å®ä¾‹
            .setSigningKey(SECRET_KEY)       // è®¾ç½®ç”¨äºéªŒè¯ç­¾åçš„å¯†é’¥
            .parseClaimsJws(token)           // è§£æå¹¶éªŒè¯ JWT
            .getBody();                      // è·å– JWT çš„å£°æ˜(claims)ä¸»ä½“
}
```

#### 2.4 ä»€ä¹ˆæ—¶å€™éœ€è¦å–åˆ«å

åœ¨ä»¥ä¸‹æƒ…å†µéœ€è¦ä½¿ç”¨ SQL åˆ«åï¼š

1. **å±æ€§æ˜ å°„**ï¼šæ•°æ®åº“åˆ—åä¸ç¨‹åºå®ä½“ç±»å±æ€§åä¸ä¸€è‡´

// å®ä½“ç±»å±æ€§åæ˜¯ talkId
@Data
public class InitialPageVO {
    private Integer talkId;  // é©¼å³°å‘½å
    private String title;
}

// æ•°æ®åº“åˆ—åæ˜¯ idï¼Œéœ€è¦é€šè¿‡åˆ«åæ˜ å°„
@Select("select id as talkId, title from talk where user_id=#{currentId}")
List<InitialPageVO> getTalkIdAndTitle(Integer currentId);

#### 2.5 çº¿ç¨‹å®‰å…¨set

```java
private final Set<String> blacklistedTokens = ConcurrentHashMap.newKeySet();

```

#### 2.6 ThreadLocalå’ŒJWTæ³¨æ„äº‹é¡¹

```
åœ¨Spring Bootåº”ç”¨ä¸­ï¼ŒWebæœåŠ¡å™¨ï¼ˆå¦‚Tomcatï¼‰ä½¿ç”¨çº¿ç¨‹æ± æ¥å¤„ç†HTTPè¯·æ±‚ã€‚åŒä¸€ä¸ªçº¿ç¨‹å¯èƒ½ä¼šè¢«ç”¨æ¥å¤„ç†å¤šä¸ªä¸åŒçš„HTTPè¯·æ±‚ï¼Œä½†æ¯æ¬¡è¯·æ±‚éƒ½æ˜¯ç‹¬ç«‹çš„ã€‚
```



```
ğŸ§© ä¸€ã€HTTP è¯·æ±‚çš„â€œæ— çŠ¶æ€æ€§â€

å«ä¹‰ï¼š
HTTP åè®®æ˜¯æ— çŠ¶æ€ï¼ˆstatelessï¼‰çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼š

æ¯ä¸€æ¬¡å®¢æˆ·ç«¯å‘é€çš„ HTTP è¯·æ±‚ï¼ŒæœåŠ¡å™¨éƒ½ä¼šå°†å®ƒè§†ä¸ºä¸€ä¸ªå…¨æ–°çš„è¯·æ±‚ï¼Œä¸ä¼šè‡ªåŠ¨è®°ä½å®¢æˆ·ç«¯ä¹‹å‰çš„ä»»ä½•çŠ¶æ€æˆ–ä¸Šä¸‹æ–‡ã€‚


âš™ï¸ äºŒã€çº¿ç¨‹æ± ä¸çº¿ç¨‹å¤ç”¨æœºåˆ¶

Spring Boot çš„é»˜è®¤ Web æœåŠ¡å™¨ï¼ˆå¦‚ Tomcatï¼‰åœ¨å¤„ç† HTTP è¯·æ±‚æ—¶ï¼Œä¼šï¼š
åˆ›å»ºä¸€ä¸ªçº¿ç¨‹æ± ï¼ˆæ¯”å¦‚å›ºå®šå¤§å° 200 æ¡çº¿ç¨‹ï¼‰ï¼›
å½“è¯·æ±‚åˆ°æ¥æ—¶ï¼Œä»æ± ä¸­å–å‡ºä¸€ä¸ªç©ºé—²çº¿ç¨‹æ¥å¤„ç†ï¼›
è¯·æ±‚å¤„ç†ç»“æŸåï¼Œè¿™ä¸ªçº¿ç¨‹ä¸ä¼šé”€æ¯ï¼Œè€Œæ˜¯æ”¾å›çº¿ç¨‹æ± ï¼Œç­‰å¾…ä¸‹ä¸€æ¬¡å¤ç”¨ã€‚

ä¹Ÿå°±æ˜¯è¯´ï¼š
åŒä¸€ä¸ªçº¿ç¨‹å¯èƒ½å…ˆå¤„ç†äº†ç”¨æˆ· A çš„è¯·æ±‚ï¼Œä¸‹ä¸€æ¬¡åˆè¢«åˆ†é…å»å¤„ç†ç”¨æˆ· B çš„è¯·æ±‚ã€‚

è¿™å°±æ˜¯ çº¿ç¨‹å¤ç”¨æœºåˆ¶ã€‚


ğŸ”’ ä¸‰ã€ä¸¤è€…ä¹‹é—´çš„å…³ç³»ä¸æ„ä¹‰
å› ä¸º HTTP æ˜¯æ— çŠ¶æ€çš„ï¼Œæ¯ä¸ªè¯·æ±‚å½¼æ­¤ç‹¬ç«‹ï¼›
æ‰€ä»¥ çº¿ç¨‹å¯ä»¥è¢«å®‰å…¨åœ°å¤ç”¨ï¼Œæ— éœ€æ‹…å¿ƒâ€œä¸Šä¸€ä¸ªè¯·æ±‚çš„æ•°æ®â€ä¼šå½±å“â€œä¸‹ä¸€ä¸ªè¯·æ±‚â€ã€‚

ğŸ’¡æ¢å¥è¯è¯´ï¼š
Tomcat å¯ä»¥æ”¾å¿ƒåœ°åœ¨ä¸åŒè¯·æ±‚ä¹‹é—´å¤ç”¨çº¿ç¨‹ï¼Œå› ä¸ºæ¯æ¬¡è¯·æ±‚çš„æ•°æ®ã€ä¸Šä¸‹æ–‡ã€Session éƒ½æ˜¯éš”ç¦»çš„ã€‚
```

**å› æ­¤éœ€è¦åœ¨æ‹¦æˆªå™¨ï¼ŒpreHandleé‡Œä¸æ–­è®¾ç½®ç”¨æˆ·Idï¼Œåœ¨afterCompletioné‡Œä¸æ–­æ¸…é™¤ç”¨æˆ·Id**

#####  HTTP/1.1ï¼ˆç°åœ¨æœ€å¸¸è§çš„ï¼‰

- é»˜è®¤å¯ç”¨ **Connection: keep-alive**ã€‚
- æ„å‘³ç€ï¼š
   ğŸ”¹ ç¬¬ä¸€æ¬¡è¯·æ±‚å‘å‡ºåï¼ŒæœåŠ¡å™¨å“åº”å®Œæ¯•ï¼Œ**TCP è¿æ¥ä¸ä¼šç«‹åˆ»æ–­å¼€**ã€‚
   ğŸ”¹ æµè§ˆå™¨å¯ä»¥åœ¨åŒä¸€æ¡ TCP è¿æ¥ä¸Šç»§ç»­å‘å‡ºæ›´å¤šè¯·æ±‚ï¼ˆæ¯”å¦‚åŠ è½½å›¾ç‰‡ã€è·³è½¬æ–°é¡µé¢ç­‰ï¼‰ã€‚

> åªæœ‰å½“ï¼š
>
> - è¿æ¥ç©ºé—²å¤ªä¹…ï¼Œæˆ–è€…
> - æµè§ˆå™¨ä¸»åŠ¨å…³é—­ï¼Œæˆ–è€…
> - æœåŠ¡å™¨è®¾ç½®äº† `Connection: close`
>
> æ‰ä¼šçœŸæ­£æ–­å¼€ TCP è¿æ¥ã€‚













### 3. RAGæŠ€æœ¯æµç¨‹

#### 3.1ä»£ç æ­¥éª¤

##### æ‰“é€ å‘é‡åº“

```python
1.
with pdfplumber.open(pdf_path) as pdf:
    for page in pdf.pages:
        page_text = page.extract_text() or ""
        text += page_text
        
        
        
2.
docs = []

for pdf_path in pdf_files:
    text = extract_text_from_pdf(pdf_path)
    if not text:
        continue
    docs.append({
        "page_content": text,
        "metadata": {"source": str(pdf_path)}
    })
    

    
3.
splitter = RecursiveCharacterTextSplitter(
    chunk_size=CHUNK_SIZE,
    chunk_overlap=CHUNK_OVERLAP,
    separators=["\n\n", "\n", "ã€‚", "ï¼", "ï¼Ÿ", ".", "!", "?"]
)



4.
    doc_objs = [Document(page_content=d["page_content"], metadata=d["metadata"]) for d in docs]
    chunks = splitter.split_documents(doc_objs)

    embeddings = OpenAIEmbeddings()
    vector_store = Chroma.from_documents(chunks, embedding=embeddings, persist_directory=VECTOR_STORE_PATH)

```



### 4. é¡¹ç›®æ€è·¯

åŸºäºå¤šæ™ºèƒ½ä½“å¯¹è¯çš„å¾ªç¯ä¸­ï¼Œ

```python
content = multi_collection_rag_retrieval(query)


# åŒ»ç”Ÿå›ç­”
doctor_msg = self.doctor_chain.invoke({
    "document": content,
    "doctor_info": doctor_result + patient_result,
})(ä¸ºäº†æ¨¡å‹æ›´å¿«å°±è°ƒç”¨ååº”æ›´å¿«çš„AIï¼Œåé¢å‘ç°å®ƒä¼šç”Ÿæˆæ— å…³å†…å®¹ï¼Œå°±ä¿®æ”¹æç¤ºè¯ï¼Œè®©å®ƒä¸ç”Ÿäº§æ— å…³å†…å®¹)

doctor_result = str(doctor_msg).strip()
sum_talk.append(doctor_result)


patient_msg = self.patient_chain.invoke({
                "patient_info": doctor_result,
                "former_result": patient_result,
                "original_result": original_result,
})(æˆ‘å‘ç°ä»–çš„é—®é¢˜ä¸åˆå§‹é—®é¢˜åç¦»å¤ªå¤šï¼Œå°±åŠ å…¥åˆå§‹é—®é¢˜ï¼Œè®©ä»–åœ¨è¿™ä¸Šé¢å‘æŒ¥ï¼›ç„¶åå‘ç°ä»–çš„æ¯æ¬¡é—®é¢˜åˆç›¸åŒï¼Œå°±ä¿®æ”¹æç¤ºè¯ï¼Œè®©ä»–ä¸è¦ä¸former_resultå®Œå…¨ä¸€æ ·)
```



```python
å¾ªç¯å®Œä¹‹å
# ç»¼åˆè¯Šæ–­
answer = self.medical_assistant.decompose_and_diagnose(sum_talk(åŒ»ç”Ÿæ‰€æœ‰å¯¹è¯ï¼Œä¸è¦æ‚£è€…æ‰€æœ‰å¯¹è¯æ˜¯ä¸ºäº†å‡†ç¡®), original_result(æ‚£è€…åˆå§‹é—®é¢˜), all_info(å†å²ä¿¡æ¯), temp_c_str)
(è¿™é‡Œé‡æ–°è°ƒç”¨å¦ä¸€ä¸ªæ™ºèƒ½ä½“æ›´å¥½)
ä¸ºäº†æ£€ç´¢å‡†ç¡®ï¼Œæ‰€ä»¥ä¼ è¿™äº›å‚æ•°
```



```python
//å°†ä»–ä¼ è¿‡æ¥çš„sum_talkæ‹†åˆ†æˆå­é—®é¢˜åˆ†åˆ«æ£€ç´¢å¹¶å›ç­”
# â€”â€” ä¸€ã€æ‹†åˆ†å­é—®é¢˜ï¼ˆè‹±æ–‡è¾“å‡ºï¼‰ â€”â€”
decomposition_prompt = "\n".join([
            "Given a number of patient complaint summaries (sum_talk), please identify the common symptoms that appear multiple times in these summaries",
            "and based on these commonalities, decompose into 3 clinically relevant sub-questions.",
            "Each sub-question should be expressed as one concise sentence in English.",
            "sum_talk list:",
            *[f"- {talk}" for talk in sum_talk]
        ])


def decompose_and_diagnose(self, sum_talk: List[str], original_result: str, all_info: str, content: str) -> str:

    
    
    
//æœ€åæŠŠå­é—®é¢˜ç»“æœï¼Œå’Œå†å²è¯¢é—®å›ç­”ä¿¡æ¯ï¼Œå’Œæœ€å¼€å§‹æ£€ç´¢åˆ°ç–¾ç—…çš„ä¿¡æ¯ï¼Œä»¥åŠç—…äººçš„æœ€åˆé—®é¢˜ï¼Œç»™æ™ºèƒ½ä½“è¿›è¡Œå›ç­”
```



**æµ‹è¯„æ•ˆæœ**

```
è¯­è¨€ç®€ç»ƒã€æ¡ç†æ¸…æ™°
ç»“æ„æ›´æ¸…æ™°

å®ƒæŒ‰â€œä¸»è¦ç–¾ç—…è€ƒè™‘â€ã€â€œé‰´åˆ«è¯Šæ–­â€ã€â€œå¿…è¦æ£€æŸ¥â€ä¸‰éƒ¨åˆ†åˆ†å±‚å±•å¼€ï¼Œé€»è¾‘æ¡ç†ä¸€ç›®äº†ç„¶ã€‚

ç¬¬ä¸€ç§å›ç­”è™½ç„¶ä¹Ÿæåˆ°äº†è„‘è†œç‚åŠç›¸å…³æ£€æŸ¥ï¼Œä½†æ··æ‚äº†é‰´åˆ«è¯Šæ–­ã€æ£€æŸ¥å’Œæ²»ç–—å»ºè®®ï¼Œä¸å¤Ÿåˆ†å—ã€‚

è¦†ç›–æ›´å…¨é¢

åœ¨é‰´åˆ«è¯Šæ–­ä¸­ï¼Œä¸ä»…æåˆ°ç—…æ¯’æ€§ï¼Œè¿˜åŒ…æ‹¬ç»“æ ¸æ€§ã€çœŸèŒæ€§ç­‰å¤šç§å¯èƒ½ï¼Œæç¤ºäº†ä¸åŒæµè¡Œç—…å­¦èƒŒæ™¯ä¸‹çš„æ€è€ƒã€‚

ç¬¬ä¸€ç§ä»…ç®€å•åˆ—ä¸¾äº†â€œè„‘ç‚ã€ä¸­æ¢ç¥ç»ç³»ç»Ÿè‚¿ç˜¤â€ç­‰ï¼ŒèŒƒå›´å’Œæ·±åº¦ç•¥é€Šã€‚

èšç„¦è¯Šæ–­è¦ç‚¹

ç¬¬äºŒç§å¼ºè°ƒâ€œè„‘è„Šæ¶²æ£€æŸ¥æ˜¯ç¡®è¯Šæ€¥æ€§è„‘è†œç‚çš„å…³é”®â€ï¼Œå‡†ç¡®ç‚¹æ˜äº†è¯Šæ–­æ ¸å¿ƒã€‚

ç¬¬ä¸€ç§è™½ç„¶ä¹Ÿæåˆ°è…°ç©¿ï¼Œä½†æ²¡æœ‰å¼ºè°ƒå…¶å†³å®šæ€§åœ°ä½ã€‚

è¯­è¨€ç®€ç»ƒï¼Œé¿å…å†—ä½™

ç¬¬ä¸€ç§å›ç­”æœ«å°¾åˆé‡å¤äº†æ²»ç–—å»ºè®®ï¼Œè€Œé¢˜ç›®é—®çš„æ˜¯â€œé¦–å…ˆè€ƒè™‘ä»€ä¹ˆç–¾ç—…ï¼Ÿéœ€è¦å’Œä»€ä¹ˆç—…é‰´åˆ«ï¼Ÿéœ€è¦åšä»€ä¹ˆæ£€æŸ¥ï¼Ÿâ€ï¼Œæ²»ç–—åº”ç•™åˆ°åç»­æ–¹æ¡ˆè®¨è®ºã€‚

ç¬¬äºŒç§åŸºæœ¬åªå›åº”é¢˜ä¸­ä¸‰é—®ï¼Œæ›´è´´é¢˜ã€‚
```

**åŒ»å­¦ä»·å€¼**

```
ç»¼åˆè¯Šæ–­çš„ç¡®å…·æœ‰å¾ˆé«˜çš„åŒ»å­¦ä»·å€¼ï¼Œä¸»è¦ä½“ç°åœ¨ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š

æé«˜è¯Šæ–­å‡†ç¡®æ€§

é€šè¿‡åˆ—å‡ºå¤šç§å¯èƒ½çš„ç—…å› å¹¶é€ä¸€æƒè¡¡ï¼Œæœ‰åŠ©äºé¿å…â€œé”šå®šåè§â€ï¼ˆä¸€å¬åˆ° MRI æŠ¥å‘Šå°±åªæƒ³åˆ°ä¸€ä¸ªè¯Šæ–­ï¼‰ï¼Œå‡å°‘æ¼è¯Šå’Œè¯¯è¯Šã€‚

é’ˆå¯¹ä¸åŒçš„å¯èƒ½è¯Šæ–­æå‡ºè¦é‡‡é›†çš„â€œå…³é”®ä¿¡æ¯â€å’Œâ€œè¡¥å……æ£€æŸ¥â€ï¼Œå¯è®©ä¸´åºŠåŒ»å¸ˆæˆ–æ‚£è€…å®¶å±æ›´æœ‰é’ˆå¯¹æ€§åœ°å®Œå–„ç—…å²ä¸è¾…åŠ©æ£€æŸ¥ï¼Œä»è€Œæé«˜æœ€ç»ˆè¯Šæ–­çš„æ•æ„Ÿæ€§å’Œç‰¹å¼‚æ€§ã€‚

ä¼˜åŒ–æ£€æŸ¥ä¸èµ„æºé…ç½®

ä¸æ˜¯æ‰€æœ‰ç—…äººéƒ½å¿…é¡»åšå…¨å¥—æ£€æŸ¥ï¼›ç»¼åˆè¯Šæ–­æ€è·¯å¸®åŠ©åŒºåˆ†â€œé¦–é€‰æ£€æŸ¥â€ï¼ˆå¦‚å¢å¼º MRIã€VEEGï¼‰å’Œâ€œå¤‡ç”¨æ£€æŸ¥â€ï¼ˆå¦‚è¡€ç®¡é€ å½±ã€MRSï¼‰ï¼Œé¿å…æ— è°“çš„é‡å¤æˆ–æ˜‚è´µæ£€æŸ¥ï¼ŒèŠ‚çº¦åŒ»ç–—èµ„æºã€‚

æŒ‡å¯¼ä¸ªä½“åŒ–æ²»ç–—

ä¸åŒç—…å› ï¼ˆèƒ¶è´¨ç˜¤ã€è„‘è†œç˜¤ã€è¡€ç®¡ç•¸å½¢ã€ç‚æ€§ç—…ç¶ç­‰ï¼‰çš„æ²»ç–—ç­–ç•¥æˆªç„¶ä¸åŒâ€”â€”æ‰‹æœ¯æ–¹å¼ã€æœ¯åæ”¾åŒ–ç–—ã€æŠ—ç™«ç—«è¯ç‰©çš„é€‰æ‹©ã€ç”šè‡³é¢„åè¯„ä¼°éƒ½è¦ä¾ç—…å› è€Œå®šã€‚

æ—©æœŸæ˜ç¡®è¯Šæ–­æ–¹å‘ï¼Œå¯æ›´æ—©å¯åŠ¨åˆé€‚çš„å¹²é¢„ï¼ˆå¦‚ç¥ç»å¤–ç§‘ä¼šè¯Šã€ç—…ç†æ´»æ£€ã€å…ç–«æˆ–æŠ—æ„ŸæŸ“æ²»ç–—ï¼‰ï¼Œé¿å…â€œä¸€åˆ€åˆ‡â€æˆ–â€œå¯¹ç—‡ä¸‹è¯â€æ— æ³•è§£å†³æ ¹æœ¬é—®é¢˜ã€‚

å¢å¼ºå¤šå­¦ç§‘åä½œ

åœ¨å¤§åŒ»é™¢æˆ–ä¸“ç§‘ä¸­å¿ƒï¼Œç¥ç»ç§‘ã€ç¥ç»å¤–ç§‘ã€æ”¾å°„ç§‘ã€ç—…ç†ç§‘ç­‰éœ€è¦å½¢æˆé—­ç¯æ²Ÿé€šã€‚ç»“æ„åŒ–çš„ç»¼åˆè¯Šæ–­æŠ¥å‘Šèƒ½ç»Ÿä¸€å¤§å®¶çš„æ€è·¯ï¼Œæé«˜ä¼šè¯Šæ•ˆç‡ã€‚

æ•™è‚²ä¸é£é™©ç®¡ç†

å¯¹æ‚£è€…åŠå®¶å±é˜æ˜â€œä¸ºä»€ä¹ˆè¿˜éœ€è¦è¿›ä¸€æ­¥æ£€æŸ¥â€â€œå¯èƒ½æœ‰å“ªäº›å¤‡é€‰è¯Šæ–­â€â€œæ¯ä¸€æ­¥æ£€æŸ¥çš„ç›®çš„æ˜¯ä»€ä¹ˆâ€ï¼Œæ—¢é™ä½åŒ»æ‚£æ²Ÿé€šéšœç¢ï¼Œä¹Ÿèƒ½å¤Ÿè®©ä»–ä»¬æ›´ä¸»åŠ¨é…åˆè¯Šç–—ã€‚

åŒæ—¶å¼ºè°ƒâ€œè­¦æƒ•ç™«ç—«æŒç»­çŠ¶æ€â€â€œåŠæ—¶å¹²é¢„å ä½æ•ˆåº”â€ç­‰ç®¡ç†è¦ç‚¹ï¼Œæœ‰åŠ©äºå‡å°‘æ€¥æ€§å¹¶å‘ç—‡ã€‚
```





## GuestBook

### 1. æ³¨æ„

```
docker run -d \
--name nacos-guestbook \
--network guestbook-net \
--env-file ~/nacos-guestbook/custom.env \
-p 8849:8848 \
-p 9860:9848 \
-p 9861:9849 \
--restart=always \
nacos-registry.cn-hangzhou.cr.aliyuncs.com/nacos/nacos-server:v2.4.3



docker run -d \
--name mysql-guestbook \
--network guestbook-net \
-p 3309:3306 \
-e MYSQL_ROOT_PASSWORD=123 \
-e TZ=Asia/Shanghai \
-v /opt/mysql-guestbook/data:/var/lib/mysql \
--restart=always \
mysql:latest
-------------------------------------------------------------------------

# åœ¨åº”ç”¨é…ç½®ä¸­ï¼Œä½¿ç”¨å®¹å™¨åè¿›è¡ŒæœåŠ¡å‘ç°
nacos:
  server-addr: nacos-guestbook:8848  # å®¹å™¨å†…è®¿é—®
  # æˆ–è€…å®¿ä¸»æœºè®¿é—®: localhost:8849
  
mysql:
  host: mysql-guestbook  # å®¹å™¨å†…è®¿é—®
  port: 3306
  # æˆ–è€…å®¿ä¸»æœºè®¿é—®: localhost:3309
  
  
  
Nacos ç«¯å£
8849: Web æ§åˆ¶å°å’Œ API (å®¿ä¸»æœºè®¿é—®)

9860: gRPC ç«¯å£ (å®¢æˆ·ç«¯)

9861: gRPC ç«¯å£ (æœåŠ¡ç«¯)

MySQL ç«¯å£
3309: æ•°æ®åº“è¿æ¥ (å®¿ä¸»æœºè®¿é—®)
-------------------------------------------------------------------------

æ›´æ–°å
http://192.168.43.198:8849/nacos







5) å¦‚æœä½ è¿˜æ²¡è¿è¡Œ MySQL æˆ–æƒ³é‡å¯å®ƒï¼Œç¡®è®¤ MySQL å®¹å™¨åœ¨ guestbook-net ä¸”åœ¨è¿è¡Œ

å¦‚æœä½ ä¹‹å‰å·²ç» run äº†ï¼š

# è‹¥ mysql æœªè¿è¡Œï¼Œå¯åŠ¨æˆ–é‡å»º
docker ps -a --filter "name=mysql-guestbook"

# è‹¥ mysql å®¹å™¨ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºï¼ˆæŒ‰ä½ ä¹‹å‰å‘½ä»¤ï¼‰
docker run -d \
  --name mysql-guestbook \
  --network guestbook-net \
  -p 3309:3306 \
  -e MYSQL_ROOT_PASSWORD=123 \
  -e TZ=Asia/Shanghai \
  -v /opt/mysql-guestbook/data:/var/lib/mysql \
  --restart=always \
  mysql:latest


æŸ¥çœ‹ MySQL æ˜¯å¦å°±ç»ªï¼ˆæ—¥å¿—é‡Œçœ‹ "ready for connections"ï¼‰ï¼š

docker logs mysql-guestbook --tail 200

6) åœ¨ MySQL å†…åˆ›å»º nacos æ•°æ®åº“ï¼ˆå¦‚æœå°šæœªåˆ›å»ºï¼‰

Nacos éœ€è¦ä¸€ä¸ªåä¸º nacos çš„æ•°æ®åº“ï¼ˆå¹¶ä¸”å­—ç¬¦é›†æœ€å¥½ä¸º utf8mb4ï¼‰ã€‚æ‰§è¡Œï¼š

# ç›´æ¥åœ¨å®¹å™¨é‡Œæ‰§è¡Œ SQLï¼ˆä½¿ç”¨ root å¯†ç  123ï¼‰
docker exec -i mysql-guestbook mysql -u root -p123 <<'SQL'
CREATE DATABASE IF NOT EXISTS nacos DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci;
SQL


ç¡®è®¤ï¼š

docker exec -i mysql-guestbook mysql -u root -p123 -e "SHOW DATABASES;"









ä½ ç°åœ¨çš„é”™è¯¯å·²ç»å®Œå…¨æ˜ç¡®äº†ï¼š

âŒ Public Key Retrieval is not allowed

è¿™æ˜¯ MySQL 8 + Nacos å¸¸è§æŠ¥é”™ï¼Œå’Œå®¹å™¨æ˜¯å¦æ®‹ç•™æ²¡æœ‰å…³ç³»ï¼Œ100% çº¯ç²¹æ˜¯å› ä¸ºï¼š

âš  åŸå› ï¼ˆæ ¸å¿ƒï¼‰

ä½ çš„ MySQL ä½¿ç”¨çš„æ˜¯ caching_sha2_password è®¤è¯æ–¹å¼ï¼ˆMySQL 8 é»˜è®¤ï¼‰ï¼Œ
Nacos çš„ JDBC é©±åŠ¨é»˜è®¤ä¸å…è®¸ public key retrievalã€‚

å› æ­¤éœ€è¦åœ¨ JDBC URL é‡Œå¼ºåˆ¶åŠ ï¼š

allowPublicKeyRetrieval=true


å¦åˆ™ Nacos è¿æ¥ä¸ä¸Šã€‚

âœ” è§£å†³æ–¹æ¡ˆï¼ˆåªæ”¹ custom.env å³å¯ï¼‰

æ‰“å¼€ä½ çš„æ–‡ä»¶ï¼š

~/nacos-guestbook/custom.env


é‡Œé¢åº”æœ‰ä¸‹é¢å†…å®¹ï¼ˆä½†ç¼ºå°‘ allowPublicKeyRetrievalï¼‰ï¼š

db.url.0=jdbc:mysql://mysql-guestbook:3306/nacos?characterEncoding=utf8&useSSL=false&serverTimezone=UTC


ç°åœ¨è¯·æŠŠå®ƒæ”¹æˆä¸‹é¢è¿™ä¸ªï¼ˆå®Œæ•´æ­£ç¡®ç‰ˆæœ¬ï¼‰ï¼š

db.url.0=jdbc:mysql://mysql-guestbook:3306/nacos?characterEncoding=utf8&useSSL=false&serverTimezone=UTC&allowPublicKeyRetrieval=true


ä¸€å®šè¦åŠ ä¸Š allowPublicKeyRetrieval=true
å¦åˆ™ Nacos åœ¨ MySQL 8 ä¸‹æ°¸è¿œæ— æ³•æ¡æ‰‹è®¤è¯ã€‚

ğŸ”§ ç»™ä½ å®Œæ•´çš„ custom.env ç‰ˆæœ¬ï¼ˆå¤åˆ¶è¦†ç›–å³å¯ï¼‰

è¯·è¿è¡Œï¼š

cat > ~/nacos-guestbook/custom.env <<'EOF'
SPRING_DATASOURCE_PLATFORM=mysql

db.num=1
db.url.0=jdbc:mysql://mysql-guestbook:3306/nacos?characterEncoding=utf8&useSSL=false&serverTimezone=UTC&allowPublicKeyRetrieval=true
db.user=root
db.password=123

MYSQL_SERVICE_HOST=mysql-guestbook
MYSQL_SERVICE_PORT=3306
MYSQL_SERVICE_DB_NAME=nacos
MYSQL_SERVICE_USER=root
MYSQL_SERVICE_PASSWORD=123
EOF


ç¡®è®¤ï¼š

cat ~/nacos-guestbook/custom.env

âœ” ç„¶åé‡å¯ Nacos å®¹å™¨
docker stop nacos-guestbook
docker rm nacos-guestbook


å†é‡æ–°è¿è¡Œï¼š

docker run -d \
  --name nacos-guestbook \
  --network guestbook-net \
  --env-file ~/nacos-guestbook/custom.env \
  -p 8849:8848 \
  -p 9860:9848 \
  -p 9861:9849 \
  --restart=always \
  nacos-registry.cn-hangzhou.cr.aliyuncs.com/nacos/nacos-server:v2.4.3


æŸ¥çœ‹æ—¥å¿—ï¼š

docker logs -f nacos-guestbook


ä½ å°†çœ‹åˆ°ï¼š

âœ” æˆåŠŸè¿æ¥ MySQL
âœ” ä¸å†å‡ºç° Public Key Retrieval is not allowed
âœ” å¯åŠ¨æˆåŠŸ
```



```
åˆ é™¤logæ–‡ä»¶



ğŸ§¨ äºŒã€ä½†æ—¥å¿—æ–‡ä»¶ä¼šæ— é™å˜å¤§ï¼ˆè¿™æ˜¯ä½ åº”è¯¥æ‹…å¿ƒçš„ï¼ï¼‰

ç‰¹åˆ«æ˜¯ Nacosï¼Œè¿™ç©æ„æ—¥å¿—ç–¯ç‹‚å†™ï¼Œå®¹æ˜“å†™åˆ°å‡  GBã€‚

ä½ å¯ä»¥æŸ¥çœ‹å®¹å™¨æ—¥å¿—æ–‡ä»¶å¤§å°ï¼š

docker ps -a
docker inspect --format='{{.LogPath}}' nacos-guestbook
ls -lh <ä¸Šé¢è¾“å‡ºçš„è·¯å¾„>


ä¸€èˆ¬è·¯å¾„å½¢å¦‚ï¼š

/var/lib/docker/containers/c6494cb933d0/c6494cb933d0-json.log

ğŸ§½ ä¸‰ã€å¦‚ä½•åˆ é™¤ï¼ˆæ¸…ç©ºï¼‰Docker å®¹å™¨æ—¥å¿—ï¼Ÿ

å¦‚æœä½ æ—¥å¿—å·²ç»å¾ˆå¤§ï¼Œå¯ä»¥ç›´æ¥æ¸…ç©ºï¼š

æ–¹æ³• 1ï¼šç›´æ¥ truncateï¼ˆä¸ä¼šå½±å“å®¹å™¨è¿è¡Œï¼‰
truncate -s 0 /var/lib/docker/containers/<ID>/<ID>-json.log


ä¾‹å­ï¼ˆæŒ‰ä½ çš„ nacos å®¹å™¨ IDï¼šc6494cb933d0ï¼‰ï¼š

truncate -s 0 /var/lib/docker/containers/c6494cb933d0/c6494cb933d0-json.log


æ‰§è¡Œåæ–‡ä»¶å¤§å°ç¬é—´å˜ä¸º 0ã€‚

ğŸ”’ å››ã€å¼ºçƒˆæ¨èï¼šé™åˆ¶ Docker æ—¥å¿—å¤§å°ï¼ˆæ°¸ä¹…è§£å†³ï¼‰

ä½ ä»¥åå¯åŠ¨å®¹å™¨æ—¶åº”è¯¥åŠ ä¸Š log-optï¼š

ä½ çš„ nacos run åº”è¯¥æ”¹æˆè¿™æ ·ï¼š
docker run -d \
--name nacos-guestbook \
--network guestbook-net \
--env-file ~/nacos-guestbook/custom.env \
-p 8849:8848 \
-p 9860:9848 \
-p 9861:9849 \
--log-driver=json-file \
--log-opt max-size=50m \
--log-opt max-file=3 \
--restart=always \
nacos-registry.cn-hangzhou.cr.aliyuncs.com/nacos/nacos-server:v2.4.3


å«ä¹‰ï¼š

max-size=50m â€”â€” å•ä¸ªæ—¥å¿—æ–‡ä»¶æœ€å¤š 50MB

max-file=3 â€”â€” æœ€å¤šä¿ç•™ 3 ä¸ªï¼ˆæ€»å…±æœ€å¤š 150MBï¼‰

è¶…è¿‡è‡ªåŠ¨è½®è½¬ï¼Œä¸ä¼šæ— é™å¢é•¿

ä½ çš„ mysql run ä¹Ÿåº”è¯¥è¿™æ ·ï¼š
docker run -d \
--name mysql-guestbook \
--network guestbook-net \
-p 3309:3306 \
-e MYSQL_ROOT_PASSWORD=123 \
-e TZ=Asia/Shanghai \
-v /opt/mysql-guestbook/data:/var/lib/mysql \
--log-driver=json-file \
--log-opt max-size=50m \
--log-opt max-file=3 \
--restart=always \
mysql:latest

ğŸ“Œ äº”ã€åˆ é™¤æ—§æ—¥å¿—æ³¨æ„äº‹é¡¹

å¦‚æœä½ ç›´æ¥åˆ é™¤æ•´ä¸ªæ–‡ä»¶å¤¹ï¼Œä¼šå¯¼è‡´å®¹å™¨è¯»ä¸åˆ°æ—¥å¿—æ–‡ä»¶ï¼Œç”šè‡³æŠ¥é”™ï¼Œå› æ­¤ åªèƒ½ truncateï¼Œä¸è¦ rmã€‚
```

```
-- æ’å…¥ç®¡ç†å‘˜è´¦å·
INSERT INTO master (username, password)
VALUES ('admin', '123456');

-- æ’å…¥ç”¨æˆ·ç•™è¨€
INSERT INTO user_msg (nickname, email, title, content)
VALUES
('Alice', 'alice@example.com', 'ç¬¬ä¸€æ¡ç•™è¨€', 'ä½ å¥½ï¼Œè¿™æ˜¯ä¸€æ¡æµ‹è¯•ç•™è¨€ï¼'),
('Bob', 'bob@example.com', 'ç¬¬äºŒæ¡ç•™è¨€', 'æˆ‘æ¥æµ‹è¯•ç•™è¨€åŠŸèƒ½~'),
('Charlie', 'charlie@example.com', 'ç¬¬ä¸‰æ¡ç•™è¨€', 'ä»Šå¤©å¿ƒæƒ…ä¸é”™å“ˆå“ˆ');

-- æ’å…¥ç®¡ç†å‘˜å¯¹ç•™è¨€çš„å›å¤
INSERT INTO admin_msg (user_msg_id, reply)
VALUES
(1, 'ä½ å¥½ Aliceï¼Œæˆ‘å·²ç»çœ‹åˆ°ä½ çš„ç•™è¨€äº†~'),
(2, 'Bobï¼Œä½ çš„ç•™è¨€å·²æ”¶åˆ°ï¼æˆ‘æ™šç‚¹å›å¤ä½ ~');

```







### 2. æŠ€æœ¯

#### 2.1 æŠ¥é”™â€œlambda è¡¨è¾¾å¼ä¸­ä½¿ç”¨çš„å˜é‡åº”ä¸º final æˆ–æœ‰æ•ˆ finalâ€

```
ä½ çš„ IDE æŠ¥ï¼š
â€œlambda è¡¨è¾¾å¼ä¸­ä½¿ç”¨çš„å˜é‡åº”ä¸º final æˆ–æœ‰æ•ˆ finalâ€

è¯´æ˜ ä½ åœ¨ lambda é‡Œé¢ä½¿ç”¨äº†ä¸€ä¸ªè¢«é‡æ–°èµ‹å€¼çš„å˜é‡ã€‚
å…·ä½“å°±æ˜¯è¿™ä¸ªï¼š

Map<Integer, List<String>> userMsgIdToRepliesMap = new HashMap<>();
...
userMsgIdToRepliesMap = adminMsgList.stream()
        .collect(...);


å› ä¸ºè¿™ä¸ªå˜é‡ åœ¨è¢« lambda ä½¿ç”¨ä¹‹å‰å·²ç»è¢«é‡æ–°èµ‹å€¼è¿‡ï¼Œå¤±å»äº† effectively final çš„ç‰¹æ€§ï¼Œæ‰€ä»¥æŠ¥é”™ã€‚

âš  Java è¯­æ³•è¦æ±‚ï¼š
åœ¨ lambda ä¸­ä½¿ç”¨çš„å±€éƒ¨å˜é‡å¿…é¡»æ˜¯ final æˆ– effectively finalï¼ˆåªèµ‹å€¼ä¸€æ¬¡ï¼‰ã€‚

âœ… è§£å†³æ–¹æ¡ˆï¼ˆå¿…é€‰ä¸€ç§ï¼‰
âœ… æ–¹æ¡ˆ 1ï¼šä¸è¦é‡æ–°èµ‹å€¼ï¼Œè€Œæ˜¯ .putAll()ï¼ˆæ¨èï¼‰

è¿™æ ·å˜é‡æ˜¯ effectively final çš„ï¼Œä¸ä¼šæŠ¥é”™ã€‚

æ›¿æ¢è¿™æ®µï¼š

userMsgIdToRepliesMap = adminMsgList.stream()
        .collect(Collectors.groupingBy(
                AdminMsg::getUserMsgId,
                HashMap::new,
                Collectors.mapping(AdminMsg::getReply, Collectors.toList())
        ));


ä¸º â¬‡â¬‡â¬‡

userMsgIdToRepliesMap.putAll(
        adminMsgList.stream()
                .collect(Collectors.groupingBy(
                        AdminMsg::getUserMsgId,
                        HashMap::new,
                        Collectors.mapping(AdminMsg::getReply, Collectors.toList())
                ))
);


âœ” ä¸å†é‡æ–°èµ‹å€¼
âœ” lambda è¡¨è¾¾å¼åˆæ³•
âœ” ä»£ç å®Œå…¨æ­£ç¡®
```















# å¾®æœåŠ¡

## 0.é‡è¦çŸ¥è¯†ç‚¹

### 1.å°æŠ€æœ¯

#### 1.1å°½é‡ä¸ç”¨@Autowired

```java
//åªæœ‰åŠ äº†finalçš„å±æ€§ï¼Œè°ƒç”¨æ„é€ æ–¹æ³•åˆ›å»ºè¯¥å±æ€§
@RequiredArgsConstructor
public class UserController {
    private final IUserService userService;
}

// ä¼ ç»Ÿå†™æ³•ï¼ˆéœ€è¦æ‰‹åŠ¨å†™æ„é€ æ–¹æ³•ï¼‰
@RestController
public class UserController {
    private final IUserService userService;
    
    public UserController(IUserService userService) {
        this.userService = userService;
    }
}
```

#### 1.2æ•°ç»„æ‹·è´

```java
BeanUtil.copyToList(users, UserVO.class)
```

#### 1.3 streamæµ

```java
List<Long> userIds = users.stream().map(User::getId).collect(Collectors.toList());



List<Address> addresses = Db.lambdaQuery(Address.class).in(Address::getUserId,userIds).list();


Map<Long, List<AddressVO>> addressMap = addressVOList.stream().collect(Collectors.groupingBy(AddressVO::getUserId));
```

#### 1.4 BeanUtil

```java
//å°†p.getRecords()çš„ç±»å‹å…¨éƒ¨è½¬æ¢ä¸ºUserVO
dto.setList(BeanUtil.copyToList(p.getRecords(), UserVO.class));
```

#### 1.5Pageåˆ†é¡µæ’ä»¶

```java
// 1.æ„å»ºåˆ†é¡µæ¡ä»¶
Page<User> page = Page.of(query.getPageNo(), query.getPageSize());

// 2.æ„å»ºæ’åºæ¡ä»¶
page.addOrder(new OrderItem().setColumn(query.getSortBy()).setAsc(query.getIsAsc()));

//æŸ¥æ‰¾å¹¶åˆ†å¥½é¡µ
Page<User> p = lambdaQuery()
            .like(name != null, User::getUsername, name)
            .eq(status != null, User::getStatus, status)
            .page(page);
```

#### 1.6 streamæµ

##### ä¸€ã€åˆ›å»ºstreamæµ



 ##### âš™ï¸ äºŒã€å¸¸è§çš„ä¸­é—´æ“ä½œï¼ˆå¯é“¾å¼ï¼‰

| æ“ä½œ                              | ä½œç”¨               | ç¤ºä¾‹                         |
| --------------------------------- | ------------------ | ---------------------------- |
| `filter(Predicate)`               | è¿‡æ»¤               | `.filter(x -> x > 10)`       |
| `map(Function)`                   | æ˜ å°„ï¼ˆè½¬æ¢ç±»å‹ï¼‰   | `.map(String::length)`       |
| `flatMap()`                       | æ‹å¹³åµŒå¥—æµ         | `.flatMap(List::stream)`     |
| `distinct()`                      | å»é‡               | `.distinct()`                |
| `sorted()` / `sorted(Comparator)` | æ’åº               | `.sorted()`                  |
| `limit(n)`                        | å–å‰ n ä¸ª          | `.limit(5)`                  |
| `skip(n)`                         | è·³è¿‡å‰ n ä¸ª        | `.skip(3)`                   |
| `peek()`                          | è°ƒè¯•ç”¨æŸ¥çœ‹ä¸­é—´ç»“æœ | `.peek(System.out::println)` |



 ##### ğŸ§® ä¸‰ã€æ”¶é›†å™¨ Collectors çš„ç”¨æ³•

`Collectors` æ˜¯ Stream çš„â€œç»ˆæ­¢æ“ä½œç¥å™¨â€ï¼Œç”¨æ¥æŠŠæµç»“æœæ”¶é›†æˆå„ç§å½¢å¼ã€‚

å¸¸è§ç”¨æ³•ï¼š

```
import java.util.*;
import java.util.stream.*;

public class CollectDemo {
    public static void main(String[] args) {
        List<String> names = List.of("Tom", "Jerry", "Bob", "Alice");

        // 1ï¸âƒ£ æ”¶é›†ä¸º List
        List<String> list = names.stream().toList();

        // 2ï¸âƒ£ æ”¶é›†ä¸º Set
        Set<String> set = names.stream().collect(Collectors.toSet());

        // 3ï¸âƒ£ æ‹¼æ¥æˆå­—ç¬¦ä¸²
        String joined = names.stream().collect(Collectors.joining(", "));
        System.out.println(joined); // Tom, Jerry, Bob, Alice

        // 4ï¸âƒ£ åˆ†ç»„
        Map<Integer, List<String>> grouped = names.stream()
            .collect(Collectors.groupingBy(String::length));
        System.out.println(grouped);

        // 5ï¸âƒ£ ç»Ÿè®¡
        long count = names.stream().collect(Collectors.counting());
        System.out.println(count);
    }
}
```

##### å››ã€.map()

**ğŸŒ± ä¸€ã€`map()` æ˜¯ä»€ä¹ˆï¼Ÿ**

`map()` æ˜¯ Java Stream é‡Œä¸€ä¸ª**ä¸­é—´æ“ä½œï¼ˆIntermediate Operationï¼‰**ã€‚
 å®ƒçš„ä½œç”¨æ˜¯ï¼š

> **æŠŠæµä¸­çš„æ¯ä¸ªå…ƒç´ ï¼ŒæŒ‰ç…§æŒ‡å®šçš„å‡½æ•°â€œæ˜ å°„ï¼ˆè½¬æ¢ï¼‰â€æˆå¦ä¸€ä¸ªå…ƒç´ ã€‚**

ğŸ‘‰ é€šä¿—ç‚¹è¯´ï¼š
 `map()` å°±åƒä¸€ä¸ªâ€œè½¬æ¢å™¨â€â€”â€”å®ƒä¼š**é€ä¸ªæ‹¿å‡ºå…ƒç´  â†’ è½¬æ¢ â†’ æ”¾è¿›æ–°çš„æµé‡Œ**ã€‚



```
List<Long> userIds = users.stream().map(User::getId).collect(Collectors.toList());
```

**ç¬¬äºŒæ­¥ï¼š`.map(User::getId)`**

è¿™ä¸€æ­¥æœ€å…³é”®ã€‚

- `User::getId` æ˜¯ä¸€ä¸ªæ–¹æ³•å¼•ç”¨ï¼ˆç­‰ä»·äº `u -> u.getId()`ï¼‰
- ä½œç”¨ï¼šæŠŠæ¯ä¸ª `User` å¯¹è±¡æ˜ å°„ä¸ºå®ƒçš„ `id`ã€‚

å¯ä»¥ç†è§£ä¸ºï¼š

| åŸå…ƒç´  (Userå¯¹è±¡) | è½¬æ¢å (Longç±»å‹) |
| ----------------- | ----------------- |
| User{id=1}        | 1L                |
| User{id=2}        | 2L                |

è¿™æ—¶æµçš„ç±»å‹ä» `Stream<User>` å˜æˆäº† `Stream<Long>`ã€‚

------

**ç¬¬ä¸‰æ­¥ï¼š`.collect(Collectors.toList())`**

`collect()` æ˜¯**ç»ˆæ­¢æ“ä½œ**ï¼ŒæŠŠæµé‡Œçš„å…ƒç´ é‡æ–°æ”¶é›†æˆä¸€ä¸ªå®¹å™¨ã€‚

- `Collectors.toList()` è¡¨ç¤ºæŠŠç»“æœæ”¶é›†åˆ°ä¸€ä¸ª `List` é‡Œã€‚
- æ‰€ä»¥æœ€ç»ˆè¿”å›ç±»å‹æ˜¯ `List<Long>`ã€‚



#### 1.7 å°†é›†åˆä¸­çš„å…ƒç´ ç”¨æŒ‡å®šçš„åˆ†éš”ç¬¦è¿æ¥æˆä¸€ä¸ªå­—ç¬¦ä¸²

```
CollUtil.join(itemIds, ",")
```

#### 1.8 sqlæ–‡ä»¶æ‰§è¡Œ

```
darkside@darkside-virtual-machine:~$ sudo cp /mnt/hgfs/D/ProjectData/hm-cart.sql /root/hm-cart.sql
darkside@darkside-virtual-machine:~$ sudo ls /root
Dockerfile  hm-cart.sql  hm-item.sql  hm-service.jar  mysql  nginx  snap
darkside@darkside-virtual-machine:~$ sudo docker cp /root/hm-cart.sql mysql:/docker-entrypoint-initdb.d/
Successfully copied 4.61kB to mysql:/docker-entrypoint-initdb.d/
darkside@darkside-virtual-machine:~$ docker exec -it mysql bash
bash-5.1# mysql -u root -p
Enter password: 
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 11
Server version: 9.4.0 MySQL Community Server - GPL

Copyright (c) 2000, 2025, Oracle and/or its affiliates.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

mysql> SOURCE /docker-entrypoint-initdb.d/hm-cart.sql;
```

#### 1.9 å¦‚ä½•åŒ¹é…å«æœ‰é€šé…ç¬¦çš„è·¯å¾„

å¦‚/items/**ï¼Œç”¨

```java
private final AntPathMatcher antPathMatcher = new AntPathMatcher();
```

#### 1.10 response.setComplete()

```java
response.setComplete()æ–¹æ³•çš„ä½œç”¨æ˜¯ç»“æŸå½“å‰HTTPè¯·æ±‚-å“åº”å‘¨æœŸï¼Œç«‹å³è¿”å›å“åº”ç»™å®¢æˆ·ç«¯ï¼Œä¸å†ç»§ç»­æ‰§è¡Œåç»­çš„è¿‡æ»¤å™¨é“¾ã€‚
```

#### 1.11 å‡ ç§å¸¸ç”¨æŠ€æœ¯(BeanUtil(s),stream,StrUtil)

**BeanUtils:**

```BeanUtils
BeanUtils.copyProperties(u, dto);
```



**BeanUtil:**

```BeanUtil
import cn.hutool.core.bean.BeanUtil;

List<User> users = List.of(new User("åˆ˜å¤‡", 35), new User("å¼ é£", 32));

// ä¸€è¡Œæå®š
List<UserDTO> dtos = BeanUtil.copyToList(users, UserDTO.class);

dtos.forEach(System.out::println);

```

**stream:**

```stream
List<UserDTO> dtos = users.stream()
    .map(user -> {
        UserDTO dto = new UserDTO();
        BeanUtils.copyProperties(user, dto);
        return dto;
    })
    .toList();

```

**StrUtil:**

**âœ¨ å¸¸ç”¨åŠŸèƒ½**

| åŠŸèƒ½           | æ–¹æ³•ç¤ºä¾‹                                | è¯´æ˜                     |
| -------------- | --------------------------------------- | ------------------------ |
| åˆ¤æ–­ç©ºç™½       | `StrUtil.isBlank(str)`                  | nullã€ç©ºä¸²ã€å…¨ç©ºæ ¼éƒ½ç®—ç©º |
| å»é™¤ç©ºç™½       | `StrUtil.trim(str)`                     | å»é™¤å‰åç©ºç™½             |
| åˆ†å‰²å­—ç¬¦ä¸²     | `StrUtil.split("a,b,c", ',')`           | åˆ†å‰²ä¸º List              |
| æ‹¼æ¥å­—ç¬¦ä¸²     | `StrUtil.join("-", "a", "b", "c")`      | a-b-c                    |
| é¦–å­—æ¯å¤§å°å†™   | `StrUtil.upperFirst("hello")`           | Hello                    |
| æ ¼å¼åŒ–         | `StrUtil.format("Hello, {}!", "åˆ˜å¤‡")`  | Hello, åˆ˜å¤‡!             |
| åè½¬           | `StrUtil.reverse("abc")`                | cba                      |
| åˆ¤ç­‰å¿½ç•¥å¤§å°å†™ | `StrUtil.equalsIgnoreCase("Abc","abc")` | true                     |



















### 2. é‡è¦çŸ¥è¯†ç‚¹

#### 2.1 MvcConfig

**MvcConfig ç±»çš„ä½œç”¨ä¸æ„ä¹‰**

`MvcConfig` æ˜¯ä¸€ä¸ª Spring MVC çš„é…ç½®ç±»ï¼Œå®ƒå®ç°äº† `WebMvcConfigurer` æ¥å£ï¼Œä¸»è¦è´Ÿè´£**é…ç½® Spring MVC çš„æ ¸å¿ƒç»„ä»¶**ï¼Œç‰¹åˆ«æ˜¯ç”¨äº**ç»Ÿä¸€ç®¡ç†å’Œé…ç½®æ‹¦æˆªå™¨**ã€‚

#### 2.2 å¾®æœåŠ¡è¿œç¨‹è°ƒç”¨

è°ƒç”¨ä¸åŒçš„æ¨¡å—å‘é€çš„æ˜¯httpè¯·æ±‚ï¼Œè°ƒç”¨çš„æ˜¯Controller

#### 2.3 OpenFeignå°±æ˜¯è½¬å‘

è¿™é‡Œæ˜¯æ ‡å¿—è½¬å‘åˆ°å“ªé‡Œï¼ˆæ‰€ä»¥é‚£ä¸ªè¢«è½¬å‘åˆ°çš„Controllerå¯¹åº”çš„æ–¹æ³•ä¸èƒ½çœï¼‰

![image-20251103191240192](../AppData/Roaming/Typora/typora-user-images/image-20251103191240192.png)

#### 2.4 ä¸åŒæ¨¡å—çš„è°ƒç”¨éœ€è¦OpenFeign

éœ€è¦å€Ÿç”¨Controllerè½¬å‘ï¼Œå¦åˆ™ä¸èƒ½ç›´æ¥ç”¨å¦ä¸€ä¸ªæ¨¡å—çš„Serviceç­‰ç­‰ã€‚

#### 2.5 yamlå’Œ@ConfigurationPropertieså…³ç³»

**`application.yml`**ï¼ˆæˆ– `.properties`ï¼‰æ˜¯ **é…ç½®æ–‡ä»¶**ï¼Œç”¨äºå­˜æ”¾å„ç§åº”ç”¨é…ç½®ï¼ˆå¦‚æ•°æ®åº“è¿æ¥ã€æœåŠ¡ç«¯å£ã€ç¬¬ä¸‰æ–¹æœåŠ¡å‚æ•°ç­‰ï¼‰ã€‚

**`@ConfigurationProperties`** æ˜¯ä¸€ä¸ª **æ³¨è§£**ï¼Œç”¨äº **è‡ªåŠ¨å°†é…ç½®æ–‡ä»¶ä¸­çš„å±æ€§æ˜ å°„åˆ° Java å¯¹è±¡ä¸­**ã€‚

#### 2.6 é…ç½®æ–‡ä»¶

`@Configuration`ï¼šè¯´æ˜è¿™ä¸ªç±»æ˜¯ä¸€ä¸ª Spring é…ç½®ç±»ï¼ˆç›¸å½“äº XML é…ç½®æ–‡ä»¶ï¼‰ã€‚

#### 2.7 å¾®æœåŠ¡é—´äº’ä¼ å…±æœ‰ä¿¡æ¯

ç½‘å…³è§£æåï¼Œå°†ä¿¡æ¯å­˜å…¥è¯·æ±‚å¤´

#### 2.8 å¾®æœåŠ¡æ¥æ”¶ä¿¡æ¯

æ¥2.7 ç„¶åæ‹¦æˆªå™¨æ¥æ‹¦æˆªï¼Œå­˜å…¥ThreadLocal

#### 2.9 SpringMVCå’ŒHandlerInterceptorå…³ç³»ä¸åŒºåˆ«

| æ¦‚å¿µ | å®šä¹‰ | å…³ç³» |
| ---- | ---- | ---- |
|      |      |      |

| **Spring MVC** | Spring æ¡†æ¶çš„ä¸€ä¸ªæ¨¡å—ï¼Œç”¨æ¥å®ç° Web åº”ç”¨çš„ **è¯·æ±‚åˆ†å‘ã€æ§åˆ¶å™¨è°ƒç”¨ã€è§†å›¾æ¸²æŸ“** ç­‰åŠŸèƒ½ã€‚ | å®ƒæ˜¯ä¸€ä¸ªå®Œæ•´çš„ **Web MVC æ¡†æ¶**ã€‚ |
| -------------- | ------------------------------------------------------------ | --------------------------------- |
|                |                                                              |                                   |

| **HandlerInterceptor** | Spring MVC æ¡†æ¶ä¸­çš„ä¸€ä¸ªæ¥å£ï¼Œç”¨æ¥åœ¨ **è¯·æ±‚è¢« Controller å¤„ç†å‰åè¿›è¡Œæ‹¦æˆªå’Œå¢å¼º**ã€‚ | å®ƒæ˜¯ **Spring MVC çš„ä¸€ä¸ªç»„ä»¶/æ‰©å±•ç‚¹**ã€‚ |
| ---------------------- | ------------------------------------------------------------ | --------------------------------------- |
|                        |                                                              |                                         |

#### 2.10 ä¸ºä»€ä¹ˆä¸€ä¸ªæ¨¡å—æ‰«æä¸åˆ°å¦ä¸€ä¸ªæ¨¡å—

![image-20251112114314493](../AppData/Roaming/Typora/typora-user-images/image-20251112114314493.png)

**âœ… åœºæ™¯ 1ï¼šåšä¸€ä¸ªâ€œå…¬å…±åŸºç¡€æ¨¡å—â€æˆ–â€œstarterâ€**

**è¿™æ˜¯æœ€å¸¸è§çš„ç”¨é€”ã€‚**

ä¾‹å¦‚ä½ å…¬å¸æœ‰å¤šä¸ªå¾®æœåŠ¡é¡¹ç›®ï¼š`order-service`ã€`user-service`ã€`pay-service`ã€‚
 å®ƒä»¬éƒ½éœ€è¦ï¼š

- MyBatis é…ç½®
- å…¨å±€ JSON åºåˆ—åŒ–è§„åˆ™
- è·¨åŸŸ / æ‹¦æˆªå™¨ / å…¨å±€å¼‚å¸¸å¤„ç†
- é€šç”¨æ—¥å¿—æˆ–ç›‘æ§

ä½ å¯ä»¥åœ¨ `hmall-common` æ¨¡å—é‡Œå†™è¿™äº›é…ç½®ç±»ï¼š

```
@Configuration
public class MyBatisConfig { ... }

@Configuration
public class JsonConfig { ... }

@Configuration
public class MvcConfig { ... }
```

ç„¶ååœ¨ `hmall-common` é‡Œæ”¾ï¼š

```
META-INF/spring/org.springframework.boot.autoconfigure.EnableAutoConfiguration=\
  com.hmall.common.config.MyBatisConfig,\
  com.hmall.common.config.JsonConfig,\
  com.hmall.common.config.MvcConfig
```

è¿™æ ·å…¶ä»–æ¨¡å—åªéœ€åœ¨ `pom.xml` å¼•å…¥ï¼š

```
<dependency>
    <groupId>com.hmall</groupId>
    <artifactId>hmall-common</artifactId>
</dependency>
```

Spring Boot å¯åŠ¨æ—¶è‡ªåŠ¨åŠ è½½è¿™äº›é…ç½®ç±»ï¼Œæ— éœ€å† `@Import` æˆ–ä¿®æ”¹æ‰«æåŒ…ã€‚
 ğŸ‘‰ è¿™å°±å®ç°äº†â€œ**å¼•å…¥ä¾èµ–å³è‡ªåŠ¨ç”Ÿæ•ˆ**â€ã€‚







**âœ… åœºæ™¯ 3ï¼šæ¨¡å—éš”ç¦»ä½†å¸Œæœ›å…±äº«é…ç½®**

ä¾‹å¦‚ä½ çš„é¡¹ç›®ç»“æ„ï¼š

```
hmall-gateway
hmall-order
hmall-common
hmall-security
```

- `hmall-security` æ¨¡å—å°è£…äº†å®‰å…¨è®¤è¯è¿‡æ»¤å™¨ï¼›
- å…¶ä»–æœåŠ¡åªè¦ä¾èµ– `hmall-security`ï¼›
- è‡ªåŠ¨å¯ç”¨è®¤è¯è¿‡æ»¤ã€‚

é‚£ä½ å°±å¯ä»¥åœ¨ `hmall-security` æ¨¡å—çš„èµ„æºç›®å½•æ”¾å…¥ï¼š

```
META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports
```

å†™ä¸Šï¼š

```
com.hmall.security.config.SecurityAutoConfiguration
```

è¿™æ ·æ¯ä¸ªæœåŠ¡å¯åŠ¨æ—¶éƒ½ä¼šè‡ªåŠ¨æ³¨å†Œå®‰å…¨è¿‡æ»¤å™¨ã€‚
 ğŸ§© å¥½å¤„ï¼šä¸ç”¨æ¯ä¸ªæœåŠ¡éƒ½å»å†™ `@Import(SecurityConfig.class)`ã€‚

#### 2.11 MyBatisPlusåº”ç”¨é¡»çŸ¥

1. MyBatis-Plusè™½ç„¶ä¸»è¦å…³æ³¨å•è¡¨æ“ä½œï¼Œä½†ä¹Ÿæä¾›äº†è”è¡¨æŸ¥è¯¢çš„æ–¹æ¡ˆ
2. å¯ä»¥é€šè¿‡è‡ªå®šä¹‰SQLã€ä½¿ç”¨Wrapperçš„joinæ–¹æ³•ã€æˆ–è€…ä½¿ç”¨æ³¨è§£æ–¹å¼å®ç°è”è¡¨æŸ¥è¯¢



**æœ€ä½³å®è·µå»ºè®®**ï¼š

1. åœ¨æ ‡å‡†çš„é¡¹ç›®å¼€å‘ä¸­ï¼Œä½ åº”è¯¥ä¼˜å…ˆä½¿ç”¨ **`IService`** å’Œ **`BaseMapper`** çš„ç»„åˆï¼Œè¿™ç¬¦åˆMVCåˆ†å±‚æ¶æ„ï¼Œä»£ç æ¸…æ™°ï¼Œæ˜“äºç»´æŠ¤å’Œæ‰©å±•ã€‚
2. **`Db`** å·¥å…·ç±»ä»…ä½œä¸ºè¾…åŠ©ï¼Œç”¨äºä¸€äº›éæ ¸å¿ƒçš„ã€ç®€å•çš„ã€æˆ–è€…å¯¹æ€§èƒ½æœ‰æè‡´è¦æ±‚ï¼ˆé¿å…ä»£ç†å¼€é”€ï¼‰çš„åœºæ™¯ï¼Œä½†è¦æ¸…æ¥šå…¶ç ´ååˆ†å±‚çš„ä»£ä»·ã€‚











## 1.åŸºç¡€

### 1.0 æŠ€æœ¯æ ˆ

![image-20251006191909673](../AppData/Roaming/Typora/typora-user-images/image-20251006191909673.png)

### 1.1 ç®€ä»‹

#### 1.å¾®æœåŠ¡ä»‹ç»

![image-20251006191550098](../AppData/Roaming/Typora/typora-user-images/image-20251006191550098.png)

![image-20251006191634918](../AppData/Roaming/Typora/typora-user-images/image-20251006191634918.png)

![image-20251006191649461](../AppData/Roaming/Typora/typora-user-images/image-20251006191649461.png)

#### 2.è®¤è¯†å¾®æœåŠ¡

##### 2.1 å¾®æœåŠ¡åŒºåˆ«

![image-20251006193203017](../AppData/Roaming/Typora/typora-user-images/image-20251006193203017.png)

åŒºåˆ«

![image-20251006193223895](../AppData/Roaming/Typora/typora-user-images/image-20251006193223895.png)

![image-20251006193259534](../AppData/Roaming/Typora/typora-user-images/image-20251006193259534.png)

##### 2.2 å¾®æœåŠ¡æŠ€æœ¯åŒºåˆ«

![image-20251006194149468](../AppData/Roaming/Typora/typora-user-images/image-20251006194149468.png)

### 1.2 MybatisPlus

#### å…¥é—¨

##### 1.æ“ä½œæ–¹æ³•

![image-20251006231603618](../AppData/Roaming/Typora/typora-user-images/image-20251006231603618.png)

##### 2.ä¸ºä»€ä¹ˆåŠæ³¨æ„äº‹é¡¹

![image-20251007095936808](../AppData/Roaming/Typora/typora-user-images/image-20251007095936808.png)

##### 3.æ³¨è§£åŠå…¶ä½œç”¨

**ç¬¬ä¸€ç‚¹ï¼šè¯·æ³¨æ„å¦‚æœè¦idè‡ªå¢ï¼Œä¸€å®šè¦åœ¨ä¸Šé¢å†™type= IdType.AUTO**

**ç¬¬äºŒç‚¹ï¼š** **ä½¿ç”¨@TableFieldåœºæ™¯**

- **æˆå‘˜å˜é‡åä¸æ•°æ®åº“å­—æ®µåä¸ä¸€è‡´**
- **æˆå‘˜å˜é‡åä»¥iså¼€å¤´ï¼Œä¸”æ˜¯å¸ƒå°”å€¼**
- **æˆå‘˜å˜é‡åä¸æ•°æ®åº“å…³é”®å­—å†²çª**
- **æˆå‘˜å˜é‡ä¸æ˜¯æ•°æ®åº“å­—æ®µ**



**ç¬¬ä¸‰ç‚¹ï¼šMPä¾æ®åå°„è·å–Userå­—èŠ‚ç ï¼Œä»è€Œè·å–å±æ€§ï¼Œç„¶åå†™æˆsql**



![image-20251007101003985](../AppData/Roaming/Typora/typora-user-images/image-20251007101003985.png)



##### 4.é…ç½®

````
# å¸¸è§é…ç½®

MyBatisPlusçš„é…ç½®é¡¹ç»§æ‰¿äº†MyBatisåŸç”Ÿé…ç½®å’Œä¸€äº›è‡ªå·±ç‰¹æœ‰çš„é…ç½®ã€‚ä¾‹å¦‚ï¼š

```yaml
mybatis-plus:
  type-aliases-package: com.itheima.mp.domain.po # åˆ«åæ‰«æåŒ…
  mapper-locations: "classpath*:/mapper/**/*.xml" # Mapper.xmlæ–‡ä»¶åœ°å€ï¼Œé»˜è®¤å€¼
  configuration:
    map-underscore-to-camel-case: true # æ˜¯å¦å¼€å¯ä¸‹åˆ’çº¿å’Œé©¼å³°çš„æ˜ å°„
    cache-enabled: false # æ˜¯å¦å¼€å¯äºŒçº§ç¼“å­˜
  global-config:
    db-config:
      id-type: assign_id # idä¸ºé›ªèŠ±ç®—æ³•ç”Ÿæˆ
      update-strategy: not_null # æ›´æ–°ç­–ç•¥ï¼šåªæ›´æ–°éç©ºå­—æ®µ
```
````



#### æ ¸å¿ƒåŠŸèƒ½

##### 1.æ¡ä»¶æ„é€ å™¨

```
# æ¡ä»¶æ„é€ å™¨çš„ç”¨æ³•

- QueryWrapperå’ŒLambdaQueryWrapperé€šå¸¸ç”¨æ¥æ„å»ºselectã€deleteã€updateçš„whereæ¡ä»¶éƒ¨åˆ†
- UpdateWrapperå’ŒLambdaUpdateWrapperé€šå¸¸åªæœ‰åœ¨setè¯­å¥æ¯”è¾ƒç‰¹æ®Šæ‰ä½¿ç”¨
- å°½é‡ä½¿ç”¨LambdaQueryWrapperå’ŒLambdaUpdateWrapperï¼Œé¿å…ç¡¬ç¼–ç 
```



ä»£ç ï¼š

```java
@Test
void testQueryWrapper() {
    // 1. æ„å»ºæŸ¥è¯¢æ¡ä»¶
    QueryWrapper<User> wrapper = new QueryWrapper<User>()
        .select("id", "username", "info", "balance")
        .like("username", "o")
        .ge("balance", 1000);
    // 2. æŸ¥è¯¢
    List<User> users = userMapper.selectList(wrapper);
    users.forEach(System.out::println);
}

@Test
void testLambdaQueryWrapper() {
    // 1. æ„å»ºæŸ¥è¯¢æ¡ä»¶
    LambdaQueryWrapper<User> wrapper = new LambdaQueryWrapper<User>()
        .select(User::getId, User::getUsername, User::getInfo, User::getBalance)
        .like(User::getUsername, "o")
        .ge(User::getBalance, 1000);
    // 2. æŸ¥è¯¢
    List<User> users = userMapper.selectList(wrapper);
    users.forEach(System.out::println);
}






//ä¸»è¦ç”¨äºselectå’Œç®€å•æ›´æ–°
@Test
void testUpdateByQueryWrapper() {
    // 1. è¦æ›´æ–°çš„æ•°æ®
    User user = new User();
    user.setBalance(2000);
    // 2. æ›´æ–°çš„æ¡ä»¶
    QueryWrapper<User> wrapper = new QueryWrapper<User>()
        .eq("username", "jack");
    // 3. æ‰§è¡Œæ›´æ–°
    userMapper.update(user, wrapper);
}

//æ¨èç”¨äºå¤æ‚æ›´æ–°
@Test
void testUpdateWrapper() {
    List<Long> ids = List.of(1L, 2L, 4L);
    UpdateWrapper<User> wrapper = new UpdateWrapper<User>()
        .setSql("balance = balance - 200")
        .in("id", ids);
    userMapper.update(null, wrapper);
}
```



##### 2.è‡ªå®šä¹‰sql

**è®©MPå¸®å¿™å†™sqlçš„whereæ¡ä»¶ï¼Œå‰é¢çš„è‡ªå·±å†™**

![image-20251007154423397](../AppData/Roaming/Typora/typora-user-images/image-20251007154423397.png)



##### 3.Iservice

![image-20251007161024016](../AppData/Roaming/Typora/typora-user-images/image-20251007161024016.png)

```java
public class UserServiceImpl extends ServiceImpl<UserMapper, User> implements UserService {
}
```



![image-20251007161048500](../AppData/Roaming/Typora/typora-user-images/image-20251007161048500.png)

````
# MPçš„Serviceæ¥å£ä½¿ç”¨æµç¨‹

## MyBatis-Plus Serviceæ¥å£ä½¿ç”¨æ­¥éª¤ï¼š

### 1. è‡ªå®šä¹‰Serviceæ¥å£ç»§æ‰¿IServiceæ¥å£

```java
public interface IUserService extends IService<User> {}
```

### 2. è‡ªå®šä¹‰Serviceå®ç°ç±»ï¼Œå®ç°è‡ªå®šä¹‰æ¥å£å¹¶ç»§æ‰¿ServiceImplç±»

```java
public class UserServiceImpl 
    extends ServiceImpl<UserMapper, User>
    implements IUserService {
}
```
````





##### 4.æ‰¹é‡æ’å…¥

ç¬¬ä¸€ç§æ–¹æ³•ï¼šæ¯æ¬¡å¾ªç¯æ’å…¥æ—¶éƒ½ä¼šå‘é€ç½‘ç»œè¯·æ±‚ï¼Œå¯¼è‡´æ—¶é—´æ…¢

ç¬¬äºŒç§æ–¹æ³•ï¼šæ’å…¥æ—¶è¿˜æ˜¯ä¸€æ¡æ¡sqlè¯­å¥æ’å…¥ï¼Œè™½ç„¶ç½‘ç»œè¯·æ±‚å‡å°‘ï¼Œä½†æ—¶é—´ä¸Šä»ä¸æ˜¯æœ€ä¼˜

ç¬¬ä¸‰ç§æ–¹æ³•ï¼šåªç”¨ä¸€æ¡sqlè¯­å¥ï¼Œæ—¶é—´æœ€ä¼˜

```
# IServiceæ‰¹é‡æ–°å¢

éœ€æ±‚ï¼šæ‰¹é‡æ’å…¥10ä¸‡æ¡ç”¨æˆ·æ•°æ®ï¼Œå¹¶ä½œå‡ºå¯¹æ¯”ï¼š

- æ™®é€šforå¾ªç¯æ’å…¥
- IServiceçš„æ‰¹é‡æ’å…¥
- å¼€å¯rewriteBatchedStatements=trueå‚æ•°

---

## æ‰¹å¤„ç†æ–¹æ¡ˆï¼š
- æ™®é€šforå¾ªç¯é€æ¡æ’å…¥é€Ÿåº¦æå·®ï¼Œä¸æ¨è
- MPçš„æ‰¹é‡æ–°å¢ï¼ŒåŸºäºé¢„ç¼–è¯‘çš„æ‰¹å¤„ç†ï¼Œæ€§èƒ½ä¸é”™
- é…ç½®jdbcå‚æ•°ï¼Œå¼€rewriteBatchedStatementsï¼Œæ€§èƒ½æœ€å¥½
```



##### 5.DBé™æ€å·¥å…·

**ä¸ºäº†è§£å†³æ³¨å…¥Serviceä¹‹é—´çš„ç›¸äº’è°ƒç”¨ï¼Œæ”¹ç”¨DBé™æ€å·¥å…·**

![image-20251009143340082](../AppData/Roaming/Typora/typora-user-images/image-20251009143340082.png)

##### 6. é€»è¾‘åˆ é™¤

![image-20251009213713151](../AppData/Roaming/Typora/typora-user-images/image-20251009213713151.png)

##### 7. æšä¸¾å¤„ç†å™¨

**ä½¿ç”¨åŸå› ï¼šä¸ºäº†è§£å†³Javaæšä¸¾ç±»å‹ä¸æ•°æ®åº“ç±»å‹çš„è½¬æ¢**

![image-20251009220106695](../AppData/Roaming/Typora/typora-user-images/image-20251009220106695.png)

![image-20251009220133074](../AppData/Roaming/Typora/typora-user-images/image-20251009220133074.png)

```java
@Getter
public enum UserStatus {
    NORMAL(1,"æ­£å¸¸"),
    FROZEN(2,"ç¦ç”¨")
    ;
    @EnumValue
    @JsonValue
    private final int value;
    private final String desc;

    UserStatus(int value, String desc) {
        this.value = value;
        this.desc = desc;
    }
}
```

![image-20251009224237035](../AppData/Roaming/Typora/typora-user-images/image-20251009224237035.png)

##### 8.JSONå¤„ç†å™¨

![image-20251010083627984](../AppData/Roaming/Typora/typora-user-images/image-20251010083627984.png)

##### 9.åˆ†é¡µæ’ä»¶

###### ç¬¬ä¸€æ­¥

![image-20251010091213242](../AppData/Roaming/Typora/typora-user-images/image-20251010091213242.png)

###### ç¬¬äºŒæ­¥

![image-20251010091512833](../AppData/Roaming/Typora/typora-user-images/image-20251010091512833.png)

###### ç¬¬ä¸‰æ­¥

![](../AppData/Roaming/Typora/typora-user-images/image-20251010091743429.png)

çœ‹çœ‹æ­¥éª¤

```java
int pageNo = 1, pageSize = 2;
// 1.å‡†å¤‡åˆ†é¡µæ¡ä»¶
// 1.1.åˆ†é¡µæ¡ä»¶
Page<User> page = Page.of(pageNo, pageSize);
// 1.2.æ’åºæ¡ä»¶
page.addOrder(OrderItem.asc("balance"));  // å‡åº
page.addOrder(OrderItem.desc("id"));      // é™åº

// 2.åˆ†é¡µæŸ¥è¯¢
Page<User> p = userService.page(page);

// 3.è§£æ
long total = p.getTotal();
System.out.println("total = " + total);
long pages = p.getPages();
System.out.println("pages = " + pages);
List<User> users = p.getRecords();
users.forEach(System.out::println);
```



### 1.3 docker

#### 1.å¿…é¡»çŸ¥é“çš„å‰æƒ…çŸ¥è¯†

##### çŸ¥è¯†

dockeré•œåƒå¯ä»¥å¿½ç•¥æ“ä½œç³»ç»Ÿç¯å¢ƒå’Œç³»ç»Ÿæœ¬èº«å·®å¼‚è€Œå»ç›´æ¥éƒ¨ç½²

dockeræ‹‰å–é•œåƒç›¸å½“äºæŠŠå®‰è£…å¥½çš„æ–‡ä»¶å…¨éƒ¨æ‹‰å–

å®¹å™¨æ¨¡æ‹Ÿäº†ä¸€ä¸ªç³»ç»Ÿè¿è¡Œç¯å¢ƒ

å®¹å™¨åªåŒ…å«äº†è¿è¡Œæ‰€å¿…éœ€çš„ç³»ç»ŸæŒ‡ä»¤ï¼Œå¹¶ä¸æ˜¯å…¨éƒ¨





##### ğŸ§± ä»€ä¹ˆæ˜¯é•œåƒå’Œå®¹å™¨

- **é•œåƒï¼ˆImageï¼‰** å°±åƒæ˜¯ä¸€ä¸ªã€Œç³»ç»Ÿæ¨¡æ¿ã€æˆ–ã€Œè½¯ä»¶å®‰è£…åŒ…ã€ã€‚
- **å®¹å™¨ï¼ˆContainerï¼‰** å°±æ˜¯åŸºäºè¿™ä¸ªæ¨¡æ¿å¯åŠ¨èµ·æ¥çš„ä¸€ä¸ªã€Œè¿è¡Œå®ä¾‹ã€ã€‚

> ç±»æ¯”å…³ç³»ï¼š
>
> ```
> é•œåƒï¼ˆImageï¼‰ â‰ˆ ç±»ï¼ˆClassï¼‰
> å®¹å™¨ï¼ˆContainerï¼‰ â‰ˆ å¯¹è±¡ï¼ˆObjectï¼‰
> ```

ä¹Ÿå°±æ˜¯è¯´ï¼š

- é•œåƒæ˜¯é™æ€çš„ï¼Œä¸ä¼šå˜åŒ–ï¼›
- å®¹å™¨æ˜¯åŠ¨æ€çš„ï¼Œè¿è¡Œæ—¶ä¼šè¯»å†™æ•°æ®ã€äº§ç”Ÿæ—¥å¿—ç­‰ã€‚

**é•œåƒå’Œå®¹å™¨ï¼š**

å½“æˆ‘ä»¬åˆ©ç”¨Dockerå®‰è£…åº”ç”¨æ—¶ï¼ŒDockerä¼šè‡ªåŠ¨æœç´¢å¹¶ä¸‹è½½åº”ç”¨é•œåƒï¼ˆimageï¼‰ã€‚é•œåƒä¸ä»…åŒ…å«åº”ç”¨æœ¬èº«ï¼Œè¿˜åŒ…å«åº”ç”¨è¿è¡Œæ‰€éœ€è¦çš„ç¯å¢ƒã€é…ç½®ã€ç³»ç»Ÿå‡½æ•°åº“ã€‚Dockerä¼šåœ¨è¿è¡Œé•œåƒæ—¶åˆ›å»ºä¸€ä¸ªéš”ç¦»ç¯å¢ƒï¼Œç§°ä¸ºå®¹å™¨ï¼ˆcontainerï¼‰ã€‚

**é•œåƒä»“åº“ï¼š** å­˜å‚¨å’Œç®¡ç†é•œåƒçš„å¹³å°ï¼ŒDockerå®˜æ–¹ç»´æŠ¤äº†ä¸€ä¸ªå…¬å…±ä»“åº“ï¼šDocker Hubã€‚



dockerçš„ç«¯å£æ˜¯å®¿ä¸»æœºç«¯å£æ˜ å°„åˆ°å®¹å™¨ç«¯å£

![image-20251011235429184](../AppData/Roaming/Typora/typora-user-images/image-20251011235429184.png)

![image-20251011235610194](../AppData/Roaming/Typora/typora-user-images/image-20251011235610194.png)





##### Linux

```
æ³¨æ„dockerå¯åŠ¨äº†mysqlä¹Ÿè¦è¾“å…¥docker exec -it mysql mysql -u root -pæ‰è¡Œ
å¦‚æœä½ åªæƒ³é€€å‡º MySQL äº¤äº’ç•Œé¢è€Œä¸å…³é—­æ•°æ®åº“ï¼Œå¯ä»¥ç”¨ä»¥ä¸‹å‘½ä»¤ï¼šexit;
show variables like 'character_set%';
sudo -i ä»darksideç”¨æˆ·è¿›å…¥rootç”¨æˆ·

vi /root/mysql/init/hmall.sql ä¿®æ”¹æ–‡ä»¶
sudo vi /etc/mysql/conf.d/hm.cnf å®¹å™¨å†…ä¿®æ”¹æ–‡ä»¶(æƒé™æ›´é«˜)

cd initç›¸å¯¹è·¯å¾„
cd /initç»å¯¹è·¯å¾„


//æŒ‚è½½å…±äº«æ–‡ä»¶å¤¹
sudo vmhgfs-fuse .host:/ /mnt/hgfs -o allow_other

//å¤åˆ¶æ–‡ä»¶åˆ°Ubuntu
sudo cp /mnt/hgfs/D/ideaProject/hmall/hm-service/Dockerfile /root/Dockerfile
//ä½ è¦å¤åˆ¶çš„æ˜¯ä¸€ä¸ªç›®å½•ï¼ˆ/mnt/hgfs/D/ideaproject/nginxï¼‰ï¼Œä½† cp é»˜è®¤åªå¤åˆ¶æ–‡ä»¶ï¼Œä¸ä¼šå¤åˆ¶ç›®å½•ï¼Œé™¤éä½ æ˜ç¡®å‘Šè¯‰å®ƒâ€œé€’å½’å¤åˆ¶æ•´ä¸ªç›®å½•â€ï¼ˆå³åŠ ä¸Š -rï¼‰
sudo cp -r /mnt/hgfs/D/ideaproject/nginx /root/nginx
sudo cp -r /mnt/hgfs/D/ProjectData/hm-trade.sql /root/hm-trade.sql
//å±•ç¤ºæœ‰å“ªäº›é•œåƒ
docker images

//æ˜¾ç¤ºipåœ°å€
ip addr show

//æŸ¥çœ‹æ—¥å¿—
docker logs -f nacos

//å¯åŠ¨nacosè¦å…ˆå¯åŠ¨mysqlï¼Œç„¶åå¦‚ä¸‹
docker run -d \
--name nacos \
--network hm-net \
--env-file ./nacos/custom.env \
-p 8848:8848 \
-p 9848:9848 \
-p 9849:9849 \
--restart=always \
nacos-registry.cn-hangzhou.cr.aliyuncs.com/nacos/nacos-server:v2.4.3


//å¯ç”¨ens33
sudo ip link set ens33 up
sudo dhclient ens33

ip addr show ens33

inet 192.168.1.xxx/24 brd 192.168.1.255 scope global dynamic ens33

```

##### âœ… **è¿›å…¥ MySQL å®¢æˆ·ç«¯åæ‰§è¡Œ SQLï¼ˆæ¨èï¼‰**

```
# 1. å¤åˆ¶ SQL æ–‡ä»¶åˆ°å®¹å™¨å†…
sudo docker cp /root/hm-user.sql mysql:/docker-entrypoint-initdb.d/

# 2. è¿›å…¥ MySQL å®¢æˆ·ç«¯
sudo docker exec -it hm-mysql mysql -u root -p

# 3. åœ¨ MySQL æç¤ºç¬¦ä¸‹æ‰§è¡Œå¯¼å…¥å‘½ä»¤ï¼ˆæ³¨æ„æ˜¯åœ¨ mysql> ä¸‹æ‰§è¡Œï¼‰
SOURCE /docker-entrypoint-initdb.d/hm-user.sql;



âœ… 1. æŠŠ SQL æ–‡ä»¶å¤åˆ¶åˆ° mysql-guestbook å®¹å™¨é‡Œ
sudo docker cp /root/guestBook.sql mysql-guestbook:/docker-entrypoint-initdb.d/

âœ… 2. è¿›å…¥å®¹å™¨ä¸­çš„ MySQL å®¢æˆ·ç«¯
sudo docker exec -it mysql-guestbook mysql -u root -p

âœ… 3. åœ¨ mysql> æç¤ºç¬¦ä¸­æ‰§è¡Œå¯¼å…¥

è¿™ä¸€æ­¥æ˜¯åœ¨ MySQL å†…éƒ¨æ‰§è¡Œï¼Œä¸æ˜¯åœ¨ Linux ç»ˆç«¯æ‰§è¡Œï¼

SOURCE /docker-entrypoint-initdb.d/guestBook.sql;


```

> ğŸ’¡ `SOURCE` æ˜¯ MySQL å®¢æˆ·ç«¯å‘½ä»¤ï¼Œåªèƒ½åœ¨ `mysql>` é‡Œæ‰§è¡Œã€‚



##### nacoså¯åŠ¨å¤±è´¥

------

###### âœ… **æ–¹æ¡ˆ 1ï¼šä½¿ç”¨ `--network host` å¯åŠ¨ Nacosï¼ˆæœ€ç®€å•ã€æœ€ç¨³å¦¥ï¼‰**

è¿™ä¼šè®© Nacos å®¹å™¨ç›´æ¥ä½¿ç”¨å®¿ä¸»æœºç½‘ç»œï¼Œç­‰ä»·äºåœ¨å®¿ä¸»æœºä¸Šè¿è¡Œã€‚

é‡æ–°è¿è¡Œï¼š

```
docker stop nacos
docker rm nacos
```

ç„¶åæ‰§è¡Œï¼š

```
docker run -d \
--name nacos \
--restart=always \
--network host \
-e MODE=standalone \
-e SPRING_DATASOURCE_PLATFORM=mysql \
-e MYSQL_SERVICE_HOST=127.0.0.1 \
-e MYSQL_SERVICE_PORT=3306 \
-e MYSQL_SERVICE_DB_NAME=nacos \
-e MYSQL_SERVICE_USER=root \
-e MYSQL_SERVICE_PASSWORD=123 \
-e MYSQL_SERVICE_DB_PARAM="characterEncoding=utf8&connectTimeout=1000&socketTimeout=3000&autoReconnect=true&useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=Asia/Shanghai" \
nacos/nacos-server:v2.1.0-slim
```

ğŸŸ¢ **è¯´æ˜ï¼š**

- `--network host` â†’ è®©å®¹å™¨ä¸å®¿ä¸»æœºå…±äº«ç½‘ç»œå †æ ˆï¼›
- `MYSQL_SERVICE_HOST=127.0.0.1` â†’ å› ä¸ºç°åœ¨å®¹å™¨é‡Œè®¿é—®å®¿ä¸»æœºç­‰äºè®¿é—®è‡ªå·±ã€‚

ç„¶åè®¿é—®ï¼š

```
http://192.168.100.130:8848/nacos
```

ç­‰å¾… 20â€“30 ç§’åï¼ŒNacos åº”è¯¥å¯ä»¥æ­£å¸¸å¯åŠ¨ âœ…ã€‚





#### 2.åŸºç¡€çŸ¥è¯†

Linuxç¯å¢ƒé‡Œæ–‡ä»¶å‘½ä»¤æ¨¡å¼ä¸èƒ½æ¢è¡Œï¼Œåªæœ‰è¿›å…¥ç¼–è¾‘æ¨¡å¼æ‰èƒ½ï¼ˆæŒ‰iè¿›å…¥ï¼‰

Linuxç¯å¢ƒé‡Œæ–‡ä»¶ç¼–è¾‘æ¨¡å¼ä¸èƒ½åˆ è¡Œï¼Œåªæœ‰è¿›å…¥å‘½ä»¤æ¨¡å¼æ‰èƒ½ï¼ˆæŒ‰ddåˆ é™¤ï¼‰



æŸ¥çœ‹é•œåƒ  docker images



##### dockerå¸¸è§å‘½ä»¤

```dockerfile

# å¯åŠ¨Docker
systemctl start docker

# åœæ­¢Docker
systemctl stop docker

# é‡å¯
systemctl restart docker

# è®¾ç½®å¼€æœºè‡ªå¯
systemctl enable docker

# æ‰§è¡Œdocker pså‘½ä»¤ï¼Œå¦‚æœä¸æŠ¥é”™ï¼Œè¯´æ˜å®‰è£…å¯åŠ¨æˆåŠŸ
docker ps
```

##### å¸¸è§å®¹å™¨å‘½ä»¤

```
docker run ä¸‹è½½é•œåƒå¹¶è¿è¡Œå®¹å™¨(æœ‰åˆ™ä¸ä¸‹ï¼Œæ— åˆ™ä¸‹è½½)
docker run -d --name nginx -p 80:80 -v html:/usr/share/nginx/html nginx æŒ‚è½½æ•°æ®å·å¹¶è¿è¡Œå®¹å™¨
docker stop åœæ­¢å®¹å™¨ï¼ˆåœæ­¢è¿›ç¨‹ï¼‰
docker start å¯åŠ¨å®¹å™¨
docker rm åˆ é™¤å®¹å™¨
docker exec è¿›å…¥å®¹å™¨å†…éƒ¨
docker ps -a æŸ¥çœ‹æ‰€æœ‰å®¹å™¨
docker inspect nginx æŸ¥çœ‹å®¹å™¨è¯¦ç»†ä¿¡æ¯

è¿›å…¥å®¹å™¨ï¼ˆè¿›å…¥ Nginx æˆ– MySQLï¼‰
docker exec -it nginx bash
docker exec -it mysql mysql -uroot -p

åˆ é™¤å®¹å™¨ï¼ˆæ™®é€šåˆ é™¤ä¸å¼ºåˆ¶åˆ é™¤ï¼‰
docker rm nginx
docker rm -f nginx


dockeræ–‡æ¡£åœ°å€ï¼šhttps://docs.docker.com/
dockeré•œåƒèµ„æ–™ï¼šhttps://hub.docker.com/
```

![image-20251012155412933](../AppData/Roaming/Typora/typora-user-images/image-20251012155412933.png)

##### 1. æ•°æ®å·æŒ‚è½½

###### ç®€ä»‹

æ•°æ®å·æ˜¯ä¸€ä¸ªè™šæ‹Ÿç›®å½•ï¼Œæ˜¯å®¹å™¨å†…ç›®å½•ä¸å®¿ä¸»æœºç›®å½•ä¹‹é—´æ˜ å°„çš„æ¡¥æ¢

![image-20251012213906453](../AppData/Roaming/Typora/typora-user-images/image-20251012213906453.png)

###### å‘½ä»¤åŠæ³¨æ„

```
æ•°æ®å·æ˜¯ä¸€ä¸ªè™šæ‹Ÿç›®å½•ï¼Œå®ƒå°†å®¿ä¸»æœºç›®å½•æ˜ å°„åˆ°å®¹å™¨å†…ç›®å½•ï¼Œæ–¹ä¾¿æˆ‘ä»¬æ“ä½œå®¹å™¨å†…æ–‡ä»¶ï¼Œæˆ–è€…æ–¹ä¾¿è¿ç§»å®¹å™¨äº§ç”Ÿçš„æ•°æ®

æ•°æ®å·æŒ‚è½½è¦ç‚¹
æŒ‚è½½è¯­æ³•ï¼šåœ¨æ‰§è¡Œ docker run å‘½ä»¤æ—¶ï¼Œä½¿ç”¨ -v æ•°æ®å·:å®¹å™¨å†…ç›®å½• å¯ä»¥å®Œæˆæ•°æ®å·æŒ‚è½½

è‡ªåŠ¨åˆ›å»ºï¼šå½“åˆ›å»ºå®¹å™¨æ—¶ï¼Œå¦‚æœæŒ‚è½½äº†æ•°æ®å·ä¸”æ•°æ®å·ä¸å­˜åœ¨ï¼ŒDocker ä¼šè‡ªåŠ¨åˆ›å»ºè¯¥æ•°æ®å·ï¼Œå½“å®¹å™¨å·²åˆ›å»ºåï¼Œä¸èƒ½æŒ‚è½½æ•°æ®å·


æ•°æ®å·ç®¡ç†å‘½ä»¤
å‘½ä»¤	è¯´æ˜
docker volume create	åˆ›å»ºæ•°æ®å·
docker volume ls	æŸ¥çœ‹æ‰€æœ‰æ•°æ®å·
docker volume rm	åˆ é™¤æŒ‡å®šæ•°æ®å·
docker volume inspect	æŸ¥çœ‹æŸä¸ªæ•°æ®å·çš„è¯¦æƒ…
docker volume prune	æ¸…é™¤æœªä½¿ç”¨çš„æ•°æ®å·
```

##### 2. ç›®å½•æŒ‚è½½

åŸºäºå®¿ä¸»æœºç›®å½•å®ç°MySQLæ•°æ®ç›®å½•ã€é…ç½®æ–‡ä»¶ã€åˆå§‹åŒ–è„šæœ¬çš„æŒ‚è½½

![image-20251012235619450](../AppData/Roaming/Typora/typora-user-images/image-20251012235619450.png)

```
æç¤º

- åœ¨æ‰§è¡Œdocker runå‘½ä»¤æ—¶ï¼Œä½¿ç”¨ -v æœ¬åœ°ç›®å½•ï¼šå®¹å™¨å†…ç›®å½• å¯ä»¥å®Œæˆæœ¬åœ°ç›®å½•æŒ‚è½½
- æœ¬åœ°ç›®å½•å¿…é¡»ä»¥ "/" æˆ– "./" å¼€å¤´ï¼Œå¦‚æœç›´æ¥ä»¥åç§°å¼€å¤´ï¼Œä¼šè¢«è¯†åˆ«ä¸ºæ•°æ®å·è€Œéæœ¬åœ°ç›®å½•
  -v mysql : /var/lib/mysql ä¼šè¢«è¯†åˆ«ä¸ºä¸€ä¸ªæ•°æ®å·å«mysql
  -v ./mysql : /var/lib/mysql ä¼šè¢«è¯†åˆ«ä¸ºå½“å‰ç›®å½•ä¸‹çš„mysqlç›®å½•
```

##### è‡ªå®šä¹‰é•œåƒ

é•œåƒå°±æ˜¯åŒ…å«äº†åº”ç”¨ç¨‹åºã€ç¨‹åºè¿è¡Œçš„ç³»ç»Ÿå‡½æ•°åº“ã€è¿è¡Œé…ç½®ç­‰æ–‡ä»¶çš„æ–‡ä»¶åŒ…ã€‚æ„å»ºé•œåƒçš„è¿‡ç¨‹å…¶å®å°±æ˜¯æŠŠä¸Šè¿°æ–‡ä»¶æ‰“åŒ…çš„è¿‡ç¨‹ã€‚

![image-20251013113522138](../AppData/Roaming/Typora/typora-user-images/image-20251013113522138.png)

###### é•œåƒç»“æ„

åˆ†å±‚ä¼˜ç‚¹ï¼š1.ç¬¬ä¸€æ¬¡æ‘˜å–ä¸Šä¼ åï¼Œå¯ä»¥ä¿ç•™ï¼Œä¸‹æ¬¡ç›´æ¥ç”¨

â€‹		   2.å¯ä»¥è‡ªåŠ¨å»é‡

![image-20251013115135706](../AppData/Roaming/Typora/typora-user-images/image-20251013115135706.png)

##### Dockerfile

Dockerfileå°±æ˜¯ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ªä¸ªçš„æŒ‡ä»¤(Instruction)ï¼Œç”¨æŒ‡ä»¤æ¥è¯´æ˜è¦æ‰§è¡Œä»€ä¹ˆæ“ä½œæ¥æ„å»ºé•œåƒã€‚å°†æ¥Dockerå¯ä»¥æ ¹æ®Dockerfileå¸®åŠ©æˆ‘ä»¬æ„å»ºé•œåƒã€‚å¸¸è§æŒ‡ä»¤å¦‚ä¸‹ï¼š

![image-20251013115743558](../AppData/Roaming/Typora/typora-user-images/image-20251013115743558.png)

![image-20251013121622497](../AppData/Roaming/Typora/typora-user-images/image-20251013121622497.png)



**è¿™é‡Œçš„   .    æ˜¯æŒ‡åœ¨è¯¥å‘½ä»¤åœ¨dockerfileå½“å‰ç›®å½•æ„é€ **

**è§£é‡Šå¦‚ä¸‹å›¾ï¼š**

![image-20251013220754273](../AppData/Roaming/Typora/typora-user-images/image-20251013220754273.png)

![image-20251013161052982](../AppData/Roaming/Typora/typora-user-images/image-20251013161052982.png)

##### ç½‘ç»œ

åŠ å…¥è‡ªå®šä¹‰ç½‘ç»œçš„å®¹å™¨æ‰å¯ä»¥é€šè¿‡å®¹å™¨åäº’ç›¸è®¿é—®

ä¸ºä»€ä¹ˆéœ€è¦è‡ªå®šä¹‰ç½‘ç»œï¼Ÿ---------å› ä¸ºéœ€è¦é€šè¿‡å®¹å™¨åäº’ç›¸è®¿é—®ï¼Œå¦åˆ™å°±åªèƒ½ç”¨ipåœ°å€(ä½†ipåœ°å€æ¯æ¬¡ç™»å½•è¿›å»å¯åŠ¨æ—¶ä¼šå˜)

![image-20251013165237689](../AppData/Roaming/Typora/typora-user-images/image-20251013165237689.png)

![image-20251013165742319](../AppData/Roaming/Typora/typora-user-images/image-20251013165742319.png)



### 1.4 DockerCompose

#### ç®€ä»‹

Docker Composeé€šè¿‡ä¸€ä¸ªå•ç‹¬çš„docker-compose.ymtl æ¨¡æ¿æ–‡ä»¶ (YAML æ ¼å¼) æ¥å®šä¹‰ä¸€ç»„ç›¸å…³è”çš„åº”ç”¨å®¹å™¨ï¼Œå¸®åŠ©æˆ‘ä»¬å®ç°å¤šä¸ªç›¸äº’å…³è”çš„Dockerå®¹å™¨çš„å¿«é€Ÿéƒ¨ç½²ã€‚

![image-20251013215955381](../AppData/Roaming/Typora/typora-user-images/image-20251013215955381.png)

#### å¸¸ç”¨å‘½ä»¤

![image-20251013221122017](../AppData/Roaming/Typora/typora-user-images/image-20251013221122017.png)



#### ä¸€ã€Docker Compose æ˜¯ä»€ä¹ˆï¼Ÿ

**Docker Compose** æ˜¯ä¸€ä¸ªç”¨äº **å®šä¹‰å’Œç®¡ç†å¤šå®¹å™¨åº”ç”¨** çš„å·¥å…·ã€‚
 å®ƒé€šè¿‡ä¸€ä¸ªç®€å•çš„ **YAML é…ç½®æ–‡ä»¶ï¼ˆé€šå¸¸å« `docker-compose.yml`ï¼‰** æ¥æè¿°åº”ç”¨ä¸­æ¯ä¸ªæœåŠ¡ï¼ˆå¦‚ Web æœåŠ¡ã€æ•°æ®åº“ã€ç¼“å­˜ã€æ¶ˆæ¯é˜Ÿåˆ—ç­‰ï¼‰åº”å¦‚ä½•è¿è¡Œã€‚

ç®€å•æ¥è¯´ï¼š

> å¦‚æœ Docker æ˜¯â€œä¸€ä¸ªå®¹å™¨ä¸€ä¸ªä¸–ç•Œâ€ï¼Œ
>  é‚£ Docker Compose å°±æ˜¯â€œè®©å¤šä¸ªä¸–ç•Œåä½œèµ·æ¥â€çš„æ€»æŒ‡æŒ¥ã€‚

------

#### äºŒã€å®ƒè§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ

##### âœ… 1. è§£å†³â€œå¤šå®¹å™¨ååŒâ€é—®é¢˜

åœ¨çœŸå®é¡¹ç›®ä¸­ï¼Œä¸€ä¸ªåº”ç”¨å¾€å¾€ä¸åªæ˜¯ä¸€ä¸ªå®¹å™¨ï¼š

- ä¾‹å¦‚ï¼Œä¸€ä¸ªç½‘ç«™å¯èƒ½åŒ…å«ï¼š
  - `web`ï¼ˆåç«¯æœåŠ¡ï¼‰
  - `db`ï¼ˆæ•°æ®åº“ï¼‰
  - `redis`ï¼ˆç¼“å­˜ï¼‰
  - `nginx`ï¼ˆåå‘ä»£ç†ï¼‰

å¦‚æœä½ åªç”¨ `docker run`ï¼Œè¦æ‰‹åŠ¨å¯åŠ¨ 4 ä¸ªå®¹å™¨ï¼Œè¿˜è¦è®¾ç½®ç½‘ç»œã€ä¾èµ–é¡ºåºã€æ•°æ®å·æ˜ å°„ç­‰ï¼Œéå¸¸éº»çƒ¦ã€‚

**Docker Compose åªéœ€è¦ä¸€ä¸ªå‘½ä»¤ï¼š**

```
docker-compose up
```

å°±èƒ½ä¸€é”®å¯åŠ¨æ‰€æœ‰æœåŠ¡ï¼Œå¹¶è‡ªåŠ¨å¤„ç†ç½‘ç»œã€ä¾èµ–å…³ç³»ã€ç«¯å£æ˜ å°„ç­‰ã€‚

------

##### âœ… 2. è§£å†³â€œç¯å¢ƒä¸€è‡´æ€§â€é—®é¢˜

å¼€å‘äººå‘˜å¸¸é‡åˆ°çš„é—®é¢˜æ˜¯ï¼š

> â€œæˆ‘è¿™è¾¹è¿è¡Œæ²¡é—®é¢˜ï¼Œä¸ºä»€ä¹ˆä½ é‚£è¾¹ä¸è¡Œï¼Ÿâ€

Compose æ–‡ä»¶ä¸­è®°å½•äº†æ¯ä¸ªå®¹å™¨çš„é•œåƒç‰ˆæœ¬ã€ä¾èµ–å…³ç³»ã€ç¯å¢ƒå˜é‡ã€å·æŒ‚è½½ç­‰ã€‚
 åªè¦åŒæ ·çš„ `docker-compose.yml` æ–‡ä»¶ï¼Œ**ä»»ä½•äººéƒ½èƒ½å¯åŠ¨å‡ºå®Œå…¨ä¸€è‡´çš„ç¯å¢ƒã€‚**

è¿™ä½¿å¾—ï¼š

- å¼€å‘ç¯å¢ƒã€æµ‹è¯•ç¯å¢ƒã€ç”Ÿäº§ç¯å¢ƒç»Ÿä¸€ï¼›
- å›¢é˜Ÿåä½œæ›´åŠ é¡ºç•…ï¼›
- CI/CD éƒ¨ç½²å˜å¾—æ›´ç®€å•ã€‚

------

##### âœ… 3. è§£å†³â€œå¤æ‚å‘½ä»¤éš¾è®°â€é—®é¢˜

å¯¹æ¯”ä¸€ä¸‹ğŸ‘‡

##### ä¸ç”¨ Composeï¼š

```
docker network create my-net
docker run -d --name db --network my-net -v db_data:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=123 mysql:8
docker run -d --name web --network my-net -p 8080:80 -v ./src:/app my-web-app
```

##### ç”¨ Composeï¼š

```
version: '3'
services:
  db:
    image: mysql:8
    environment:
      - MYSQL_ROOT_PASSWORD=123
    volumes:
      - db_data:/var/lib/mysql

  web:
    build: .
    ports:
      - "8080:80"
    depends_on:
      - db

volumes:
  db_data:
```

ç„¶ååªéœ€ï¼š

```
docker-compose up -d
```

æ˜¯ä¸æ˜¯ç®€æ´å¤šäº†ï¼ŸğŸ˜„



### 1.5 nacosç½‘é¡µç‰ˆä½¿ç”¨

#### âœ… **Nacos åˆ›å»º Namespace çš„ä½ç½®**

##### **1ï¸âƒ£ å·¦ä¾§èœå•æ‰¾åˆ°ï¼š`å‘½åç©ºé—´`**

åœ¨ Nacos 2.x ç‰ˆæœ¬ç•Œé¢ä¸­ï¼Œå·¦ä¾§èœå•é‡Œæœ‰ä¸€ä¸ªï¼š

```
å‘½åç©ºé—´
```

ä½ç½®å¤§æ¦‚åœ¨ï¼š

```
é…ç½®ç®¡ç†
å†å²ç‰ˆæœ¬
ç›‘å¬æŸ¥è¯¢
æœåŠ¡ç®¡ç†
â€¦â€¦
å‘½åç©ºé—´   â† å°±åœ¨è¿™é™„è¿‘
```

ç‚¹è¿›å»å³å¯ã€‚

------

#### âœ… **2ï¸âƒ£ ç‚¹å‡»å³ä¸Šè§’çš„ã€åˆ›å»ºå‘½åç©ºé—´ã€‘**

è¿›å»åï¼Œä½ ä¼šçœ‹åˆ°ä¸€ä¸ªåˆ—è¡¨ï¼Œç„¶åå³ä¸Šè§’ä¼šæœ‰ï¼š

```
+ åˆ›å»ºå‘½åç©ºé—´
```

ç‚¹å‡»åä½ éœ€è¦å¡«å†™ï¼š

- **å‘½åç©ºé—´åç§°**ï¼ˆå¦‚ï¼šmy-new-projectï¼‰
- **å‘½åç©ºé—´ ID**ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
- **æè¿°**ï¼ˆéšä¾¿å†™ï¼Œé¡¹ç›®ç”¨é€”ï¼‰

ç¡®è®¤å³å¯ã€‚

------

#### ğŸ“Œ åˆ›å»ºå¥½ä¹‹åä½ ä¼šçœ‹åˆ°ï¼š

ä½ æ–°å»ºçš„å‘½åç©ºé—´ä¼šå‡ºç°åœ¨åˆ—è¡¨ä¸­ï¼Œæ¯”å¦‚ï¼š

| å‘½åç©ºé—´ID | åç§°           | æè¿°       |
| ---------- | -------------- | ---------- |
| public     | å…¬å…±ç©ºé—´       | é»˜è®¤       |
| 873829â€¦    | my-new-project | æ–°é¡¹ç›®ç©ºé—´ |

------

#### ğŸ“ **3ï¸âƒ£ é¡¹ç›®è¦ä½¿ç”¨æ–°çš„ Namespaceï¼Œè¦åœ¨ bootstrap é…ç½®ä¸­æŒ‡å®š**

Spring Cloud Alibaba ä¾‹å­ï¼š

```
spring:
  cloud:
    nacos:
      config:
        namespace: my-new-project
      discovery:
        namespace: my-new-project
```



















## 2.å¾®æœåŠ¡çŸ¥è¯†

### 2.1 å‰æƒ…é¡»çŸ¥

#### æ‹†åˆ†åŸåˆ™

- åˆ›ä¸šå‹é¡¹ç›®ï¼šå…ˆé‡‡ç”¨å•ä½“æ¶æ„ï¼Œå¿«é€Ÿå¼€å‘ï¼Œå¿«é€Ÿè¯•é”™ã€‚éšç€è§„æ¨¡æ‰©å¤§ï¼Œé€æ¸æ‹†åˆ†ã€‚
- ç¡®å®šçš„å¤§å‹é¡¹ç›®ï¼šèµ„é‡‘å……è¶³ï¼Œç›®æ ‡æ˜ç¡®ï¼Œå¯ä»¥ç›´æ¥é€‰æ‹©å¾®æœåŠ¡æ¶æ„ï¼Œé¿å…åç»­æ‹†åˆ†çš„éº»çƒ¦ã€‚

**ä»æ‹†åˆ†ç›®æ ‡æ¥è¯´ï¼Œè¦åšåˆ°ï¼š**

- **é«˜å†…èš**ï¼šæ¯ä¸ªå¾®æœåŠ¡çš„èŒè´£è¦å°½é‡å•ä¸€ï¼ŒåŒ…å«çš„ä¸šåŠ¡ç›¸äº’å…³è”åº¦é«˜ã€å®Œæ•´åº¦é«˜ã€‚
- **ä½è€¦åˆ**ï¼šæ¯ä¸ªå¾®æœåŠ¡çš„åŠŸèƒ½è¦ç›¸å¯¹ç‹¬ç«‹ï¼Œå°½é‡å‡å°‘å¯¹å…¶å®ƒå¾®æœåŠ¡çš„ä¾èµ–ã€‚

**ä»æ‹†åˆ†æ–¹å¼æ¥è¯´ï¼Œä¸€èˆ¬åŒ…å«ä¸¤ç§æ–¹å¼ï¼š**

- çºµå‘æ‹†åˆ†ï¼šæŒ‰ç…§ä¸šåŠ¡æ¨¡å—æ¥æ‹†åˆ†
- æ¨ªå‘æ‹†åˆ†ï¼šæŠ½å–å…¬å…±æœåŠ¡ï¼Œæé«˜å¤ç”¨æ€§

#### å·¥ç¨‹ç»“æ„

##### æ–¹å¼ä¸€(ä¸å¸¸è§)

![image-20251018234817859](../AppData/Roaming/Typora/typora-user-images/image-20251018234817859.png)

##### æ–¹å¼äºŒ(æ¨è)

![image-20251018235055859](../AppData/Roaming/Typora/typora-user-images/image-20251018235055859.png)



#### å¦‚ä½•è”ç³»

å‡ºç°çš„é—®é¢˜

![image-20251019192338559](../AppData/Roaming/Typora/typora-user-images/image-20251019192338559.png)



![image-20251019192249166](../AppData/Roaming/Typora/typora-user-images/image-20251019192249166.png)

### 2.2 æœåŠ¡æ²»ç†

#### 1. nacos

##### 1.1 æ³¨å†Œä¸­å¿ƒåŸç†

![image-20251019204911746](../AppData/Roaming/Typora/typora-user-images/image-20251019204911746.png)

![image-20251019205051934](../AppData/Roaming/Typora/typora-user-images/image-20251019205051934.png)

##### 1.2 nacosçš„å¿…è¦æ€§

Nacos å…¨ç§° **â€œDynamic Naming and Configuration Serviceâ€**ï¼Œä¸­æ–‡å¯ä»¥ç†è§£ä¸ºâ€œåŠ¨æ€æœåŠ¡å‘ç°å’Œé…ç½®ç®¡ç†å¹³å°â€ã€‚å®ƒä¸»è¦è§£å†³ **åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„æœåŠ¡æ²»ç†é—®é¢˜**ï¼Œæ ¸å¿ƒåŠŸèƒ½æœ‰ï¼š

1. **æœåŠ¡å‘ç°ä¸æ³¨å†Œï¼ˆService Discoveryï¼‰**
   - å¾®æœåŠ¡ä¹‹é—´éœ€è¦ç›¸äº’è°ƒç”¨ï¼Œä½† IP åœ°å€å’Œç«¯å£å¯èƒ½æ˜¯åŠ¨æ€çš„ï¼ˆæ¯”å¦‚éƒ¨ç½²åœ¨å®¹å™¨é‡Œï¼‰ã€‚
   - Nacos æä¾›ä¸€ä¸ª**ä¸­å¿ƒæ³¨å†Œè¡¨**ï¼ŒæœåŠ¡å¯åŠ¨æ—¶æ³¨å†Œè‡ªå·±ï¼Œè°ƒç”¨æ–¹é€šè¿‡ Nacos æŸ¥è¯¢ç›®æ ‡æœåŠ¡åœ°å€ã€‚
   - ä½œç”¨ï¼šæ¶ˆé™¤äº†ç¡¬ç¼–ç  IPï¼Œæ”¯æŒåŠ¨æ€ä¼¸ç¼©ã€‚
2. **é…ç½®ç®¡ç†ï¼ˆConfiguration Managementï¼‰**
   - åˆ†å¸ƒå¼ç³»ç»Ÿé…ç½®å¤šï¼Œç¯å¢ƒå¤æ‚ï¼ˆå¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ï¼‰ã€‚
   - Nacos å¯ä»¥ç»Ÿä¸€ç®¡ç†é…ç½®ï¼Œæ”¯æŒ**åŠ¨æ€åˆ·æ–°**ã€‚
   - ä½œç”¨ï¼šæ— éœ€é‡å¯æœåŠ¡å°±èƒ½æ›´æ–°é…ç½®ï¼Œé™ä½è¿ç»´æˆæœ¬ã€‚
3. **æœåŠ¡å¥åº·ç›‘æ§ï¼ˆHealth Checkï¼‰**
   - Nacos èƒ½æ£€æµ‹æœåŠ¡æ˜¯å¦å¯ç”¨ï¼Œè‡ªåŠ¨å°†ä¸å¯ç”¨æœåŠ¡ä»åˆ—è¡¨ä¸­å‰”é™¤ã€‚
   - ä½œç”¨ï¼šæé«˜ç³»ç»Ÿå¯é æ€§å’Œå®¹é”™èƒ½åŠ›ã€‚
4. **åŠ¨æ€ DNS / æƒé™ç®¡ç†**
   - æ”¯æŒåŸŸåè§£æã€ç°åº¦å‘å¸ƒã€è®¿é—®æ§åˆ¶ç­‰é«˜çº§åŠŸèƒ½ã€‚



##### 1.3 æœåŠ¡æ³¨å†Œ

![image-20251021202048236](../AppData/Roaming/Typora/typora-user-images/image-20251021202048236.png)

##### 1.4 æœåŠ¡å‘ç°

![image-20251021215235647](../AppData/Roaming/Typora/typora-user-images/image-20251021215235647.png)



#### 2. OpenFeign

##### 2.1 ç®€ä»‹

`OpenFeign` æ˜¯ **Spring Cloud** æä¾›çš„ä¸€ä¸ª **å£°æ˜å¼ HTTP å®¢æˆ·ç«¯**ï¼Œå®ƒçš„ä½œç”¨æ˜¯è®©ä½ åœ¨ Java é‡Œåƒ **è°ƒç”¨æœ¬åœ°æ–¹æ³•ä¸€æ ·** è°ƒç”¨è¿œç¨‹æœåŠ¡ï¼ˆHTTP æ¥å£ï¼‰ã€‚

![image-20251024153448486](../AppData/Roaming/Typora/typora-user-images/image-20251024153448486.png)

**å¿…è¦å¼•ä»¥èµ–**

è°ƒç”¨æ–¹æ‰éœ€è¦å¼•ä»¥èµ–ï¼Œè¢«è°ƒç”¨æ–¹ä¸éœ€è¦

![image-20251024153534557](../AppData/Roaming/Typora/typora-user-images/image-20251024153534557.png)

**åç»­æ­¥éª¤**

![image-20251024154114243](../AppData/Roaming/Typora/typora-user-images/image-20251024154114243.png)



![image-20251025172024893](../AppData/Roaming/Typora/typora-user-images/image-20251025172024893.png)



##### 2.2 è¿æ¥æ± 

![image-20251024205438043](../AppData/Roaming/Typora/typora-user-images/image-20251024205438043.png)

##### 2.3 å¦‚ä½•æ›´å¥½åœ°æ“ä½œ

###### æ–¹æ¡ˆä¸€

å½“ä¸€ä¸ªæ–‡ä»¶å¤¹æœ‰å¤šä¸ªé¡¹ç›®æ—¶ï¼Œä¸€èˆ¬ç”¨ä¸€

![image-20251025101708869](../AppData/Roaming/Typora/typora-user-images/image-20251025101708869.png)

###### æ–¹æ¡ˆäºŒ

å½“ä¸€ä¸ªé¡¹ç›®å¯¹åº”å¤šä¸ªæ¨¡å—ï¼Œä¸€èˆ¬ç”¨æ–¹æ¡ˆäºŒ

![image-20251025101909821](../AppData/Roaming/Typora/typora-user-images/image-20251025101909821.png)

###### è§£å†³ï¼šæ‰«ä¸åˆ°åŒ…

![image-20251025104021896](../AppData/Roaming/Typora/typora-user-images/image-20251025104021896.png)

##### 2.4 æ—¥å¿—

![image-20251025113600746](../AppData/Roaming/Typora/typora-user-images/image-20251025113600746.png)



###### ç¬¬ä¸€ç§æ–¹æ³•

![image-20251025165133125](../AppData/Roaming/Typora/typora-user-images/image-20251025165133125.png)

###### ç¬¬äºŒç§æ–¹æ³•

![image-20251025165213546](../AppData/Roaming/Typora/typora-user-images/image-20251025165213546.png)



#### 3. ç½‘å…³

éé˜»å¡å¼ï¼Œå“åº”å¼ç¼–ç¨‹ï¼ŒåŸºäºwebfluxï¼Œä¸åŸºäºspringMvc

##### 3.0 æ•´ä½“æ€è·¯ï¼ˆéå¸¸é‡è¦ï¼‰

![image-20251113160952022](../AppData/Roaming/Typora/typora-user-images/image-20251113160952022.png)

##### 3.1 ç®€ä»‹

è·¯ç”±ï¼šæ ¹æ®è¯·æ±‚åˆ¤æ–­ç”¨å“ªä¸ªå¾®æœåŠ¡å¤„ç†

ç½‘å…³æ ¸å¿ƒå¹²çš„äº‹ï¼šç”¨å“ªä¸ªå¾®æœåŠ¡å¤„ç†è¯·æ±‚

![image-20251104201204227](../AppData/Roaming/Typora/typora-user-images/image-20251104201204227.png)

![image-20251104201743158](../AppData/Roaming/Typora/typora-user-images/image-20251104201743158.png)

##### 3.2 æ“ä½œ

ç½‘å…³è‡ªåŠ¨å¸®å¿™è´Ÿè½½å‡è¡¡

![image-20251104204121534](../AppData/Roaming/Typora/typora-user-images/image-20251104204121534.png)

##### 3.3 å±æ€§

```
è·¯ç”±å±æ€§

ç½‘å…³è·¯ç”± å¯¹åº”çš„ Java ç±»å‹æ˜¯ RouteDefinitionï¼Œå…¶ä¸­å¸¸è§çš„å±æ€§æœ‰ï¼š

- idï¼šè·¯ç”±å”¯ä¸€æ ‡ç¤º  
- urlï¼šè·¯ç”±ç›®æ ‡åœ°å€  
- predicatesï¼šè·¯ç”±æ–­è¨€ï¼Œåˆ¤æ–­è¯·æ±‚æ˜¯å¦ç¬¦åˆå½“å‰è·¯ç”±ã€‚  
- filtersï¼šè·¯ç”±è¿‡æ»¤å™¨ï¼Œå¯¹è¯·æ±‚æˆ–å“åº”åšç‰¹æ®Šå¤„ç†ã€‚

é…ç½®åœ¨routeså¤–ï¼Œdefault-filters:å¯¹æ‰€æœ‰ç½‘å€éƒ½æœ‰ç”¨
```

![image-20251106203540208](../AppData/Roaming/Typora/typora-user-images/image-20251106203540208.png)

![image-20251106203928923](../AppData/Roaming/Typora/typora-user-images/image-20251106203928923.png)

##### 3.4 ç½‘å…³è¯·æ±‚å¤„ç†æµç¨‹

![image-20251106213037351](../AppData/Roaming/Typora/typora-user-images/image-20251106213037351.png)

###### 1.ä¸€äº›é—®é¢˜

![image-20251106213332233](../AppData/Roaming/Typora/typora-user-images/image-20251106213332233.png)

###### 2. è‡ªå®šä¹‰è¿‡æ»¤å™¨

![image-20251106213845612](../AppData/Roaming/Typora/typora-user-images/image-20251106213845612.png)



![image-20251106214611079](../AppData/Roaming/Typora/typora-user-images/image-20251106214611079.png)



##### 3.5 ç½‘å…³ä¼ é€’ä¿¡æ¯

![image-20251111225009073](../AppData/Roaming/Typora/typora-user-images/image-20251111225009073.png)

![image-20251111231630151](../AppData/Roaming/Typora/typora-user-images/image-20251111231630151.png)

**å¦‚ä½•å°‘äº›æ‹¦æˆªå™¨æ–¹æ³•ï¼š**

![image-20251112000943208](../AppData/Roaming/Typora/typora-user-images/image-20251112000943208.png)

##### 3.6 OpenFeignä¼ é€’ç”¨æˆ·ä¿¡æ¯

![image-20251112162646273](../AppData/Roaming/Typora/typora-user-images/image-20251112162646273.png)

###### ğŸ§© 1. æ‹¦æˆªå™¨ç”Ÿæ•ˆèŒƒå›´ï¼šä»…å¯¹å½“å‰æœåŠ¡

å‡è®¾æ¶æ„å¦‚ä¸‹ï¼š

```
ç”¨æˆ· -> ç½‘å…³ -> å¾®æœåŠ¡A -> å¾®æœåŠ¡B
```

**æƒ…å†µ 1ï¸âƒ£ï¼šç”¨æˆ·è¯·æ±‚åˆ°â€œç½‘å…³â€**

- æ‹¦æˆªå™¨åœ¨ **ç½‘å…³çš„ SpringMVC å±‚ç”Ÿæ•ˆ**ã€‚
- è¿™æ—¶çš„ ThreadLocal åªå±äº **ç½‘å…³ JVM**ã€‚

**æƒ…å†µ 2ï¸âƒ£ï¼šç½‘å…³è½¬å‘åˆ°â€œå¾®æœåŠ¡Aâ€**

- ç½‘å…³å°†è¯·æ±‚è½¬å‘å‡ºå»ï¼ˆä¸€èˆ¬å¸¦ç€ HTTP Headerï¼‰ã€‚
- **å¾®æœåŠ¡A** æ”¶åˆ°è¯·æ±‚æ—¶ï¼Œä¼šé‡æ–°èµ°å®ƒè‡ªå·±çš„ DispatcherServletã€è‡ªå·±çš„æ‹¦æˆªå™¨ã€‚
- å¾®æœåŠ¡A çš„ `UserInfoInterceptor` ä¼šä»è¯·æ±‚å¤´é‡Œå†å–ä¸€æ¬¡ `userInfo`ã€‚

ğŸ‘‰ æ‰€ä»¥ï¼š

> å¾®æœåŠ¡A è‡ªå·±é‡æ–°åˆ›å»ºäº†ä¸€ä¸ª ThreadLocal å®ä¾‹ï¼Œå­˜çš„æ˜¯åŒä¸€ä¸ªç”¨æˆ·ä¿¡æ¯ï¼Œä½† **ä¸æ˜¯åŒä¸€ä¸ª ThreadLocal å¯¹è±¡ï¼ˆä¹Ÿä¸æ˜¯åŒä¸€ä¸ªçº¿ç¨‹ï¼‰**ã€‚

**æƒ…å†µ 3ï¸âƒ£ï¼šå¾®æœåŠ¡A å†è°ƒç”¨ å¾®æœåŠ¡B**

- ä¸€èˆ¬æ˜¯ç”¨ Feign æˆ– RestTemplate è°ƒç”¨ã€‚
- è¿™æ—¶ ThreadLocal ä¸­çš„å€¼ä¸ä¼šè‡ªåŠ¨ä¼ è¿‡å»ï¼Œå› ä¸ºè·¨äº†è¿›ç¨‹ï¼ˆHTTP è°ƒç”¨ï¼‰ã€‚
- **å¦‚æœä½ ä¸æ‰‹åŠ¨ä¼  Header**ï¼Œå¾®æœåŠ¡B æ”¶åˆ°çš„è¯·æ±‚é‡Œå°±æ²¡ `userInfo`ï¼Œæ‹¦æˆªå™¨è‡ªç„¶å–ä¸åˆ°ã€‚

###### 2. å…³ç³»

| å±‚çº§    | ThreadLocal å­˜æ”¾ä½ç½® | å€¼çš„æ¥æº                 | æœ‰æ•ˆèŒƒå›´           |
| ------- | -------------------- | ------------------------ | ------------------ |
| ç½‘å…³    | ç½‘å…³è‡ªå·±çš„ JVM çº¿ç¨‹  | æ¥è‡ªå‰ç«¯è¯·æ±‚å¤´           | ä»…åœ¨ç½‘å…³å†…ç”Ÿæ•ˆ     |
| å¾®æœåŠ¡A | å¾®æœåŠ¡A çš„çº¿ç¨‹       | æ¥è‡ªç½‘å…³è½¬å‘çš„ Header    | ä»…åœ¨å¾®æœåŠ¡A å†…ç”Ÿæ•ˆ |
| å¾®æœåŠ¡B | å¾®æœåŠ¡B çš„çº¿ç¨‹       | æ¥è‡ªAè°ƒç”¨æ—¶ä¼ é€’çš„ Header | ä»…åœ¨å¾®æœåŠ¡B å†…ç”Ÿæ•ˆ |

**æ²¡æœ‰ä»»ä½•å±‚èƒ½ç›´æ¥è®¿é—®å¦ä¸€å±‚çš„ ThreadLocalã€‚**
 ä½ åªèƒ½é€šè¿‡ **HTTP Header æ˜¾å¼ä¼ é€’**è¿™äº›ä¿¡æ¯ã€‚



###### ğŸ§© 3. HTTP è¯·æ±‚æ˜¯ä»€ä¹ˆï¼Ÿ

å½“æµè§ˆå™¨æˆ–å®¢æˆ·ç«¯å‘èµ·ä¸€ä¸ª HTTP è¯·æ±‚ï¼ˆæ¯”å¦‚è®¿é—® `/user/info`ï¼‰æ—¶ï¼ŒæœåŠ¡å™¨ç«¯ï¼ˆæ¯”å¦‚ Spring Bootï¼‰ä¼šï¼š

1. æ”¶åˆ°ä¸€ä¸ª **TCP è¿æ¥**ï¼›
2. è§£æå‡º **HTTP è¯·æ±‚æŠ¥æ–‡ï¼ˆHeader + Bodyï¼‰**ï¼›
3. ç„¶åäº¤ç»™ **åº”ç”¨ç¨‹åºçº¿ç¨‹** å»å¤„ç†ï¼›
4. å¤„ç†å®Œåï¼ŒæŠŠå“åº”å†é€šè¿‡è¿™ä¸ªè¿æ¥è¿”å›ç»™å®¢æˆ·ç«¯ã€‚

è¿™æ„å‘³ç€ï¼š

> æ¯ä¸€ä¸ªã€Œè¢«æœåŠ¡å™¨æ¥æ”¶çš„ HTTP è¯·æ±‚ã€ï¼Œéƒ½è¦ç”±**è‡³å°‘ä¸€ä¸ªçº¿ç¨‹**æ¥è´Ÿè´£å¤„ç†å®ƒã€‚

------

###### ğŸ§  4. çº¿ç¨‹ä¸è¯·æ±‚çš„å…³ç³»

| æ¦‚å¿µ         | ç®€è¦è¯´æ˜                                         |
| ------------ | ------------------------------------------------ |
| **HTTPè¯·æ±‚** | å®¢æˆ·ç«¯å‘ç»™æœåŠ¡å™¨çš„ä¸€æ¬¡æ“ä½œï¼ˆä¾‹å¦‚ï¼šè·å–ç”¨æˆ·ä¿¡æ¯ï¼‰ |
| **çº¿ç¨‹**     | æœåŠ¡å™¨ç”¨æ¥â€œæ‰§è¡Œä»£ç â€çš„æ‰§è¡Œå•å…ƒ                   |
| **å…³ç³»**     | æœåŠ¡å™¨é€šå¸¸ç”¨ä¸€ä¸ªçº¿ç¨‹æ¥å¤„ç†ä¸€ä¸ªè¯·æ±‚               |

ä¹Ÿå°±æ˜¯è¯´ï¼š

> **ä¸€ä¸ªHTTPè¯·æ±‚ â‰ˆ è¢«ä¸€ä¸ªçº¿ç¨‹å¤„ç†ä¸€æ¬¡**

###### 5. è§£å†³åŠæ³•

![image-20251113151547678](../AppData/Roaming/Typora/typora-user-images/image-20251113151547678.png)

#### 4. é…ç½®ç®¡ç†

##### 4.1 é—®é¢˜

1. é…ç½®æ–‡ä»¶å¤ªå¤š
2. é…ç½®æ›´æ–°åè¦é‡å¯

![image-20251113213319849](../AppData/Roaming/Typora/typora-user-images/image-20251113213319849.png)

##### 4.2 è§£å†³

nacos

![image-20251113213541145](../AppData/Roaming/Typora/typora-user-images/image-20251113213541145.png)

##### 4.3 å…±äº«é…ç½®å¦‚ä½•æ“ä½œ

1. å…ˆåœ¨nacosä¸Šæ³¨å†Œæ–‡ä»¶
2. å…ˆäº†è§£ä¸€ä¸‹æ­¥éª¤![image-20251113224621949](../AppData/Roaming/Typora/typora-user-images/image-20251113224621949.png)

![image-20251113224827577](../AppData/Roaming/Typora/typora-user-images/image-20251113224827577.png)

![image-20251113224956834](../AppData/Roaming/Typora/typora-user-images/image-20251113224956834.png)

##### 4.4 çƒ­æ›´æ–°æ€ä¹ˆé…ç½®

![image-20251114172355871](../AppData/Roaming/Typora/typora-user-images/image-20251114172355871.png)



#### 5. åŠ¨æ€è·¯ç”±

##### 5.1 é¢ä¸´çš„é—®é¢˜åŠä»»åŠ¡

è·¯ç”±æ”¹å˜äº†åªèƒ½é‡å¯çš„è¯ï¼Œéå¸¸éº»çƒ¦ï¼Œæ‰€ä»¥ç”¨åŠ¨æ€è·¯ç”±

![image-20251115111209246](../AppData/Roaming/Typora/typora-user-images/image-20251115111209246.png)

##### 5.2 ä»£ç 

```java
@Slf4j
@Component
@RequiredArgsConstructor
public class DynamicRouteLoader {
    private final NacosConfigManager nacosConfigManager;
    private final RouteDefinitionWriter routeDefinitionWriter;
    private final Set<String> routeIds = new HashSet<>();
    private final String dataId = "gateway-routes.json";
    private final String group = "DEFAULT_GROUP";

    @PostConstruct
    public void initRouteConfigListener() throws NacosException {
        String configInfo = nacosConfigManager.getConfigService()
                .getConfigAndSignListener(dataId, group, 5000, new Listener() {
                    @Override
                    public Executor getExecutor() {
                        return null;
                    }

                    @Override
                    public void receiveConfigInfo(String s) {

                    }
                });
        updateConfigInfo(configInfo);
    }
    public  void updateConfigInfo(String configInfo){
        log.info("æ›´æ–°è·¯ç”±é…ç½®:{}", configInfo);
        List<RouteDefinition> list = JSONUtil.toList(configInfo, RouteDefinition.class);
        for (String routeId : routeIds) {
            routeDefinitionWriter.delete(Mono.just(routeId)).subscribe();
        }
        routeIds.clear();
        for(RouteDefinition routeDefinition : list){
            routeDefinitionWriter.save(Mono.just(routeDefinition)).subscribe();
            routeIds.add(routeDefinition.getId());
        }
    }
}
```

![image-20251115120111113](../AppData/Roaming/Typora/typora-user-images/image-20251115120111113.png)

![image-20251115120523245](../AppData/Roaming/Typora/typora-user-images/image-20251115120523245.png)

























# å¤§æ¨¡å‹çŸ¥è¯†

## 1.åŸºç¡€çŸ¥è¯†

### 1.1å¤§æ¨¡å‹å¼€å‘

#### 1. MoEæ¨¡å‹ï¼ˆMixture of Expertsï¼Œæ··åˆä¸“å®¶æ¨¡å‹ï¼‰

**å®šä¹‰**ï¼š
 MoE æ˜¯ä¸€ç§è®©æ¨¡å‹åœ¨æ¨ç†æ—¶â€œåªç”¨éƒ¨åˆ†å‚æ•°â€çš„æ¶æ„ã€‚
 å®ƒåŒ…å«å¤šä¸ªâ€œä¸“å®¶ï¼ˆexpertï¼‰â€å­æ¨¡å‹ï¼Œä½†æ¯æ¬¡è¾“å…¥æ•°æ®æ—¶ï¼Œåªä¼šæ¿€æ´»å…¶ä¸­ä¸€å°éƒ¨åˆ†ï¼ˆä¾‹å¦‚ 2ï½4 ä¸ªä¸“å®¶ï¼‰ã€‚

**ä½œç”¨**ï¼š

- èŠ‚çœè®¡ç®—èµ„æºï¼šä¸ç”¨æ¯æ¬¡éƒ½ç®—å®Œå…¨éƒ¨å‚æ•°ã€‚
- ä¿æŒæ¨¡å‹å®¹é‡å¤§ï¼šè™½ç„¶æ•´ä½“æœ‰ä¸Šåƒäº¿å‚æ•°ï¼Œä½†æ¯æ¬¡æ¨ç†åªç”¨å‡ åäº¿ã€‚





#### 2.å¤§æ¨¡å‹å¾®è°ƒæ‰€éœ€æ˜¾å­˜ä¼°è®¡

**æ€»ç»“ä¸æ˜¾å­˜ä¼°ç®—å…¬å¼**

å¯¹äºä¸€ä¸ªä½¿ç”¨ **AdamW** ä¼˜åŒ–å™¨è¿›è¡Œå…¨å‚æ•°å¾®è°ƒçš„åœºæ™¯ï¼Œæ˜¾å­˜å ç”¨ä¸»è¦æ¥è‡ªå››éƒ¨åˆ†ï¼š

1. **æ¨¡å‹å‚æ•°**ï¼š `å‚æ•°é‡ Ã— 2` å­—èŠ‚ (16-bit)
2. **æ¢¯åº¦**ï¼š `å‚æ•°é‡ Ã— 2` å­—èŠ‚ (16-bit)
3. **ä¼˜åŒ–å™¨çŠ¶æ€**ï¼š `å‚æ•°é‡ Ã— 8` å­—èŠ‚ (ä¸¤ä¸ª32-bitçŠ¶æ€ï¼Œå„å 4å­—èŠ‚)
4. **æ¿€æ´»å€¼**ï¼š `çº¦ç­‰äº å‚æ•°é‡ Ã— 2` å­—èŠ‚ (16-bitï¼Œæ˜¯ä¸€ä¸ªä¼°è®¡å€¼)

**ç²—ç•¥æ€»æ˜¾å­˜ä¼°ç®—ï¼ˆå­—èŠ‚ï¼‰** â‰ˆ `å‚æ•°é‡ Ã— (2 + 2 + 8 + 2) = å‚æ•°é‡ Ã— 14` å­—èŠ‚

**ä¸¾ä¾‹**ï¼šå¾®è°ƒä¸€ä¸ª70äº¿ï¼ˆ7Bï¼‰å‚æ•°çš„æ¨¡å‹ï¼š
æ€»æ˜¾å­˜éœ€æ±‚ â‰ˆ 7,000,000,000 Ã— 14 å­—èŠ‚ â‰ˆ 98,000,000,000 å­—èŠ‚ â‰ˆ **91.3 GB**



**æ ¸å¿ƒåŒºåˆ«ï¼šæ¨ç† vs. å¾®è°ƒ**

| åœºæ™¯         | éœ€è¦åŠ è½½çš„å†…å®¹                                | æ˜¾å­˜å ç”¨   | è®¡ç®—å…¬å¼ï¼ˆä»¥FP16ä¸ºä¾‹ï¼‰    |
| :----------- | :-------------------------------------------- | :--------- | :------------------------ |
| **æ¨¡å‹æ¨ç†** | **ä»…æ¨¡å‹å‚æ•°** + å°‘é‡ä¸´æ—¶æ¿€æ´»å€¼ï¼ˆé€šå¸¸å¯å¿½ç•¥ï¼‰ | **ä½**     | `æ˜¾å­˜ â‰ˆ å‚æ•°é‡ Ã— 2` å­—èŠ‚  |
| **æ¨¡å‹å¾®è°ƒ** | **æ¨¡å‹å‚æ•° + æ¢¯åº¦ + ä¼˜åŒ–å™¨çŠ¶æ€ + å¤§é‡æ¿€æ´»å€¼** | **éå¸¸é«˜** | `æ˜¾å­˜ â‰ˆ å‚æ•°é‡ Ã— 14` å­—èŠ‚ |





#### 3. å¤§æ¨¡å‹æ¨ç†æ‰€éœ€æ˜¾å­˜ä¼°è®¡

- **ç›®æ ‡**ï¼šåªæ˜¯ä½¿ç”¨æ¨¡å‹ï¼Œè®©å®ƒå›ç­”é—®é¢˜ã€ç”Ÿæˆæ–‡æœ¬ã€‚**ä¸æ›´æ–°æ¨¡å‹çš„ä»»ä½•å‚æ•°ã€‚**
- **éœ€è¦ä»€ä¹ˆ**ï¼Ÿ
  1. **æ¨¡å‹å‚æ•°**ï¼šè¿™æ˜¯å¿…é¡»çš„ï¼Œå› ä¸ºéœ€è¦çŸ¥é“æ¨¡å‹çš„çŸ¥è¯†ã€‚
  2. **å‰å‘ä¼ æ’­çš„ä¸­é—´ç»“æœï¼ˆæ¿€æ´»å€¼ï¼‰**ï¼šå¯¹äºæ¨ç†æ¥è¯´ï¼Œè¿™éƒ¨åˆ†å¯ä»¥é€šè¿‡æŠ€æœ¯æ‰‹æ®µï¼ˆå¦‚KV Cacheï¼‰è¿›è¡Œé«˜æ•ˆç®¡ç†ï¼Œå…¶å¼€é”€è¿œå°äºå‚æ•°æœ¬èº«ï¼Œåœ¨ç²—ç•¥ä¼°ç®—æ—¶å¸¸å¸¸è¢«å¿½ç•¥ã€‚
- **ä¸éœ€è¦ä»€ä¹ˆ**ï¼Ÿ
  - **æ¢¯åº¦**ï¼šå› ä¸ºä¸åå‘ä¼ æ’­ã€‚
  - **ä¼˜åŒ–å™¨çŠ¶æ€**ï¼šå› ä¸ºä¸æ›´æ–°å‚æ•°ã€‚
- **ç»“è®º**ï¼šæ‚¨å›¾ç‰‡ä¸­çš„è®¡ç®— `7B Ã— 2å­—èŠ‚ = 14GB` **æ˜¯å®Œå…¨æ­£ç¡®çš„ï¼Œè¿™æ˜¯æ¨ç†åœºæ™¯ä¸‹çš„æœ€ä½æ˜¾å­˜è¦æ±‚ã€‚**



### 2.å¾®è°ƒ

#### 2.1 åº”ç”¨åœ¨å¦‚ä¸‹æ–¹é¢

åœ¨å®é™…å¤§æ¨¡å‹åº”ç”¨åœºæ™¯ä¸­ï¼Œé«˜æ•ˆå¾®è°ƒä¸»è¦ç”¨äºä»¥ä¸‹å››ä¸ªæ–¹é¢ï¼š

- **å¯¹è¯é£æ ¼å¾®è°ƒ**ï¼šé«˜æ•ˆå¾®è°ƒå¯ä»¥ç”¨äºæ ¹æ®ç‰¹å®šéœ€æ±‚è°ƒæ•´æ¨¡å‹çš„å¯¹è¯é£æ ¼ã€‚ä¾‹å¦‚ï¼Œé’ˆå¯¹å®¢æœç³»ç»Ÿã€è™šæ‹ŸåŠ©ç†ç­‰åœºæ™¯ï¼Œæ¨¡å‹å¯ä»¥é€šè¿‡å¾®è°ƒæ¥é€‚åº”ä¸åŒçš„è¯­æ°”ã€ç¤¼è²Œç¨‹åº¦æˆ–å›ç­”æ–¹å¼ï¼Œä»è€Œåœ¨ä¸ç”¨æˆ·äº’åŠ¨æ—¶æä¾›æ›´ç¬¦åˆè¦æ±‚çš„å¯¹è¯ä½“éªŒã€‚é€šè¿‡å¾®è°ƒå°‘é‡çš„å‚æ•°ï¼ˆä¾‹å¦‚å¯¹è¯ç”Ÿæˆçš„ç­–ç•¥ã€æƒ…æ„Ÿè¡¨è¾¾ç­‰ï¼‰ï¼Œå¯ä»¥ä½¿æ¨¡å‹è¡¨ç°å‡ºæ›´å…·é’ˆå¯¹æ€§å’Œä¸ªæ€§åŒ–çš„é£æ ¼ã€‚
- **çŸ¥è¯†çŒæ³¨**ï¼šçŸ¥è¯†çŒæ³¨æ˜¯æŒ‡å°†å¤–éƒ¨çŸ¥è¯†æˆ–é¢†åŸŸç‰¹å®šçš„ä¿¡æ¯å¿«é€Ÿé›†æˆåˆ°å·²æœ‰çš„é¢„æµ‹æ¨¡å‹ä¸­ã€‚é€šè¿‡é«˜æ•ˆå¾®è°ƒï¼Œæ¨¡å‹å¯ä»¥æ›´å¥½åœ°å­¦ä¹ æ–°é¢†åŸŸçš„ä¸“æœ‰çŸ¥è¯†ï¼Œè€Œæ— éœ€é‡æ–°ä»å¤´å¼€å§‹è®­ç»ƒã€‚ä¾‹å¦‚ï¼Œå¯¹äºæ³•å¾‹ã€åŒ»ç–—ç­‰ä¸“ä¸šé¢†åŸŸï¼Œå¯ä»¥ä½¿ç”¨å°‘é‡çš„æ ‡æ³¨æ•°æ®å¯¹é¢„æµ‹ç»“æœè¿›è¡Œå¾®è°ƒï¼Œå¸®åŠ©æ¨¡å‹ç†è§£ç‰¹å®šè¡Œä¸šçš„æœ¯è¯­ã€è§„åˆ™å’ŒçŸ¥è¯†ï¼Œè¿›è€Œæå‡ä¸“ä¸šé¢†åŸŸçš„é—®ç­”èƒ½åŠ›ã€‚
- **æ¨ç†èƒ½åŠ›æå‡**ï¼šé«˜æ•ˆå¾®è°ƒè¿˜å¯ä»¥ç”¨äºæå‡å¤§æ¨¡å‹çš„æ¨ç†èƒ½åŠ›ï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç†å¤æ‚æ¨ç†ä»»åŠ¡æ—¶ã€‚é€šè¿‡å¾®è°ƒï¼Œæ¨¡å‹èƒ½å¤Ÿæ›´åŠ é«˜æ•ˆåœ°ç†è§£é•¿æ–‡æœ¬ã€æ¨ç†éšå«ä¿¡æ¯ï¼Œæˆ–è€…ä»æ•°æ®ä¸­æå–é€»è¾‘å…³ç³»ï¼Œè¿›è€Œåœ¨å¤šè½®æ¨ç†ä»»åŠ¡ä¸­æä¾›æ›´å‡†ç¡®çš„ç­”æ¡ˆã€‚è¿™ç§å¾®è°ƒæ–¹å¼å¯ä»¥å¸®åŠ©æ¨¡å‹åœ¨è§£ç­”å¤æ‚é—®é¢˜æ—¶ï¼Œæé«˜æ¨ç†å‡†ç¡®æ€§å¹¶å‡å°‘é”™è¯¯ã€‚

- **Agentèƒ½åŠ›ï¼ˆFunction callingèƒ½åŠ›ã€æˆ–è€…MCPèƒ½åŠ›ï¼‰æå‡ï¼š** åœ¨å¤šä»»åŠ¡åä½œåœºæ™¯ä¸­ï¼Œé«˜æ•ˆå¾®è°ƒèƒ½å¤Ÿæ˜¾è‘—æå‡æ¨¡å‹çš„Agentèƒ½åŠ›ï¼Œä½¿å¾—æ¨¡å‹èƒ½å¤Ÿæœ‰æ•ˆåœ°ä¸å…¶ä»–ç³»ç»Ÿè¿›è¡Œäº¤äº’æˆ–æ‰§è¡Œç‰¹å®šä»»åŠ¡ã€‚é€šè¿‡é’ˆå¯¹æ€§å¾®è°ƒï¼Œæ¨¡å‹å¯ä»¥å­¦ä¼šæ›´ç²¾å‡†çš„åŠŸèƒ½è°ƒç”¨ç­–ç•¥ã€ä¼˜åŒ–å¤šæ­¥éª¤ä»»åŠ¡è§„åˆ’èƒ½åŠ›ï¼Œå¹¶å¢å¼ºä¸å¤–éƒ¨å·¥å…·å’ŒAPIçš„åä½œæ•ˆç‡ï¼Œä»è€Œåœ¨è‡ªåŠ¨åŒ–æœåŠ¡ã€æ™ºèƒ½åŠ©æ‰‹æˆ–æœºå™¨äººæ§åˆ¶ç­‰é¢†åŸŸè¡¨ç°å¾—æ›´åŠ é«˜æ•ˆå’Œæ™ºèƒ½ã€‚



#### 2.2å‚è€ƒè¡¨

![image-20251006102542592](../AppData/Roaming/Typora/typora-user-images/image-20251006102542592.png)













# gitä½¿ç”¨

## ç®€ä»‹

![image-20250829120800529](../AppData/Roaming/Typora/typora-user-images/image-20250829120800529.png)

## åˆ›å»ºä»“åº“

![image-20250829135222259](../AppData/Roaming/Typora/typora-user-images/image-20250829135222259.png)

### æ•´ä¸ªæµç¨‹

![image-20250829142747243](../AppData/Roaming/Typora/typora-user-images/image-20250829142747243.png)

## æŒ‡ä»¤

### ç®€å•æ€»ç»“

![image-20250829160022322](../AppData/Roaming/Typora/typora-user-images/image-20250829160022322.png)

### é…ç½®ä¿¡æ¯

![image-20250829131958526](../AppData/Roaming/Typora/typora-user-images/image-20250829131958526.png)

![image-20250710115233995](../AppData/Roaming/Typora/typora-user-images/image-20250710115233995.png)

### æŸ¥çœ‹æäº¤æ—¥å¿—



![image-20250829141827428](../AppData/Roaming/Typora/typora-user-images/image-20250829141827428.png)

![image-20250829142302250](../AppData/Roaming/Typora/typora-user-images/image-20250829142302250.png)

### æŸ¥çœ‹æ“ä½œè®°å½•

![image-20250829142613385](../AppData/Roaming/Typora/typora-user-images/image-20250829142613385.png)





### å¿«æ·æ–¹å¼

git-log

![image-20250710121123948](../AppData/Roaming/Typora/typora-user-images/image-20250710121123948.png)

### ç‰ˆæœ¬å›é€€

![image-20250710121406084](../AppData/Roaming/Typora/typora-user-images/image-20250710121406084.png)

### åˆ†æ”¯

#### åŸºæœ¬æ–¹æ³•



![image-20250710140500870](../AppData/Roaming/Typora/typora-user-images/image-20250710140500870.png)

![image-20250710141220236](../AppData/Roaming/Typora/typora-user-images/image-20250710141220236.png)

#### åˆå¹¶

å°†dev01åˆå¹¶åˆ°å½“å‰åˆ†æ”¯

![image-20250829145657676](../AppData/Roaming/Typora/typora-user-images/image-20250829145657676.png)

#### åˆå¹¶å†²çª

![image-20250710142057138](../AppData/Roaming/Typora/typora-user-images/image-20250710142057138.png)

#### åˆ†æ”¯æ ‡å‡†åŒ–ä½¿ç”¨

![image-20250829153207406](../AppData/Roaming/Typora/typora-user-images/image-20250829153207406.png)

![image-20250710144008650](../AppData/Roaming/Typora/typora-user-images/image-20250710144008650.png)

#### åˆ é™¤åˆ†æ”¯

![image-20250710144435006](../AppData/Roaming/Typora/typora-user-images/image-20250710144435006.png)

## å¦‚ä½•æ¨é€åˆ°github

å‡è®¾ä½ çš„ GitHub ç”¨æˆ·åæ˜¯ **`DarksideCasria`**ï¼Œä½ çš„è¿œç¨‹ä»“åº“åæ˜¯ **`myProject`**ï¼Œæœ¬åœ°ä¸»åˆ†æ”¯æ˜¯ **`main`**ã€‚



### æ€»ç»“ï¼šå°†æœ¬åœ°ä»£ç æ¨é€åˆ° GitHub çš„æ–¹æ³•



å°†æœ¬åœ°ä»£ç æ¨é€åˆ° GitHub çš„åŸºæœ¬æµç¨‹åŒ…æ‹¬ä¸‰ä¸ªæ ¸å¿ƒæ­¥éª¤ï¼š**æœ¬åœ°ä»£ç çš„æäº¤**ï¼Œ**ä¸è¿œç¨‹ä»“åº“çš„å…³è”**ï¼Œä»¥åŠ**æœ€ç»ˆçš„æ¨é€**ã€‚



#### æ­¥éª¤ä¸€ï¼šæœ¬åœ°ä»“åº“å‡†å¤‡ä¸æäº¤



1. **åˆå§‹åŒ– Git ä»“åº“**ï¼šåœ¨ä½ çš„é¡¹ç›®æ–‡ä»¶å¤¹ (`/d/pycharmProject/MedicalRAG`) ä¸­ï¼Œæ‰“å¼€å‘½ä»¤è¡Œå¹¶è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå°†è¿™ä¸ªæ–‡ä»¶å¤¹åˆå§‹åŒ–ä¸ºä¸€ä¸ª Git ä»“åº“ã€‚

   Bash

   ```
   git init
   ```

   è¿™ä¸ªå‘½ä»¤ä¼šåœ¨ä½ çš„é¡¹ç›®ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªéšè—çš„ `.git` æ–‡ä»¶å¤¹ã€‚

2. **æ·»åŠ å¹¶æäº¤æ–‡ä»¶**ï¼š

   - **é¦–å…ˆï¼Œç¡®ä¿ä½ å·²åˆ›å»º `.gitignore` æ–‡ä»¶**ï¼Œå¹¶å¿½ç•¥äº†å¦‚ `__pycache__`ã€`.idea`ã€`chroma_db` ç­‰ä¸åº”è¢«è¿½è¸ªçš„æ–‡ä»¶å¤¹ã€‚
   - æ¥ä¸‹æ¥ï¼Œå°†æ‰€æœ‰æ–‡ä»¶æ·»åŠ åˆ°æš‚å­˜åŒºå¹¶è¿›è¡Œç¬¬ä¸€æ¬¡æäº¤ã€‚

   Bash

   ```
   git add .
   git commit -m "Initial commit of project"
   ```

------



#### æ­¥éª¤äºŒï¼šä¸è¿œç¨‹ä»“åº“å…³è”



åœ¨ GitHub ä¸Šåˆ›å»ºä¸€ä¸ªåä¸º `myProject` çš„ç©ºä»“åº“ã€‚ç„¶åï¼Œé€‰æ‹©ä»¥ä¸‹ä¸¤ç§æ–¹æ³•ä¹‹ä¸€ï¼Œå°†æœ¬åœ°ä»“åº“ä¸è¿™ä¸ªè¿œç¨‹ä»“åº“å…³è”èµ·æ¥ã€‚

**æ–¹æ³•ä¸€ï¼šä½¿ç”¨ HTTPS åè®® (ç®€å•ä½†æœ‰æ—¶ä¸ç¨³å®š)**

Bash

```
git remote add origin https://github.com/DarksideCasria/myProject.git
```

**æ–¹æ³•äºŒï¼šä½¿ç”¨ SSH åè®® (æ¨è)**

åœ¨ä½¿ç”¨æ­¤æ–¹æ³•å‰ï¼Œ**ä½ å¿…é¡»å…ˆåœ¨ GitHub è´¦æˆ·ä¸­é…ç½®å¥½ä½ çš„ SSH å…¬é’¥**ã€‚é…ç½®å®Œæˆåï¼Œä½¿ç”¨è¿™ä¸ªå‘½ä»¤ï¼š

Bash

```
git remote add origin git@github.com:DarksideCasria/myProject.git
```

------



#### æ­¥éª¤ä¸‰ï¼šæ¨é€ä»£ç åˆ° GitHub



ç°åœ¨ï¼Œä½ åªéœ€å°†æœ¬åœ°æäº¤çš„ä»£ç æ¨é€åˆ°è¿œç¨‹ä»“åº“ã€‚

Bash

```
git push -u origin main
```

- `git push`ï¼šæ‰§è¡Œæ¨é€æ“ä½œã€‚
- `-u`ï¼šå°†æœ¬åœ° `main` åˆ†æ”¯å’Œè¿œç¨‹ `origin` ä¸Šçš„ `main` åˆ†æ”¯å…³è”èµ·æ¥ï¼Œè¿™æ ·ä»¥åä½ å°±å¯ä»¥ç›´æ¥ä½¿ç”¨ `git push` å’Œ `git pull` äº†ã€‚
- `origin main`ï¼šæŒ‡å®šè¦æ¨é€çš„è¿œç¨‹ä»“åº“åˆ«åå’Œæœ¬åœ°åˆ†æ”¯åã€‚

åªè¦ä½ çš„ç½‘ç»œè¿æ¥æ²¡æœ‰é—®é¢˜ï¼Œæ‰§è¡Œè¿™ä¸ªå‘½ä»¤åï¼Œä½ çš„æœ¬åœ°ä»£ç å°±ä¼šè¢«æˆåŠŸä¸Šä¼ åˆ° GitHub ä»“åº“ã€‚

## å¯èƒ½çš„é—®é¢˜

### 1. è¯†åˆ«é—®é¢˜



é¦–å…ˆï¼Œæˆ‘ä»¬ç¡®è®¤äº†ä½ é‡åˆ°çš„æ ¹æœ¬é—®é¢˜ï¼š

- **é—®é¢˜ä¸€ï¼š** `git push` å¤±è´¥ï¼Œå‡ºç° `fatal: unable to access ... Connection was reset` é”™è¯¯ã€‚è¿™è¡¨æ˜æ˜¯ç½‘ç»œè¿æ¥é—®é¢˜ã€‚
- **é—®é¢˜äºŒï¼š** `git push` å¤±è´¥ï¼Œå‡ºç° `remote: error: File ... exceeds GitHub's file size limit` é”™è¯¯ã€‚è¿™è¡¨æ˜ä½ æäº¤çš„æ–‡ä»¶è¶…è¿‡äº† GitHub çš„ 100MB ç¡¬æ€§é™åˆ¶ã€‚



### 2. è§£å†³ç½‘ç»œè¿æ¥é—®é¢˜



ä¸ºäº†è§£å†³ HTTPS åè®®ä¸‹ä¸ç¨³å®šçš„ç½‘ç»œè¿æ¥ï¼Œæˆ‘ä»¬é‡‡ç”¨äº†æ›´å¯é çš„ **SSH åè®®**ã€‚

- **æ‰§è¡Œå‘½ä»¤ï¼š**

  Bash

  ```
  git remote remove origin
  git remote add origin git@github.com:DarksideCasria/myProject.git
  ```

- **ä½œç”¨ï¼š** è¿™ä¸¤æ­¥ç§»é™¤äº†ä½ åŸæœ‰çš„è¿œç¨‹ä»“åº“åˆ«åï¼Œå¹¶é‡æ–°æ·»åŠ äº†ä¸€ä¸ªä½¿ç”¨ SSH åè®®çš„åˆ«åï¼Œä»è€Œç»•è¿‡äº†ç½‘ç»œè¿æ¥é—®é¢˜ã€‚



### 3. è§£å†³æ–‡ä»¶è¿‡å¤§é—®é¢˜



è¿™æ˜¯æœ€å¤æ‚çš„ä¸€æ­¥ã€‚æˆ‘ä»¬å‘ç°ä½ çš„å¤§æ–‡ä»¶å·²ç»è¿›å…¥äº† Git çš„æäº¤å†å²ã€‚åªä½¿ç”¨ `.gitignore` æ— æ³•è§£å†³ï¼Œå› ä¸º `.gitignore` åªå¯¹æœªè¢«è¿½è¸ªçš„æ–‡ä»¶æœ‰æ•ˆã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¿…é¡»**é‡å†™ Git å†å²**ã€‚

- **æ‰§è¡Œå‘½ä»¤ï¼š** æˆ‘ä»¬ä½¿ç”¨äº†ä¸€ä¸ªæ›´å¼ºå¤§çš„å·¥å…· `git filter-repo` æ¥ä» Git å†å²ä¸­æ°¸ä¹…æ€§åœ°ç§»é™¤å¤§æ–‡ä»¶ã€‚

  Bash

  ```
  git filter-repo --path-glob 'chroma_db/' --invert-paths --force
  # å¯¹å…¶ä»–å¤§æ–‡ä»¶é‡å¤æ­¤æ“ä½œï¼Œä¾‹å¦‚ï¼š
  git filter-repo --path-glob 'model_cache/' --invert-paths --force
  git filter-repo --path Data/documents/TT_book3/PDFsam_Final_all.pdf --invert-paths --force
  ```

- **ä½œç”¨ï¼š** è¿™äº›å‘½ä»¤ä¼šæ‰«æä½ çš„æ‰€æœ‰æäº¤ï¼Œå¹¶**å½»åº•åˆ é™¤**è¿™äº›æŒ‡å®šçš„å¤§æ–‡ä»¶ï¼Œä½¿å¾—ä½ çš„ Git å†å²å˜å¾—å¹²å‡€ã€‚`--force` å‚æ•°ç”¨äºå¼ºåˆ¶æ‰§è¡Œè¿™ä¸ªæœ‰é£é™©çš„é‡å†™æ“ä½œã€‚



### 4. å†æ¬¡æ¨é€



åœ¨é‡å†™å†å²åï¼Œä½ çš„æœ¬åœ° Git ä»“åº“å’Œè¿œç¨‹ GitHub ä»“åº“çš„å†å²ä¸å†åŒ¹é…ã€‚å› æ­¤ï¼Œä½ å¿…é¡»ä½¿ç”¨å¼ºåˆ¶æ¨é€ã€‚

- **æ‰§è¡Œå‘½ä»¤ï¼š**

  Bash

  ```
  git push --force origin NeuroRAG
  ```

- **ä½œç”¨ï¼š** è¿™ä¸ªå‘½ä»¤å‘Šè¯‰ Git å¼ºåˆ¶è¦†ç›–è¿œç¨‹ä»“åº“çš„ `NeuroRAG` åˆ†æ”¯ï¼Œç”¨ä½ æœ¬åœ°æ–°çš„ã€ä¸å«å¤§æ–‡ä»¶çš„å†å²æ¥æ›¿ä»£å®ƒã€‚

æœ€ç»ˆï¼Œè¿™ä¸ªå¼ºåˆ¶æ¨é€æˆåŠŸäº†ï¼Œä½ çš„é¡¹ç›®ç°åœ¨å·²ç»å®‰å…¨åœ°ä¸Šä¼ åˆ°äº† GitHubã€‚é€šè¿‡è¿™å‡ ä¸ªæ­¥éª¤ï¼Œä½ ä¸ä»…è§£å†³äº†å½“ä¸‹çš„é—®é¢˜ï¼Œè¿˜å­¦ä¹ äº† Git ä¸­å‡ ä¸ªéå¸¸é‡è¦çš„æ¦‚å¿µï¼šè¿œç¨‹ä»“åº“ã€æ¢è¡Œç¬¦å·®å¼‚ã€æ–‡ä»¶å¤§å°é™åˆ¶ï¼Œä»¥åŠå†å²é‡å†™ã€‚

### 5.è¿™ä¸ªç«¯å£ä¸€ç›´ä¸è¡Œå°±æ¢æˆä¸‹é¢è¿™ä¸ªç«¯å£

æˆ‘ä¹‹å‰æ˜¯20ç«¯å£

git remote set-url origin ssh://git@ssh.github.com:443/ä½ çš„ç”¨æˆ·å/ä½ çš„ä»“åº“å.git

git remote set-url origin ssh://git@ssh.github.com:443/DarksideCasria/Scrapy_NCBI.git







## ä¿®æ”¹åæµç¨‹

### 1.æœ€ç»ˆæµç¨‹

#### 1.1

æˆ‘è¿™æ ·å°±è¡Œäº†

git remote set-url origin https://github.com/DarksideCasria/MedicalRAG.gitï¼ˆMedicalRAGæ˜¯è¿œç¨‹ä»“åº“åå­—ï¼‰

git push -u origin master(masteræ˜¯å½“å‰åˆ†æ”¯åå­—)

#### 1.2

å®åœ¨ä¸è¡Œå…ˆå¦‚ä¸‹æ“ä½œï¼ˆå…ˆæ‰§è¡Œgit remote add origin git@github.com:DarksideCasria/StudyProject.gitæ“ä½œï¼‰

git remote set-url origin ssh://git@ssh.github.com:443/DarksideCasria/Scrapy_NCBI.git



#### 1.3 ç½‘ç»œè®¿é—® GitHub è¢«å¢™ / è¢«ä¸­æ–­

å¦‚æœä½ åœ¨å›½å†…ï¼ˆæˆ–ç½‘ç»œèµ°ä¸­å›½çº¿è·¯ï¼‰ï¼Œè®¿é—® GitHub å¾ˆå®¹æ˜“è¢«é˜»æ–­ã€‚
 è§£å†³æ–¹æ¡ˆï¼š

**æ–¹æ¡ˆ Aï¼šæ”¹èµ° SSH 443 ç«¯å£ï¼ˆæ¨èï¼‰**
 æ‰§è¡Œï¼š

```
git remote set-url origin ssh://git@ssh.github.com:443/DarksideCasria/MedicalDeepSearchRAG.git
```

ç„¶åæµ‹è¯•è¿æ¥ï¼š

```
ssh -T git@ssh.github.com -p 443
```

å¦‚æœæç¤ºï¼š

```
Hi DarksideCasria! You've successfully authenticated...
```

è¯´æ˜ SSH å·²ç»å¯ä»¥ç”¨äº†ã€‚
 æ¥ç€æ¨é€ï¼š

```
git push -u origin NeuroRAG
```





### 2.æ·»åŠ gitignoreæ–‡ä»¶

```git
//ç¬¬ä¸€æ­¥æ˜¯åœ¨æ–‡ä»¶è¢«è¿½è¸ªæ—¶ï¼Œä¸åœ¨è¢«è¿½è¸ªï¼ˆæ‰€ä»¥æœªè¢«è¿½è¸ªå¯ä»¥çœç•¥ï¼‰
git rm --cached æ–‡ä»¶


//ç¬¬äºŒæ­¥
åœ¨gitignoreé‡Œæ·»åŠ å¦‚ä¸‹ï¼š
*application-dev.yml

//ç¬¬ä¸‰æ­¥
git add .gitignore
git commit -m "æ›´æ–° gitignore è§„åˆ™"

```

## æ³¨æ„

### 1.æ–‡ä»¶æ€»é‡è¶Šæ¥è¶Šå¤§

Gitä¸Šä¼ åˆ°githubï¼Œä¼šå°†å†å²è®°å½•æ‰“åŒ…ï¼Œä¹Ÿå°±æ˜¯ä¼šæŠŠä¹‹å‰çš„æ–‡ä»¶ä¹Ÿä¼ ä¸Šå»ï¼Œè¿™æ ·é‡å¤ä¸Šä¼ ï¼Œæ–‡ä»¶å¤ªå¤§äº†ï¼Œæ‰€ä»¥éƒ¨åˆ†æ–‡ä»¶å¯ä»¥æ·»åŠ åˆ°gitinoreé‡Œé¢

### 2.å¯¹å•ä¸ªæ–‡ä»¶è¶…è¿‡100M

#### è§£å†³æ–¹æ¡ˆï¼šå¿…é¡»ä»ä»“åº“å†å²ä¸­å½»åº•ç§»é™¤å®ƒä»¬ï¼ˆä¸èƒ½ç”¨ `.gitignore` ä»£æ›¿ï¼‰

æˆ‘ä»¬è¦å†æ¬¡ä½¿ç”¨ `git filter-repo`ï¼ˆæ¨èï¼‰æˆ– `git filter-branch`ï¼ˆå¤‡ç”¨ï¼‰
 ä¸‹é¢æˆ‘æ•™ä½ æœ€ç¨³ã€æœ€å¿«çš„æ–¹å¼ ğŸ‘‡

------

#### ğŸ§° ä¸€ã€å®‰è£… `git filter-repo`ï¼ˆæ¨èæ›¿ä»£ `filter-branch`ï¼‰

åœ¨ Git Bash ä¸­æ‰§è¡Œï¼š

```
pip install git-filter-repo
```

æˆ–è€…å¦‚æœæ˜¯ Windows Git å†…ç½®ç¯å¢ƒï¼š

```
curl -o git-filter-repo.py https://raw.githubusercontent.com/newren/git-filter-repo/main/git-filter-repo
```

------

#### ğŸ§¹ äºŒã€æ‰§è¡Œæ¸…ç†å‘½ä»¤ï¼ˆåˆ é™¤è¿™äº›å¤§æ–‡ä»¶ï¼‰

åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œ ğŸ‘‡ï¼ˆè¯·ä¸€æ•´æ®µå¤åˆ¶ï¼‰ï¼š

```
git filter-repo --force --invert-paths --path chroma_db_unified/chroma.sqlite3 \
--path model_cache/hub/models--sentence-transformers--paraphrase-multilingual-MiniLM-L12-v2/snapshots/86741b4e3f5cb7765a600d3a3d55a0f6a6cb443d/model.safetensors \
--path chroma_db/TT_book3/chroma.sqlite3 \
--path chroma_db/TT_book4/chroma.sqlite3 \
--path chroma_db_unified/59c0d7a5-4470-41fe-ba0e-db7fb385e5f2/data_level0.bin \
--path chroma_db_unified/5c380dfb-afff-4866-ae2e-9d2f4e5727d3/data_level0.bin \
--path chroma_db/TT_book3/7c0e36d9-e98c-43ea-aaa0-ff9f4a30dc0f/data_level0.bin
```

ğŸ’¡ è¿™æ¡å‘½ä»¤ä¼šå½»åº•ä»æ‰€æœ‰ commit å†å²ä¸­æ¸…é™¤è¿™äº›è·¯å¾„çš„æ–‡ä»¶ã€‚

------

#### ğŸ§¼ ä¸‰ã€åƒåœ¾å›æ”¶ä¸ä¼˜åŒ–

æ‰§è¡Œï¼š

```
git reflog expire --expire=now --all
git gc --prune=now --aggressive
```

------

#### ğŸš€ å››ã€é‡æ–°æ¨é€ï¼ˆè¦†ç›–è¿œç¨‹ï¼‰

```
git push origin --force NeuroRAG
```

> âœ… è¿™æ¬¡ push ä¼šéå¸¸å¿«ï¼Œå› ä¸ºä»“åº“ä½“ç§¯ä¼šå¤§å¹…ä¸‹é™ï¼ˆä» GB â†’ MBï¼‰ã€‚

------

#### ğŸ”’ äº”ã€é˜²æ­¢ä»¥åå†è¢«æäº¤

åœ¨ `.gitignore` ä¸­åŠ å…¥ï¼š

```
# å¿½ç•¥ Chroma æœ¬åœ°æ•°æ®åº“å’Œæ¨¡å‹ç¼“å­˜
chroma_db*/
model_cache/
*.sqlite3
*.bin
```

ç„¶åï¼š

```
git add .gitignore
git commit -m "ignore chroma cache and model files"
```

------

#### ğŸ§  å…­ã€æ€»ç»“å…³é”®ç‚¹

| é—®é¢˜                          | åŸå›                          | è§£å†³åŠæ³•                         |
| ----------------------------- | ---------------------------- | -------------------------------- |
| push æŠ¥ 100MB é™åˆ¶            | GitHub ä¸æ¥å—å•ä¸ªæ–‡ä»¶ >100MB | åˆ é™¤æ–‡ä»¶å†å² (`git filter-repo`) |
| `.gitignore` æ— æ•ˆ             | æ–‡ä»¶å·²åœ¨ Git å†å²é‡Œ          | å¿…é¡»é‡å†™å†å²                     |
| Chroma / model_cache æ–‡ä»¶å¤ªå¤§ | æœ¬åœ°ç´¢å¼•å’Œæ¨¡å‹ç¼“å­˜           | ä¸åº”çº³å…¥ Git                     |





# ä»£ç æŠ¥é”™ä¿®æ”¹

## 1.MySQL

### 1.1å¯åŠ¨æ—¶æŠ¥é”™

![image-20250913201029346](../AppData/Roaming/Typora/typora-user-images/image-20250913201029346.png)

```
netstat -aon | findstr "3306"

taskkill /F /PID ä¸Šé¢MySQLè¾“å‡ºçš„æœ€åçš„æ•°å­—
```

### 1.2è¿™é‡Œè¢«æˆ‘ä¿®æ”¹è¿‡å¯†ç 

æ”¹ä¸ºäº†Gongyusong666

![image-20250914201834407](../AppData/Roaming/Typora/typora-user-images/image-20250914201834407.png)

## 2.SpringBoot

### 2.1IOCå®¹å™¨å®ä¾‹é‡å¤

**é‡å¤ Bean å®šä¹‰**

- ä½ åœ¨ `AliOssUtil` ç±»ä¸Šå·²ç»åŠ äº† `@Component`ï¼ŒSpring é»˜è®¤å·²ç»ä¼šæ³¨å†Œå®ƒã€‚
- ç°åœ¨åˆåœ¨é…ç½®ç±»é‡Œ `@Bean` å†åˆ›å»ºä¸€æ¬¡ï¼Œå¯èƒ½é€ æˆå†²çªæˆ–è€…è¦†ç›–ã€‚



## 3.å‘½ä»¤è¡Œçª—å£

### 3.1å¦‚ä½•è¿›å…¥Dç›˜

**æ–¹æ³•ä¸€ï¼š**

```

C:\Windows\System32>cd /d D:\CodingAPP\Redis

redis-server.exe redis.windows.conf
```

**æ–¹æ³•äºŒï¼š**

1. é¦–å…ˆè¾“å…¥ç›˜ç¬¦ `D:` ç„¶åæŒ‰å›è½¦ï¼Œè¿™æ ·å½“å‰ç›®å½•å°±ä¼šåˆ‡æ¢åˆ° D ç›˜çš„å½“å‰ç›®å½•ï¼ˆé€šå¸¸æ˜¯æ ¹ç›®å½•ï¼‰ã€‚

   cmd

   ```
   D:\>D:
   ```

   

2. ç„¶åä½¿ç”¨ `cd` å‘½ä»¤è¿›å…¥ CodingAPP æ–‡ä»¶å¤¹ã€‚

   cmd

   ```
   D:\>cd CodingAPP
   ```

   

   å®Œæˆåï¼Œæ‚¨çš„å‘½ä»¤è¡Œæç¤ºç¬¦å°±ä¼šå˜æˆ `D:\CodingAPP>`ã€‚

### 3.2 ç«¯å£è¢«å ç”¨

**ä¼šå¯¼è‡´è¿™ä¸ªä»£ç ä¸€ç›´åœ¨è¯·æ±‚ä¸­ï¼Œå´æ²¡æœ‰ä»»ä½•è¿”å›ä¿¡æ¯**

ä¾‹å­ï¼š

ç«¯å£å†²çªé—®é¢˜ï¼šç«¯å£8000è¢«å¤šä¸ªè¿›ç¨‹å ç”¨ï¼Œå¯¼è‡´åº”ç”¨å¯åŠ¨å¤±è´¥æˆ–è¯·æ±‚è¶…æ—¶ã€‚





## 4.å·¥å…·ç±»

### 4.1å†…ç½‘ç©¿é€

```
//å¯åŠ¨å†…ç½‘ç©¿é€
C: Files\cpolar>cpolar. exe http 8080
```

## 5. nacos

å…ˆä¸‹è½½äº†aliyunçš„é•œåƒï¼Œç„¶åä¼ è¿›è™šæ‹Ÿæœº

![a36f62ebd107eeaf6fed487efb22b1e9](../Documents/Tencent Files/1759751014/nt_qq/nt_data/Pic/2025-11/Ori/a36f62ebd107eeaf6fed487efb22b1e9.png)

### âœ… ä½ ç°åœ¨åªè¦åšè¿™ä¸¤æ­¥å³å¯ä¿®å¤ï¼š

#### ç¬¬ä¸€æ­¥ï¼šä¿®æ”¹ `custom.env`

æŠŠï¼š

```
MYSQL_SERVICE_HOST=192.168.100.130
```

æ”¹æˆï¼š

```
MYSQL_SERVICE_HOST=mysql
```

ä¿å­˜åæ‰§è¡Œï¼š

```
cat ./nacos/custom.env
```

ç¡®è®¤ä¿®æ”¹å·²ç”Ÿæ•ˆã€‚

------

#### ç¬¬äºŒæ­¥ï¼šé‡æ–°å¯åŠ¨ Nacos å®¹å™¨

```
docker rm -f nacos

docker run -d \
--name nacos \
--network hm-net \
--env-file ./nacos/custom.env \
-p 8848:8848 \
-p 9848:9848 \
-p 9849:9849 \
--restart=always \
nacos-registry.cn-hangzhou.cr.aliyuncs.com/nacos/nacos-server:v2.4.3
```















